(window.webpackJsonp=window.webpackJsonp||[]).push([[249],{1061:function(e){e.exports={"Please provide a valid date":"","Columns to show in table":"",Column:"\u0627\u0644\u0639\u0645\u0648\u062f","This value is validating":"","Async field update failed":"","A value is required":"","Please provide a valid number":"","Please provide a valid integer":"","Please provide a positive integer":"","Please provide zero or a positive integer":"","Please provide a negative integer":"","Please provide a valid date and time":"","Please provide a valid time":"","Please provide a valid percentage":"","Please provide a valid url":"","Please provide a valid email address":"","Please provide a valid age":"","Please provide a valid phone number":"","Please provide a valid organisation unit":"","Please provide valid coordinates":"","This value already exists":"",'"From" cannot be greater than "To"':"","Checking...":"",Area:"",Coordinate:"\u0627\u0644\u0625\u062d\u062f\u0627\u062b\u064a\u0629",Enrollment:"\u0627\u0644\u062a\u0633\u062c\u064a\u0644","A future date is not allowed":"","An error has occured. See log for details":"",Cancel:"\u0625\u0644\u063a\u0627\u0621","Unsaved changes":"","Leaving this page will discard the changes you made to this event.":"","Yes, discard":"","No, stay here":"","validation failed":"",Errors:"",Feedback:"\u0627\u0644\u062a\u063a\u0630\u064a\u0629 \u0627\u0644\u0631\u0627\u062c\u0639\u0629",Indicators:"\u0627\u0644\u0645\u0624\u0634\u0631\u0627\u062a",Warnings:"","search group result could not be retrieved":"",Complete:"\u0645\u0643\u062a\u0645\u0644","Warnings found":"",Abort:"","Back to form":"","Save anyway":"","Validation errors and warnings":"","Validation errors":"","Validation warnings":"\u062a\u062d\u0630\u064a\u0631\u0627\u062a \u0627\u0644\u062a\u062d\u0642\u0642","Some operations are still runnning. Please wait..":"","Operations running":"",Sort:"\u0641\u0631\u0632","No events to display":"","Data for offline list not present":"",Close:"\u0625\u063a\u0644\u0627\u0642","Please select the user":"","Search for user":"",Me:"",Anyone:"",None:"\u0644\u0627 \u0634\u064a\u0621","Select user":"",to:"\u0625\u0644\u0649",From:"\u0645\u0646",To:"\u0627\u0644\u0649","after or equal to":"","before or equal to":"",Today:"\u0627\u0644\u064a\u0648\u0645","This week":"\u0627\u0644\u0623\u0633\u0628\u0648\u0639 \u0627\u0644\u062d\u0627\u0644\u064a","This month":"\u0627\u0644\u0634\u0647\u0631 \u0627\u0644\u062d\u0627\u0644\u064a","This Year":"","Last week":"\u0627\u0644\u0623\u0633\u0628\u0648\u0639 \u0627\u0644\u0645\u0627\u0636\u064a","Last month":"\u0627\u0644\u0634\u0647\u0631 \u0627\u0644\u0645\u0627\u0636\u064a","Last 3 months":"\u0622\u062e\u0631 3 \u0623\u0634\u0647\u0631","Custom range":"",Max:"\u0627\u0644\u0623\u0639\u0644\u0649",Min:"\u0627\u0644\u0623\u062f\u0646\u0649","greater than or equal to":"","less than or equal to":"","Contains text":"",Yes:"\u0646\u0639\u0645","mm/dd/yyyy":"",Years:"\u0627\u0644\u0633\u0646\u0648\u0627\u062a",Months:"\u0627\u0644\u0623\u0634\u0647\u0631",Days:"\u200f\u200f\u0627\u0644\u0623\u064a\u0627\u0645","Uploading file":"",selected:"\u0645\u062d\u062f\u062f",Delete:"\u062d\u0630\u0641","Select file":"",No:"\u0644\u0627","Uploading image":"","Select image":"",Search:"\u0627\u0644\u0628\u062d\u062b",Clear:"\u0645\u0633\u062d","No results":"","suggestions could not be retrieved":"","search for username":"","No items to display":"",Online:"\u0645\u062a\u0635\u0644",Offline:"\u063a\u064a\u0631 \u0645\u062a\u0635\u0644",Syncing:"","Add comment":"","You dont have access to write comments":"","Write comment":"","Basic info":"",Status:"\u0627\u0644\u062d\u0627\u0644\u0629",Comments:"\u0627\u0644\u062a\u0639\u0644\u064a\u0642\u0627\u062a","Please add or cancel comment before saving the event":"","No write access":"",Save:"\u062d\u0641\u0638","Show all events":"","Edit event":"","Event could not be loaded. Are you sure it exists?":"","Event could not be loaded":"","Organisation unit could not be loaded":"","View event info":"","Delete event":"",Update:"\u062a\u062d\u062f\u064a\u062b","More filters":"","Select columns":"","Download as JSON":"\u062a\u0646\u0632\u064a\u0644 \u0643\u0645\u0644\u0641 JSON","Download as XML":"\u062a\u0646\u0632\u064a\u0644 \u0643\u0645\u0644\u0641 XML","Download as CSV":"\u062a\u0646\u0632\u064a\u0644 \u0643\u0645\u0644\u0641 CSV","Download with current filters":"","Save filter as...":"","Download as...":"","Rows per page":"",Active:"\u0641\u0639\u0627\u0644",Completed:"\u0645\u0643\u062a\u0645\u0644","Could not get organisation unit":"","Program doesn't exist":"","Selected program is invalid for registering unit":"","Creating a new {{TET}} in {{program}} in {{orgUnit}}":"","Save and add another":"","Save and exit":"",Finish:"","Switch to form view":"","Switch to row view":"","New {{TET}}":"","Working Lists":"","Program with programid {{programId}} isn't a tracker program. Enrollments can only be done in tracker programs.":"","Selected program is invalid for selected registering unit":"","Assigned user":"",Relationships:"\u0639\u0644\u0627\u0642\u0627\u062a",Assignee:"","Saving to":"",in:"\u0641\u064a","This is not an event program or the metadata is corrupt. See log for details.":"","This event":"","Relationship of type {{relationshipTypeName}} to {{entityName}} already exists":"","New event":"\u062d\u062f\u062b \u062c\u062f\u064a\u062f","New event relationship":"","Adding relationship to event.":"","Go back to event without saving relationship":"","Leaving this page will discard the selections you made for a new relationship":"","events added":"","No events added":"","Select a registering unit and program above to get started":"","Select a program to start reporting":"","Select a registering unit to start reporting":"","Select a category option to start reporting":"","You dont have access to create an event in the current selections":"","A duplicate exists (but there were some errors, see log for details":"","An item with this {{attributeName}} is already registered, but you don't have access to it":"","You have already registered this {{attributeName}}":"","A {{trackedEntityTypeName}} with this {{attributeName}} is already registered":"","Show registered {{trackedEntityTypeName}}":"","Registered person":"",Link:"","Metadata error. see log for details":"","Review duplicates":"","Create {{trackedEntityTypeName}} and link":"","Possible duplicates found":"","An error occured loading possible duplicates":"",Hide:"\u0625\u062e\u0641\u0627\u0621","Save as new {{tetName}}":"","Some programs are being filtered.":"","Show all":"\u0625\u0638\u0647\u0627\u0631 \u0627\u0644\u0643\u0644",Program:"\u0627\u0644\u0628\u0631\u0646\u0627\u0645\u062c","Organisation Unit":"\u0627\u0644\u0648\u062d\u062f\u0629 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a\u0629",Registration:"\u0627\u0644\u062a\u0633\u062c\u064a\u0644","Review Duplicates":"","Search results":"\u0646\u062a\u0627\u0626\u062c \u0627\u0644\u0628\u062d\u062b","No {{trackedEntityTypeName}} found.":"","{{teiCount}} results found for":"","New search":"","Edit search":"","Link to an existing {{trackedEntityType}}":"","Create new {{trackedEntityType}}":"",Register:"\u062a\u0633\u062c\u064a\u0644","You dont have access to edit this event":"","Leaving this page will discard any selections you made for a new relationship":"","No one is assigned to this event":"",Assign:"\u0625\u0633\u0646\u0627\u062f","Event assigned to {{name}}":"",Feedbacks:"","New {{typeName}}":"",New:"\u062c\u062f\u064a\u062f","Start again":"",Find:"\u0628\u062d\u062b","Selected registering unit":"","Start Again":"","Are you sure? All unsaved data will be lost.":"",Accept:"\u0642\u0628\u0648\u0644","Registering Organisation Unit":"","Selected Program":"",Select:"\u062a\u062d\u062f\u064a\u062f","Select program":"\u062a\u062d\u062f\u064a\u062f \u0627\u0644\u0628\u0631\u0646\u0627\u0645\u062c","No programs available.":"","You dont have access to delete this relationship":"","You dont have access to create any relationships":"","Add relationship":"\u0627\u0636\u0641 \u0639\u0644\u0627\u0642\u0629","Selected program":"","Search {{uniqueAttrName}}":"","Search by attributes":"","Fill in at least {{minAttributesRequired}} attributes to search":"","To work with the selected program,":"","open the Tracker Capture app":"","Program not found":"","Program is not a tracker program":"",Profile:"\u0645\u0644\u0641 \u0627\u0644\u062a\u0639\u0631\u064a\u0641","Error saving event":"","Could not save event. See log for details":"","Organisation unit search failed. See log for details":"","tracked entity instance":"","Set coordinate":"\u0636\u0628\u0637 \u0627\u0644\u0625\u062d\u062f\u0627\u062b\u064a\u0629",Date:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e",Time:"\u0627\u0644\u0648\u0642\u062a","From date":"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e","From time":"","To date":"\u062d\u062a\u0649 \u062a\u0627\u0631\u064a\u062e","To time":"","error encountered during field validation":"",error:"","Delete polygon":"","Set area":"","Choose one or more dates...":"","Choose a date...":"","Compatibility mode":""}},1062:function(e){e.exports={"Please provide a valid date":"","Columns to show in table":"",Column:"","This value is validating":"","Async field update failed":"","A value is required":"","Please provide a valid number":"","Please provide a valid integer":"","Please provide a positive integer":"","Please provide zero or a positive integer":"","Please provide a negative integer":"","Please provide a valid date and time":"","Please provide a valid time":"","Please provide a valid percentage":"","Please provide a valid url":"","Please provide a valid email address":"","Please provide a valid age":"","Please provide a valid phone number":"","Please provide a valid organisation unit":"","Please provide valid coordinates":"","This value already exists":"",'"From" cannot be greater than "To"':"","Checking...":"",Area:"",Coordinate:"",Enrollment:"","A future date is not allowed":"","An error has occured. See log for details":"",Cancel:"","Unsaved changes":"","Leaving this page will discard the changes you made to this event.":"","Yes, discard":"","No, stay here":"","validation failed":"",Errors:"",Feedback:"",Indicators:"",Warnings:"","search group result could not be retrieved":"",Complete:"","Warnings found":"",Abort:"","Back to form":"","Save anyway":"","Validation errors and warnings":"","Validation errors":"","Validation warnings":"","Some operations are still runnning. Please wait..":"","Operations running":"",Sort:"","No events to display":"","Data for offline list not present":"",Close:"","Please select the user":"","Search for user":"",Me:"",Anyone:"",None:"","Select user":"",to:"",From:"",To:"","after or equal to":"","before or equal to":"",Today:"","This week":"","This month":"","This Year":"","Last week":"","Last month":"","Last 3 months":"","Custom range":"",Max:"",Min:"","greater than or equal to":"","less than or equal to":"","Contains text":"",Yes:"","mm/dd/yyyy":"",Years:"",Months:"",Days:"","Uploading file":"",selected:"",Delete:"","Select file":"",No:"","Uploading image":"","Select image":"",Search:"",Clear:"","No results":"","suggestions could not be retrieved":"","search for username":"","No items to display":"",Online:"",Offline:"",Syncing:"","Add comment":"","You dont have access to write comments":"","Write comment":"","Basic info":"",Status:"",Comments:"","Please add or cancel comment before saving the event":"","No write access":"",Save:"","Show all events":"","Edit event":"","Event could not be loaded. Are you sure it exists?":"","Event could not be loaded":"","Organisation unit could not be loaded":"","View event info":"","Delete event":"",Update:"","More filters":"","Select columns":"","Download as JSON":"","Download as XML":"","Download as CSV":"","Download with current filters":"","Save filter as...":"","Download as...":"","Rows per page":"",Active:"",Completed:"","Could not get organisation unit":"","Program doesn't exist":"","Selected program is invalid for registering unit":"","Creating a new {{TET}} in {{program}} in {{orgUnit}}":"","Save and add another":"","Save and exit":"",Finish:"","Switch to form view":"","Switch to row view":"","New {{TET}}":"","Working Lists":"","Program with programid {{programId}} isn't a tracker program. Enrollments can only be done in tracker programs.":"","Selected program is invalid for selected registering unit":"","Assigned user":"",Relationships:"",Assignee:"","Saving to":"",in:"","This is not an event program or the metadata is corrupt. See log for details.":"","This event":"","Relationship of type {{relationshipTypeName}} to {{entityName}} already exists":"","New event":"","New event relationship":"","Adding relationship to event.":"","Go back to event without saving relationship":"","Leaving this page will discard the selections you made for a new relationship":"","events added":"","No events added":"","Select a registering unit and program above to get started":"","Select a program to start reporting":"","Select a registering unit to start reporting":"","Select a category option to start reporting":"","You dont have access to create an event in the current selections":"","A duplicate exists (but there were some errors, see log for details":"","An item with this {{attributeName}} is already registered, but you don't have access to it":"","You have already registered this {{attributeName}}":"","A {{trackedEntityTypeName}} with this {{attributeName}} is already registered":"","Show registered {{trackedEntityTypeName}}":"","Registered person":"",Link:"","Metadata error. see log for details":"","Review duplicates":"","Create {{trackedEntityTypeName}} and link":"","Possible duplicates found":"","An error occured loading possible duplicates":"",Hide:"","Save as new {{tetName}}":"","Some programs are being filtered.":"","Show all":"",Program:"","Organisation Unit":"",Registration:"","Review Duplicates":"","Search results":"","No {{trackedEntityTypeName}} found.":"","{{teiCount}} results found for":"","New search":"","Edit search":"","Link to an existing {{trackedEntityType}}":"","Create new {{trackedEntityType}}":"",Register:"","You dont have access to edit this event":"","Leaving this page will discard any selections you made for a new relationship":"","No one is assigned to this event":"",Assign:"","Event assigned to {{name}}":"",Feedbacks:"","New {{typeName}}":"",New:"","Start again":"",Find:"","Selected registering unit":"","Start Again":"","Are you sure? All unsaved data will be lost.":"",Accept:"","Registering Organisation Unit":"",Select:"","Selected Program":"","Select program":"","No programs available.":"","You dont have access to delete this relationship":"","You dont have access to create any relationships":"","Add relationship":"","Selected program":"","Search {{uniqueAttrName}}":"","Search by attributes":"","Fill in at least {{minAttributesRequired}} attributes to search":"","To work with the selected program,":"","open the Tracker Capture app":"","Program not found":"","Program is not a tracker program":"",Profile:"","Error saving event":"","Could not save event. See log for details":"","Organisation unit search failed. See log for details":"","tracked entity instance":"","Set coordinate":"",Date:"",Time:"","From date":"","From time":"","To date":"","To time":"","error encountered during field validation":"",error:"","Delete polygon":"","Set area":"","Choose one or more dates...":"","Choose a date...":"","Compatibility mode":""}},1063:function(e){e.exports={"Please provide a valid date":"","Columns to show in table":"",Column:"Columna","This value is validating":"","Async field update failed":"","A value is required":"","Please provide a valid number":"","Please provide a valid integer":"","Please provide a positive integer":"","Please provide zero or a positive integer":"","Please provide a negative integer":"","Please provide a valid date and time":"","Please provide a valid time":"","Please provide a valid percentage":"","Please provide a valid url":"","Please provide a valid email address":"","Please provide a valid age":"","Please provide a valid phone number":"","Please provide a valid organisation unit":"","Please provide valid coordinates":"","This value already exists":"",'"From" cannot be greater than "To"':"","Checking...":"",Area:"",Coordinate:"Coordinate",Enrollment:"Inscripci\xf3n","A future date is not allowed":"","An error has occured. See log for details":"",Cancel:"Cancelar","Unsaved changes":"","Leaving this page will discard the changes you made to this event.":"","Yes, discard":"","No, stay here":"","validation failed":"",Errors:"Errores",Feedback:"Retroalimentaci\xf3n",Indicators:"Indicadores",Warnings:"","search group result could not be retrieved":"",Complete:"Completo","Warnings found":"",Abort:"","Back to form":"","Save anyway":"","Validation errors and warnings":"","Validation errors":"","Validation warnings":"Advertencias de validaci\xf3n","Some operations are still runnning. Please wait..":"","Operations running":"",Sort:"Organizar","No events to display":"","Data for offline list not present":"",Close:"Cerrar","Please select the user":"","Search for user":"",Me:"",Anyone:"",None:"Ninguno","Select user":"",to:"a",From:"De",To:"Para","after or equal to":"","before or equal to":"",Today:"Hoy","This week":"Esta semana","This month":"Este mes","This Year":"","Last week":"\xdaltima semana","Last month":"Mes anterior","Last 3 months":"\xdaltimos 3 meses","Custom range":"",Max:"M\xe1x",Min:"M\xedn","greater than or equal to":"","less than or equal to":"","Contains text":"",Yes:"Si","mm/dd/yyyy":"",Years:"A\xf1os",Months:"Meses",Days:"D\xedas","Uploading file":"",selected:"",Delete:"Borrar","Select file":"",No:"No","Uploading image":"","Select image":"",Search:"Buscar",Clear:"Limpiar","No results":"","suggestions could not be retrieved":"","search for username":"","No items to display":"",Online:"Conectado",Offline:"Desconectado",Syncing:"","Add comment":"","You dont have access to write comments":"","Write comment":"","Basic info":"",Status:"Estado",Comments:"Comentarios","Please add or cancel comment before saving the event":"","No write access":"",Save:"Guardar","Show all events":"","Edit event":"","Event could not be loaded. Are you sure it exists?":"","Event could not be loaded":"","Organisation unit could not be loaded":"","View event info":"","Delete event":"Eliminar evento",Update:"Actualizar","More filters":"","Select columns":"","Download as JSON":"","Download as XML":"","Download as CSV":"Descargar como CSV","Download with current filters":"","Save filter as...":"","Download as...":"","Rows per page":"",Active:"Activo",Completed:"Completado","Could not get organisation unit":"","Program doesn't exist":"","Selected program is invalid for registering unit":"","Creating a new {{TET}} in {{program}} in {{orgUnit}}":"","Save and add another":"","Save and exit":"",Finish:"Acabar","Switch to form view":"","Switch to row view":"","New {{TET}}":"","Working Lists":"","Program with programid {{programId}} isn't a tracker program. Enrollments can only be done in tracker programs.":"","Selected program is invalid for selected registering unit":"","Assigned user":"",Relationships:"Relaciones",Assignee:"","Saving to":"",in:"","This is not an event program or the metadata is corrupt. See log for details.":"","This event":"","Relationship of type {{relationshipTypeName}} to {{entityName}} already exists":"","New event":"Evento nuevo","New event relationship":"","Adding relationship to event.":"","Go back to event without saving relationship":"","Leaving this page will discard the selections you made for a new relationship":"","events added":"","No events added":"","Select a registering unit and program above to get started":"","Select a program to start reporting":"","Select a registering unit to start reporting":"","Select a category option to start reporting":"","You dont have access to create an event in the current selections":"","A duplicate exists (but there were some errors, see log for details":"","An item with this {{attributeName}} is already registered, but you don't have access to it":"","You have already registered this {{attributeName}}":"","A {{trackedEntityTypeName}} with this {{attributeName}} is already registered":"","Show registered {{trackedEntityTypeName}}":"","Registered person":"",Link:"","Metadata error. see log for details":"","Review duplicates":"","Create {{trackedEntityTypeName}} and link":"","Possible duplicates found":"","An error occured loading possible duplicates":"",Hide:"Ocultar","Save as new {{tetName}}":"","Some programs are being filtered.":"","Show all":"Mostrar todo",Program:"Program","Organisation Unit":"Unidad Organizativa",Registration:"Registro","Review Duplicates":"","Search results":"Resultados de la b\xfasqueda","No {{trackedEntityTypeName}} found.":"","{{teiCount}} results found for":"","New search":"","Edit search":"","Link to an existing {{trackedEntityType}}":"","Create new {{trackedEntityType}}":"",Register:"Registrar","You dont have access to edit this event":"","Leaving this page will discard any selections you made for a new relationship":"","No one is assigned to this event":"",Assign:"Asignar","Event assigned to {{name}}":"",Feedbacks:"","New {{typeName}}":"",New:"Nuevo","Start again":"",Find:"Encontrar","Selected registering unit":"","Start Again":"","Are you sure? All unsaved data will be lost.":"",Accept:"Aceptar","Registering Organisation Unit":"","Selected Program":"",Select:"Seleccionar","Select program":"Seleccionar programa","No programs available.":"","You dont have access to delete this relationship":"","You dont have access to create any relationships":"","Add relationship":"A\xf1adir relaci\xf3n","Selected program":"Programa seleccionado","Search {{uniqueAttrName}}":"","Search by attributes":"","Fill in at least {{minAttributesRequired}} attributes to search":"","To work with the selected program,":"","open the Tracker Capture app":"","Program not found":"","Program is not a tracker program":"",Profile:"Perfil","Error saving event":"","Could not save event. See log for details":"","Organisation unit search failed. See log for details":"","tracked entity instance":"","Set coordinate":"Establecer coordenadas",Date:"Fecha",Time:"","From date":"Desde fecha","From time":"","To date":"A la fecha","To time":"","error encountered during field validation":"",error:"","Delete polygon":"","Set area":"","Choose one or more dates...":"","Choose a date...":"","Compatibility mode":""}},1064:function(e){e.exports={"Please provide a valid date":"Veuillez sp\xe9cifier une date valide","Columns to show in table":"Colonnes \xe0 afficher dans ce tableau",Column:"Colonne","This value is validating":"Valeur en cours de validation","Async field update failed":"","A value is required":"Une valeur est requise","Please provide a valid number":"Veuillez saisir un chiffre valide","Please provide a valid integer":"Veuillez saisir un nombre entier valide","Please provide a positive integer":"Veuillez saisir un nombre entier positif valide","Please provide zero or a positive integer":"Veuillez saisir un z\xe9ro ou nombre entier positif valide","Please provide a negative integer":"Veuillez saisir un nombre entier n\xe9gatif valide","Please provide a valid date and time":"Veuillez saisir une date et heure valide","Please provide a valid time":"Veuillez saisir une heure valide","Please provide a valid percentage":"Veuillez saisir un pourcentage valide","Please provide a valid url":"Veuillez saisir un lien URL valide","Please provide a valid email address":"Veuillez saisir une adresse email valide","Please provide a valid age":"Veuillez saisir un \xe2ge valide","Please provide a valid phone number":"Veuillez saisir un num\xe9ro de t\xe9l\xe9phone valide","Please provide a valid organisation unit":"Veuillez saisir une unit\xe9 d'organisation valide","Please provide valid coordinates":"Veuillez saisir des coordonn\xe9es valides","This value already exists":"Cette valeur existe d\xe9j\xe0",'"From" cannot be greater than "To"':"","Checking...":"V\xe9rification...",Area:"Aire",Coordinate:"Coordinate",Enrollment:"Enr\xf4lement","A future date is not allowed":"Une date future n'est pas permise","An error has occured. See log for details":"",Cancel:"Annuler","Unsaved changes":"","Leaving this page will discard the changes you made to this event.":"","Yes, discard":"","No, stay here":"","validation failed":"validation \xe9chou\xe9e",Errors:"Erreurs",Feedback:"R\xe9action",Indicators:"Indicateurs",Warnings:"Avertissements","search group result could not be retrieved":"",Complete:"Terminer","Warnings found":"Avertissements trouv\xe9s",Abort:"Annuler","Back to form":"Retour au formulaire","Save anyway":"","Validation errors and warnings":"Erreurs et avertissements de validation","Validation errors":"Erreurs de validation","Validation warnings":"Avertissements de validation","Some operations are still runnning. Please wait..":"","Operations running":"Op\xe9rations en cours",Sort:"Trier","No events to display":"","Data for offline list not present":"",Close:"Fermer","Please select the user":"","Search for user":"",Me:"",Anyone:"",None:"Aucun","Select user":"",to:"\xe0",From:"A partir de",To:"A","after or equal to":"apr\xe8s ou egal \xe0","before or equal to":"avant ou egal \xe0",Today:"Aujourd'hui","This week":"Cette semaine","This month":"Ce mois-ci","This Year":"","Last week":"Semaine pass\xe9e","Last month":"Le mois dernier","Last 3 months":"3 derniers mois","Custom range":"",Max:"Max",Min:"Min","greater than or equal to":"sup\xe9rieur ou egal \xe0","less than or equal to":"inf\xe9rieur ou egal \xe0","Contains text":"Contient le texte",Yes:"Oui","mm/dd/yyyy":"mm/jj/aaaa",Years:"Ann\xe9es",Months:"Months",Days:"Jours","Uploading file":"T\xe9l\xe9chargement du fichier",selected:"S\xe9lectionn\xe9",Delete:"Supprimer","Select file":"S\xe9lectionner le fichier",No:"Non","Uploading image":"T\xe9l\xe9chargement de l'image","Select image":"S\xe9lectionner l'image",Search:"Chercher",Clear:"Effacer","No results":"Aucun r\xe9sultat","suggestions could not be retrieved":"","search for username":"","No items to display":"Aucun \xe9l\xe9ment \xe0 afficher",Online:"En ligne",Offline:"Hors ligne",Syncing:"Synchronisation","Add comment":"Ajouter commentaire","You dont have access to write comments":"","Write comment":"Ecrire commentaire","Basic info":"Infos de base",Status:"Statut",Comments:"Commentaires","Please add or cancel comment before saving the event":"","No write access":"",Save:"Enregistrer","Show all events":"","Edit event":"","Event could not be loaded. Are you sure it exists?":"","Event could not be loaded":"","Organisation unit could not be loaded":"","View event info":"","Delete event":"Effacer l\xb4\xe9v\xe9nement",Update:"Mettre \xe0 jour","More filters":"Filtres suppl\xe9mentaires","Select columns":"","Download as JSON":"T\xe9l\xe9charger en JSON","Download as XML":"Download as XML","Download as CSV":"T\xe9l\xe9charger en CSV","Download with current filters":"","Save filter as...":"","Download as...":"","Rows per page":"Lignes par page",Active:"Actif",Completed:"Termin\xe9","Could not get organisation unit":"","Program doesn't exist":"Le programme n'existe pas","Selected program is invalid for registering unit":"","Creating a new {{TET}} in {{program}} in {{orgUnit}}":"","Save and add another":"Sauvegarder et ajouter nouveau","Save and exit":"Sauvegarder et quitter",Finish:"Terminer","Switch to form view":"","Switch to row view":"","New {{TET}}":"","Working Lists":"","Program with programid {{programId}} isn't a tracker program. Enrollments can only be done in tracker programs.":"","Selected program is invalid for selected registering unit":"","Assigned user":"",Relationships:"Relations",Assignee:"","Saving to":"",in:"dans","This is not an event program or the metadata is corrupt. See log for details.":"","This event":"","Relationship of type {{relationshipTypeName}} to {{entityName}} already exists":"","New event":"Nouvel \xe9v\xe9nement","New event relationship":"","Adding relationship to event.":"","Go back to event without saving relationship":"","Leaving this page will discard the selections you made for a new relationship":"","events added":"","No events added":"","Select a registering unit and program above to get started":"","Select a program to start reporting":"","Select a registering unit to start reporting":"","Select a category option to start reporting":"","You dont have access to create an event in the current selections":"","A duplicate exists (but there were some errors, see log for details":"","An item with this {{attributeName}} is already registered, but you don't have access to it":"","You have already registered this {{attributeName}}":"","A {{trackedEntityTypeName}} with this {{attributeName}} is already registered":"","Show registered {{trackedEntityTypeName}}":"","Registered person":"",Link:"Lien","Metadata error. see log for details":"","Review duplicates":"","Create {{trackedEntityTypeName}} and link":"","Possible duplicates found":"","An error occured loading possible duplicates":"",Hide:"Masquer","Save as new {{tetName}}":"Enregister sous {{tetName}}","Some programs are being filtered.":"","Show all":"Tout afficher",Program:"Programme","Organisation Unit":"Unit\xe9 d'organisation",Registration:"Enregistrement","Review Duplicates":"","Search results":"R\xe9sultats de la recherche","No {{trackedEntityTypeName}} found.":"","{{teiCount}} results found for":"{{teiCount}} r\xe9sultats trouv\xe9s pour","New search":"Nouvelle recherche","Edit search":"Modifier la recherche","Link to an existing {{trackedEntityType}}":"","Create new {{trackedEntityType}}":"",Register:"Enregistrer","You dont have access to edit this event":"","Leaving this page will discard any selections you made for a new relationship":"","No one is assigned to this event":"",Assign:"Assigner","Event assigned to {{name}}":"",Feedbacks:"Feedbacks","New {{typeName}}":"Nouveau {{typeName}}",New:"Nouveau","Start again":"Recommencer",Find:"Trouver","Selected registering unit":"","Start Again":"Recommencer","Are you sure? All unsaved data will be lost.":"",Accept:"Accept","Registering Organisation Unit":"","Selected Program":"",Select:"S\xe9lectionner","Select program":"S\xe9lectionner le programme","No programs available.":"Aucun programme disponible","You dont have access to delete this relationship":"","You dont have access to create any relationships":"","Add relationship":"Ajouetr relation","Selected program":"Programme choisi","Search {{uniqueAttrName}}":"Chercher {{uniqueAttrName}}","Search by attributes":"Chercher par attributs","Fill in at least {{minAttributesRequired}} attributes to search":"","To work with the selected program,":"","open the Tracker Capture app":"","Program not found":"","Program is not a tracker program":"",Profile:"Profil","Error saving event":"","Could not save event. See log for details":"","Organisation unit search failed. See log for details":"","tracked entity instance":"","Set coordinate":"D\xe9finir les coordonn\xe9es",Date:"Date",Time:"Heure","From date":"Date de d\xe9but","From time":"","To date":"Date de fin","To time":"","error encountered during field validation":"",error:"erreur","Delete polygon":"Supprimer polygone","Set area":"D\xe9finir l'aire","Choose one or more dates...":"Choisir une ou plusieurs dates...","Choose a date...":"Choisir une date...","Compatibility mode":"Mode compatibilit\xe9"}},1065:function(e){e.exports={"Please provide a valid date":"","Columns to show in table":"",Column:"Kolom","This value is validating":"","Async field update failed":"","A value is required":"","Please provide a valid number":"","Please provide a valid integer":"","Please provide a positive integer":"","Please provide zero or a positive integer":"","Please provide a negative integer":"","Please provide a valid date and time":"","Please provide a valid time":"","Please provide a valid percentage":"","Please provide a valid url":"","Please provide a valid email address":"","Please provide a valid age":"","Please provide a valid phone number":"","Please provide a valid organisation unit":"","Please provide valid coordinates":"","This value already exists":"",'"From" cannot be greater than "To"':"","Checking...":"",Area:"Area",Coordinate:"Koordinat",Enrollment:"Pendaftaran","A future date is not allowed":"","An error has occured. See log for details":"",Cancel:"batal","Unsaved changes":"","Leaving this page will discard the changes you made to this event.":"","Yes, discard":"","No, stay here":"","validation failed":"",Errors:"Kesalahan",Feedback:"Umpan balik",Indicators:"Indikator",Warnings:"","search group result could not be retrieved":"",Complete:"Lengkap","Warnings found":"",Abort:"","Back to form":"","Save anyway":"","Validation errors and warnings":"","Validation errors":"","Validation warnings":"","Some operations are still runnning. Please wait..":"","Operations running":"",Sort:"Urutkan","No events to display":"","Data for offline list not present":"",Close:"Tutup","Please select the user":"","Search for user":"",Me:"",Anyone:"",None:"Tidak ada","Select user":"",to:"",From:"Dari",To:"Untuk","after or equal to":"","before or equal to":"",Today:"Hari ini","This week":"Minggu ini","This month":"Bulan ini","This Year":"","Last week":"Minggu lalu","Last month":"Bulan lalu","Last 3 months":"3 bulan terakhir","Custom range":"",Max:"Maks",Min:"Min","greater than or equal to":"","less than or equal to":"","Contains text":"",Yes:"Ya","mm/dd/yyyy":"",Years:"Tahun",Months:"Bulan",Days:"Hari","Uploading file":"",selected:"Terpilih",Delete:"hapus","Select file":"",No:"Tidak","Uploading image":"","Select image":"",Search:"Pencarian",Clear:"Hapus","No results":"","suggestions could not be retrieved":"","search for username":"","No items to display":"",Online:"",Offline:"",Syncing:"","Add comment":"","You dont have access to write comments":"","Write comment":"","Basic info":"",Status:"Status",Comments:"","Please add or cancel comment before saving the event":"","No write access":"",Save:"Simpan","Show all events":"","Edit event":"","Event could not be loaded. Are you sure it exists?":"","Event could not be loaded":"","Organisation unit could not be loaded":"","View event info":"","Delete event":"",Update:"perbarui","More filters":"","Select columns":"","Download as JSON":"Download dalam bentuk JSON","Download as XML":"Download dalam bentuk XML","Download as CSV":"Download dalam bentuk CSV","Download with current filters":"","Save filter as...":"","Download as...":"","Rows per page":"",Active:"",Completed:"Selesai","Could not get organisation unit":"","Program doesn't exist":"","Selected program is invalid for registering unit":"","Creating a new {{TET}} in {{program}} in {{orgUnit}}":"","Save and add another":"","Save and exit":"",Finish:"","Switch to form view":"","Switch to row view":"","New {{TET}}":"","Working Lists":"","Program with programid {{programId}} isn't a tracker program. Enrollments can only be done in tracker programs.":"","Selected program is invalid for selected registering unit":"","Assigned user":"",Relationships:"Hubungan",Assignee:"","Saving to":"",in:"dalam","This is not an event program or the metadata is corrupt. See log for details.":"","This event":"","Relationship of type {{relationshipTypeName}} to {{entityName}} already exists":"","New event":"Event baru","New event relationship":"","Adding relationship to event.":"","Go back to event without saving relationship":"","Leaving this page will discard the selections you made for a new relationship":"","events added":"","No events added":"","Select a registering unit and program above to get started":"","Select a program to start reporting":"","Select a registering unit to start reporting":"","Select a category option to start reporting":"","You dont have access to create an event in the current selections":"","A duplicate exists (but there were some errors, see log for details":"","An item with this {{attributeName}} is already registered, but you don't have access to it":"","You have already registered this {{attributeName}}":"","A {{trackedEntityTypeName}} with this {{attributeName}} is already registered":"","Show registered {{trackedEntityTypeName}}":"","Registered person":"",Link:"","Metadata error. see log for details":"","Review duplicates":"","Create {{trackedEntityTypeName}} and link":"","Possible duplicates found":"","An error occured loading possible duplicates":"",Hide:"Sembunyikan","Save as new {{tetName}}":"","Some programs are being filtered.":"","Show all":"Tampilkan semua",Program:"Program","Organisation Unit":"Unit Organisasi",Registration:"Pendaftaran","Review Duplicates":"","Search results":"","No {{trackedEntityTypeName}} found.":"","{{teiCount}} results found for":"","New search":"","Edit search":"","Link to an existing {{trackedEntityType}}":"","Create new {{trackedEntityType}}":"",Register:"Daftar","You dont have access to edit this event":"","Leaving this page will discard any selections you made for a new relationship":"","No one is assigned to this event":"",Assign:"Daftarkan","Event assigned to {{name}}":"",Feedbacks:"","New {{typeName}}":"",New:"Baru","Start again":"",Find:"Cari","Selected registering unit":"","Start Again":"","Are you sure? All unsaved data will be lost.":"",Accept:"","Registering Organisation Unit":"","Selected Program":"",Select:"Pilih","Select program":"Pilih program","No programs available.":"","You dont have access to delete this relationship":"","You dont have access to create any relationships":"","Add relationship":"Tambahkan hubungan","Selected program":"Program yang dipilih","Search {{uniqueAttrName}}":"","Search by attributes":"","Fill in at least {{minAttributesRequired}} attributes to search":"","To work with the selected program,":"","open the Tracker Capture app":"","Program not found":"","Program is not a tracker program":"",Profile:"Profil","Error saving event":"","Could not save event. See log for details":"","Organisation unit search failed. See log for details":"","tracked entity instance":"","Set coordinate":"Tentukan koordinat",Date:"Tanggal",Time:"","From date":"Dari tanggal","From time":"","To date":"Ke tanggal","To time":"","error encountered during field validation":"",error:"","Delete polygon":"","Set area":"","Choose one or more dates...":"","Choose a date...":"","Compatibility mode":""}},1066:function(e){e.exports={"Please provide a valid date":"","Columns to show in table":"",Column:"\u0e96\u0eb1\u0e99","This value is validating":"","Async field update failed":"","A value is required":"","Please provide a valid number":"","Please provide a valid integer":"","Please provide a positive integer":"","Please provide zero or a positive integer":"","Please provide a negative integer":"","Please provide a valid date and time":"","Please provide a valid time":"","Please provide a valid percentage":"","Please provide a valid url":"","Please provide a valid email address":"","Please provide a valid age":"","Please provide a valid phone number":"","Please provide a valid organisation unit":"","Please provide valid coordinates":"","This value already exists":"",'"From" cannot be greater than "To"':"","Checking...":"",Area:"",Coordinate:"Coordinate",Enrollment:"\u0e81\u0eb2\u0e99\u0ea5\u0ebb\u0e87\u0e97\u0eb0\u0e9a\u0ebd\u0e99","A future date is not allowed":"","An error has occured. See log for details":"",Cancel:"Cancel","Unsaved changes":"","Leaving this page will discard the changes you made to this event.":"","Yes, discard":"","No, stay here":"","validation failed":"",Errors:"\u0e9c\u0eb4\u0e94\u0e9e\u0eb2\u0e94",Feedback:"Feedback",Indicators:"Indicators",Warnings:"","search group result could not be retrieved":"",Complete:"\u0eaa\u0eb3\u0ec0\u0ea5\u0eb1\u0e94\u0ec1\u0ea5\u0ec9\u0ea7","Warnings found":"",Abort:"","Back to form":"","Save anyway":"","Validation errors and warnings":"","Validation errors":"","Validation warnings":"\u0e84\u0ec8\u0eb2\u0ec0\u0e95\u0eb7\u0ead\u0e99","Some operations are still runnning. Please wait..":"","Operations running":"",Sort:"Sort","No events to display":"","Data for offline list not present":"",Close:"\u0e9b\u0eb4\u0e94","Please select the user":"","Search for user":"",Me:"",Anyone:"",None:"\u0e9a\u0ecd\u0ec8\u0ea1\u0eb5","Select user":"",to:"\u0eab\u0eb2",From:"\u0e88\u0eb2\u0e81",To:"\u0e96\u0eb6\u0e87","after or equal to":"","before or equal to":"",Today:"\u0ea1\u0eb7\u0ec9\u0e99\u0eb5\u0ec9","This week":"\u0e97\u0eb4\u0e94\u0e99\u0eb5\u0ec9","This month":"\u0ec0\u0e94\u0eb7\u0ead\u0e99\u0e99\u0eb5\u0ec9","This Year":"","Last week":"\u0ead\u0eb2\u0e97\u0eb4\u0e94\u0e97\u0eb5\u0ec8\u0e9c\u0ec8\u0eb2\u0e99\u0ea1\u0eb2","Last month":"Last month","Last 3 months":"3 \u0ec0\u0e94\u0eb7\u0ead\u0e99\u0e8d\u0ec9\u0ead\u0e99\u0eab\u0ebc\u0eb1\u0e87","Custom range":"",Max:"\u0e84\u0ec8\u0eb2\u0ec3\u0eab\u0ec8\u0e8d\u0eaa\u0eb8\u0e94",Min:"\u0e84\u0ec8\u0eb2\u0e95\u0ecd\u0ec8\u0eb2\u0eaa\u0eb8\u0e94","greater than or equal to":"","less than or equal to":"","Contains text":"",Yes:"Yes","mm/dd/yyyy":"",Years:"Years",Months:"Months",Days:"Days","Uploading file":"",selected:"\u0ec0\u0ea5\u0eb7\u0ead\u0e81\u0ec1\u0ea5\u0ec9\u0ea7",Delete:"Delete","Select file":"",No:"No","Uploading image":"","Select image":"",Search:"\u0e84\u0ebb\u0e99\u0eab\u0eb2",Clear:"\u0ea5\u0eb6\u0e9a","No results":"","suggestions could not be retrieved":"","search for username":"","No items to display":"",Online:"\u0ea1\u0eb5\u0e81\u0eb2\u0e99\u0ec0\u0e8a\u0eb7\u0ec8\u0ead\u0ea1\u0e95\u0ecd\u0ec8",Offline:"\u0e9a\u0ecd\u0ec8\u0ea1\u0eb5\u0e81\u0eb2\u0e99\u0ec0\u0e8a\u0eb7\u0ec8\u0ead\u0ea1\u0e95\u0ecd\u0ec8",Syncing:"","Add comment":"","You dont have access to write comments":"","Write comment":"","Basic info":"",Status:"Status",Comments:"\u0e84\u0eb3\u0ec0\u0eab\u0eb1\u0e99","Please add or cancel comment before saving the event":"","No write access":"",Save:"Save","Show all events":"","Edit event":"","Event could not be loaded. Are you sure it exists?":"","Event could not be loaded":"","Organisation unit could not be loaded":"","View event info":"","Delete event":"\u0ea5\u0eb7\u0e9a\u0e81\u0ecd\u0ea5\u0eb0\u0e99\u0eb5\u0ead\u0ead\u0e81",Update:"Update","More filters":"","Select columns":"","Download as JSON":"Download as JSON","Download as XML":"Download as XML","Download as CSV":"\u0e94\u0eb2\u0ea7\u0ec2\u0eab\u0ebc\u0e94\u0ec0\u0e9b\u0eb1\u0e99 CSV","Download with current filters":"","Save filter as...":"","Download as...":"","Rows per page":"",Active:"Active",Completed:"\u0eaa\u0ecd\u0eb2\u0ec0\u0ea5\u0eb1\u0e94\u0ec1\u0ea5\u0ec9\u0ea7","Could not get organisation unit":"","Program doesn't exist":"","Selected program is invalid for registering unit":"","Creating a new {{TET}} in {{program}} in {{orgUnit}}":"","Save and add another":"","Save and exit":"",Finish:"","Switch to form view":"","Switch to row view":"","New {{TET}}":"","Working Lists":"","Program with programid {{programId}} isn't a tracker program. Enrollments can only be done in tracker programs.":"","Selected program is invalid for selected registering unit":"","Assigned user":"",Relationships:"\u0eaa\u0eb2\u0e8d\u0e9e\u0ebb\u0ea7\u0e9e\u0eb1\u0e99",Assignee:"","Saving to":"",in:"in","This is not an event program or the metadata is corrupt. See log for details.":"","This event":"","Relationship of type {{relationshipTypeName}} to {{entityName}} already exists":"","New event":"\u0e81\u0ecd\u0ea5\u0eb0\u0e99\u0eb5\u0ec3\u0edd\u0ec8","New event relationship":"","Adding relationship to event.":"","Go back to event without saving relationship":"","Leaving this page will discard the selections you made for a new relationship":"","events added":"","No events added":"","Select a registering unit and program above to get started":"","Select a program to start reporting":"","Select a registering unit to start reporting":"","Select a category option to start reporting":"","You dont have access to create an event in the current selections":"","A duplicate exists (but there were some errors, see log for details":"","An item with this {{attributeName}} is already registered, but you don't have access to it":"","You have already registered this {{attributeName}}":"","A {{trackedEntityTypeName}} with this {{attributeName}} is already registered":"","Show registered {{trackedEntityTypeName}}":"","Registered person":"",Link:"","Metadata error. see log for details":"","Review duplicates":"","Create {{trackedEntityTypeName}} and link":"","Possible duplicates found":"","An error occured loading possible duplicates":"",Hide:"\u0ec0\u0e8a\u0eb7\u0ec8\u0ead\u0e87","Save as new {{tetName}}":"","Some programs are being filtered.":"","Show all":"\u0eaa\u0eb0\u0ec1\u0e94\u0e87\u0e97\u0eb1\u0e87\u0edd\u0ebb\u0e94",Program:"Program","Organisation Unit":"\u0eab\u0ebb\u0ea7\u0edc\u0ec8\u0ea7\u0e8d \u0e81\u0eb2\u0e99\u0e88\u0eb1\u0e94\u0e95\u0eb1\u0ec9\u0e87",Registration:"\u0ea5\u0ebb\u0e87\u0e97\u0eb0\u0e9a\u0ebd\u0e99","Review Duplicates":"","Search results":"","No {{trackedEntityTypeName}} found.":"","{{teiCount}} results found for":"","New search":"","Edit search":"","Link to an existing {{trackedEntityType}}":"","Create new {{trackedEntityType}}":"",Register:"\u0ea5\u0ebb\u0ebb\u0e87\u0e97\u0eb0\u0e9a\u0ebd\u0e99","You dont have access to edit this event":"","Leaving this page will discard any selections you made for a new relationship":"","No one is assigned to this event":"",Assign:"Assign","Event assigned to {{name}}":"",Feedbacks:"","New {{typeName}}":"",New:"\u0eaa\u0ec9\u0eb2\u0e87\u0ec3\u0eab\u0ea1\u0ec8","Start again":"",Find:"\u0e8a\u0ead\u0e81","Selected registering unit":"","Start Again":"","Are you sure? All unsaved data will be lost.":"",Accept:"\u200b\u0e81\u0eb2\u0e99\u200b\u0eae\u0eb1\u0e9a\u200b\u0eae\u0ead\u0e87","Registering Organisation Unit":"","Selected Program":"",Select:"\u0ec0\u0ea5\u0eb7\u0ead\u0e81","Select program":"\u0e82\u0eb0\u0ec1\u0edc\u0e87\u0e97\u0eb5\u0ec8\u0e96\u0eb7\u0e81\u0ec0\u0ea5\u0eb7\u0ead\u0e81","No programs available.":"","You dont have access to delete this relationship":"","You dont have access to create any relationships":"","Add relationship":"\u0ec0\u0e9e\u0eb5\u0ec8\u0ea1\u0e84\u0ea7\u0eb2\u0ea1\u0eaa\u0ecd\u0eb2\u0e9e\u0eb1\u0e99","Selected program":"\u0ec0\u0ea5\u0eb7\u0ead\u0e81\u0eaa\u0eb2\u0e8d\u0e87\u0eb2\u0e99","Search {{uniqueAttrName}}":"","Search by attributes":"","Fill in at least {{minAttributesRequired}} attributes to search":"","To work with the selected program,":"","open the Tracker Capture app":"","Program not found":"","Program is not a tracker program":"",Profile:"Profile","Error saving event":"","Could not save event. See log for details":"","Organisation unit search failed. See log for details":"","tracked entity instance":"","Set coordinate":"\u0e95\u0eb1\u0ec9\u0e87\u0e84\u0ec8\u0eb2\u0ec0\u0eaa\u0eb1\u0ec9\u0e99\u0eaa\u0eb0\u0ec1\u0e94\u0e87",Date:"\u0ea7\u0eb1\u0e99\u0e97\u0eb5\u0ec8",Time:"","From date":"From date","From time":"","To date":"To date","To time":"","error encountered during field validation":"",error:"","Delete polygon":"","Set area":"","Choose one or more dates...":"","Choose a date...":"","Compatibility mode":""}},1067:function(e){e.exports={"Please provide a valid date":"","Columns to show in table":"",Column:"\u0633\u062a\u0648\u0646","This value is validating":"","Async field update failed":"","A value is required":"","Please provide a valid number":"","Please provide a valid integer":"","Please provide a positive integer":"","Please provide zero or a positive integer":"","Please provide a negative integer":"","Please provide a valid date and time":"","Please provide a valid time":"","Please provide a valid percentage":"","Please provide a valid url":"","Please provide a valid email address":"","Please provide a valid age":"","Please provide a valid phone number":"","Please provide a valid organisation unit":"","Please provide valid coordinates":"","This value already exists":"",'"From" cannot be greater than "To"':"","Checking...":"",Area:"",Coordinate:"\u0647\u0645\u063a\u0696\u064a \u06a9\u0648\u0644",Enrollment:"\u0634\u0627\u0645\u0644\u0648\u0644 \u06cc\u0627 \u0646\u0648\u0645 \u0644\u06cc\u06a9\u0646\u0647","A future date is not allowed":"","An error has occured. See log for details":"",Cancel:"\u0631\u062f \u06cc\u06d0 \u06a9\u0693\u0626 [ \u0698\u0628\u0627\u0693\u0647 \u0640 \u0631\u062f\u0648\u0644 ]","Unsaved changes":"","Leaving this page will discard the changes you made to this event.":"","Yes, discard":"","No, stay here":"","validation failed":"",Errors:"\u062a\u06d0\u0631\u0648\u062a\u0646\u06d0",Feedback:"\u062f \u0641\u06cc\u0689\u0628\u06a9 \u06cc\u0627 \u0646\u0638\u0631 \u0648\u0631\u06a9\u0648\u0644",Indicators:"\u0634\u0627\u062e\u0635\u0648\u0646\u0647",Warnings:"","search group result could not be retrieved":"",Complete:"\u0628\u0634\u067e\u0693 \u06cc\u06d0 \u06a9\u0693\u0626","Warnings found":"",Abort:"","Back to form":"","Save anyway":"","Validation errors and warnings":"","Validation errors":"","Validation warnings":"\u0627\u062e\u0637\u0627\u0631\u0648\u0646\u0648 \u062a\u0647 \u0627\u0639\u062a\u0628\u0627\u0631 \u0648\u0631\u06a9\u0648\u0644","Some operations are still runnning. Please wait..":"","Operations running":"",Sort:"","No events to display":"","Data for offline list not present":"",Close:"\u0628\u0646\u062f \u06cc\u06d0 \u06a9\u0693\u0626","Please select the user":"","Search for user":"",Me:"",Anyone:"",None:"\u0647\u06d0\u0685 \u06cc\u0648","Select user":"",to:"",From:"\u0685\u062e\u0647",To:"\u062a\u0631","after or equal to":"","before or equal to":"",Today:"\u0646\u0646 \u0648\u0631\u0681","This week":"\u0647\u0641\u062a\u0647 \u0647\u0630\u0627","This month":"\u0645\u0627\u0647 \u0647\u0630\u0627","This Year":"","Last week":"\u062a\u06d0\u0631\u0647 \u0627\u0648\u0646\u06cd","Last month":"Last month","Last 3 months":"\u062a\u06d0\u0631\u06d0 3 \u0645\u06cc\u0627\u0634\u062a\u06d0","Custom range":"",Max:"\u062d\u062f\u0627\u0639\u0638\u0645",Min:"\u062d\u062f\u0627\u0642\u0644","greater than or equal to":"","less than or equal to":"","Contains text":"",Yes:"\u0647\u0648 [ \u062f\u0631\u0633\u062a ]","mm/dd/yyyy":"",Years:"Years",Months:"Months",Days:"Days","Uploading file":"",selected:"",Delete:"\u062e\u0630\u0641 \u06cc\u06d0 \u06a9\u0693\u0626","Select file":"",No:"\u0646\u0647 [ \u0646\u0647 ]","Uploading image":"","Select image":"",Search:"\u062c\u0633\u062a\u062c\u0648",Clear:"\u067e\u0627\u06a9 \u06cc\u06d0 \u06a9\u0693\u0626","No results":"","suggestions could not be retrieved":"","search for username":"","No items to display":"",Online:"\u067e\u0647 \u0644\u06cc\u06a9\u0647 \u06a9\u06d0 \u062f\u06cc",Offline:"\u067e\u0647 \u0644\u06cc\u06a9\u0647 \u06a9\u06d0 \u0646\u0634\u062a\u0647",Syncing:"","Add comment":"","You dont have access to write comments":"","Write comment":"","Basic info":"",Status:"\u0648\u0636\u0639\u06cc\u062a",Comments:"\u0685\u0631\u06ab\u0646\u062f\u0648\u0646\u06d0","Please add or cancel comment before saving the event":"","No write access":"",Save:"\u062b\u0628\u062a \u06cc\u06d0 \u06a9\u0693\u0626 [ \u0698\u0628\u0627\u0693\u0647 - \u062b\u0628\u062a \u06a9\u0693\u0626 ]","Show all events":"","Edit event":"","Event could not be loaded. Are you sure it exists?":"","Event could not be loaded":"","Organisation unit could not be loaded":"","View event info":"","Delete event":"",Update:"\u062a\u062c\u062f\u06cc\u062f \u06cc\u0627 \u0646\u0648\u064a \u06cc\u06d0 \u06a9\u0693\u0626","More filters":"","Select columns":"","Download as JSON":"","Download as XML":"","Download as CSV":"\u062f \u0627\u06d0\u0633.\u0633\u064a. \u0648\u064a \u067e\u0647 \u0634\u06a9\u0644 \u06cc\u06d0 \u069a\u06a9\u062a\u0647 \u06a9\u0693\u0626","Download with current filters":"","Save filter as...":"","Download as...":"","Rows per page":"",Active:"\u0641\u0639\u0627\u0644",Completed:"\u0628\u0634\u067e\u0693 \u0634\u0648\u06cc","Could not get organisation unit":"","Program doesn't exist":"","Selected program is invalid for registering unit":"","Creating a new {{TET}} in {{program}} in {{orgUnit}}":"","Save and add another":"","Save and exit":"",Finish:"","Switch to form view":"","Switch to row view":"","New {{TET}}":"","Working Lists":"","Program with programid {{programId}} isn't a tracker program. Enrollments can only be done in tracker programs.":"","Selected program is invalid for selected registering unit":"","Assigned user":"",Relationships:"\u0627\u0693\u06cc\u06a9\u06d0",Assignee:"","Saving to":"",in:"","This is not an event program or the metadata is corrupt. See log for details.":"","This event":"","Relationship of type {{relationshipTypeName}} to {{entityName}} already exists":"","New event":"\u0646\u0648\u06d0 \u067e\u06d0\u069a\u0647","New event relationship":"","Adding relationship to event.":"","Go back to event without saving relationship":"","Leaving this page will discard the selections you made for a new relationship":"","events added":"","No events added":"","Select a registering unit and program above to get started":"","Select a program to start reporting":"","Select a registering unit to start reporting":"","Select a category option to start reporting":"","You dont have access to create an event in the current selections":"","A duplicate exists (but there were some errors, see log for details":"","An item with this {{attributeName}} is already registered, but you don't have access to it":"","You have already registered this {{attributeName}}":"","A {{trackedEntityTypeName}} with this {{attributeName}} is already registered":"","Show registered {{trackedEntityTypeName}}":"","Registered person":"",Link:"","Metadata error. see log for details":"","Review duplicates":"","Create {{trackedEntityTypeName}} and link":"","Possible duplicates found":"","An error occured loading possible duplicates":"",Hide:"\u067e\u067c \u06cc\u06d0 \u06a9\u0693\u0626","Save as new {{tetName}}":"","Some programs are being filtered.":"","Show all":"\u067c\u0648\u0644 \u069a\u06a9\u0627\u0631\u0647 \u06a9\u0693\u0626",Program:"\u067e\u0631\u0648\u06ab\u0631\u0627\u0645","Organisation Unit":"",Registration:"\u0631\u0627\u062c\u0633\u067c\u0631\u06d0\u0634\u0646","Review Duplicates":"","Search results":"\u067e\u0627\u06cc\u0644\u06d0 \u0648\u0644\u067c\u0648\u0626","No {{trackedEntityTypeName}} found.":"","{{teiCount}} results found for":"","New search":"","Edit search":"","Link to an existing {{trackedEntityType}}":"","Create new {{trackedEntityType}}":"",Register:"\u062b\u0628\u062a \u0631\u0627\u062c\u0633\u067c\u0631 \u06a9\u0648\u0644","You dont have access to edit this event":"","Leaving this page will discard any selections you made for a new relationship":"","No one is assigned to this event":"",Assign:"","Event assigned to {{name}}":"",Feedbacks:"","New {{typeName}}":"",New:"\u0646\u0648\u06cc","Start again":"",Find:"\u067e\u06cc\u062f\u0627 \u06cc\u06d0 \u06a9\u0693\u0626","Selected registering unit":"","Start Again":"","Are you sure? All unsaved data will be lost.":"",Accept:"\u062f \u0645\u0646\u0644\u0648 \u0648\u0693","Registering Organisation Unit":"","Selected Program":"",Select:"\u063a\u0648\u0631\u0647 \u06cc\u06d0 \u06a9\u0693\u0626","Select program":"\u062f \u067e\u0631\u0648\u06ab\u0631\u0627\u0645 \u067c\u0627\u06a9\u0644","No programs available.":"","You dont have access to delete this relationship":"","You dont have access to create any relationships":"","Add relationship":"\u0627\u0693\u06cc\u06a9\u0647 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0693\u0626","Selected program":"\u0627\u0646\u062a\u062e\u0627\u0628 \u0634\u0648\u06cc \u067e\u0631\u0648\u06ab\u0631\u0627\u0645","Search {{uniqueAttrName}}":"","Search by attributes":"","Fill in at least {{minAttributesRequired}} attributes to search":"","To work with the selected program,":"","open the Tracker Capture app":"","Program not found":"","Program is not a tracker program":"",Profile:"\u0645\u0634\u062e\u0635\u0627\u062a \u06cc\u0627\u067e\u0631\u0648\u0641\u0627\u06cc\u0644","Error saving event":"","Could not save event. See log for details":"","Organisation unit search failed. See log for details":"","tracked entity instance":"","Set coordinate":"\u0647\u0645\u063a\u0696\u064a \u062a\u0631\u062a\u06cc\u0628 \u06a9\u0693\u0626",Date:"\u0646\u06d0\u067c\u0647",Time:"","From date":"","From time":"","To date":"","To time":"","error encountered during field validation":"",error:"","Delete polygon":"","Set area":"","Choose one or more dates...":"","Choose a date...":"","Compatibility mode":""}},1068:function(e){e.exports={"Please provide a valid date":"","Columns to show in table":"",Column:"Coluna","This value is validating":"","Async field update failed":"","A value is required":"","Please provide a valid number":"","Please provide a valid integer":"","Please provide a positive integer":"","Please provide zero or a positive integer":"","Please provide a negative integer":"","Please provide a valid date and time":"","Please provide a valid time":"","Please provide a valid percentage":"","Please provide a valid url":"","Please provide a valid email address":"","Please provide a valid age":"","Please provide a valid phone number":"","Please provide a valid organisation unit":"","Please provide valid coordinates":"","This value already exists":"",'"From" cannot be greater than "To"':"","Checking...":"",Area:"",Coordinate:"Coordenadas",Enrollment:"Inscri\xe7\xe3o","A future date is not allowed":"","An error has occured. See log for details":"",Cancel:"Cancelar","Unsaved changes":"","Leaving this page will discard the changes you made to this event.":"","Yes, discard":"","No, stay here":"","validation failed":"",Errors:"Erros",Feedback:"Retroinformac\xe3o",Indicators:"Indicadores",Warnings:"","search group result could not be retrieved":"",Complete:"Completo","Warnings found":"",Abort:"","Back to form":"","Save anyway":"","Validation errors and warnings":"","Validation errors":"","Validation warnings":"Alertas de valida\xe7\xe3o","Some operations are still runnning. Please wait..":"","Operations running":"",Sort:"Ordenar","No events to display":"","Data for offline list not present":"",Close:"Fechar","Please select the user":"","Search for user":"",Me:"",Anyone:"",None:"Nenhum","Select user":"",to:"para",From:"A partir de",To:"At\xe9","after or equal to":"","before or equal to":"",Today:"Hoje","This week":"Esta semana","This month":"Este m\xeas","This Year":"","Last week":"\xdaltima semana","Last month":"\xdaltimo m\xeas","Last 3 months":"\xdaltimos tr\xeas meses","Custom range":"",Max:"M\xe1x",Min:"Min","greater than or equal to":"","less than or equal to":"","Contains text":"",Yes:"Sim","mm/dd/yyyy":"",Years:"Anos",Months:"Meses",Days:"","Uploading file":"",selected:"Seleccionado",Delete:"Apagar","Select file":"",No:"N\xe3o","Uploading image":"","Select image":"",Search:"Pesquisar",Clear:"Limpar","No results":"","suggestions could not be retrieved":"","search for username":"","No items to display":"",Online:"Ligado",Offline:"Desligado",Syncing:"","Add comment":"","You dont have access to write comments":"","Write comment":"","Basic info":"",Status:"Estado",Comments:"Comentarios","Please add or cancel comment before saving the event":"","No write access":"",Save:"Salvar","Show all events":"","Edit event":"","Event could not be loaded. Are you sure it exists?":"","Event could not be loaded":"","Organisation unit could not be loaded":"","View event info":"","Delete event":"",Update:"Actualizar","More filters":"","Select columns":"","Download as JSON":"","Download as XML":"","Download as CSV":"Exportar como CSV","Download with current filters":"","Save filter as...":"","Download as...":"","Rows per page":"",Active:"Activo",Completed:"Completo","Could not get organisation unit":"","Program doesn't exist":"","Selected program is invalid for registering unit":"","Creating a new {{TET}} in {{program}} in {{orgUnit}}":"","Save and add another":"","Save and exit":"",Finish:"","Switch to form view":"","Switch to row view":"","New {{TET}}":"","Working Lists":"","Program with programid {{programId}} isn't a tracker program. Enrollments can only be done in tracker programs.":"","Selected program is invalid for selected registering unit":"","Assigned user":"",Relationships:"Relacionamentos",Assignee:"","Saving to":"",in:"","This is not an event program or the metadata is corrupt. See log for details.":"","This event":"","Relationship of type {{relationshipTypeName}} to {{entityName}} already exists":"","New event":"Novo evento","New event relationship":"","Adding relationship to event.":"","Go back to event without saving relationship":"","Leaving this page will discard the selections you made for a new relationship":"","events added":"","No events added":"","Select a registering unit and program above to get started":"","Select a program to start reporting":"","Select a registering unit to start reporting":"","Select a category option to start reporting":"","You dont have access to create an event in the current selections":"","A duplicate exists (but there were some errors, see log for details":"","An item with this {{attributeName}} is already registered, but you don't have access to it":"","You have already registered this {{attributeName}}":"","A {{trackedEntityTypeName}} with this {{attributeName}} is already registered":"","Show registered {{trackedEntityTypeName}}":"","Registered person":"",Link:"","Metadata error. see log for details":"","Review duplicates":"","Create {{trackedEntityTypeName}} and link":"","Possible duplicates found":"","An error occured loading possible duplicates":"",Hide:"Esconder","Save as new {{tetName}}":"","Some programs are being filtered.":"","Show all":"Mostrar tudo",Program:"Programa","Organisation Unit":"Unidade organizacional",Registration:"Registo","Review Duplicates":"","Search results":"","No {{trackedEntityTypeName}} found.":"","{{teiCount}} results found for":"","New search":"","Edit search":"","Link to an existing {{trackedEntityType}}":"","Create new {{trackedEntityType}}":"",Register:"Registo","You dont have access to edit this event":"","Leaving this page will discard any selections you made for a new relationship":"","No one is assigned to this event":"",Assign:"Atribuir","Event assigned to {{name}}":"",Feedbacks:"","New {{typeName}}":"",New:"Novo","Start again":"",Find:"Encontrar","Selected registering unit":"","Start Again":"","Are you sure? All unsaved data will be lost.":"",Accept:"","Registering Organisation Unit":"","Selected Program":"",Select:"Seleccione","Select program":"Selecionar o programa","No programs available.":"","You dont have access to delete this relationship":"","You dont have access to create any relationships":"","Add relationship":"Adicionar relacionamento","Selected program":"Seleccionar o programa","Search {{uniqueAttrName}}":"","Search by attributes":"","Fill in at least {{minAttributesRequired}} attributes to search":"","To work with the selected program,":"","open the Tracker Capture app":"","Program not found":"","Program is not a tracker program":"",Profile:"Perfil","Error saving event":"","Could not save event. See log for details":"","Organisation unit search failed. See log for details":"","tracked entity instance":"","Set coordinate":"Definir coordenadas",Date:"Data",Time:"","From date":"Data de inicio","From time":"","To date":"At\xe9 \xe0 data","To time":"","error encountered during field validation":"",error:"","Delete polygon":"","Set area":"","Choose one or more dates...":"","Choose a date...":"","Compatibility mode":""}},1069:function(e){e.exports={"Please provide a valid date":"","Columns to show in table":"",Column:"\u0421\u0442\u043e\u043b\u0431\u0435\u0446","This value is validating":"","Async field update failed":"","A value is required":"","Please provide a valid number":"","Please provide a valid integer":"","Please provide a positive integer":"","Please provide zero or a positive integer":"","Please provide a negative integer":"","Please provide a valid date and time":"","Please provide a valid time":"","Please provide a valid percentage":"","Please provide a valid url":"","Please provide a valid email address":"","Please provide a valid age":"","Please provide a valid phone number":"","Please provide a valid organisation unit":"","Please provide valid coordinates":"","This value already exists":"",'"From" cannot be greater than "To"':"","Checking...":"",Area:"\u0414\u0438\u0430\u0433\u0440\u0430\u043c\u043c\u0430-\u043e\u0431\u043b\u0430\u0441\u0442\u0438",Coordinate:"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u0430",Enrollment:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f","A future date is not allowed":"","An error has occured. See log for details":"",Cancel:"\u041e\u0442\u043c\u0435\u043d\u0430","Unsaved changes":"","Leaving this page will discard the changes you made to this event.":"","Yes, discard":"","No, stay here":"","validation failed":"",Errors:"\u041e\u0448\u0438\u0431\u043a\u0438",Feedback:"\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f \u0441\u0432\u044f\u0437\u044c",Indicators:"\u0418\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u044b",Warnings:"","search group result could not be retrieved":"",Complete:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0439","Warnings found":"",Abort:"","Back to form":"","Save anyway":"","Validation errors and warnings":"","Validation errors":"","Validation warnings":"\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f \u043f\u043e \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438","Some operations are still runnning. Please wait..":"","Operations running":"",Sort:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c","No events to display":"","Data for offline list not present":"",Close:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c","Please select the user":"","Search for user":"",Me:"",Anyone:"",None:"\u041d\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435","Select user":"",to:"\u041f\u043e",From:"\u041e\u0442",To:"\u0414\u043e","after or equal to":"","before or equal to":"",Today:"Today","This week":"This week","This month":"This month","This Year":"","Last week":"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043d\u0435\u0434\u0435\u043b\u044f","Last month":"Last month","Last 3 months":"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 3 \u043c\u0435\u0441\u044f\u0446\u0430","Custom range":"",Max:"Max",Min:"Min","greater than or equal to":"","less than or equal to":"","Contains text":"",Yes:"\u0414\u0430","mm/dd/yyyy":"",Years:"\u0413\u043e\u0434\u044b",Months:"\u041c\u0435\u0441\u044f\u0446\u044b",Days:"\u0414\u043d\u0438","Uploading file":"",selected:"\u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439",Delete:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c","Select file":"",No:"\u041d\u0435\u0442","Uploading image":"","Select image":"",Search:"\u041f\u043e\u0438\u0441\u043a",Clear:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c","No results":"","suggestions could not be retrieved":"","search for username":"","No items to display":"",Online:"\u041e\u043d\u043b\u0430\u0439\u043d",Offline:"\u041e\u0444\u0444\u043b\u0430\u0439\u043d",Syncing:"","Add comment":"","You dont have access to write comments":"","Write comment":"","Basic info":"",Status:"\u0421\u0442\u0430\u0442\u0443\u0441",Comments:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438","Please add or cancel comment before saving the event":"","No write access":"",Save:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c","Show all events":"","Edit event":"","Event could not be loaded. Are you sure it exists?":"","Event could not be loaded":"","Organisation unit could not be loaded":"","View event info":"","Delete event":"",Update:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c","More filters":"","Select columns":"","Download as JSON":"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u043a\u0430\u043a JSON","Download as XML":"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u043a\u0430\u043a XML","Download as CSV":"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 CSV","Download with current filters":"","Save filter as...":"","Download as...":"","Rows per page":"",Active:"\u0414\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439",Completed:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0439","Could not get organisation unit":"","Program doesn't exist":"","Selected program is invalid for registering unit":"","Creating a new {{TET}} in {{program}} in {{orgUnit}}":"","Save and add another":"","Save and exit":"",Finish:"","Switch to form view":"","Switch to row view":"","New {{TET}}":"","Working Lists":"","Program with programid {{programId}} isn't a tracker program. Enrollments can only be done in tracker programs.":"","Selected program is invalid for selected registering unit":"","Assigned user":"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",Relationships:"\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438",Assignee:"","Saving to":"",in:"\u0432","This is not an event program or the metadata is corrupt. See log for details.":"","This event":"","Relationship of type {{relationshipTypeName}} to {{entityName}} already exists":"","New event":"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435","New event relationship":"","Adding relationship to event.":"","Go back to event without saving relationship":"","Leaving this page will discard the selections you made for a new relationship":"","events added":"","No events added":"","Select a registering unit and program above to get started":"","Select a program to start reporting":"","Select a registering unit to start reporting":"","Select a category option to start reporting":"","You dont have access to create an event in the current selections":"","A duplicate exists (but there were some errors, see log for details":"","An item with this {{attributeName}} is already registered, but you don't have access to it":"","You have already registered this {{attributeName}}":"","A {{trackedEntityTypeName}} with this {{attributeName}} is already registered":"","Show registered {{trackedEntityTypeName}}":"","Registered person":"",Link:"","Metadata error. see log for details":"","Review duplicates":"","Create {{trackedEntityTypeName}} and link":"","Possible duplicates found":"","An error occured loading possible duplicates":"",Hide:"\u0421\u043a\u0440\u044b\u0442\u044c","Save as new {{tetName}}":"","Some programs are being filtered.":"","Show all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435",Program:"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430","Organisation Unit":"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",Registration:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f","Review Duplicates":"","Search results":"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430","No {{trackedEntityTypeName}} found.":"","{{teiCount}} results found for":"","New search":"","Edit search":"","Link to an existing {{trackedEntityType}}":"","Create new {{trackedEntityType}}":"",Register:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c","You dont have access to edit this event":"","Leaving this page will discard any selections you made for a new relationship":"","No one is assigned to this event":"",Assign:"\u0417\u0430\u043a\u0440\u0435\u043f\u0438\u0442\u044c","Event assigned to {{name}}":"",Feedbacks:"","New {{typeName}}":"",New:"\u041d\u043e\u0432\u044b\u0439","Start again":"",Find:"\u041d\u0430\u0439\u0442\u0438","Selected registering unit":"","Start Again":"","Are you sure? All unsaved data will be lost.":"",Accept:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c","Registering Organisation Unit":"","Selected Program":"",Select:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c","Select program":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443","No programs available.":"","You dont have access to delete this relationship":"","You dont have access to create any relationships":"","Add relationship":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c","Selected program":"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u0430\u044f \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430","Search {{uniqueAttrName}}":"","Search by attributes":"","Fill in at least {{minAttributesRequired}} attributes to search":"","To work with the selected program,":"","open the Tracker Capture app":"","Program not found":"","Program is not a tracker program":"",Profile:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c","Error saving event":"","Could not save event. See log for details":"","Organisation unit search failed. See log for details":"","tracked entity instance":"","Set coordinate":"\u0412\u044b\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u0443",Date:"\u0414\u0430\u0442\u0430",Time:"\u0412\u0440\u0435\u043c\u044f","From date":"\u041e\u0442 \u0434\u0430\u0442\u044b","From time":"","To date":"\u0414\u043e \u0434\u0430\u0442\u044b","To time":"","error encountered during field validation":"",error:"","Delete polygon":"","Set area":"","Choose one or more dates...":"","Choose a date...":"","Compatibility mode":""}},1070:function(e){e.exports={"Please provide a valid date":"","Columns to show in table":"",Column:"\u0421\u0442\u043e\u0432\u043f\u0447\u0438\u043a","This value is validating":"","Async field update failed":"","A value is required":"","Please provide a valid number":"","Please provide a valid integer":"","Please provide a positive integer":"","Please provide zero or a positive integer":"","Please provide a negative integer":"","Please provide a valid date and time":"","Please provide a valid time":"","Please provide a valid percentage":"","Please provide a valid url":"","Please provide a valid email address":"","Please provide a valid age":"","Please provide a valid phone number":"","Please provide a valid organisation unit":"","Please provide valid coordinates":"","This value already exists":"",'"From" cannot be greater than "To"':"","Checking...":"",Area:"",Coordinate:"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u0430",Enrollment:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f","A future date is not allowed":"","An error has occured. See log for details":"",Cancel:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438","Unsaved changes":"","Leaving this page will discard the changes you made to this event.":"","Yes, discard":"","No, stay here":"","validation failed":"",Errors:"\u041f\u043e\u043c\u0438\u043b\u043a\u0438",Feedback:"\u0412\u0456\u0434\u0433\u0443\u043a",Indicators:"\u041f\u043e\u043a\u0430\u0437\u043d\u0438\u043a\u0438",Warnings:"","search group result could not be retrieved":"",Complete:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0435","Warnings found":"",Abort:"","Back to form":"","Save anyway":"","Validation errors and warnings":"","Validation errors":"","Validation warnings":"","Some operations are still runnning. Please wait..":"","Operations running":"",Sort:"","No events to display":"","Data for offline list not present":"",Close:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438","Please select the user":"","Search for user":"",Me:"",Anyone:"",None:"\u0416\u043e\u0434\u043d\u043e\u0433\u043e","Select user":"",to:"\u0434\u043e",From:"\u0412\u0456\u0434",To:"\u0414\u043e","after or equal to":"","before or equal to":"",Today:"Today","This week":"This week","This month":"This month","This Year":"","Last week":"\u041c\u0438\u043d\u0443\u043b\u0438\u0439 \u0442\u0438\u0436\u0434\u0435\u043d\u044c","Last month":"\u041e\u0441\u0442\u0430\u043d\u043d\u0456\u0439 \u043c\u0456\u0441\u044f\u0446\u044c","Last 3 months":"\u041e\u0441\u0442\u0430\u043d\u043d\u0456 3 \u043c\u0456\u0441\u044f\u0446\u0456","Custom range":"",Max:"\u041c\u0430\u043a\u0441",Min:"\u041c\u0456\u043d","greater than or equal to":"","less than or equal to":"","Contains text":"",Yes:"\u0422\u0430\u043a","mm/dd/yyyy":"",Years:"\u0420\u043e\u043a\u0438",Months:"\u041c\u0456\u0441\u044f\u0446\u0456",Days:"\u0414\u043d\u0456","Uploading file":"",selected:"",Delete:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438","Select file":"",No:"\u041d\u0456","Uploading image":"","Select image":"",Search:"\u041f\u043e\u0448\u0443\u043a",Clear:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u0438","No results":"","suggestions could not be retrieved":"","search for username":"","No items to display":"",Online:"\u041e\u043d\u043b\u0430\u0439\u043d",Offline:"\u041e\u0444\u043b\u0430\u0439\u043d",Syncing:"","Add comment":"","You dont have access to write comments":"","Write comment":"","Basic info":"",Status:"\u0421\u0442\u0430\u0442\u0443\u0441",Comments:"","Please add or cancel comment before saving the event":"","No write access":"",Save:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438","Show all events":"","Edit event":"","Event could not be loaded. Are you sure it exists?":"","Event could not be loaded":"","Organisation unit could not be loaded":"","View event info":"","Delete event":"",Update:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438","More filters":"","Select columns":"","Download as JSON":"","Download as XML":"","Download as CSV":"","Download with current filters":"","Save filter as...":"","Download as...":"","Rows per page":"",Active:"\u0410\u043a\u0442\u0438\u0432\u043d\u0435",Completed:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e","Could not get organisation unit":"","Program doesn't exist":"","Selected program is invalid for registering unit":"","Creating a new {{TET}} in {{program}} in {{orgUnit}}":"","Save and add another":"","Save and exit":"",Finish:"","Switch to form view":"","Switch to row view":"","New {{TET}}":"","Working Lists":"","Program with programid {{programId}} isn't a tracker program. Enrollments can only be done in tracker programs.":"","Selected program is invalid for selected registering unit":"","Assigned user":"",Relationships:"\u0417\u0432'\u044f\u0437\u043a\u0438",Assignee:"","Saving to":"",in:"","This is not an event program or the metadata is corrupt. See log for details.":"","This event":"","Relationship of type {{relationshipTypeName}} to {{entityName}} already exists":"","New event":"\u041d\u043e\u0432\u0430 \u043f\u043e\u0434\u0456\u044f","New event relationship":"","Adding relationship to event.":"","Go back to event without saving relationship":"","Leaving this page will discard the selections you made for a new relationship":"","events added":"","No events added":"","Select a registering unit and program above to get started":"","Select a program to start reporting":"","Select a registering unit to start reporting":"","Select a category option to start reporting":"","You dont have access to create an event in the current selections":"","A duplicate exists (but there were some errors, see log for details":"","An item with this {{attributeName}} is already registered, but you don't have access to it":"","You have already registered this {{attributeName}}":"","A {{trackedEntityTypeName}} with this {{attributeName}} is already registered":"","Show registered {{trackedEntityTypeName}}":"","Registered person":"",Link:"","Metadata error. see log for details":"","Review duplicates":"","Create {{trackedEntityTypeName}} and link":"","Possible duplicates found":"","An error occured loading possible duplicates":"",Hide:"\u0421\u0445\u043e\u0432\u0430\u0442\u0438","Save as new {{tetName}}":"","Some programs are being filtered.":"","Show all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0432\u0441\u0435",Program:"Program","Organisation Unit":"\u041e\u0440\u0433\u0430\u043d\u0456\u0437\u0430\u0446\u0456\u0439\u043d\u0438\u0439 \u043f\u0456\u0434\u0440\u043e\u0437\u0434\u0456\u043b",Registration:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f","Review Duplicates":"","Search results":"","No {{trackedEntityTypeName}} found.":"","{{teiCount}} results found for":"","New search":"","Edit search":"","Link to an existing {{trackedEntityType}}":"","Create new {{trackedEntityType}}":"",Register:"\u0420\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438","You dont have access to edit this event":"","Leaving this page will discard any selections you made for a new relationship":"","No one is assigned to this event":"",Assign:"","Event assigned to {{name}}":"",Feedbacks:"","New {{typeName}}":"",New:"\u041d\u043e\u0432\u0435","Start again":"",Find:"\u0417\u043d\u0430\u0439\u0442\u0438","Selected registering unit":"","Start Again":"","Are you sure? All unsaved data will be lost.":"",Accept:"","Registering Organisation Unit":"","Selected Program":"",Select:"\u041e\u0431\u0440\u0430\u0442\u0438","Select program":"\u041e\u0431\u0440\u0430\u0442\u0438 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0443","No programs available.":"","You dont have access to delete this relationship":"","You dont have access to create any relationships":"","Add relationship":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0432'\u044f\u0437\u043e\u043a","Selected program":"\u041e\u0431\u0440\u0430\u043d\u0456 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0438","Search {{uniqueAttrName}}":"","Search by attributes":"","Fill in at least {{minAttributesRequired}} attributes to search":"","To work with the selected program,":"","open the Tracker Capture app":"","Program not found":"","Program is not a tracker program":"",Profile:"\u041f\u0440\u043e\u0444\u0456\u043b\u044c","Error saving event":"","Could not save event. See log for details":"","Organisation unit search failed. See log for details":"","tracked entity instance":"","Set coordinate":"\u0412\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0438 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u0443",Date:"\u0414\u0430\u0442\u0430",Time:"","From date":"","From time":"","To date":"","To time":"","error encountered during field validation":"",error:"","Delete polygon":"","Set area":"","Choose one or more dates...":"","Choose a date...":"","Compatibility mode":""}},1071:function(e){e.exports={"Please provide a valid date":"","Columns to show in table":"",Column:"\u06a9\u0627\u0644\u0645","This value is validating":"","Async field update failed":"","A value is required":"","Please provide a valid number":"","Please provide a valid integer":"","Please provide a positive integer":"","Please provide zero or a positive integer":"","Please provide a negative integer":"","Please provide a valid date and time":"","Please provide a valid time":"","Please provide a valid percentage":"","Please provide a valid url":"","Please provide a valid email address":"","Please provide a valid age":"","Please provide a valid phone number":"","Please provide a valid organisation unit":"","Please provide valid coordinates":"","This value already exists":"",'"From" cannot be greater than "To"':"","Checking...":"",Area:"\u0631\u0642\u0628\u06c1",Coordinate:"\u06a9\u0648\u0631\u0688\u06cc\u0646\u06cc\u0679",Enrollment:"\u0627\u0646\u062f\u0631\u0627\u062c","A future date is not allowed":"","An error has occured. See log for details":"",Cancel:"\u0645\u0646\u0633\u0648\u062e","Unsaved changes":"","Leaving this page will discard the changes you made to this event.":"","Yes, discard":"","No, stay here":"","validation failed":"",Errors:"\u063a\u0644\u0637\u06cc\u0627\u06ba",Feedback:"\u0631\u0627\u0626\u06d2",Indicators:"\u0627\u0634\u0627\u0631\u06d2",Warnings:"","search group result could not be retrieved":"",Complete:"\u0645\u06a9\u0645\u0644","Warnings found":"",Abort:"","Back to form":"","Save anyway":"","Validation errors and warnings":"","Validation errors":"","Validation warnings":"\u062a\u0648\u062b\u06cc\u0642 \u0627\u0646\u062a\u0628\u0627\u06c1","Some operations are still runnning. Please wait..":"","Operations running":"",Sort:"\u062a\u0631\u062a\u06cc\u0628 \u062f\u06cc\u06ba","No events to display":"","Data for offline list not present":"",Close:"\u0628\u0646\u062f","Please select the user":"","Search for user":"",Me:"",Anyone:"",None:"\u06a9\u0648\u0626\u06cc \u0646\u06c1\u06ba","Select user":"",to:"",From:"\u0633\u06d2",To:"\u06a9\u0631\u0646\u06d2 \u06a9\u06d2 \u0644\u0626\u06d2","after or equal to":"","before or equal to":"",Today:"\u0622\u062c","This week":"\u0627\u0633 \u06c1\u0641\u062a\u06d2","This month":"\u0627\u0633 \u0645\u06c1\u06cc\u0646\u06d2","This Year":"","Last week":"\u0627\u0653\u062e\u0631\u06cc \u06c1\u0641\u062a\u06c1","Last month":"\u0627\u0653\u062e\u0631\u06cc \u0645\u0627\u06c1","Last 3 months":"\u0627\u0653\u062e\u0631\u06cc \u06f3 \u0645\u0627\u06c1","Custom range":"",Max:"\u0632\u06cc\u0627\u062f\u06c1 \u0633\u06d2 \u0632\u06cc\u0627\u062f\u06c1",Min:"\u06a9\u0645 \u0633\u06d2 \u06a9\u0645","greater than or equal to":"","less than or equal to":"","Contains text":"",Yes:"\u06c1\u0627\u06ba","mm/dd/yyyy":"",Years:"\u0633\u0627\u0644",Months:"\u0645\u06c1\u06cc\u0646\u06d2",Days:"\u062f\u0646","Uploading file":"",selected:"\u0645\u0646\u062a\u062e\u0628 \u0634\u062f\u06c1",Delete:"\u062d\u0630\u0641","Select file":"",No:"\u0646\u06c1\u06cc\u06ba","Uploading image":"","Select image":"",Search:"\u062a\u0644\u0627\u0634 \u06a9\u0631\u06cc\u06ba",Clear:"\u06a9\u0644\u06cc\u0626\u0631","No results":"","suggestions could not be retrieved":"","search for username":"","No items to display":"",Online:"\u0627\u0653\u0646 \u0644\u0627\u0626\u0646",Offline:"\u0627\u0653\u0641 \u0644\u0627\u0626\u0646",Syncing:"","Add comment":"","You dont have access to write comments":"","Write comment":"","Basic info":"",Status:"\u062d\u0627\u0644\u062a",Comments:"\u062a\u0628\u0635\u0631\u06d2","Please add or cancel comment before saving the event":"","No write access":"",Save:"\u0645\u062d\u0641\u0648\u0638","Show all events":"","Edit event":"","Event could not be loaded. Are you sure it exists?":"","Event could not be loaded":"","Organisation unit could not be loaded":"","View event info":"","Delete event":"",Update:"\u0627\u067e\u0688\u06cc\u0679","More filters":"","Select columns":"","Download as JSON":"JSON \u06a9\u06d2 \u0637\u0648\u0631 \u067e\u0631 \u0688\u0627\u0624\u0646 \u0644\u0648\u0688 \u06a9\u0631\u06cc\u06ba","Download as XML":"XML \u06a9\u06d2 \u0637\u0648\u0631 \u067e\u0631 \u0688\u0627\u0624\u0646 \u0644\u0648\u0688 \u06a9\u0631\u06cc\u06ba","Download as CSV":"CSV \u06a9\u06d2 \u0637\u0648\u0631 \u067e\u0631 \u0688\u0627\u0624\u0646 \u0644\u0648\u0688 \u06a9\u0631\u06cc\u06ba","Download with current filters":"","Save filter as...":"","Download as...":"","Rows per page":"",Active:"\u0641\u0639\u0627\u0644",Completed:"\u0645\u06a9\u0645\u0644","Could not get organisation unit":"","Program doesn't exist":"","Selected program is invalid for registering unit":"","Creating a new {{TET}} in {{program}} in {{orgUnit}}":"","Save and add another":"","Save and exit":"",Finish:"","Switch to form view":"","Switch to row view":"","New {{TET}}":"","Working Lists":"","Program with programid {{programId}} isn't a tracker program. Enrollments can only be done in tracker programs.":"","Selected program is invalid for selected registering unit":"","Assigned user":"",Relationships:"\u062a\u0639\u0644\u0642\u0627\u062a",Assignee:"","Saving to":"",in:"\u0627\u0646\u062f\u0631","This is not an event program or the metadata is corrupt. See log for details.":"","This event":"","Relationship of type {{relationshipTypeName}} to {{entityName}} already exists":"","New event":"\u0646\u0626\u06cc \u062a\u0642\u0631\u06cc\u0628","New event relationship":"","Adding relationship to event.":"","Go back to event without saving relationship":"","Leaving this page will discard the selections you made for a new relationship":"","events added":"","No events added":"","Select a registering unit and program above to get started":"","Select a program to start reporting":"","Select a registering unit to start reporting":"","Select a category option to start reporting":"","You dont have access to create an event in the current selections":"","A duplicate exists (but there were some errors, see log for details":"","An item with this {{attributeName}} is already registered, but you don't have access to it":"","You have already registered this {{attributeName}}":"","A {{trackedEntityTypeName}} with this {{attributeName}} is already registered":"","Show registered {{trackedEntityTypeName}}":"","Registered person":"",Link:"","Metadata error. see log for details":"","Review duplicates":"","Create {{trackedEntityTypeName}} and link":"","Possible duplicates found":"","An error occured loading possible duplicates":"",Hide:"\u0686\u06be\u067e\u0627\u0626\u06cc\u06ba","Save as new {{tetName}}":"","Some programs are being filtered.":"","Show all":"\u0633\u0627\u0631\u06d2 \u062f\u06a9\u06be\u0627\u0648",Program:"\u067e\u0631\u0648\u06af\u0631\u0627\u0645","Organisation Unit":"",Registration:"\u0631\u062c\u0633\u0679\u0631\u06cc\u0634\u0646","Review Duplicates":"","Search results":"\u062a\u0644\u0627\u0634 \u06a9\u06d2 \u0646\u062a\u0627\u0626\u062c","No {{trackedEntityTypeName}} found.":"","{{teiCount}} results found for":"","New search":"","Edit search":"","Link to an existing {{trackedEntityType}}":"","Create new {{trackedEntityType}}":"",Register:"\u0631\u062c\u0633\u0679\u0631 \u06a9\u0631\u06cc\u06ba","You dont have access to edit this event":"","Leaving this page will discard any selections you made for a new relationship":"","No one is assigned to this event":"",Assign:"\u062a\u0641\u0648\u06cc\u0636","Event assigned to {{name}}":"",Feedbacks:"","New {{typeName}}":"",New:"\u0646\u06cc\u0627","Start again":"",Find:"\u062a\u0644\u0627\u0634","Selected registering unit":"","Start Again":"","Are you sure? All unsaved data will be lost.":"",Accept:"","Registering Organisation Unit":"","Selected Program":"",Select:"\u0645\u0646\u062a\u062e\u0628 \u06a9\u0631\u06cc\u06ba","Select program":"\u067e\u0631\u0648\u06af\u0631\u0627\u0645 \u0645\u0646\u062a\u062e\u0628 \u06a9\u0631\u06cc\u06ba","No programs available.":"","You dont have access to delete this relationship":"","You dont have access to create any relationships":"","Add relationship":"\u062a\u0639\u0644\u0642\u0627\u062a \u0634\u0627\u0645\u0644 \u06a9\u0631\u06cc\u06ba","Selected program":"\u0645\u0646\u062a\u062e\u0628 \u06a9\u0631\u062f\u06c1 \u067e\u0631\u0648\u06af\u0631\u0627\u0645","Search {{uniqueAttrName}}":"","Search by attributes":"","Fill in at least {{minAttributesRequired}} attributes to search":"","To work with the selected program,":"","open the Tracker Capture app":"","Program not found":"","Program is not a tracker program":"",Profile:"\u067e\u0631\u0641\u0627\u0626\u0644","Error saving event":"","Could not save event. See log for details":"","Organisation unit search failed. See log for details":"","tracked entity instance":"","Set coordinate":"\u06c1\u0645 \u0622\u06c1\u0646\u06af\u06cc \u0645\u0642\u0631\u0631 \u06a9\u0631\u06cc\u06ba",Date:"\u062a\u0627\u0631\u06cc\u062e",Time:"\u0648\u0642\u062a","From date":"\u0627\u0633 \u062a\u0627\u0631\u06cc\u062e \u0633\u06d2","From time":"","To date":"\u062a\u0627\u0631\u06cc\u062e \u062a\u06a9","To time":"","error encountered during field validation":"",error:"","Delete polygon":"","Set area":"","Choose one or more dates...":"","Choose a date...":"","Compatibility mode":""}},1072:function(e){e.exports={"Please provide a valid date":"Xin vui l\xf2ng cung c\u1ea5p ng\xe0y \u0111\xfang","Columns to show in table":"C\u1ed9t hi\u1ec3n th\u1ecb trong b\u1ea3ng",Column:"C\u1ed9t","This value is validating":"","Async field update failed":"","A value is required":"Y\xeau c\u1ea7u c\xf3 gi\xe1 tr\u1ecb","Please provide a valid number":"","Please provide a valid integer":"","Please provide a positive integer":"","Please provide zero or a positive integer":"","Please provide a negative integer":"","Please provide a valid date and time":"","Please provide a valid time":"","Please provide a valid percentage":"","Please provide a valid url":"","Please provide a valid email address":"","Please provide a valid age":"","Please provide a valid phone number":"","Please provide a valid organisation unit":"","Please provide valid coordinates":"","This value already exists":"",'"From" cannot be greater than "To"':"","Checking...":"",Area:"",Coordinate:"T\u1ecda \u0111\u1ed9",Enrollment:"\u0110\u0103ng k\xfd","A future date is not allowed":"","An error has occured. See log for details":"C\xf3 l\u1ed7i. Xem log \u0111\u1ec3 bi\u1ebft th\xeam chi ti\u1ebft.",Cancel:"H\u1ee7y","Unsaved changes":"","Leaving this page will discard the changes you made to this event.":"R\u1eddi kh\u1ecfi trang ng\xe0y s\u1ebd h\u1ee7y c\xe1c thay \u0111\u1ed5i b\u1ea1n \u0111\xe3 th\u1ef1c hi\u1ec7n cho s\u1ef1 ki\u1ec7n n\xe0y.","Yes, discard":"","No, stay here":"","validation failed":"",Errors:"L\u1ed7i",Feedback:"Ph\u1ea3n h\u1ed3i",Indicators:"C\xe1c ch\u1ec9 s\u1ed1",Warnings:"C\u1ea3nh b\xe1o","search group result could not be retrieved":"",Complete:"Ho\xe0n t\u1ea5t","Warnings found":"C\u1ea3nh b\xe1o \u0111\xe3 t\xecm th\u1ea5y",Abort:"H\u1ee7y b\u1ecf","Back to form":"","Save anyway":"","Validation errors and warnings":"","Validation errors":"","Validation warnings":"C\u1ea3nh b\xe1o t\xednh h\u1ee3p l\u1ec7","Some operations are still runnning. Please wait..":"","Operations running":"",Sort:"S\u1eafp x\u1ebfp","No events to display":"Kh\xf4ng c\xf3 s\u1ef1 ki\u1ec7n \u0111\u1ec3 hi\u1ec3n th\u1ecb","Data for offline list not present":"D\u1eef li\u1ec7u cho danh s\xe1ch ngo\u1ea1i tuy\u1ebfn kh\xf4ng hi\u1ec3n th\u1ecb",Close:"\u0110\xf3ng l\u1ea1i","Please select the user":"","Search for user":"",Me:"",Anyone:"",None:"Kh\xf4ng","Select user":"",to:"th\xe0nh",From:"T\u1eeb",To:"\u0110\u1ebfn","after or equal to":"sau ho\u1eb7c b\u1eb1ng","before or equal to":"tr\u01b0\u1edbc ho\u1eb7c b\u1eb1ng",Today:"H\xf4m Nay","This week":"Tu\u1ea7n n\xe0y","This month":"Th\xe1ng n\xe0y","This Year":"","Last week":"Last week","Last month":"Th\xe1ng tr\u01b0\u1edbc","Last 3 months":"3 th\xe1ng tr\u01b0\u1edbc","Custom range":"T\xf9y ch\u1ec9nh kho\u1ea3n",Max:"L\u1edbn nh\u1ea5t",Min:"Nh\u1ecf nh\u1ea5t","greater than or equal to":"l\u1edbn h\u01a1n ho\u1eb7c b\u1eb1ng","less than or equal to":"nh\u1ecf h\u01a1n ho\u1eb7c b\u1eb1ng","Contains text":"Ch\u1ee9a v\u0103n b\u1ea3n",Yes:"C\xf3","mm/dd/yyyy":"",Years:"N\u0103m",Months:"Th\xe1ng",Days:"Ng\xe0y","Uploading file":"\u0110ang t\u1ea3i t\u1eadp tin l\xean",selected:"\u0111\xe3 ch\u1ecdn",Delete:"X\xf3a","Select file":"Ch\u1ecdn t\u1eadp tin",No:"Sai","Uploading image":"\u0110ang t\u1ea3i \u1ea3nh l\xean","Select image":"Ch\u1ecdn \u1ea3nh",Search:"T\xecm ki\u1ebfm",Clear:"X\xf3a","No results":"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3","suggestions could not be retrieved":"","search for username":"","No items to display":"Kh\xf4ng c\xf3 m\u1ee5c \u0111\u1ec3 hi\u1ec3n th\u1ecb",Online:"Tr\u1ef1c tuy\u1ebfn",Offline:"Ngo\u1ea1i tuy\u1ebfn",Syncing:"\u0110ang \u0111\u1ed3ng b\u1ed9","Add comment":"Th\xeam b\xecnh lu\u1eadn","You dont have access to write comments":"","Write comment":"Vi\u1ebft b\xecnh lu\u1eadn","Basic info":"Th\xf4ng tin c\u01a1 b\u1ea3n",Status:"T\xecnh tr\u1ea1ng",Comments:"B\xecnh lu\u1eadn","Please add or cancel comment before saving the event":"Xin vui l\xf2ng th\xeam ho\u1eb7c x\xf3a b\xecnh lu\u1eadn tr\u01b0\u1edbc khi l\u01b0u s\u1ef1 ki\u1ec7n","No write access":"Kh\xf4ng c\xf3 quy\u1ec1n vi\u1ebft",Save:"L\u01b0u l\u1ea1i","Show all events":"Hi\u1ec7n t\u1ea5t c\u1ea3 s\u1ef1 ki\u1ec7n","Edit event":"S\u1eeda s\u1ef1 ki\u1ec7n","Event could not be loaded. Are you sure it exists?":"Kh\xf4ng th\u1ec3 t\u1ea3i s\u1ef1 ki\u1ec7n. B\u1ea1n c\xf3 ch\u1eafc n\xf3 t\u1ed3n t\u1ea1i?","Event could not be loaded":"Kh\xf4ng th\u1ec3 t\u1ea3i s\u1ef1 ki\u1ec7n","Organisation unit could not be loaded":"Kh\xf4ng th\u1ec3 t\u1ea3i \u0111\u01a1n v\u1ecb","View event info":"","Delete event":"X\xf3a s\u1ef1 ki\u1ec7n",Update:"C\u1eadp nh\u1eadt","More filters":"Th\xeam b\u1ed9 l\u1ecdc","Select columns":"","Download as JSON":"T\u1ea3i v\u1ec1 d\u1ea1ng JSON","Download as XML":"T\u1ea3i v\u1ec1 d\u1ea1ng XML","Download as CSV":"T\u1ea3i xu\u1ed1ng v\u1edbi CSV","Download with current filters":"","Save filter as...":"","Download as...":"","Rows per page":"D\xf2ng m\u1ed7i trang",Active:"Ho\u1ea1t \u0111\u1ed9ng",Completed:"Ho\xe0n t\u1ea5t","Could not get organisation unit":"Kh\xf4ng th\u1ec3 l\u1ea5y \u0111\u01a1n v\u1ecb","Program doesn't exist":"Ch\u01b0\u01a1ng tr\xecnh kh\xf4ng t\u1ed3n t\u1ea1i","Selected program is invalid for registering unit":"Ch\u01b0\u01a1ng tr\xecnh \u0111\xe3 ch\u1ecdn kh\xf4ng \u0111\xfang \u0111\u1ec3 \u0111\u0103ng k\xfd \u0111\u01a1n v\u1ecb","Creating a new {{TET}} in {{program}} in {{orgUnit}}":"","Save and add another":"L\u01b0u v\xe0 th\xeam s\u1ef1 ki\u1ec7n kh\xe1c","Save and exit":"L\u01b0u v\xe0 \u0111\xf3ng",Finish:"Ho\xe0n t\u1ea5t","Switch to form view":"Chuy\u1ec3n sang xem bi\u1ec3u nh\u1eadp","Switch to row view":"Chuy\u1ec3n sang xem d\xf2ng","New {{TET}}":"","Working Lists":"","Program with programid {{programId}} isn't a tracker program. Enrollments can only be done in tracker programs.":"","Selected program is invalid for selected registering unit":"","Assigned user":"",Relationships:"M\u1ed1i quan h\u1ec7",Assignee:"","Saving to":"\u0110ang l\u01b0u v\xe0o",in:"trong","This is not an event program or the metadata is corrupt. See log for details.":"\u0110\xe2y kh\xf4ng ph\u1ea3i l\xe0 ch\u01b0\u01a1ng tr\xecnh s\u1ef1 ki\u1ec7n ho\u1eb7c d\u1eef li\u1ec7u mi\xeau t\u1ea3 b\u1ecb h\u1ecfng. Xem log \u0111\u1ec3 bi\u1ebft th\xeam chi ti\u1ebft.","This event":"","Relationship of type {{relationshipTypeName}} to {{entityName}} already exists":"","New event":"S\u1ef1 ki\u1ec7n m\u1edbi","New event relationship":"","Adding relationship to event.":"","Go back to event without saving relationship":"","Leaving this page will discard the selections you made for a new relationship":"","events added":"s\u1ef1 ki\u1ec7n \u0111\xe3 \u0111\u01b0\u1ee3c th\xeam","No events added":"Kh\xf4ng c\xf3 s\u1ef1 ki\u1ec7n \u0111\u01b0\u1ee3c th\xeam","Select a registering unit and program above to get started":"Ch\u1ecdn m\u1ed9t \u0111\u01a1n v\u1ecb \u0111\u0103ng k\xfd v\xe0 ch\u01b0\u01a1ng tr\xecnh tr\xean \u0111\u1ec3 b\u1eaft \u0111\u1ea7u","Select a program to start reporting":"Ch\u1ecdn ch\u01b0\u01a1ng tr\xecnh \u0111\u1ec3 b\u1eaft \u0111\u1ea7u b\xe1o c\xe1o","Select a registering unit to start reporting":"Ch\u1ecdn \u0111\u01a1n v\u1ecb \u0111\u0103ng k\xfd \u0111\u1ec3 b\u1eaft \u0111\u1ea7u b\xe1o c\xe1o","Select a category option to start reporting":"Ch\u1ecdn T\xf9y Ch\u1ecdn Ph\xe2n Lo\u1ea1i \u0111\u1ec3 b\u1eaft \u0111\u1ea7u b\xe1o c\xe1o","You dont have access to create an event in the current selections":"","A duplicate exists (but there were some errors, see log for details":"","An item with this {{attributeName}} is already registered, but you don't have access to it":"","You have already registered this {{attributeName}}":"","A {{trackedEntityTypeName}} with this {{attributeName}} is already registered":"","Show registered {{trackedEntityTypeName}}":"","Registered person":"",Link:"","Metadata error. see log for details":"","Review duplicates":"","Create {{trackedEntityTypeName}} and link":"","Possible duplicates found":"","An error occured loading possible duplicates":"",Hide:"\u1ea8n","Save as new {{tetName}}":"","Some programs are being filtered.":"Ch\u01b0\u01a1ng tr\xecnh \u0111ang \u0111\u01b0\u1ee3c l\u1ecdc","Show all":"Hi\u1ec3n th\u1ecb t\u1ea5t c\u1ea3",Program:"Ch\u01b0\u01a1ng tr\xecnh","Organisation Unit":"\u0110\u01a1n v\u1ecb",Registration:"\u0110\u0103ng k\xfd","Review Duplicates":"","Search results":"K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm","No {{trackedEntityTypeName}} found.":"","{{teiCount}} results found for":"","New search":"","Edit search":"","Link to an existing {{trackedEntityType}}":"","Create new {{trackedEntityType}}":"",Register:"\u0110\u0103ng k\xfd","You dont have access to edit this event":"","Leaving this page will discard any selections you made for a new relationship":"","No one is assigned to this event":"",Assign:"G\xe1n","Event assigned to {{name}}":"",Feedbacks:"","New {{typeName}}":"",New:"M\u1edbi","Start again":"Kh\u1edfi \u0111\u1ea7u l\u1ea1i",Find:"T\xecm ki\u1ebfm","Selected registering unit":"\u0110\u01a1n v\u1ecb \u0111\u0103ng k\xfd \u0111\xe3 ch\u1ecdn","Start Again":"Kh\u1edfi \u0110\u1ea7u L\u1ea1i","Are you sure? All unsaved data will be lost.":"",Accept:"Ch\u1ea5p nh\u1eadn","Registering Organisation Unit":"\u0110\u01a1n V\u1ecb \u0110\u0103ng K\xfd","Selected Program":"Ch\u01b0\u01a1ng Tr\xecnh \u0110\xe3 Ch\u1ecdn",Select:"Ch\u1ecdn","Select program":"Ch\u1ecdn Ch\u01b0\u01a1ng Tr\xecnh","No programs available.":"Kh\xf4ng c\xf3 ch\u01b0\u01a1ng tr\xecnh","You dont have access to delete this relationship":"","You dont have access to create any relationships":"","Add relationship":"Th\xeam Quan H\u1ec7","Selected program":"Ch\u01b0\u01a1ng tr\xecnh \u0111\xe3 ch\u1ecdn","Search {{uniqueAttrName}}":"","Search by attributes":"","Fill in at least {{minAttributesRequired}} attributes to search":"","To work with the selected program,":"","open the Tracker Capture app":"","Program not found":"","Program is not a tracker program":"",Profile:"H\u1ed3 s\u01a1","Error saving event":"C\xf3 l\u1ed7i khi \u0111ang l\u01b0u s\u1ef1 ki\u1ec7n","Could not save event. See log for details":"Kh\xf4ng th\u1ec3 l\u01b0u s\u1ef1 ki\u1ec7n. Xem log \u0111\u1ec3 bi\u1ebft th\xeam chi ti\u1ebft","Organisation unit search failed. See log for details":"","tracked entity instance":"","Set coordinate":"\u0110\u1eb7t t\u1ecda \u0111\u1ed9",Date:"Ng\xe0y",Time:"Th\u1eddi gian","From date":"T\u1eeb ng\xe0y","From time":"","To date":"\u0110\u1ebfn ng\xe0y","To time":"","error encountered during field validation":"",error:"","Delete polygon":"","Set area":"","Choose one or more dates...":"Ch\u1ecdn m\u1ed9t ho\u1eb7c nhi\u1ec1u ng\xe0y...","Choose a date...":"Ch\u1ecdn m\u1ed9t ng\xe0y...","Compatibility mode":""}},1079:function(e,t,n){e.exports={container:"withShrinkLabel_container__3Y884"}},1091:function(e,t,n){e.exports={icon:"svgIcon_icon__3bl7y"}},1093:function(e,t,n){e.exports={container:"textField_container__2rFeQ"}},1094:function(e,t,n){e.exports={horizontal:"divider_horizontal__1QuON"}},1095:function(e,t,n){e.exports={inputWrapper:"selectField_inputWrapper__45DHN"}},1097:function(e,t,n){e.exports={fieldOuterContainer:"formBuilder_fieldOuterContainer__3BPN7"}},1098:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(12),_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9),_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7),_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4),_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(8),react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__),loglevel__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(13),loglevel__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_9__),react_transform_tree__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(326),react_transform_tree__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(react_transform_tree__WEBPACK_IMPORTED_MODULE_10__),capture_core_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(16),_metaData_RenderFoundation_CustomForm__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(195),D2CustomForm=function(_React$Component){function D2CustomForm(e){var t;return Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,D2CustomForm),(t=Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__.a)(this,Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__.a)(D2CustomForm).call(this,e))).preProcessSourceTree(),t}return Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__.a)(D2CustomForm,_React$Component),Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(D2CustomForm,null,[{key:"getEventListenersForCurrentNode",value:function(e){return Object.keys(e).filter(function(e){return e.startsWith("on")})}},{key:"getEventListenerSpecsForCurrentNode",value:function(e,t,n){return e.map(function(e){var a=t[e],r=e.replace(/^on/,"");return{id:n,type:r,handler:a}})}},{key:"renderField",value:function(e,t,n){return n(Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},e,{props:Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},e.props,{customFormElementProps:t})}))}}]),Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(D2CustomForm,[{key:"componentDidMount",value:function(){this.addScripts(),this.addEventListeners()}},{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"preProcessSourceTree",value:function(){var e=this.props.specs.data.elements,t=1,n=[],a=[];try{a=Object(react_transform_tree__WEBPACK_IMPORTED_MODULE_10__.walk)(e,Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},react_transform_tree__WEBPACK_IMPORTED_MODULE_10__.kinds.DOM_ELEMENT,function(e){var a=e.node,r=a.props;if(r){var i=D2CustomForm.getEventListenersForCurrentNode(r);if(i.length>0){var o=D2CustomForm.getEventListenerSpecsForCurrentNode(i,r,t);n=[].concat(Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(n),Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(o));var s=Object.keys(r).reduce(function(e,t){return i.includes(t)||(e[t]=r[t]),e},{}),c=react__WEBPACK_IMPORTED_MODULE_8__.cloneElement.apply(react__WEBPACK_IMPORTED_MODULE_8__,[a,Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},s,{"data-custom-form-id":t})].concat(Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(e.walkChildren())));return t+=1,c}}return react__WEBPACK_IMPORTED_MODULE_8__.cloneElement.apply(react__WEBPACK_IMPORTED_MODULE_8__,[a,a.props].concat(Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(e.walkChildren())))}))}catch(r){loglevel__WEBPACK_IMPORTED_MODULE_9___default.a.error(Object(capture_core_utils__WEBPACK_IMPORTED_MODULE_11__.b)(D2CustomForm.errorMessages.PRE_PROCESS_FAILED)({sourceTree:e,error:r})),n=[],a=[]}this.eventListenerSpecs=n,this.preProcessedSourceTree=a}},{key:"addScripts",value:function(){this.props.specs.data.scripts.forEach(function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.innerHTML=e,document.body.appendChild(t)})}},{key:"addEventListeners",value:function addEventListeners(){var eventListenerSpecs=this.eventListenerSpecs,specsWithHandlerRef=eventListenerSpecs.map(function(spec){var handlerRef=function handlerRef(){eval(spec.handler)};return document.querySelector('[data-custom-form-id="'.concat(spec.id,'"]')).addEventListener(spec.type,handlerRef),Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__.a)({},spec,{handlerRef:handlerRef})});this.eventListenerSpecs=specsWithHandlerRef}},{key:"removeEventListeners",value:function(){this.eventListenerSpecs.forEach(function(e){document.querySelector('[data-custom-form-id="'.concat(e.id,'"]')).removeEventListener(e.type,e.handlerRef)})}},{key:"transform",value:function(){var e=this.props,t=e.fields,n=e.onRenderField,a=this.preProcessedSourceTree;return Object(react_transform_tree__WEBPACK_IMPORTED_MODULE_10__.walk)(a,Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},react_transform_tree__WEBPACK_IMPORTED_MODULE_10__.kinds.DOM_ELEMENT,function(e){var a=e.node;if("FormField"===a.type){var r=a.props.id,i=t.find(function(e){return e.id===r});return i?D2CustomForm.renderField(i,a.props.customFormElementProps,n):null}return e.defaultHandler()}))}},{key:"render",value:function(){var e=this.transform();return react__WEBPACK_IMPORTED_MODULE_8__.createElement("div",null,e)}}]),D2CustomForm}(react__WEBPACK_IMPORTED_MODULE_8__.Component);D2CustomForm.errorMessages={PRE_PROCESS_FAILED:"Could not pre process custom form source tree"},__webpack_exports__.a=D2CustomForm},1100:function(e,t,n){e.exports={defaultCustomContainer:"coordinateFieldCustomForm_defaultCustomContainer__C-QNL"}},1101:function(e,t,n){e.exports={defaultCustomContainer:"optionSetSelectFieldForCustomForm_defaultCustomContainer__2WIYV"}},1102:function(e,t,n){e.exports={defaultCustomContainer:"polygonFieldCustomForm_defaultCustomContainer__2KAiO"}},1103:function(e,t,n){e.exports={defaultCustomContainer:"textFieldCustomForm_defaultCustomContainer__1ThJg"}},1104:function(e,t,n){e.exports={defaultCustomContainer:"userNameFieldCustomForm_defaultCustomContainer__3k9Wy"}},1105:function(e,t,n){e.exports={defaultCustomContainer:"ViewModeFieldCustomForm_defaultCustomContainer__tp84F"}},1106:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return getExecutionService});var _home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),loglevel__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13),loglevel__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_2__),d2_utilizr_lib_isDefined__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(75),d2_utilizr_lib_isDefined__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(d2_utilizr_lib_isDefined__WEBPACK_IMPORTED_MODULE_3__),d2_utilizr_lib_isNumber__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1107),d2_utilizr_lib_isNumber__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(d2_utilizr_lib_isNumber__WEBPACK_IMPORTED_MODULE_4__),d2_utilizr_lib_isObject__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(137),d2_utilizr_lib_isObject__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(d2_utilizr_lib_isObject__WEBPACK_IMPORTED_MODULE_5__),d2_utilizr_lib_isArray__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(111),d2_utilizr_lib_isArray__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(d2_utilizr_lib_isArray__WEBPACK_IMPORTED_MODULE_6__),d2_utilizr_lib_isString__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(102),d2_utilizr_lib_isString__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(d2_utilizr_lib_isString__WEBPACK_IMPORTED_MODULE_7__),_zScoreWFA__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1108),_OptionSetHelper_OptionSetHelper__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(438),_commonUtils_trimQuotes__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(184),_typeKeys_const__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(53);function getExecutionService(onTranslate,variableService,dateUtils){var _ruleEffectDataConver,NUMBER_OF_EVENTS_IN_SCOPE=10,programRulesContainer=!1,crossEventRulesExist=!1,lastEventId=null,lastEventDate=null,lastProgramId=null,eventScopeExceptCurrent=!1,replaceVariables=function(e,t){-1!==e.indexOf("{")&&e.match(/[A#CV]\{[\w -_.]+}/g).forEach(function(n){n=n.replace("#{","").replace("A{","").replace("C{","").replace("V{","").replace("}",""),d2_utilizr_lib_isDefined__WEBPACK_IMPORTED_MODULE_3___default()(t[n])?e=e.replace(new RegExp(t[n].variablePrefix+"\\{"+n+"\\}","g"),t[n].variableValue):loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("Expression "+e+" contains variable "+n+" - but this variable is not defined.")});-1!==e.indexOf("V{")&&e.match(/V{\w+.?\w*}/g).forEach(function(n){n=n.replace("V{","").replace("}",""),d2_utilizr_lib_isDefined__WEBPACK_IMPORTED_MODULE_3___default()(t[n])&&"V"===t[n].variablePrefix?e=e.replace(new RegExp("V{"+n+"}","g"),t[n].variableValue):loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("Expression "+e+" conains context variable "+n+" - but this variable is not defined.")});-1!==e.indexOf("A{")&&e.match(/A{\w+.?\w*}/g).forEach(function(n){n=n.replace("A{","").replace("}",""),d2_utilizr_lib_isDefined__WEBPACK_IMPORTED_MODULE_3___default()(t[n])&&"A"===t[n].variablePrefix?e=e.replace(new RegExp("A{"+n+"}","g"),t[n].variableValue):loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("Expression "+e+" conains attribute "+n+" - but this attribute is not defined.")});-1!==e.indexOf("C{")&&e.match(/C{\w+.?\w*}/g).forEach(function(n){n=n.replace("C{","").replace("}",""),d2_utilizr_lib_isDefined__WEBPACK_IMPORTED_MODULE_3___default()(t[n])&&"C"===t[n].variablePrefix?e=e.replace(new RegExp("C{"+n+"}","g"),t[n].variableValue):loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("Expression "+e+" conains constant "+n+" - but this constant is not defined.")});return e},runDhisFunctions=function(e,t,n){if(d2_utilizr_lib_isDefined__WEBPACK_IMPORTED_MODULE_3___default()(e)&&-1!==e.indexOf("d2:"))for(var a=[{name:"d2:daysBetween",parameters:2},{name:"d2:weeksBetween",parameters:2},{name:"d2:monthsBetween",parameters:2},{name:"d2:yearsBetween",parameters:2},{name:"d2:floor",parameters:1},{name:"d2:modulus",parameters:2},{name:"d2:concatenate"},{name:"d2:addDays",parameters:2},{name:"d2:zing",parameters:1},{name:"d2:oizp",parameters:1},{name:"d2:count",parameters:1},{name:"d2:countIfZeroPos",parameters:1},{name:"d2:countIfValue",parameters:2},{name:"d2:ceil",parameters:1},{name:"d2:round",parameters:1},{name:"d2:hasValue",parameters:1},{name:"d2:lastEventDate",parameters:1},{name:"d2:validatePattern",parameters:2},{name:"d2:addControlDigits",parameters:1},{name:"d2:checkControlDigits",parameters:1},{name:"d2:left",parameters:2},{name:"d2:right",parameters:2},{name:"d2:substring",parameters:3},{name:"d2:split",parameters:3},{name:"d2:zScoreWFA",parameters:3},{name:"d2:length",parameters:1}],r=!0,i=0;i<10&&r;i++){var o=!1,s=!1;a.forEach(function(a){var r=new RegExp(a.name+"\\( *(([\\d/\\*\\+\\-%. ]+)|( *'[^']*'))*( *, *(([\\d/\\*\\+\\-%. ]+)|'[^']*'))* *\\)","g"),i=e.match(r);i&&i.forEach(function(r){var i=r.replace(/(^[^\(]+\()|\)$/g,""),c=(i=i.trim()).match(/(('[^']+')|([^,]+))/g);d2_utilizr_lib_isDefined__WEBPACK_IMPORTED_MODULE_3___default()(a.parameters)&&((c?c.length:0)!==a.parameters&&(loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn(a.name+" was called with the incorrect number of parameters"),s=!0));if(!s&&d2_utilizr_lib_isDefined__WEBPACK_IMPORTED_MODULE_3___default()(c)&&null!==c)for(var l=0;l<c.length;l++)c[l]=runExpression(c[l],a.name,"parameter:"+l,n,t);if(s)e=e.replace(r,"false"),o=!0;else if("d2:daysBetween"===a.name){var u=dateUtils.daysBetween(c[0],c[1]);e=e.replace(r,u),o=!0}else if("d2:weeksBetween"===a.name){var d=dateUtils.weeksBetween(c[0],c[1]);e=e.replace(r,d),o=!0}else if("d2:monthsBetween"===a.name){var p=dateUtils.monthsBetween(c[0],c[1]);e=e.replace(r,p),o=!0}else if("d2:yearsBetween"===a.name){var f=dateUtils.yearsBetween(c[0],c[1]);e=e.replace(r,f),o=!0}else if("d2:floor"===a.name){var m=Math.floor(c[0]);e=e.replace(r,m),o=!0}else if("d2:modulus"===a.name){var h=Number(c[0])%Number(c[1]);e=e.replace(r,h),o=!0}else if("d2:concatenate"===a.name){var g="'";for(l=0;l<c.length;l++)g+=c[l];g+="'",e=e.replace(r,g),o=!0}else if("d2:addDays"===a.name){var b=dateUtils.addDays(date,daysToAdd);e=e.replace(r,b),o=!0}else if("d2:zing"===a.name){(v=c[0])<0&&(v=0),e=e.replace(r,v),o=!0}else if("d2:oizp"===a.name){var v,O=1;(v=c[0])<0&&(O=0),e=e.replace(r,O),o=!0}else if("d2:count"===a.name){var y=c[0],E=0;(_=t[y])?_.hasValue&&(E=_.allValues?_.allValues.length:1):loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("could not find variable to count: "+y),e=e.replace(r,E),o=!0}else if("d2:countIfZeroPos"===a.name){y=$filter("trimvariablequalifiers")(c[0]),E=0;if(_=t[y]){if(_.hasValue)if(_.allValues&&_.allValues.length>0)for(l=0;l<_.allValues.length;l++)_.allValues[l]>=0&&E++;else _.variableValue>=0&&(E=1)}else loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("could not find variable to countifzeropos: "+y);e=e.replace(r,E),o=!0}else if("d2:countIfValue"===a.name){y=c[0];var _=t[y],j=variableService.processValue(c[1],_.variableType);E=0;if(_){if(_.hasValue)if(_.allValues)for(l=0;l<_.allValues.length;l++)j===_.allValues[l]&&E++;else j===_.variableValue&&(E=1)}else loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("could not find variable to countifvalue: "+y);e=e.replace(r,E),o=!0}else if("d2:ceil"===a.name){var I=Math.ceil(c[0]);e=e.replace(r,I),o=!0}else if("d2:round"===a.name){var S=Math.round(c[0]);e=e.replace(r,S),o=!0}else if("d2:hasValue"===a.name){y=c[0];var C=!1;(_=t[y])?_.hasValue&&(C=!0):loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("could not find variable to check if has value: "+y),e=e.replace(r,C),o=!0}else if("d2:lastEventDate"===a.name){y=c[0],C="''";(_=t[y])?_.variableEventDate?C=variableService.processValue(_.variableEventDate,"DATE"):loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("no last event date found for variable: "+y):loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("could not find variable to check last event date: "+y),e=e.replace(r,C),o=!0}else if("d2:validatePattern"===a.name){var T=c[0].toString(),R=c[1],N=new RegExp(R,"g"),k=T.match(N),A=!1;null!==k&&T===k[0]&&(A=!0),e=e.replace(r,A),o=!0}else if("d2:addControlDigits"===a.name){var w=c[0],P=w.split(""),D=0,x=0;if(P&&P.length<10){var F=0,L=P.length,U=[3,7,6,1,8,9,4,5,2];for(l=0;l<L;l++)F+=parseInt(P[l])*U[l];D=F%11,P.push(D);var M=[5,4,3,2,7,6,5,4,3,2],V=0;for(l=0;l<L+1;l++)V+=parseInt(P[l])*M[l];x=V%11,10===D&&(loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("First control digit became 10, replacing with 0"),D=0),10===x&&(loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("Second control digit became 10, replacing with 0"),x=0)}else loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("Base nuber not well formed("+L+" digits): "+w);e=e.replace(r,w+D+x),o=!0}else if("d2:checkControlDigits"===a.name)loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("checkControlDigits not implemented yet"),e=e.replace(r,c[0]),o=!0;else if("d2:left"===a.name){var B=(H=String(c[0])).length<c[1]?H.length:c[1];g=H.substring(0,B);g=variableService.processValue(g,"TEXT"),e=e.replace(r,g),o=!0}else if("d2:right"===a.name){B=(H=String(c[0])).length<c[1]?H.length:c[1],g=H.substring(H.length-B,H.length);g=variableService.processValue(g,"TEXT"),e=e.replace(r,g),o=!0}else if("d2:substring"===a.name){var G=(H=String(c[0])).length<c[1]-1?-1:c[1],W=H.length<c[2]?-1:c[2];if(G<0||W<0)e=e.replace(r,"''"),o=!0;else{g=H.substring(G,W);g=variableService.processValue(g,"TEXT"),e=e.replace(r,g),o=!0}}else if("d2:split"===a.name){var H,z=(H=String(c[0])).split(c[1]),Y="";z.length>=c[2]&&(Y=z[c[2]]),Y=variableService.processValue(Y,"TEXT"),e=e.replace(r,Y),o=!0}else"d2:zScoreWFA"===a.name?(e=e.replace(r,Object(_zScoreWFA__WEBPACK_IMPORTED_MODULE_8__.a)(c[0],c[1],c[2])),o=!0):"d2:length"===a.name&&(e=e.replace(r,String(c[0]).length),o=!0)})}),r=!(!o||-1===e.indexOf("d2:"))}return e},runExpression=function runExpression(expression,beforereplacement,identifier,flag,variablesHash){var answer=!1;if(flag&&flag.debug)try{var dhisfunctionsevaluated=runDhisFunctions(expression,variablesHash,flag);answer=eval(dhisfunctionsevaluated),flag.verbose&&loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.info("Expression with id "+identifier+" was successfully run. Original condition was: "+beforereplacement+" - Evaluation ended up as:"+expression+" - Result of evaluation was:"+answer)}catch(e){loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("Expression with id "+identifier+" could not be run. Original condition was: "+beforereplacement+" - Evaluation ended up as:"+expression+" - error message:"+e)}else{var dhisfunctionsevaluated=runDhisFunctions(expression,variablesHash,flag);answer=eval(dhisfunctionsevaluated)}return answer},determineValueType=function(e){var t="TEXT";return"true"===e||"false"===e?t="BOOLEAN":!d2_utilizr_lib_isNumber__WEBPACK_IMPORTED_MODULE_4___default()(e)&&isNaN(e)||(t=e%1!==0?"NUMBER":"INTEGER"),t},orderRulesByPriority=function(e){return e.sort(function(e,t){return e.priority||t.priority?e.priority?t.priority?e.priority-t.priority:-1:1:0})},convertNumber=function(e){return d2_utilizr_lib_isString__WEBPACK_IMPORTED_MODULE_7___default()(e)?isNaN(e)?(loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("rule execution service could not convert "+e+" to number"),null):Number(e):e},ruleEffectDataConvertersByType=(_ruleEffectDataConver={},Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_ruleEffectDataConver,_typeKeys_const__WEBPACK_IMPORTED_MODULE_11__.a.BOOLEAN,function(e){return d2_utilizr_lib_isString__WEBPACK_IMPORTED_MODULE_7___default()(e)?"true"===e:e}),Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_ruleEffectDataConver,_typeKeys_const__WEBPACK_IMPORTED_MODULE_11__.a.INTEGER,convertNumber),Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_ruleEffectDataConver,_typeKeys_const__WEBPACK_IMPORTED_MODULE_11__.a.INTEGER_NEGATIVE,convertNumber),Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_ruleEffectDataConver,_typeKeys_const__WEBPACK_IMPORTED_MODULE_11__.a.INTEGER_POSITIVE,convertNumber),Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_ruleEffectDataConver,_typeKeys_const__WEBPACK_IMPORTED_MODULE_11__.a.INTEGER_ZERO_OR_POSITIVE,convertNumber),Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_ruleEffectDataConver,_typeKeys_const__WEBPACK_IMPORTED_MODULE_11__.a.NUMBER,convertNumber),Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.a)(_ruleEffectDataConver,_typeKeys_const__WEBPACK_IMPORTED_MODULE_11__.a.TRUE_ONLY,function(e){return!0}),_ruleEffectDataConver),convertRuleEffectDataToOutputBaseValue=function(e,t){return e||0===e||!1===e?ruleEffectDataConvertersByType[t]?ruleEffectDataConvertersByType[t](e):e:null},getRuleEffectData=function(e,t,n){var a=e.data,r=a,i=a.replace("#{","").replace("}","");return t[i]?r=t[i].variableValue:-1===a.indexOf("{")&&-1===a.indexOf("d2:")||(r=replaceVariables(a,t),r=runExpression(r,a,"action:"+e.id,n,t)),r&&d2_utilizr_lib_isString__WEBPACK_IMPORTED_MODULE_7___default()(r)&&(r=Object(_commonUtils_trimQuotes__WEBPACK_IMPORTED_MODULE_10__.a)(r)),r},buildAssignVariable=function(e,t){var n=e.variableType,a=convertRuleEffectDataToOutputBaseValue(t,n);return d2_utilizr_lib_isString__WEBPACK_IMPORTED_MODULE_7___default()(a)&&(a="'"+a+"'"),{variableValue:a,variableType:n,hasValue:!0,variableEventDate:"",variablePrefix:e.variablePrefix?e.variablePrefix:"#",allValues:[a]}},buildRuleEffect=function(e,t,n){var a={id:e.id,location:e.location,action:e.programRuleActionType,dataElementId:e.dataElementId,trackedEntityAttributeId:e.trackedEntityAttributeId,programStageId:e.programStageId,programStageSectionId:e.programStageSectionId,optionGroupId:e.optionGroupId,optionId:e.optionId,content:e.content,data:e.data?getRuleEffectData(e,t,n):e.data,ineffect:!0};if("ASSIGN"===a.action&&a.content){var r=a.content?a.content.replace("#{","").replace("A{","").replace("}",""):null,i=t[r];i?t[r]=buildAssignVariable(i,a.data):loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("Variable "+r+" was not defined.")}return a},internalExecuteRules=function(e,t,n,a,r,i,o,s,c,l){var u=e.programRules;if(0===u.length)return null;u=orderRulesByPriority(u);var d=variableService.getVariables(e,t,n,a,r,i,o,s,c);return u.map(function(e){var t,n=!1,a=e.condition;return a?(-1!==a.indexOf("{")&&(a=replaceVariables(a,d)),n=runExpression(a,e.condition,"rule:"+e.id,l,d)):loglevel__WEBPACK_IMPORTED_MODULE_2___default.a.warn("Rule id:'"+e.id+"'' and name:'"+e.name+"' had no condition specified. Please check rule configuration."),n&&(t=e.programRuleActions.map(function(e){return buildRuleEffect(e,d,l)})),t}).filter(function(e){return e}).reduce(function(e,t){return[].concat(Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(e),Object(_home_travis_build_dhis2_capture_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(t))},[])};return{executeRules:function(e,t,n,a,r,i,o,s,c,l){return e.programRules?internalExecuteRules(e,t,n,a,r,i,o,s,c,l):null},convertDataToBaseOutputValue:convertRuleEffectDataToOutputBaseValue}}},1108:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a={male:1,MALE:1,Male:1,ma:1,m:1,M:1,0:1,false:1},r={0:[2,2.4,2.8,3.2,3.7,4.2,4.8],1:[2.7,3.2,3.6,4.2,4.8,5.5,6.2],2:[3.4,3.9,4.5,5.1,5.8,6.6,7.5],3:[4,4.5,5.2,5.8,6.6,7.5,8.5],4:[4.4,5,5.7,6.4,7.3,8.2,9.3],5:[4.8,5.4,6.1,6.9,7.8,8.8,10],6:[5.1,5.7,6.5,7.3,8.2,9.3,10.6],7:[5.3,6,6.8,7.6,8.6,9.8,11.1],8:[5.6,6.3,7,7.9,9,10.2,11.6],9:[5.8,6.5,7.3,8.2,9.3,10.5,12],10:[5.9,6.7,7.5,8.5,9.6,10.9,12.4],11:[6.1,6.9,7.7,8.7,9.9,11.2,12.8],12:[6.3,7,7.9,8.9,10.1,11.5,13.1],13:[6.4,7.2,8.1,9.2,10.4,11.8,13.5],14:[6.6,7.4,8.3,9.4,10.6,12.1,13.8],15:[6.7,7.6,8.5,9.6,10.9,12.4,14.1],16:[6.9,7.7,8.7,9.8,11.1,12.6,14.5],17:[7,7.9,8.9,10,11.4,12.9,14.8],18:[7.2,8.1,9.1,10.2,11.6,13.2,15.1],19:[7.3,8.2,9.2,10.4,11.8,13.5,15.4],20:[7.5,8.4,9.4,10.6,12.1,13.7,15.7],21:[7.6,8.6,9.6,10.9,12.3,14,16],22:[7.8,8.7,9.8,11.1,12.5,14.3,16.4],23:[7.9,8.9,10,11.3,12.8,14.6,16.7],24:[8.1,9,10.2,11.5,13,14.8,17],25:[8.2,9.2,10.3,11.7,13.3,15.1,17.3],26:[8.4,9.4,10.5,11.9,13.5,15.4,17.7],27:[8.5,9.5,10.7,12.1,13.7,15.7,18],28:[8.6,9.7,10.9,12.3,14,16,18.3],29:[8.8,9.8,11.1,12.5,14.2,16.2,18.7],30:[8.9,10,11.2,12.7,14.4,16.5,19],31:[9,10.1,11.4,12.9,14.7,16.8,19.3],32:[9.1,10.3,11.6,13.1,14.9,17.1,19.6],33:[9.3,10.4,11.7,13.3,15.1,17.3,20],34:[9.4,10.5,11.9,13.5,15.4,17.6,20.3],35:[9.5,10.7,12,13.7,15.6,17.9,20.6],36:[9.6,10.8,12.2,13.9,15.8,18.1,20.9],37:[9.7,10.9,12.4,14,16,18.4,21.3],38:[9.8,11.1,12.5,14.2,16.3,18.7,21.6],39:[9.9,11.2,12.7,14.4,16.5,19,22],40:[10.1,11.3,12.8,14.6,16.7,19.2,22.3],41:[10.2,11.5,13,14.8,16.9,19.5,22.7],42:[10.3,11.6,13.1,15,17.2,19.8,23],43:[10.4,11.7,13.3,15.2,17.4,20.1,23.4],44:[10.5,11.8,13.4,15.3,17.6,20.4,23.7],45:[10.6,12,13.6,15.5,17.8,20.7,24.1],46:[10.7,12.1,13.7,15.7,18.1,20.9,24.5],47:[10.8,12.2,13.9,15.9,18.3,21.2,24.8],48:[10.9,12.3,14,16.1,18.5,21.5,25.2],49:[11,12.4,14.2,16.3,18.8,21.8,25.5],50:[11.1,12.6,14.3,16.4,19,22.1,25.9],51:[11.2,12.7,14.5,16.6,19.2,22.4,26.3],52:[11.3,12.8,14.6,16.8,19.4,22.6,26.6],53:[11.4,12.9,14.8,17,19.7,22.9,27],54:[11.5,13,14.9,17.2,19.9,23.2,27.4],55:[11.6,13.2,15.1,17.3,20.1,23.5,27.7],56:[11.7,13.3,15.2,17.5,20.3,23.8,28.1],57:[11.8,13.4,15.3,17.7,20.6,24.1,28.5],58:[11.9,13.5,15.5,17.9,20.8,24.4,28.8],59:[12,13.6,15.6,18,21,24.6,29.2],60:[12.1,13.7,15.8,18.2,21.2,24.9,29.5]},i={0:[2.1,2.5,2.9,3.3,3.9,4.4,5],1:[2.9,3.4,3.9,4.5,5.1,5.8,6.6],2:[3.8,4.3,4.9,5.6,6.3,7.1,8],3:[4.4,5,5.7,6.4,7.2,8,9],4:[4.9,5.6,6.2,7,7.8,8.7,9.7],5:[5.3,6,6.7,7.5,8.4,9.3,10.4],6:[5.7,6.4,7.1,7.9,8.8,9.8,10.9],7:[5.9,6.7,7.4,8.3,9.2,10.3,11.4],8:[6.2,6.9,7.7,8.6,9.6,10.7,11.9],9:[6.4,7.1,8,8.9,9.9,11,12.3],10:[6.6,7.4,8.2,9.2,10.2,11.4,12.7],11:[6.8,7.6,8.4,9.4,10.5,11.7,13],12:[6.9,7.7,8.6,9.6,10.8,12,13.3],13:[7.1,7.9,8.8,9.9,11,12.3,13.7],14:[7.2,8.1,9,10.1,11.3,12.6,14],15:[7.4,8.3,9.2,10.3,11.5,12.8,14.3],16:[7.5,8.4,9.4,10.5,11.7,13.1,14.6],17:[7.7,8.6,9.6,10.7,12,13.4,14.9],18:[7.8,8.8,9.8,10.9,12.2,13.7,15.3],19:[8,8.9,10,11.1,12.5,13.9,15.6],20:[8.1,9.1,10.1,11.3,12.7,14.2,15.9],21:[8.2,9.2,10.3,11.5,12.9,14.5,16.2],22:[8.4,9.4,10.5,11.8,13.2,14.7,16.5],23:[8.5,9.5,10.7,12,13.4,15,16.8],24:[8.6,9.7,10.8,12.2,13.6,15.3,17.1],25:[8.8,9.8,11,12.4,13.9,15.5,17.5],26:[8.9,10,11.2,12.5,14.1,15.8,17.8],27:[9,10.1,11.3,12.7,14.3,16.1,18.1],28:[9.1,10.2,11.5,12.9,14.5,16.3,18.4],29:[9.2,10.4,11.7,13.1,14.8,16.6,18.7],30:[9.4,10.5,11.8,13.3,15,16.9,19],31:[9.5,10.7,12,13.5,15.2,17.1,19.3],32:[9.6,10.8,12.1,13.7,15.4,17.4,19.6],33:[9.7,10.9,12.3,13.8,15.6,17.6,19.9],34:[9.8,11,12.4,14,15.8,17.8,20.2],35:[9.9,11.2,12.6,14.2,16,18.1,20.4],36:[10,11.3,12.7,14.3,16.2,18.3,20.7],37:[10.1,11.4,12.9,14.5,16.4,18.6,21],38:[10.2,11.5,13,14.7,16.6,18.8,21.3],39:[10.3,11.6,13.1,14.8,16.8,19,21.6],40:[10.4,11.8,13.3,15,17,19.3,21.9],41:[10.5,11.9,13.4,15.2,17.2,19.5,22.1],42:[10.6,12,13.6,15.3,17.4,19.7,22.4],43:[10.7,12.1,13.7,15.5,17.6,20,22.7],44:[10.8,12.2,13.8,15.7,17.8,20.2,23],45:[10.9,12.4,14,15.8,18,20.5,23.3],46:[11,12.5,14.1,16,18.2,20.7,23.6],47:[11.1,12.6,14.3,16.2,18.4,20.9,23.9],48:[11.2,12.7,14.4,16.3,18.6,21.2,24.2],49:[11.3,12.8,14.5,16.5,18.8,21.4,24.5],50:[11.4,12.9,14.7,16.7,19,21.7,24.8],51:[11.5,13.1,14.8,16.8,19.2,21.9,25.1],52:[11.6,13.2,15,17,19.4,22.2,25.4],53:[11.7,13.3,15.1,17.2,19.6,22.4,25.7],54:[11.8,13.4,15.2,17.3,19.8,22.7,26],55:[11.9,13.5,15.4,17.5,20,22.9,26.3],56:[12,13.6,15.5,17.7,20.2,23.2,26.6],57:[12.1,13.7,15.6,17.8,20.4,23.4,26.9],58:[12.2,13.8,15.8,18,20.6,23.7,27.2],59:[12.3,14,15.9,18.2,20.8,23.9,27.6],60:[12.4,14.1,16,18.3,21,24.2,27.9]};function o(e,t,n){var o=r;1===a[n]&&(o=i);var s=o[Number(e)];if(t<s[0])return-3.5;if(t>s[6])return 3.5;var c=function(e,t){for(var n,a,r=0;r<7;r++)if(!(e>=t[r]&&(n=r,e>t[r]))){a=r;break}return{lowerLimitIn:n,higherLimitIn:a}}(t,s),l=c.higherLimitIn,u=c.lowerLimitIn,d=s[l]-s[u],p=s[l]-t;return(l-3-(d>0?p/d:0)).toFixed(2)}},1109:function(e,t,n){e.exports={fieldLabelMediaBased:"enrollment_fieldLabelMediaBased__3YEY0"}},1110:function(e,t,n){e.exports={fieldLabelMediaBased:"trackedEntityInstance_fieldLabelMediaBased__1p2kP"}},1116:function(e,t,n){e.exports={booleanLabel:"viewEventDataEntryFieldLabels_booleanLabel__10B8J",trueOnlyLabel:"viewEventDataEntryFieldLabels_trueOnlyLabel__3cqEx",noteLabel:"viewEventDataEntryFieldLabels_noteLabel__2Jm54",textLabel:"viewEventDataEntryFieldLabels_textLabel__3m3cP",ageLabel:"viewEventDataEntryFieldLabels_ageLabel__3bsig",coordinateLabel:"viewEventDataEntryFieldLabels_coordinateLabel__392KM",polygonLabel:"viewEventDataEntryFieldLabels_polygonLabel__131NA",dateLabel:"viewEventDataEntryFieldLabels_dateLabel__16LeY",dateTimeLabel:"viewEventDataEntryFieldLabels_dateTimeLabel__32KuY",imageLabel:"viewEventDataEntryFieldLabels_imageLabel__131uG",fileLabel:"viewEventDataEntryFieldLabels_fileLabel__3Oljl",orgUnitLabel:"viewEventDataEntryFieldLabels_orgUnitLabel__2b0fM",defaultViewLabel:"viewEventDataEntryFieldLabels_defaultViewLabel__2cEYk"}},127:function(e,t,n){"use strict";t.a={prod:"production",dev:"development",test:"test",devDebug:"dev-debug"}},140:function(e,t,n){e.exports={container:"polygonField_container__3oQkC",statusContainer:"polygonField_statusContainer__1j0z-",mapIcon:"polygonField_mapIcon__2i-qm",statusText:"polygonField_statusText__k6Roe",checkIcon:"polygonField_checkIcon__2vpgF",dialogActionOuterContainer:"polygonField_dialogActionOuterContainer__u9Goe",dialogActionInnerContainer:"polygonField_dialogActionInnerContainer__3w3vo",mapContainer:"polygonField_mapContainer__1XYaY",map:"polygonField_map__11WB0",dialogContent:"polygonField_dialogContent__3jo6F"}},16:function(e,t,n){"use strict";var a=n(41),r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return t.reduce(function(e,t){return t.apply(void 0,[e].concat(a))},e)}},i=function(e){var t=!1;return{promise:new Promise(function(n,a){e.then(function(e){return t?a({isCanceled:!0}):n(e)},function(e){return a(t?{isCanceled:!0}:e)})}),cancel:function(){t=!0}}};function o(e,t){return e&&0!==e.length?!t||t<1?[e]:function(e,t,n){for(var a=[],r=0,i=0;r<e;r+=1,i+=n)a[r]=t.slice(i,i+n);return a}(Math.ceil(e.length/t),e,t):[]}n(5);n.d(t,"b",function(){return a.a}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o})},184:function(e,t,n){"use strict";function a(e){for(var t=!1,n=e;!t;){var a=n;n=(n=n.replace(/^'/,"").replace(/'$/,"")).replace(/^"/,"").replace(/"$/,""),a.length===n.length&&(t=!0)}return n}n.d(t,"a",function(){return a})},195:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(5),r=n(4),i=n(0),o=n(1076),s=function(){function e(t){Object(a.a)(this,e),this.transformNode=function(e,t,n){if("input"===e.name){var a=e.attribs&&e.attribs.id,r=a&&/-[^-]+/.exec(a);if(r){var o=r[0].replace("-",""),s=n(e,t),c={id:a,style:s.props&&s.props.style,className:s.props&&s.props.className};return i.createElement("FormField",{customFormElementProps:c,id:o})}}},this._id="",t&&t(this)}return Object(r.a)(e,[{key:"id",set:function(e){this._id=e},get:function(){return this._id}},{key:"data",set:function(e){var t=Object(o.parseHtml)(e,{onTransform:this.transformNode,allowScript:!0});this._data=t},get:function(){return this._data}}]),e}()},206:function(e,t,n){e.exports={input:"singleSelectBox_input__1Zrx9",iconContainer:"singleSelectBox_iconContainer__3OPYp",iconFocusContainer:"singleSelectBox_iconFocusContainer__3oaYC",label:"singleSelectBox_label__1O330",name:"singleSelectBox_name__NXvPQ",inFocus:"singleSelectBox_inFocus__1K0EV","focus-pulsate":"singleSelectBox_focus-pulsate__1oHtv",labelDisabled:"singleSelectBox_labelDisabled__2Sc3k"}},256:function(e,t,n){e.exports={container:"ageField_container__3fJcP",containerVertical:"ageField_containerVertical__2CE5f",containerHorizontal:"ageField_containerHorizontal__3yYZP",ageNumberInputContainer:"ageField_ageNumberInputContainer__1h9Hq",ageDateInputContainerHorizontal:"ageField_ageDateInputContainerHorizontal__2AZUO",ageClearHorizontal:"ageField_ageClearHorizontal__39CWV"}},257:function(e,t,n){e.exports={container:"withLabel_container__3Cump",containerVertical:"withLabel_containerVertical__1_7Ph",labelContainer:"withLabel_labelContainer__3zr5W",labelContainerVertical:"withLabel_labelContainerVertical__FS1cE",inputContainer:"withLabel_inputContainer__QUgb0"}},317:function(e,t,n){e.exports={input:"textInput_input__ds2wD",inputWrapper:"textInput_inputWrapper__1MKHf",textArea:"textInput_textArea__Svl82"}},324:function(e,t,n){e.exports={containerAbsolute:"datePopup_containerAbsolute__2B9uo",calendarAbsolute:"datePopup_calendarAbsolute__2r7gO"}},325:function(e,t,n){e.exports={containerHorizontal:"singleSelectionBoxes_containerHorizontal__1zV1v",containerVertical:"singleSelectionBoxes_containerVertical__13cIB",optionContainerHorizontal:"singleSelectionBoxes_optionContainerHorizontal__1VV6f",optionContainerVertical:"singleSelectionBoxes_optionContainerVertical__3lwWT",disabledIcon:"singleSelectionBoxes_disabledIcon__3q8eE"}},327:function(e,t,n){e.exports={container:"selected_container__ap2Si",chipContainer:"selected_chipContainer__1Vdht",input:"selected_input__32p4K",inputContainer:"selected_inputContainer__1i4Fx"}},328:function(e,t,n){e.exports={booleanLabel:"dataEntryFieldLabels_booleanLabel__3f6q0",trueOnlyLabel:"dataEntryFieldLabels_trueOnlyLabel__33SvC",noteLabel:"dataEntryFieldLabels_noteLabel__1bTp6",textLabel:"dataEntryFieldLabels_textLabel__3jiBV",ageLabel:"dataEntryFieldLabels_ageLabel__3ggJ_",coordinateLabel:"dataEntryFieldLabels_coordinateLabel__30luq",polygonLabel:"dataEntryFieldLabels_polygonLabel__3wUex",dateLabel:"dataEntryFieldLabels_dateLabel__StF4b",dateTimeLabel:"dataEntryFieldLabels_dateTimeLabel__7i_PB",imageLabel:"dataEntryFieldLabels_imageLabel__2eMYd",fileLabel:"dataEntryFieldLabels_fileLabel__1KwqS",orgUnitLabel:"dataEntryFieldLabels_orgUnitLabel__3XQFX"}},329:function(e,t,n){e.exports={booleanLabel:"fieldLabels_booleanLabel__2h4s1",trueOnlyLabel:"fieldLabels_trueOnlyLabel__2AXjc",noteLabel:"fieldLabels_noteLabel__1Q8eH",textLabel:"fieldLabels_textLabel__8zqci",ageLabel:"fieldLabels_ageLabel__28quC",coordinateLabel:"fieldLabels_coordinateLabel__2TYfu",polygonLabel:"fieldLabels_polygonLabel__nBBf6",dateLabel:"fieldLabels_dateLabel__3Ic7u",dateTimeLabel:"fieldLabels_dateTimeLabel__Fwt-H",imageLabel:"fieldLabels_imageLabel__3fcZo",fileLabel:"fieldLabels_fileLabel__oyoTh",orgUnitLabel:"fieldLabels_orgUnitLabel__21Rqy"}},330:function(e,t,n){e.exports={booleanLabel:"dataEntryFieldLabels_booleanLabel__3AS-_",trueOnlyLabel:"dataEntryFieldLabels_trueOnlyLabel__nZ9WA",noteLabel:"dataEntryFieldLabels_noteLabel__3Rbrn",textLabel:"dataEntryFieldLabels_textLabel__3OQWc",ageLabel:"dataEntryFieldLabels_ageLabel__1wkeF",coordinateLabel:"dataEntryFieldLabels_coordinateLabel__2pREh",polygonLabel:"dataEntryFieldLabels_polygonLabel__3ULxn",dateLabel:"dataEntryFieldLabels_dateLabel__8LmlJ",dateTimeLabel:"dataEntryFieldLabels_dateTimeLabel__YXXLp",imageLabel:"dataEntryFieldLabels_imageLabel__1_PkI",fileLabel:"dataEntryFieldLabels_fileLabel__LPfZK",orgUnitLabel:"dataEntryFieldLabels_orgUnitLabel__uTm18"}},36:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m}),n.d(t,"b",function(){return h});var a=n(2),r=n(75),i=n.n(r),o=n(111),s=n.n(o),c=n(13),l=n.n(c),u=n(127);var d=function(e){return function(t,n){return function(e,t,n,a){return i()(e)&&null!==e||(e=a),n[t.type]?n[t.type](e,t):e}(t,n,e.updaters,e.initValue)}},p=function(e){var t=function(e){return function(t,n){l.a.trace("Updater for ".concat(n.type," started in ").concat(e.name,". \n                Starting state is: ").concat(JSON.stringify(t)))}}(e),n=function(e){return function(t,n){l.a.trace("Updater for ".concat(n.type," executed in ").concat(e.name,". \n                New state is: ").concat(JSON.stringify(t)))}}(e);return function(r,o){var s=function(e){var t=e.meta&&e.meta.skipLogging&&e.meta.skipLogging.reduce(function(e,t){return e[t]=null,e},{});return Object(a.a)({},e,{payload:Object(a.a)({},e.payload,t)})}(o);l.a.trace("reducer ".concat(e.name," starting. Action is: ").concat(JSON.stringify(s)));var c=function(e,t,n,a,r,o){if(i()(e)&&null!==e||(e=a),n[t.type]){r(e,t);var s=n[t.type](e,t);return o(e,t),s}return e}(r,o,e.updaters,e.initValue,t,n);return l.a.trace("reducer ".concat(e.name," finished")),c}};function f(t){var n=(e&&Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_DHIS2_BASE_URL:"..",REACT_APP_DHIS2_AUTHORIZATION:"",REACT_APP_TRACKER_CAPTURE_APP_PATH:"../dhis-web-tracker-capture",REACT_APP_CACHE_VERSION:"1",REACT_APP_VERSION:"33.1.0"})&&"production")===u.a.prod?d(t):p(t);return t.reducerWrappers&&(n=function(e,t){return s()(t)?t.reduceRight(function(e,t){return t(e)},e):t(e)}(n,t.reducerWrappers)),n}function m(e){return e.reduce(function(e,t){return e[t.name]=f(t),e},{})}function h(e,t){return{initValue:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},name:t,updaters:e,reducerWrappers:arguments.length>3?arguments[3]:void 0}}}).call(this,n(861))},41:function(e,t,n){"use strict";var a=n(2),r=function(e){return function(t){return Object(a.a)({},t,{message:e})}};n.d(t,"a",function(){return r})},438:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(5),r=n(4),i=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"getCode",value:function(e,t){if(e){var n=e.find(function(e){return e.displayName===t});return n&&n.code||t}return t}},{key:"getName",value:function(e,t){if(e){var n=e.find(function(e){return e.code===t});return n&&n.displayName||t}return t}}]),e}()},443:function(e,t,n){e.exports={label:"shrinkLabel_label__36OfO",labelUnshrinked:"shrinkLabel_labelUnshrinked__1UpsD",labelShrinked:"shrinkLabel_labelShrinked__LxOYT"}},444:function(e,t,n){e.exports={fieldsContainer:"dateTime_fieldsContainer__36n7Y",fieldsContainerVertical:"dateTime_fieldsContainerVertical__1MbUi",formControl:"dateTime_formControl__62gFJ",root:"dateTime_root__3eYC5"}},445:function(e,t,n){e.exports={container:"textRangeField_container__1BXo6"}},446:function(e,t,n){e.exports={container:"dateRangeField_container__3_YtY"}},447:function(e,t,n){},448:function(e,t,n){e.exports={suggestion:"searchSuggestion_suggestion__1mQov",suggestionInUpList:"searchSuggestion_suggestionInUpList__1Kru-"}},53:function(e,t,n){"use strict";t.a={TEXT:"TEXT",LONG_TEXT:"LONG_TEXT",LETTER:"LETTER",PHONE_NUMBER:"PHONE_NUMBER",EMAIL:"EMAIL",BOOLEAN:"BOOLEAN",TRUE_ONLY:"TRUE_ONLY",DATE:"DATE",DATETIME:"DATETIME",TIME:"TIME",NUMBER:"NUMBER",INTEGER:"INTEGER",INTEGER_POSITIVE:"INTEGER_POSITIVE",INTEGER_NEGATIVE:"INTEGER_NEGATIVE",INTEGER_ZERO_OR_POSITIVE:"INTEGER_ZERO_OR_POSITIVE",PERCENTAGE:"PERCENTAGE",URL:"URL",AGE:"AGE",ORGANISATION_UNIT:"ORGANISATION_UNIT",COORDINATE:"COORDINATE",USERNAME:"USERNAME"}},6546:function(e,t,n){e.exports=n(7583)},6547:function(e,t){Object.defineProperty(Array.prototype,"toHashMap",{enumerable:!1,value:function(e){return this.reduce(function(t,n){return t[n[e]]=n,t},{})}})},66:function(e,t,n){e.exports={booleanLabel:"buildField_booleanLabel__3dor9",trueOnlyLabel:"buildField_trueOnlyLabel__2-zcY",textLabel:"buildField_textLabel__1cDlu",ageLabel:"buildField_ageLabel__ZsDnV",coordinateLabel:"buildField_coordinateLabel__1cOeH",polygonLabel:"buildField_polygonLabel__16JAW",dateLabel:"buildField_dateLabel__sZrrS",dateTimeLabel:"buildField_dateTimeLabel__Kz7L7",imageLabel:"buildField_imageLabel__23Idm",fileLabel:"buildField_fileLabel__jaDN8",orgUnitLabel:"buildField_orgUnitLabel__3fJto",optionSetBoxesLabel:"buildField_optionSetBoxesLabel__Gtc5V"}},6616:function(e,t,n){},6695:function(e,t){},6806:function(e,t,n){},6812:function(e,t,n){},6842:function(e,t,n){},6851:function(e,t,n){},6929:function(e,t,n){},7011:function(e,t,n){},7012:function(e,t,n){},7020:function(e,t,n){},723:function(e,t,n){e.exports={labelContainer:"label_labelContainer__2KYIy",labelContainerVertical:"label_labelContainerVertical__1_ahS"}},724:function(e,t,n){e.exports={container:"searchSuggestions_container__3gTLR",list:"searchSuggestions_list__HFH3z"}},725:function(e,t,n){e.exports={listUp:"searchSuggestionsUp_listUp__27TJr",listUpInner:"searchSuggestionsUp_listUpInner__gjdQu"}},7581:function(e,t,n){var a={"./af":[1166,135],"./af.js":[1166,135],"./ar":[548],"./ar-dz":[1167,136],"./ar-dz.js":[1167,136],"./ar-kw":[1168,137],"./ar-kw.js":[1168,137],"./ar-ly":[1169,138],"./ar-ly.js":[1169,138],"./ar-ma":[1170,139],"./ar-ma.js":[1170,139],"./ar-sa":[1171,140],"./ar-sa.js":[1171,140],"./ar-tn":[1172,141],"./ar-tn.js":[1172,141],"./ar.js":[548],"./az":[1173,142],"./az.js":[1173,142],"./be":[1174,143],"./be.js":[1174,143],"./bg":[1175,144],"./bg.js":[1175,144],"./bm":[1176,145],"./bm.js":[1176,145],"./bn":[1177,146],"./bn.js":[1177,146],"./bo":[1178,147],"./bo.js":[1178,147],"./br":[1179,148],"./br.js":[1179,148],"./bs":[1180,149],"./bs.js":[1180,149],"./ca":[1181,150],"./ca.js":[1181,150],"./cs":[1182,151],"./cs.js":[1182,151],"./cv":[1183,152],"./cv.js":[1183,152],"./cy":[1184,153],"./cy.js":[1184,153],"./da":[1185,154],"./da.js":[1185,154],"./de":[1188,157],"./de-at":[1186,155],"./de-at.js":[1186,155],"./de-ch":[1187,156],"./de-ch.js":[1187,156],"./de.js":[1188,157],"./dv":[1189,158],"./dv.js":[1189,158],"./el":[1190,159],"./el.js":[1190,159],"./en-au":[1191,160],"./en-au.js":[1191,160],"./en-ca":[1192,161],"./en-ca.js":[1192,161],"./en-gb":[1193,162],"./en-gb.js":[1193,162],"./en-ie":[1194,163],"./en-ie.js":[1194,163],"./en-il":[1195,164],"./en-il.js":[1195,164],"./en-nz":[1196,165],"./en-nz.js":[1196,165],"./eo":[1197,166],"./eo.js":[1197,166],"./es":[549],"./es-do":[1198,167],"./es-do.js":[1198,167],"./es-us":[1199,168],"./es-us.js":[1199,168],"./es.js":[549],"./et":[1200,169],"./et.js":[1200,169],"./eu":[1201,170],"./eu.js":[1201,170],"./fa":[1202,171],"./fa.js":[1202,171],"./fi":[1203,172],"./fi.js":[1203,172],"./fo":[1204,173],"./fo.js":[1204,173],"./fr":[550],"./fr-ca":[1205,174],"./fr-ca.js":[1205,174],"./fr-ch":[1206,175],"./fr-ch.js":[1206,175],"./fr.js":[550],"./fy":[1207,176],"./fy.js":[1207,176],"./gd":[1208,177],"./gd.js":[1208,177],"./gl":[1209,178],"./gl.js":[1209,178],"./gom-latn":[1210,179],"./gom-latn.js":[1210,179],"./gu":[1211,180],"./gu.js":[1211,180],"./he":[1212,181],"./he.js":[1212,181],"./hi":[1213,182],"./hi.js":[1213,182],"./hr":[1214,183],"./hr.js":[1214,183],"./hu":[1215,184],"./hu.js":[1215,184],"./hy-am":[1216,185],"./hy-am.js":[1216,185],"./id":[1217,186],"./id.js":[1217,186],"./is":[1218,187],"./is.js":[1218,187],"./it":[1219,188],"./it.js":[1219,188],"./ja":[1220,189],"./ja.js":[1220,189],"./jv":[1221,190],"./jv.js":[1221,190],"./ka":[1222,191],"./ka.js":[1222,191],"./kk":[1223,192],"./kk.js":[1223,192],"./km":[1224,193],"./km.js":[1224,193],"./kn":[1225,194],"./kn.js":[1225,194],"./ko":[1226,195],"./ko.js":[1226,195],"./ky":[1227,196],"./ky.js":[1227,196],"./lb":[1228,197],"./lb.js":[1228,197],"./lo":[551],"./lo.js":[551],"./lt":[1229,198],"./lt.js":[1229,198],"./lv":[1230,199],"./lv.js":[1230,199],"./me":[1231,200],"./me.js":[1231,200],"./mi":[1232,201],"./mi.js":[1232,201],"./mk":[1233,202],"./mk.js":[1233,202],"./ml":[1234,203],"./ml.js":[1234,203],"./mn":[1235,204],"./mn.js":[1235,204],"./mr":[1236,205],"./mr.js":[1236,205],"./ms":[1238,207],"./ms-my":[1237,206],"./ms-my.js":[1237,206],"./ms.js":[1238,207],"./mt":[1239,208],"./mt.js":[1239,208],"./my":[1240,209],"./my.js":[1240,209],"./nb":[1241,210],"./nb.js":[1241,210],"./ne":[1242,211],"./ne.js":[1242,211],"./nl":[1244,213],"./nl-be":[1243,212],"./nl-be.js":[1243,212],"./nl.js":[1244,213],"./nn":[1245,214],"./nn.js":[1245,214],"./pa-in":[1246,215],"./pa-in.js":[1246,215],"./pl":[1247,216],"./pl.js":[1247,216],"./pt":[552],"./pt-br":[1248,217],"./pt-br.js":[1248,217],"./pt.js":[552],"./ro":[1249,218],"./ro.js":[1249,218],"./ru":[553],"./ru.js":[553],"./sd":[1250,219],"./sd.js":[1250,219],"./se":[1251,220],"./se.js":[1251,220],"./si":[1252,221],"./si.js":[1252,221],"./sk":[1253,222],"./sk.js":[1253,222],"./sl":[1254,223],"./sl.js":[1254,223],"./sq":[1255,224],"./sq.js":[1255,224],"./sr":[1257,226],"./sr-cyrl":[1256,225],"./sr-cyrl.js":[1256,225],"./sr.js":[1257,226],"./ss":[1258,227],"./ss.js":[1258,227],"./sv":[1259,228],"./sv.js":[1259,228],"./sw":[1260,229],"./sw.js":[1260,229],"./ta":[1261,230],"./ta.js":[1261,230],"./te":[1262,231],"./te.js":[1262,231],"./tet":[1263,232],"./tet.js":[1263,232],"./tg":[1264,233],"./tg.js":[1264,233],"./th":[1265,234],"./th.js":[1265,234],"./tl-ph":[1266,235],"./tl-ph.js":[1266,235],"./tlh":[1267,236],"./tlh.js":[1267,236],"./tr":[1268,237],"./tr.js":[1268,237],"./tzl":[1269,238],"./tzl.js":[1269,238],"./tzm":[1271,240],"./tzm-latn":[1270,239],"./tzm-latn.js":[1270,239],"./tzm.js":[1271,240],"./ug-cn":[1272,241],"./ug-cn.js":[1272,241],"./uk":[554],"./uk.js":[554],"./ur":[555],"./ur.js":[555],"./uz":[1274,243],"./uz-latn":[1273,242],"./uz-latn.js":[1273,242],"./uz.js":[1274,243],"./vi":[556],"./vi.js":[556],"./x-pseudo":[1275,244],"./x-pseudo.js":[1275,244],"./yo":[1276,245],"./yo.js":[1276,245],"./zh-cn":[1277,246],"./zh-cn.js":[1277,246],"./zh-hk":[1278,247],"./zh-hk.js":[1278,247],"./zh-tw":[1279,248],"./zh-tw.js":[1279,248]};function r(e){if(!n.o(a,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then(function(){return n.t(r,7)})}r.keys=function(){return Object.keys(a)},r.id=7581,e.exports=r},7582:function(e,t,n){var a={"./_lib/build_formatting_tokens_reg_exp":[258,7],"./_lib/build_formatting_tokens_reg_exp/":[258,7],"./_lib/build_formatting_tokens_reg_exp/index":[258,7],"./_lib/build_formatting_tokens_reg_exp/index.js":[258,7],"./_lib/package":[1280,3,99],"./_lib/package.json":[1280,3,99],"./ar":[515,7,0],"./ar/":[515,7,0],"./ar/build_distance_in_words_locale":[449,7,33],"./ar/build_distance_in_words_locale/":[449,7,33],"./ar/build_distance_in_words_locale/index":[449,7,33],"./ar/build_distance_in_words_locale/index.js":[449,7,33],"./ar/build_format_locale":[450,7,34],"./ar/build_format_locale/":[450,7,34],"./ar/build_format_locale/index":[450,7,34],"./ar/build_format_locale/index.js":[450,7,34],"./ar/index":[515,7,0],"./ar/index.js":[515,7,0],"./ar/package":[1281,3,100],"./ar/package.json":[1281,3,100],"./bg":[516,7,1],"./bg/":[516,7,1],"./bg/build_distance_in_words_locale":[451,7,35],"./bg/build_distance_in_words_locale/":[451,7,35],"./bg/build_distance_in_words_locale/index":[451,7,35],"./bg/build_distance_in_words_locale/index.js":[451,7,35],"./bg/build_format_locale":[452,7,36],"./bg/build_format_locale/":[452,7,36],"./bg/build_format_locale/index":[452,7,36],"./bg/build_format_locale/index.js":[452,7,36],"./bg/index":[516,7,1],"./bg/index.js":[516,7,1],"./bg/package":[1282,3,101],"./bg/package.json":[1282,3,101],"./ca":[517,7,2],"./ca/":[517,7,2],"./ca/build_distance_in_words_locale":[453,7,37],"./ca/build_distance_in_words_locale/":[453,7,37],"./ca/build_distance_in_words_locale/index":[453,7,37],"./ca/build_distance_in_words_locale/index.js":[453,7,37],"./ca/build_format_locale":[454,7,38],"./ca/build_format_locale/":[454,7,38],"./ca/build_format_locale/index":[454,7,38],"./ca/build_format_locale/index.js":[454,7,38],"./ca/index":[517,7,2],"./ca/index.js":[517,7,2],"./ca/package":[1283,3,102],"./ca/package.json":[1283,3,102],"./cs":[518,7,3],"./cs/":[518,7,3],"./cs/build_distance_in_words_locale":[455,7,39],"./cs/build_distance_in_words_locale/":[455,7,39],"./cs/build_distance_in_words_locale/index":[455,7,39],"./cs/build_distance_in_words_locale/index.js":[455,7,39],"./cs/build_format_locale":[456,7,40],"./cs/build_format_locale/":[456,7,40],"./cs/build_format_locale/index":[456,7,40],"./cs/build_format_locale/index.js":[456,7,40],"./cs/index":[518,7,3],"./cs/index.js":[518,7,3],"./cs/package":[1284,3,103],"./cs/package.json":[1284,3,103],"./da":[519,7,4],"./da/":[519,7,4],"./da/build_distance_in_words_locale":[457,7,41],"./da/build_distance_in_words_locale/":[457,7,41],"./da/build_distance_in_words_locale/index":[457,7,41],"./da/build_distance_in_words_locale/index.js":[457,7,41],"./da/build_format_locale":[458,7,42],"./da/build_format_locale/":[458,7,42],"./da/build_format_locale/index":[458,7,42],"./da/build_format_locale/index.js":[458,7,42],"./da/index":[519,7,4],"./da/index.js":[519,7,4],"./da/package":[1285,3,104],"./da/package.json":[1285,3,104],"./de":[520,7,5],"./de/":[520,7,5],"./de/build_distance_in_words_locale":[459,7,43],"./de/build_distance_in_words_locale/":[459,7,43],"./de/build_distance_in_words_locale/index":[459,7,43],"./de/build_distance_in_words_locale/index.js":[459,7,43],"./de/build_format_locale":[460,7,44],"./de/build_format_locale/":[460,7,44],"./de/build_format_locale/index":[460,7,44],"./de/build_format_locale/index.js":[460,7,44],"./de/index":[520,7,5],"./de/index.js":[520,7,5],"./de/package":[1286,3,105],"./de/package.json":[1286,3,105],"./el":[521,7,6],"./el/":[521,7,6],"./el/build_distance_in_words_locale":[461,7,45],"./el/build_distance_in_words_locale/":[461,7,45],"./el/build_distance_in_words_locale/index":[461,7,45],"./el/build_distance_in_words_locale/index.js":[461,7,45],"./el/build_format_locale":[462,7,46],"./el/build_format_locale/":[462,7,46],"./el/build_format_locale/index":[462,7,46],"./el/build_format_locale/index.js":[462,7,46],"./el/index":[521,7,6],"./el/index.js":[521,7,6],"./el/package":[1287,3,106],"./el/package.json":[1287,3,106],"./en":[282,7],"./en/":[282,7],"./en/build_distance_in_words_locale":[283,7],"./en/build_distance_in_words_locale/":[283,7],"./en/build_distance_in_words_locale/index":[283,7],"./en/build_distance_in_words_locale/index.js":[283,7],"./en/build_format_locale":[284,7],"./en/build_format_locale/":[284,7],"./en/build_format_locale/index":[284,7],"./en/build_format_locale/index.js":[284,7],"./en/index":[282,7],"./en/index.js":[282,7],"./en/package":[1288,3,107],"./en/package.json":[1288,3,107],"./eo":[522,7,7],"./eo/":[522,7,7],"./eo/build_distance_in_words_locale":[463,7,47],"./eo/build_distance_in_words_locale/":[463,7,47],"./eo/build_distance_in_words_locale/index":[463,7,47],"./eo/build_distance_in_words_locale/index.js":[463,7,47],"./eo/build_format_locale":[464,7,48],"./eo/build_format_locale/":[464,7,48],"./eo/build_format_locale/index":[464,7,48],"./eo/build_format_locale/index.js":[464,7,48],"./eo/index":[522,7,7],"./eo/index.js":[522,7,7],"./eo/package":[1289,3,108],"./eo/package.json":[1289,3,108],"./es":[523,7,8],"./es/":[523,7,8],"./es/build_distance_in_words_locale":[465,7,49],"./es/build_distance_in_words_locale/":[465,7,49],"./es/build_distance_in_words_locale/index":[465,7,49],"./es/build_distance_in_words_locale/index.js":[465,7,49],"./es/build_format_locale":[466,7,50],"./es/build_format_locale/":[466,7,50],"./es/build_format_locale/index":[466,7,50],"./es/build_format_locale/index.js":[466,7,50],"./es/index":[523,7,8],"./es/index.js":[523,7,8],"./es/package":[1290,3,109],"./es/package.json":[1290,3,109],"./fi":[524,7,9],"./fi/":[524,7,9],"./fi/build_distance_in_words_locale":[467,7,51],"./fi/build_distance_in_words_locale/":[467,7,51],"./fi/build_distance_in_words_locale/index":[467,7,51],"./fi/build_distance_in_words_locale/index.js":[467,7,51],"./fi/build_format_locale":[468,7,52],"./fi/build_format_locale/":[468,7,52],"./fi/build_format_locale/index":[468,7,52],"./fi/build_format_locale/index.js":[468,7,52],"./fi/index":[524,7,9],"./fi/index.js":[524,7,9],"./fi/package":[1291,3,110],"./fi/package.json":[1291,3,110],"./fil":[525,7,10],"./fil/":[525,7,10],"./fil/build_distance_in_words_locale":[469,7,53],"./fil/build_distance_in_words_locale/":[469,7,53],"./fil/build_distance_in_words_locale/index":[469,7,53],"./fil/build_distance_in_words_locale/index.js":[469,7,53],"./fil/build_format_locale":[470,7,54],"./fil/build_format_locale/":[470,7,54],"./fil/build_format_locale/index":[470,7,54],"./fil/build_format_locale/index.js":[470,7,54],"./fil/index":[525,7,10],"./fil/index.js":[525,7,10],"./fil/package":[1292,3,111],"./fil/package.json":[1292,3,111],"./fr":[526,7,11],"./fr/":[526,7,11],"./fr/build_distance_in_words_locale":[471,7,55],"./fr/build_distance_in_words_locale/":[471,7,55],"./fr/build_distance_in_words_locale/index":[471,7,55],"./fr/build_distance_in_words_locale/index.js":[471,7,55],"./fr/build_format_locale":[472,7,56],"./fr/build_format_locale/":[472,7,56],"./fr/build_format_locale/index":[472,7,56],"./fr/build_format_locale/index.js":[472,7,56],"./fr/index":[526,7,11],"./fr/index.js":[526,7,11],"./fr/package":[1293,3,112],"./fr/package.json":[1293,3,112],"./hr":[527,7,12],"./hr/":[527,7,12],"./hr/build_distance_in_words_locale":[473,7,57],"./hr/build_distance_in_words_locale/":[473,7,57],"./hr/build_distance_in_words_locale/index":[473,7,57],"./hr/build_distance_in_words_locale/index.js":[473,7,57],"./hr/build_format_locale":[474,7,58],"./hr/build_format_locale/":[474,7,58],"./hr/build_format_locale/index":[474,7,58],"./hr/build_format_locale/index.js":[474,7,58],"./hr/index":[527,7,12],"./hr/index.js":[527,7,12],"./hr/package":[1294,3,113],"./hr/package.json":[1294,3,113],"./hu":[528,7,13],"./hu/":[528,7,13],"./hu/build_distance_in_words_locale":[475,7,59],"./hu/build_distance_in_words_locale/":[475,7,59],"./hu/build_distance_in_words_locale/index":[475,7,59],"./hu/build_distance_in_words_locale/index.js":[475,7,59],"./hu/build_format_locale":[476,7,60],"./hu/build_format_locale/":[476,7,60],"./hu/build_format_locale/index":[476,7,60],"./hu/build_format_locale/index.js":[476,7,60],"./hu/index":[528,7,13],"./hu/index.js":[528,7,13],"./hu/package":[1295,3,114],"./hu/package.json":[1295,3,114],"./id":[529,7,14],"./id/":[529,7,14],"./id/build_distance_in_words_locale":[477,7,61],"./id/build_distance_in_words_locale/":[477,7,61],"./id/build_distance_in_words_locale/index":[477,7,61],"./id/build_distance_in_words_locale/index.js":[477,7,61],"./id/build_format_locale":[478,7,62],"./id/build_format_locale/":[478,7,62],"./id/build_format_locale/index":[478,7,62],"./id/build_format_locale/index.js":[478,7,62],"./id/index":[529,7,14],"./id/index.js":[529,7,14],"./id/package":[1296,3,115],"./id/package.json":[1296,3,115],"./is":[530,7,15],"./is/":[530,7,15],"./is/build_distance_in_words_locale":[479,7,63],"./is/build_distance_in_words_locale/":[479,7,63],"./is/build_distance_in_words_locale/index":[479,7,63],"./is/build_distance_in_words_locale/index.js":[479,7,63],"./is/build_format_locale":[480,7,64],"./is/build_format_locale/":[480,7,64],"./is/build_format_locale/index":[480,7,64],"./is/build_format_locale/index.js":[480,7,64],"./is/index":[530,7,15],"./is/index.js":[530,7,15],"./is/package":[1297,3,116],"./is/package.json":[1297,3,116],"./it":[531,7,16],"./it/":[531,7,16],"./it/build_distance_in_words_locale":[481,7,65],"./it/build_distance_in_words_locale/":[481,7,65],"./it/build_distance_in_words_locale/index":[481,7,65],"./it/build_distance_in_words_locale/index.js":[481,7,65],"./it/build_format_locale":[482,7,66],"./it/build_format_locale/":[482,7,66],"./it/build_format_locale/index":[482,7,66],"./it/build_format_locale/index.js":[482,7,66],"./it/index":[531,7,16],"./it/index.js":[531,7,16],"./it/package":[1298,3,117],"./it/package.json":[1298,3,117],"./ja":[532,7,17],"./ja/":[532,7,17],"./ja/build_distance_in_words_locale":[483,7,67],"./ja/build_distance_in_words_locale/":[483,7,67],"./ja/build_distance_in_words_locale/index":[483,7,67],"./ja/build_distance_in_words_locale/index.js":[483,7,67],"./ja/build_format_locale":[484,7,68],"./ja/build_format_locale/":[484,7,68],"./ja/build_format_locale/index":[484,7,68],"./ja/build_format_locale/index.js":[484,7,68],"./ja/index":[532,7,17],"./ja/index.js":[532,7,17],"./ja/package":[1299,3,118],"./ja/package.json":[1299,3,118],"./ko":[533,7,18],"./ko/":[533,7,18],"./ko/build_distance_in_words_locale":[485,7,69],"./ko/build_distance_in_words_locale/":[485,7,69],"./ko/build_distance_in_words_locale/index":[485,7,69],"./ko/build_distance_in_words_locale/index.js":[485,7,69],"./ko/build_format_locale":[486,7,70],"./ko/build_format_locale/":[486,7,70],"./ko/build_format_locale/index":[486,7,70],"./ko/build_format_locale/index.js":[486,7,70],"./ko/index":[533,7,18],"./ko/index.js":[533,7,18],"./ko/package":[1300,3,119],"./ko/package.json":[1300,3,119],"./mk":[534,7,19],"./mk/":[534,7,19],"./mk/build_distance_in_words_locale":[487,7,71],"./mk/build_distance_in_words_locale/":[487,7,71],"./mk/build_distance_in_words_locale/index":[487,7,71],"./mk/build_distance_in_words_locale/index.js":[487,7,71],"./mk/build_format_locale":[488,7,72],"./mk/build_format_locale/":[488,7,72],"./mk/build_format_locale/index":[488,7,72],"./mk/build_format_locale/index.js":[488,7,72],"./mk/index":[534,7,19],"./mk/index.js":[534,7,19],"./mk/package":[1301,3,120],"./mk/package.json":[1301,3,120],"./nb":[535,7,20],"./nb/":[535,7,20],"./nb/build_distance_in_words_locale":[489,7,73],"./nb/build_distance_in_words_locale/":[489,7,73],"./nb/build_distance_in_words_locale/index":[489,7,73],"./nb/build_distance_in_words_locale/index.js":[489,7,73],"./nb/build_format_locale":[490,7,74],"./nb/build_format_locale/":[490,7,74],"./nb/build_format_locale/index":[490,7,74],"./nb/build_format_locale/index.js":[490,7,74],"./nb/index":[535,7,20],"./nb/index.js":[535,7,20],"./nb/package":[1302,3,121],"./nb/package.json":[1302,3,121],"./nl":[536,7,21],"./nl/":[536,7,21],"./nl/build_distance_in_words_locale":[491,7,75],"./nl/build_distance_in_words_locale/":[491,7,75],"./nl/build_distance_in_words_locale/index":[491,7,75],"./nl/build_distance_in_words_locale/index.js":[491,7,75],"./nl/build_format_locale":[492,7,76],"./nl/build_format_locale/":[492,7,76],"./nl/build_format_locale/index":[492,7,76],"./nl/build_format_locale/index.js":[492,7,76],"./nl/index":[536,7,21],"./nl/index.js":[536,7,21],"./nl/package":[1303,3,122],"./nl/package.json":[1303,3,122],"./package":[1304,3,123],"./package.json":[1304,3,123],"./pl":[537,7,22],"./pl/":[537,7,22],"./pl/build_distance_in_words_locale":[493,7,77],"./pl/build_distance_in_words_locale/":[493,7,77],"./pl/build_distance_in_words_locale/index":[493,7,77],"./pl/build_distance_in_words_locale/index.js":[493,7,77],"./pl/build_format_locale":[494,7,78],"./pl/build_format_locale/":[494,7,78],"./pl/build_format_locale/index":[494,7,78],"./pl/build_format_locale/index.js":[494,7,78],"./pl/index":[537,7,22],"./pl/index.js":[537,7,22],"./pl/package":[1305,3,124],"./pl/package.json":[1305,3,124],"./pt":[538,7,23],"./pt/":[538,7,23],"./pt/build_distance_in_words_locale":[495,7,79],"./pt/build_distance_in_words_locale/":[495,7,79],"./pt/build_distance_in_words_locale/index":[495,7,79],"./pt/build_distance_in_words_locale/index.js":[495,7,79],"./pt/build_format_locale":[496,7,80],"./pt/build_format_locale/":[496,7,80],"./pt/build_format_locale/index":[496,7,80],"./pt/build_format_locale/index.js":[496,7,80],"./pt/index":[538,7,23],"./pt/index.js":[538,7,23],"./pt/package":[1306,3,125],"./pt/package.json":[1306,3,125],"./ro":[539,7,24],"./ro/":[539,7,24],"./ro/build_distance_in_words_locale":[497,7,81],"./ro/build_distance_in_words_locale/":[497,7,81],"./ro/build_distance_in_words_locale/index":[497,7,81],"./ro/build_distance_in_words_locale/index.js":[497,7,81],"./ro/build_format_locale":[498,7,82],"./ro/build_format_locale/":[498,7,82],"./ro/build_format_locale/index":[498,7,82],"./ro/build_format_locale/index.js":[498,7,82],"./ro/index":[539,7,24],"./ro/index.js":[539,7,24],"./ro/package":[1307,3,126],"./ro/package.json":[1307,3,126],"./ru":[540,7,25],"./ru/":[540,7,25],"./ru/build_distance_in_words_locale":[499,7,83],"./ru/build_distance_in_words_locale/":[499,7,83],"./ru/build_distance_in_words_locale/index":[499,7,83],"./ru/build_distance_in_words_locale/index.js":[499,7,83],"./ru/build_format_locale":[500,7,84],"./ru/build_format_locale/":[500,7,84],"./ru/build_format_locale/index":[500,7,84],"./ru/build_format_locale/index.js":[500,7,84],"./ru/index":[540,7,25],"./ru/index.js":[540,7,25],"./ru/package":[1308,3,127],"./ru/package.json":[1308,3,127],"./sk":[541,7,26],"./sk/":[541,7,26],"./sk/build_distance_in_words_locale":[501,7,85],"./sk/build_distance_in_words_locale/":[501,7,85],"./sk/build_distance_in_words_locale/index":[501,7,85],"./sk/build_distance_in_words_locale/index.js":[501,7,85],"./sk/build_format_locale":[502,7,86],"./sk/build_format_locale/":[502,7,86],"./sk/build_format_locale/index":[502,7,86],"./sk/build_format_locale/index.js":[502,7,86],"./sk/index":[541,7,26],"./sk/index.js":[541,7,26],"./sk/package":[1309,3,128],"./sk/package.json":[1309,3,128],"./sl":[542,7,27],"./sl/":[542,7,27],"./sl/build_distance_in_words_locale":[503,7,87],"./sl/build_distance_in_words_locale/":[503,7,87],"./sl/build_distance_in_words_locale/index":[503,7,87],"./sl/build_distance_in_words_locale/index.js":[503,7,87],"./sl/build_format_locale":[504,7,88],"./sl/build_format_locale/":[504,7,88],"./sl/build_format_locale/index":[504,7,88],"./sl/build_format_locale/index.js":[504,7,88],"./sl/index":[542,7,27],"./sl/index.js":[542,7,27],"./sl/package":[1310,3,129],"./sl/package.json":[1310,3,129],"./sv":[543,7,28],"./sv/":[543,7,28],"./sv/build_distance_in_words_locale":[505,7,89],"./sv/build_distance_in_words_locale/":[505,7,89],"./sv/build_distance_in_words_locale/index":[505,7,89],"./sv/build_distance_in_words_locale/index.js":[505,7,89],"./sv/build_format_locale":[506,7,90],"./sv/build_format_locale/":[506,7,90],"./sv/build_format_locale/index":[506,7,90],"./sv/build_format_locale/index.js":[506,7,90],"./sv/index":[543,7,28],"./sv/index.js":[543,7,28],"./sv/package":[1311,3,130],"./sv/package.json":[1311,3,130],"./th":[544,7,29],"./th/":[544,7,29],"./th/build_distance_in_words_locale":[507,7,91],"./th/build_distance_in_words_locale/":[507,7,91],"./th/build_distance_in_words_locale/index":[507,7,91],"./th/build_distance_in_words_locale/index.js":[507,7,91],"./th/build_format_locale":[508,7,92],"./th/build_format_locale/":[508,7,92],"./th/build_format_locale/index":[508,7,92],"./th/build_format_locale/index.js":[508,7,92],"./th/index":[544,7,29],"./th/index.js":[544,7,29],"./th/package":[1312,3,131],"./th/package.json":[1312,3,131],"./tr":[545,7,30],"./tr/":[545,7,30],"./tr/build_distance_in_words_locale":[509,7,93],"./tr/build_distance_in_words_locale/":[509,7,93],"./tr/build_distance_in_words_locale/index":[509,7,93],"./tr/build_distance_in_words_locale/index.js":[509,7,93],"./tr/build_format_locale":[510,7,94],"./tr/build_format_locale/":[510,7,94],"./tr/build_format_locale/index":[510,7,94],"./tr/build_format_locale/index.js":[510,7,94],"./tr/index":[545,7,30],"./tr/index.js":[545,7,30],"./tr/package":[1313,3,132],"./tr/package.json":[1313,3,132],"./zh_cn":[546,7,31],"./zh_cn/":[546,7,31],"./zh_cn/build_distance_in_words_locale":[511,7,95],"./zh_cn/build_distance_in_words_locale/":[511,7,95],"./zh_cn/build_distance_in_words_locale/index":[511,7,95],"./zh_cn/build_distance_in_words_locale/index.js":[511,7,95],"./zh_cn/build_format_locale":[512,7,96],"./zh_cn/build_format_locale/":[512,7,96],"./zh_cn/build_format_locale/index":[512,7,96],"./zh_cn/build_format_locale/index.js":[512,7,96],"./zh_cn/index":[546,7,31],"./zh_cn/index.js":[546,7,31],"./zh_cn/package":[1314,3,133],"./zh_cn/package.json":[1314,3,133],"./zh_tw":[547,7,32],"./zh_tw/":[547,7,32],"./zh_tw/build_distance_in_words_locale":[513,7,97],"./zh_tw/build_distance_in_words_locale/":[513,7,97],"./zh_tw/build_distance_in_words_locale/index":[513,7,97],"./zh_tw/build_distance_in_words_locale/index.js":[513,7,97],"./zh_tw/build_format_locale":[514,7,98],"./zh_tw/build_format_locale/":[514,7,98],"./zh_tw/build_format_locale/index":[514,7,98],"./zh_tw/build_format_locale/index.js":[514,7,98],"./zh_tw/index":[547,7,32],"./zh_tw/index.js":[547,7,32],"./zh_tw/package":[1315,3,134],"./zh_tw/package.json":[1315,3,134]};function r(e){if(!n.o(a,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],r=t[0];return Promise.all(t.slice(2).map(n.e)).then(function(){return n.t(r,t[1])})}r.keys=function(){return Object.keys(a)},r.id=7582,e.exports=r},7583:function(e,t,n){"use strict";n.r(t);var a=n(11),r=n.n(a),i=n(17);Object.defineProperty(Array.prototype,"asyncForEach",{enumerable:!1,value:function(){var e=Object(i.a)(r.a.mark(function e(t,n,a){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<this.length)){e.next=7;break}return e.next=4,t(this[i],i,this);case 4:i++,e.next=1;break;case 7:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}()});n(6547);var o=n(6),s=n.n(o),c=n(71),l=n.n(c),u=(n(548),n(549),n(550),n(551),n(552),n(553),n(554),n(555),n(556),n(1061)),d=n(1062),p=n(1063),f=n(1064),m=n(1065),h=n(1066),g=n(1067),b=n(1068),v=n(1069),O=n(1070),y=n(1071),E=n(1072),_="NAMESPACE";l.a.locale("en"),s.a.addResources("ar",_,u),s.a.addResources("en",_,d),s.a.addResources("es",_,p),s.a.addResources("fr",_,f),s.a.addResources("id",_,m),s.a.addResources("lo",_,h),s.a.addResources("ps",_,g),s.a.addResources("pt",_,b),s.a.addResources("ru",_,v),s.a.addResources("uk",_,O),s.a.addResources("ur",_,y),s.a.addResources("vi",_,E),s.a.setDefaultNamespace(_),s.a.changeLanguage("en");s.a;var j=n(0),I=n.n(j),S=n(50),C=n.n(S),T=n(13),R=n.n(T),N=(n(6552),n(167)),k=n(15),A=n(76),w=n(390),P=n.n(w),D=function(e){var t=Object(A.a)({},e);return I.a.createElement(P.a,t)},x=Object(k.withStyles)(function(){return{container:{left:"45%",position:"fixed",top:"45%"}}})(function(e){return I.a.createElement("div",{className:e.classes.container},I.a.createElement(D,{size:50}))}),F=n(1074),L=n.n(F),U=n(304),M=n(127);function V(e,t){var n=this;this.message=e,this.innerError=t,this.toString=function(){return n.message}}n(753),n(567),n(759),n(570),n(760),n(762),n(764);var B=n(5),G=n(4),W=n(9),H=n(7),z=n(8),Y=(n(6616),n(18)),K=n(425),q=n.n(K),X=n(104),Z=n(105),J=n(27),Q=n(393),$=n.n(Q),ee=n(90),te=n.n(ee),ne=n(94),ae=n.n(ne),re=n(84),ie=n.n(re),oe=n(83),se=n.n(oe),ce=n(323),le=function(e){var t=Object(A.a)({},e);return j.createElement(ce.a,t)},ue=n(10),de=n(7588),pe=n(7590),fe=n(7591),me=function e(t){var n=t.dropDownItems,a=Object(ue.a)(t,["dropDownItems"]);return j.createElement(de.a,Object.assign({component:e.getComponent(n)},a))};me.getItems=function(e){return e.map(function(e){return j.createElement(pe.a,{key:e.key},j.createElement(fe.a,{label:e.text,value:e.text,onClick:e.onClick}))})},me.getComponent=function(e){return j.createElement(j.Fragment,null,me.getItems(e))};var he=me,ge=n(85),be=n.n(ge),ve=n(392),Oe=n.n(ve),ye=n(75),Ee=n.n(ye),_e=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleClose=function(e,a){a!==t.CLICKAWAY_KEY&&n.props.onClose()},n.handleClose=n.handleClose.bind(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getAction",value:function(){var e=this.props,t=e.feedback,n=e.classes;return j.createElement("span",null,t.action?j.createElement("span",{className:n.actionContainer},t.action):null,j.createElement(be.a,{key:"close","aria-label":"Close",color:"inherit",className:n.closeButton,onClick:this.handleClose},j.createElement(Oe.a,null)))}},{key:"render",value:function(){var e=this.props.feedback,n=e.message,a=e.displayType,r=Ee()(n)&&!a,i=Ee()(n)&&"dialog"===a;return j.createElement(j.Fragment,null,j.createElement($.a,{open:r,anchorOrigin:t.ANCHOR_ORIGION,autoHideDuration:5e3,onClose:this.handleClose,message:j.createElement("span",null,n),action:this.getAction()}),j.createElement(te.a,{open:Ee()(n)&&"dialog"===a},j.createElement(se.a,null,i?n&&n.title:""),j.createElement(ie.a,null,i?n&&n.content:""),j.createElement(ae.a,null,j.createElement(le,{onClick:this.handleClose,primary:!0},s.a.t("Close")))))}}]),t}(j.Component);_e.CLICKAWAY_KEY="clickaway",_e.ANCHOR_ORIGION={vertical:"bottom",horizontal:"center"},_e.defaultProps={feedback:{}};var je=Object(k.withStyles)(function(e){return{closeButton:{width:4*e.spacing.unit,height:4*e.spacing.unit},actionContainer:{paddingRight:2}}})(_e),Ie=n(2);function Se(e){return function(t,n,a){return{type:e,payload:t,meta:n,error:a}}}function Ce(e){return function(t){return Object(Ie.a)({},e,{payload:Object(Ie.a)({},e.payload,t)})}}var Te="CloseFeedback",Re=Object(Y.c)(function(e){return{feedback:e.feedbacks&&e.feedbacks[0]?e.feedbacks[0]:void 0}},function(e){return{onClose:function(){e(Se(Te)())}}})(je),Ne=n(7587),ke=n(395),Ae=n.n(ke),we=n(136),Pe=n.n(we),De=l.a,xe=function(e){return I.a.createElement("div",{className:"".concat(e.classes.flex," ").concat(e.classes.badgeSection)},I.a.createElement(Le,{status:e.status?e.classes.onlineIcon:e.classes.offlineIcon}),I.a.createElement("p",{className:e.classes.text},e.status?s.a.t("Online"):s.a.t("Offline")))},Fe=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).state={offlineTimer:De(Date.now()).fromNow()},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=this;if(0===this.props.statusTimer)return clearInterval(this.timer),this.timer=null,void this.setState({offlineTimer:De(Date.now()).fromNow()});this.props.statusTimer>0&&!this.timer&&(this.timer=setInterval(function(){var e=De(n.props.statusTimer).fromNow();n.setState({offlineTimer:e})},6e4))}},{key:"render",value:function(){var e,t=this.props;if(t.status&&0===t.syncList.length)return null;t.status&&t.syncList.length>0&&(e=I.a.createElement("div",{className:t.classes.flex},I.a.createElement(Ae.a,{className:t.classes.icon}),I.a.createElement("p",{className:t.classes.text},s.a.t("Syncing")))),t.status||(e=I.a.createElement("span",null,t.syncList.length," ",s.a.t("offline events. Last synced:")," ",this.state.offlineTimer));var n=!!e;return I.a.createElement(Pe.a,{in:n,style:{transformOrigin:"right 50%"}},I.a.createElement("div",{className:"".concat(t.classes.badgeSection," ").concat(t.classes.smallText," ").concat(t.classes.badgeSeparator),style:t.style},e))}}]),t}(j.PureComponent),Le=function(e){return I.a.createElement("span",{className:e.status})},Ue=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.offline||{},t=this.props.classes,n=e.outbox;return I.a.createElement("div",{className:"".concat(t.flex," ").concat(t.badgeContainer)},I.a.createElement(Fe,{status:e.online,syncList:n,classes:t,statusTimer:this.props.networkStatus.offlineSince}),I.a.createElement(xe,{status:e.online,syncList:n,classes:t}))}}]),t}(j.PureComponent),Me=Object(Y.c)(function(e){return{offline:e.offline,networkStatus:e.networkStatus}})(Object(k.withStyles)(function(e){return{offlineIcon:{backgroundColor:"#9e9e9e",width:"8px",height:"8px",borderRadius:"4px",display:"inline-block",marginRight:"6px"},onlineIcon:{backgroundColor:"#48a999",width:"8px",height:"8px",borderRadius:"4px",display:"inline-block",marginRight:"6px"},badgeContainer:{backgroundColor:"#16486e",color:"white",borderRadius:"4px",whiteSpace:"nowrap"},badgeSection:{padding:"8px"},badgeSeparator:{borderRight:"1px solid #0b3b60"},flex:{display:"flex",flexWrap:"nowrap",alignItems:"center",justifyContent:"space-between"},icon:{animationName:"Sync-spin",animationDuration:"1.5s",animationIterationCount:"infinite",animationDelay:"250ms",animationDirection:"reverse",width:"16px",height:"16px"},text:{margin:0,padding:0},smallText:{fontSize:"14px"},"@keyframes Sync-spin":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}}})(Ue)),Ve=function(e){return{errorContainer:{margin:20,color:e.palette.error.main}}},Be=function(){return function(e){return Object(k.withStyles)(Ve)(function(t){var n=t.error,a=t.classes,r=Object(ue.a)(t,["error","classes"]);return n?j.createElement("div",{className:a.errorContainer},n):j.createElement(e,r)})}},Ge=Object(k.withStyles)(function(){return{container:{display:"flex",alignItems:"center",justifyContent:"center"}}})(function(e){var t=e.containerStyle,n=e.classes,a=Object(ue.a)(e,["containerStyle","classes"]);return I.a.createElement("div",{className:n.container,style:t},I.a.createElement(D,a))}),We=function(e,t,n){return function(a){return function(r){var i=r.ready,o=Object(ue.a)(r,["ready"]);if(!(n?n(r):i)){var s=e?e(r):null,c=t?t(r):null;return j.createElement(Ge,Object.assign({containerStyle:s},c))}return j.createElement(a,o)}}},He=n(35),ze=n(61),Ye=n.n(ze),Ke=n(153),qe=n.n(Ke),Xe=n(12),Ze=n(16),Je=n(60),Qe=function(){function e(t){Object(B.a)(this,e),this.name="",this.id="",t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}}]),e}();Qe.errorMessages={CATEGORY_OPTION_NOT_FOUND:"Category option was not found"};var $e=function(){function e(t){Object(B.a)(this,e),this.name="",this.id="",this.categories=new Map,t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"getCategoryThrowIfNotFound",value:function(t){var n=this.categories.get(t);if(!n)throw new Error(Object(Ze.b)(e.errorMessages.CATEGORY_NOT_FOUND)({categoryCombination:this,categoryId:t}));return n}},{key:"getCategoryForOptionId",value:function(e){return Array.from(this.categories.values()).find(function(t){return!!t.getOption(e)})}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"categories",get:function(){return this._categories},set:function(e){this._categories=e}}]),e}();$e.errorMessages={CATEGORY_NOT_FOUND:"Category was not found"};var et=function(){function e(t){Object(B.a)(this,e),this.color="white",t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"color",set:function(e){this._color=e},get:function(){return this._color}},{key:"data",set:function(e){this._data=e},get:function(){return this._data}}]),e}(),tt=Symbol.iterator,nt=function(){function e(t){Object(B.a)(this,e),this.programRules=[],this.programRuleVariables=[],this.organisationUnits={},this._stages=new Map,t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:tt,value:r.a.mark(function e(){var t,n,a,i,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,a=void 0,e.prev=3,i=this._stages.values()[Symbol.iterator]();case 5:if(t=(o=i.next()).done){e.next=12;break}return s=o.value,e.next=9,s;case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),n=!0,a=e.t0;case 18:e.prev=18,e.prev=19,t||null==i.return||i.return();case 21:if(e.prev=21,!n){e.next=24;break}throw a;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25]])})},{key:"addStage",value:function(e){this.stages.set(e.id,e)}},{key:"getStage",value:function(e){return this.stages.get(e)}},{key:"getStageThrowIfNotFound",value:function(t){var n=this.stages.get(t);if(!n)throw new Error(Object(Ze.b)(e.errorMessages.STAGE_NOT_FOUND)({program:this,stageId:t}));return n}},{key:"getStageFromIndex",value:function(t){var n=Object(Xe.a)(this.stages.entries());if(n.length<=t)throw new Error(Object(Ze.b)(e.errorMessages.STAGE_INDEX_NOT_FOUND)({program:this,stageIndex:t}));return n[t][1]}},{key:"addProgramRuleVariable",value:function(e){this.programRuleVariables.push(e)}},{key:"addProgramRule",value:function(e){this.programRules.push(e)}},{key:"addProgramRuleVariables",value:function(e){this.programRuleVariables=[].concat(Object(Xe.a)(this.programRuleVariables),Object(Xe.a)(e))}},{key:"addProgramRules",value:function(e){this.programRules=[].concat(Object(Xe.a)(this.programRules),Object(Xe.a)(e))}},{key:"id",set:function(e){this._id=e},get:function(){return this._id}},{key:"access",set:function(e){this._access=e},get:function(){return this._access}},{key:"name",set:function(e){this._name=e},get:function(){return this._name}},{key:"shortName",set:function(e){this._shortName=e},get:function(){return this._shortName}},{key:"organisationUnits",set:function(e){this._organisationUnits=e},get:function(){return this._organisationUnits}},{key:"categoryCombination",set:function(e){this._categoryCombination=e},get:function(){return this._categoryCombination}},{key:"programRules",set:function(e){this._programRules=e},get:function(){return this._programRules}},{key:"programRuleVariables",set:function(e){this._programRuleVariables=e},get:function(){return this._programRuleVariables}},{key:"icon",set:function(e){this._icon=e},get:function(){return this._icon}},{key:"stages",get:function(){return this._stages}}]),e}();nt.errorMessages={STAGE_NOT_FOUND:"Stage was not found",STAGE_INDEX_NOT_FOUND:"No stage found on index"};var at=new Map,rt=n(129),it=n.n(rt),ot=(n(773),n(112)),st=function(){function e(t){Object(B.a)(this,e),t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"id",set:function(e){this._id=e},get:function(){return this._id}},{key:"value",set:function(e){this._value=e},get:function(){return this._value}},{key:"text",set:function(e){this._text=e},get:function(){return this._text}},{key:"description",set:function(e){this._description=e},get:function(){return this._description}},{key:"icon",set:function(e){this._icon=e},get:function(){return this._icon}}]),e}(),ct=function(){function e(t){Object(B.a)(this,e),t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"id",set:function(e){this._id=e},get:function(){return this._id}},{key:"optionIds",set:function(e){this._optionIds=e},get:function(){return this._optionIds}}]),e}(),lt={DROPDOWN:"dropdown",VERTICAL_RADIOBUTTONS:"verticalRadiobuttons",HORIZONTAL_RADIOBUTTONS:"horizontalRadiobuttons"},ut=Object.keys(lt).map(function(e){return lt[e]}),dt={ICON:"ICON",ICON_WITH_COLOR:"ICON_WITH_COLOR"},pt=function(){function e(t,n,a,r,i){var o=this;Object(B.a)(this,e),this._options=n?n.reduce(function(e,t){return t.value||!1===t.value||0===t.value?(t.value=i&&r?i(t.value,r.type,r):t.value,e.push(t)):o._emptyText=t.text,e},[]):[],this._optionGroups=a||new Map,this._id=t,this._dataElement=r,this._inputType=lt.DROPDOWN}return Object(G.a)(e,[{key:"addOption",value:function(e){e.value||!1===e.value||0===e.value?this._options.push(e):this._emptyText=e.text}},{key:"getOptionThrowIfNotFound",value:function(t){var n=this.options.find(function(e){return e.value===t});if(!n)throw new Error(Object(Ze.b)(e.errorMessages.OPTION_NOT_FOUND)({OptionSet:this,value:t}));return n}},{key:"getOption",value:function(t){var n=this.options.find(function(e){return e.value===t});return n||R.a.warn(Object(Ze.b)(e.errorMessages.OPTION_NOT_FOUND)({OptionSet:this,value:t})),n}},{key:"getOptionsThrowIfNotFound",value:function(t){var n=this;return t.map(function(t){var a=n.options.find(function(e){return e.value===t});if(!a)throw new Error(Object(Ze.b)(e.errorMessages.OPTION_NOT_FOUND)({OptionSet:n,value:t}));return a})}},{key:"getOptions",value:function(t){var n=this;return t.reduce(function(t,a){var r=n.options.find(function(e){return e.value===a});return r?t.push(r):R.a.warn(Object(Ze.b)(e.errorMessages.OPTION_NOT_FOUND)({OptionSet:n,value:a})),t},[])}},{key:"getOptionText",value:function(e){var t=this.getOption(e);return t&&t.text}},{key:"getOptionsText",value:function(e){return this.getOptions(e).map(function(e){return e.text})}},{key:"getOptionsTextAsString",value:function(e){return this.getOptionsText(e).toString()}},{key:"resolveTextsAsString",value:function(e){return Object(ot.a)(e)?this.getOptionsTextAsString(e):this.getOptionText(e)}},{key:"id",set:function(e){this._id=e},get:function(){return this._id}},{key:"inputType",set:function(t){t&&(ut.includes(t)?this._inputType=t:R.a.warn(Object(Ze.b)(e.errorMessages.UNSUPPORTED_INPUTTYPE)({optionSet:this,inputType:t})))},get:function(){return this._inputType}},{key:"viewType",set:function(t){t&&(dt[t]?this._viewType=t:R.a.warn(Object(Ze.b)(e.errorMessages.UNSUPPORTED_VIEWTYPE)({optionSet:this,viewType:t})))},get:function(){return this._viewType}},{key:"emptyText",get:function(){return this._emptyText},set:function(e){this._emptyText=e}},{key:"options",get:function(){return this._options}},{key:"optionGroups",get:function(){return this._optionGroups},set:function(e){this._optionGroups=e}},{key:"dataElement",get:function(){return this._dataElement}}]),e}();pt.errorMessages={OPTION_NOT_FOUND:"Option not found",UNSUPPORTED_VIEWTYPE:"Tried to set an unsupported viewType",UNSUPPORTED_INPUTTYPE:"Tried to set an unsuported inputType"};var ft=["TEXT","LONG_TEXT","NUMBER","NUMBER_RANGE","INTEGER","INTEGER_RANGE","INTEGER_POSITIVE","INTEGER_POSITIVE_RANGE","INTEGER_NEGATIVE","INTEGER_NEGATIVE_RANGE","INTEGER_ZERO_OR_POSITIVE","INTEGER_ZERO_OR_POSITIVE_RANGE","PERCENTAGE","DATE","DATE_RANGE","DATETIME","DATETIME_RANGE","TIME","TIME_RANGE","TRUE_ONLY","BOOLEAN","PHONE_NUMBER","EMAIL","FILE_RESOURCE","URL","ORGANISATION_UNIT","IMAGE","AGE","COORDINATE","POLYGON","USERNAME","UNKNOWN"].reduce(function(e,t){return e[t]=t,e},{}),mt={ENTIRE_SYSTEM:"entireSystem",ORGANISATION_UNIT:"organisationUnit"},ht=function(){function e(t){Object(B.a)(this,e),this._scope=mt.ENTIRE_SYSTEM,this._generatable=!1,t&&t(this)}return Object(G.a)(e,[{key:"generatable",set:function(e){this._generatable=e},get:function(){return this._generatable}},{key:"scope",set:function(e){this._scope=e},get:function(){return this._scope}},{key:"onValidate",set:function(e){this._onValidate=e},get:function(){return this._onValidate}}]),e}(),gt=function(){function e(t){Object(B.a)(this,e),this._displayInReports=!0,this._displayInForms=!0,this.disabled=!1,this.compulsory=!1,t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"getPropertyNames",value:r.a.mark(function e(){var t,n,a,i,o,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=["getPropertyNames","constructor","copyPropertiesTo","getConvertedOptionSet","convertValue"],n=!0,a=!1,i=void 0,e.prev=4,o=Object.getOwnPropertyNames(Object.getPrototypeOf(this))[Symbol.iterator]();case 6:if(n=(s=o.next()).done){e.next=14;break}if(c=s.value,t.includes(c)){e.next=11;break}return e.next=11,c;case 11:n=!0,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),a=!0,i=e.t0;case 20:e.prev=20,e.prev=21,n||null==o.return||o.return();case 23:if(e.prev=23,!a){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,this,[[4,16,20,28],[21,,23,27]])})},{key:"copyPropertiesTo",value:function(e){var t=!0,n=!1,a=void 0;try{for(var r,i=this.getPropertyNames()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;e[o]=this[o]}}catch(s){n=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}return e}},{key:"getConvertedOptionSet",value:function(e){if(this.optionSet){var t=Object(Xe.a)(this.optionSet.options),n=new pt(this.optionSet.id,t,null,this,e);return n.inputType=this.optionSet.inputType,n.viewType=this.optionSet.viewType,n.emptyText=this.optionSet.emptyText,n}return null}},{key:"convertValue",value:function(e,t){var n=this;return Object(ot.a)(e)?e.map(function(e){return t(e,n.type,n)}):t(e,this.type,this)}},{key:"id",set:function(e){this._id=e},get:function(){return this._id}},{key:"name",set:function(e){this._name=e},get:function(){return this._name}},{key:"shortName",set:function(e){this._shortName=e},get:function(){return this._shortName}},{key:"formName",set:function(e){this._formName=e},get:function(){return this._formName}},{key:"displayInForms",set:function(e){this._displayInForms=null==e||e},get:function(){return this._displayInForms}},{key:"displayInReports",set:function(e){this._displayInReports=null==e||e},get:function(){return this._displayInReports}},{key:"disabled",set:function(e){this._disabled=!!e},get:function(){return this._disabled}},{key:"compulsory",set:function(e){this._compulsory=!!e},get:function(){return this._compulsory}},{key:"description",set:function(e){this._description=e},get:function(){return this._description}},{key:"type",set:function(t){ft[t]?this._type=t:(R.a.warn(Object(Ze.b)(e.errorMessages.TYPE_NOT_FOUND)({dataElement:this,type:t})),this._type=ft.UNKNOWN)},get:function(){return this._type}},{key:"optionSet",set:function(e){this._optionSet=e},get:function(){return this._optionSet}},{key:"icon",set:function(e){this._icon=e},get:function(){return this._icon}},{key:"unique",set:function(e){this._unique=e},get:function(){return this._unique}}]),e}();gt.errorMessages={TYPE_NOT_FOUND:"type not supported"};var bt={NONE:"none",ON_UPDATE_AND_INSERT:"onUpdateAndInsert",ON_COMPLETE:"onComplete"},vt=Object.keys(bt).map(function(e){return bt[e]}),Ot=n(182),yt=function(){function e(t){Object(B.a)(this,e),this._visible=!0,this._open=!0,this._collapsible=!1,this._elements=new Map,this._showContainer=!0,t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"addElement",value:function(e){this.elements.has(e.id)||this.elements.set(e.id,e)}},{key:"getElement",value:function(t){var n=this.elements.get(t);if(!n)throw new Error(Object(Ze.b)(e.errorMessages.DATA_ELEMENT_NOT_FOUND)({section:this,requestId:t}));return n}},{key:"getElementIfFound",value:function(e){return this.elements.get(e)}},{key:"getPropertyNames",value:r.a.mark(function e(){var t,n,a,i,o,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=["getPropertyNames","constructor","copyPropertiesTo"],n=!0,a=!1,i=void 0,e.prev=4,o=Object.getOwnPropertyNames(Object.getPrototypeOf(this))[Symbol.iterator]();case 6:if(n=(s=o.next()).done){e.next=14;break}if(c=s.value,t.includes(c)){e.next=11;break}return e.next=11,c;case 11:n=!0,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),a=!0,i=e.t0;case 20:e.prev=20,e.prev=21,n||null==o.return||o.return();case 23:if(e.prev=23,!a){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}},e,this,[[4,16,20,28],[21,,23,27]])})},{key:"copyPropertiesTo",value:function(e){var t=!0,n=!1,a=void 0;try{for(var r,i=this.getPropertyNames()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;e[o]=this[o]}}catch(s){n=!0,a=s}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}return e}},{key:"id",set:function(e){this._id=e},get:function(){return this._id}},{key:"name",set:function(e){this._name=e},get:function(){return this._name}},{key:"open",set:function(e){this._open=!Object(Ot.a)(e)||e},get:function(){return this._open}},{key:"visible",set:function(e){this._visible=!Object(Ot.a)(e)||e},get:function(){return this._visible}},{key:"collapsible",set:function(e){this._collapsible=!Object(Ot.a)(e)||e},get:function(){return this._collapsible}},{key:"showContainer",set:function(e){this._showContainer=!Object(Ot.a)(e)||e},get:function(){return this._showContainer}},{key:"elements",get:function(){return this._elements}}]),e}();yt.MAIN_SECTION_ID="#MAIN#",yt.MAIN_SECTION_NAME="MAIN",yt.errorMessages={DATA_ELEMENT_NOT_FOUND:"Data element was not found"};var Et=n(195),_t={PROGRAM_NOT_FOUND:"Program not found",STAGE_NOT_FOUND:"Stage not found",GENERIC_ERROR:"An error has occured. See log for details"};function jt(e){var t=at.get(e);if(!t)return R.a.error(Object(Ze.b)(_t.PROGRAM_NOT_FOUND)({programId:e})),{error:s.a.t(_t.GENERIC_ERROR),stage:null,program:null};var n=t.stage;return n?{stage:n,program:t,error:null}:(R.a.error(Object(Ze.b)(_t.STAGE_NOT_FOUND)({program:t,programId:e})),{error:s.a.t(_t.GENERIC_ERROR),stage:null,program:null})}var It={PROGRAM_NOT_FOUND:"Program not found",STAGE_NOT_FOUND:"Stage not found",GENERIC_ERROR:"An error has occured. See log for details"};function St(e){var t=at.get(e);if(!t)return R.a.error(Object(Ze.b)(It.PROGRAM_NOT_FOUND)({programId:e})),{error:s.a.t(It.GENERIC_ERROR),stage:null};var n=t.stage;return n?{stage:n,error:null}:(R.a.error(Object(Ze.b)(It.STAGE_NOT_FOUND)({programId:e})),{error:s.a.t(It.GENERIC_ERROR),stage:null})}var Ct={PROGRAM_NOT_FOUND:"Program not found or program not an event program",GENERIC_ERROR:"An error has occured. See log for details"};function Tt(e){var t=at.get(e);if(!t||!(t instanceof Zt))throw R.a.error(Object(Ze.b)(Ct.PROGRAM_NOT_FOUND)({programId:e})),Error(s.a.t(Ct.GENERIC_ERROR));return t}var Rt=function(e,t){var n=Tt(e).stage,a={read:n.stageForm.access.data.read,write:n.stageForm.access.data.write};return t&&a.write&&(a.write=Object.keys(t).every(function(e){return t[e].writeAccess})),a},Nt={PROGRAM_NOT_FOUND:"Program not found",PROGRAM_NOT_FOUND_DISPLAY:s.a.t("Program not found"),NOT_TRACKER_PROGRAM:"Program is not a tracker program",NOT_TRACKER_PROGRAM_DISPLAY:s.a.t("Program is not a tracker program")};function kt(e){var t=at.get(e);if(!t)throw R.a.error(Object(Ze.b)(Nt.PROGRAM_NOT_FOUND)({programId:e})),Error(Nt.PROGRAM_NOT_FOUND_DISPLAY);if(!(t instanceof en))throw R.a.error(Object(Ze.b)(Nt.NOT_TRACKER_PROGRAM)({programId:e})),Error(Nt.NOT_TRACKER_PROGRAM_DISPLAY);return t}var At={PROGRAM_NOT_FOUND:"Program not found",STAGE_NOT_FOUND:"Stage not found",GENERIC_ERROR:"An error has occured. See log for details"};function wt(e){var t=e.eventId,n=at.get(e.programId);if(!n)return R.a.error(Object(Ze.b)(At.PROGRAM_NOT_FOUND)({eventId:t,event:e})),{error:s.a.t(At.GENERIC_ERROR),stage:null,program:null};var a=n.getStage(e.programStageId);return a?{stage:a,program:n,error:null}:(R.a.error(Object(Ze.b)(At.STAGE_NOT_FOUND)({eventId:t,event:e})),{error:s.a.t(At.GENERIC_ERROR),stage:null,program:null})}var Pt={PROGRAM_NOT_FOUND:"Program not found",STAGE_NOT_FOUND:"Stage not found",GENERIC_ERROR:"An error has occured. See log for details"};function Dt(e){var t=e.eventId,n=at.get(e.programId);if(!n)return R.a.error(Object(Ze.b)(Pt.PROGRAM_NOT_FOUND)({eventId:t,event:e})),{error:s.a.t(Pt.GENERIC_ERROR),stage:null};var a=n.getStage(e.programStageId);return a?{stage:a,error:null}:(R.a.error(Object(Ze.b)(Pt.STAGE_NOT_FOUND)({eventId:t,event:e})),{error:s.a.t(Pt.GENERIC_ERROR),stage:null})}var xt={PROGRAM_NOT_FOUND:"Program not found",GENERIC_ERROR:"An error has occured. See log for details"};function Ft(e){var t=at.get(e);if(!t)throw R.a.error(Object(Ze.b)(xt.PROGRAM_NOT_FOUND)({programId:e})),Error(s.a.t(xt.GENERIC_ERROR));return t}var Lt=function(){function e(t){Object(B.a)(this,e),this._minAttributesRequiredToSearch=0,this._unique=!1,t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"id",set:function(e){this._id=e},get:function(){return this._id}},{key:"minAttributesRequiredToSearch",set:function(e){this._minAttributesRequiredToSearch=e},get:function(){return this._minAttributesRequiredToSearch}},{key:"searchForm",set:function(e){this._searchForm=e},get:function(){return this._searchForm}},{key:"unique",set:function(e){this._unique=e},get:function(){return this._unique}}]),e}(),Ut=function(){function e(t){Object(B.a)(this,e),this._minAttributesRequiredToSearch=0,t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"id",set:function(e){this._id=e},get:function(){return this._id}},{key:"minAttributesRequiredToSearch",set:function(e){this._minAttributesRequiredToSearch=e},get:function(){return this._minAttributesRequiredToSearch}},{key:"searchFoundation",set:function(e){this._searchFoundation=e},get:function(){return this._searchFoundation}},{key:"onSearch",set:function(e){this._onSearch=e},get:function(){return this._onSearch}}]),e}(),Mt=function(){function e(t){Object(B.a)(this,e),t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"form",set:function(e){this._form=e},get:function(){return this._form}},{key:"inputSearchGroups",set:function(e){this._inputSearchGroups=e},get:function(){return this._inputSearchGroups}},{key:"trackedEntityType",set:function(e){this._trackedEntityType=e},get:function(){return this._trackedEntityType}}]),e}(),Vt=function(){function e(t){Object(B.a)(this,e),this._attributes=[],t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"id",set:function(e){this._id=e},get:function(){return this._id}},{key:"name",set:function(e){this._name=e},get:function(){return this._name}},{key:"teiRegistration",set:function(e){this._teiRegistration=e},get:function(){return this._teiRegistration}},{key:"searchGroups",set:function(e){this._searchGroups=e},get:function(){return this._searchGroups}},{key:"attributes",set:function(e){this._attributes=e},get:function(){return this._attributes}}]),e}(),Bt={TRACKED_ENTITY_TYPE_NOT_FOUND:"Tracked entity type not found",GENERIC_ERROR:"An error has occured. See log for details"};function Gt(e){var t=nn.get(e);if(!t)throw R.a.error(Object(Ze.b)(Bt.TRACKED_ENTITY_TYPE_NOT_FOUND)({trackedEntityTypeId:e})),Error(s.a.t(Bt.GENERIC_ERROR));return t}var Wt=n(1),Ht=n(428),zt={CONVERT_VALUES_STRUCTURE:"Values can not be converted, data is neither an array or an object"};function Yt(e,t,n){if(e){var a=function(e){return e.toHashMap("id")}(t);if(Object(ot.a)(e))return function(e,t,n){var a=this;return e.map(function(e){return a.convertObjectValues(e,t,n)})}(e,a,n);if(Object(Ht.a)(e))return function(e,t,n){return Object.keys(e).reduce(function(a,r){var i=t[r],o=e[r],s=i?i.convertValue(o,n):o;return Object(Ie.a)({},a,Object(Wt.a)({},r,s))},{})}(e,a,n);R.a.error(Object(Ze.b)(zt.CONVERT_VALUES_STRUCTURE)({values:e}))}return e}var Kt=function(){function e(t){Object(B.a)(this,e),this._sections=new Map,this._labels={},this.programRules=[],this._validationStrategy=bt.ON_UPDATE_AND_INSERT,t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"addLabel",value:function(e){var t=e.id,n=e.label;this._labels[t]=n}},{key:"getLabel",value:function(e){return this._labels[e]}},{key:"addSection",value:function(e){this._sections.set(e.id,e)}},{key:"getSection",value:function(e){return this._sections.get(e)}},{key:"getElement",value:function(e){return this.getElementsById()[e]}},{key:"addProgramRule",value:function(e){this.programRules.push(e)}},{key:"addProgramRules",value:function(e){this.programRules=[].concat(Object(Xe.a)(this.programRules),Object(Xe.a)(e))}},{key:"getElements",value:function(){return Array.from(this.sections.entries()).map(function(e){return e[1]}).reduce(function(e,t){var n=Array.from(t.elements.entries()).map(function(e){return e[1]});return[].concat(Object(Xe.a)(e),Object(Xe.a)(n))},[])}},{key:"getElementsById",value:function(){return Array.from(this.sections.entries()).map(function(e){return e[1]}).reduce(function(e,t){var n=Array.from(t.elements.entries()).reduce(function(e,t){return e[t[0]]=t[1],e},{});return Object(Ie.a)({},e,n)},{})}},{key:"convertValues",value:function(e,t){return Yt(e,this.getElements(),t)}},{key:"id",set:function(e){this._id=e},get:function(){return this._id}},{key:"access",set:function(e){this._access=e},get:function(){return this._access}},{key:"name",set:function(e){this._name=e},get:function(){return this._name}},{key:"description",set:function(e){this._description=e},get:function(){return this._description}},{key:"programId",set:function(e){this._programId=e},get:function(){return this._programId}},{key:"programRules",set:function(e){this._programRules=e},get:function(){return this._programRules}},{key:"sections",get:function(){return this._sections}},{key:"customForm",set:function(e){this._customForm=e},get:function(){return this._customForm}},{key:"featureType",set:function(e){this._featureType=e},get:function(){return this._featureType}},{key:"validationStrategy",set:function(t){t&&(vt.includes(t)?this._validationStrategy=t:R.a.warn(Object(Ze.b)(e.errorMessages.UNSUPPORTED_VALIDATION_STRATEGY)({renderFoundation:this,strategy:t})))},get:function(){return this._validationStrategy}}]),e}();Kt.errorMessages={UNSUPPORTED_VALIDATION_STRATEGY:"Tried to set an unsupported validation strategy"};var qt=function(){function e(t){Object(B.a)(this,e),t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"id",set:function(e){this._id=e},get:function(){return this._id}},{key:"name",set:function(e){this._name=e},get:function(){return this._name}},{key:"access",set:function(e){this._access=e},get:function(){return this._access}},{key:"from",set:function(e){this._from=e},get:function(){return this._from}},{key:"to",set:function(e){this._to=e},get:function(){return this._to}}]),e}(),Xt=function(){function e(t){Object(B.a)(this,e),t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"stageForm",get:function(){return this._stageForm},set:function(e){this._stageForm=e}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"relationshipTypes",get:function(){return this._relationshipTypes},set:function(e){this._relationshipTypes=e}},{key:"relationshipTypesWhereStageIsFrom",get:function(){var e=this;return this._relationshipTypes?this._relationshipTypes.filter(function(t){return t.from.programStageId&&t.from.programStageId===e.id}):[]}},{key:"enableUserAssignment",get:function(){return this._enableUserAssignment},set:function(e){this._enableUserAssignment=e}}]),e}(),Zt=function(e){function t(e){var n;return Object(B.a)(this,t),n=Object(W.a)(this,Object(H.a)(t).call(this)),e&&Object(Je.a)(e)&&e(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getStage",value:function(){return this._stages.get(t.EVENT_PROGRAM_STAGE_KEY)}},{key:"stage",set:function(e){this._stages.set(t.EVENT_PROGRAM_STAGE_KEY,e)},get:function(){return this._stages.get(t.EVENT_PROGRAM_STAGE_KEY)}}]),t}(nt);Zt.EVENT_PROGRAM_STAGE_KEY="EventProgramStage";var Jt={INCIDENT_DATE:"incidentDate",ENROLLMENT_DATE:"enrollmentDate"},Qt={INCIDENT_DATE:"Incident date",ENROLLMENT_DATE:"Enrollment date"},$t=function(){function e(t){var n;Object(B.a)(this,e),this._labels=(n={},Object(Wt.a)(n,Jt.INCIDENT_DATE,Qt.INCIDENT_DATE),Object(Wt.a)(n,Jt.ENROLLMENT_DATE,Qt.ENROLLMENT_DATE),n),this._optionFlags={allowFutureEnrollmentDate:!1,allowFutureIncidentDate:!1,showIncidentDate:!0},t&&Object(Je.a)(t)&&t(this)}return Object(G.a)(e,[{key:"enrollmentForm",set:function(e){this._enrollmentForm=e},get:function(){return this._enrollmentForm}},{key:"incidentDateLabel",set:function(e){this._labels[Jt.INCIDENT_DATE]=e},get:function(){return this._labels[Jt.INCIDENT_DATE]}},{key:"enrollmentDateLabel",set:function(e){this._labels[Jt.ENROLLMENT_DATE]=e},get:function(){return this._labels[Jt.ENROLLMENT_DATE]}},{key:"allowFutureEnrollmentDate",set:function(e){this._optionFlags.allowFutureEnrollmentDate=e},get:function(){return this._optionFlags.allowFutureEnrollmentDate}},{key:"allowFutureIncidentDate",set:function(e){this._optionFlags.allowFutureIncidentDate=e},get:function(){return this._optionFlags.allowFutureIncidentDate}},{key:"showIncidentDate",set:function(e){this._optionFlags.showIncidentDate=e},get:function(){return this._optionFlags.showIncidentDate}},{key:"inputSearchGroups",set:function(e){this._inputSearchGroups=e},get:function(){return this._inputSearchGroups}},{key:"trackedEntityType",set:function(e){this._trackedEntityType=e},get:function(){return this._trackedEntityType}}]),e}(),en=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this)))._attributes=[],e&&Object(Je.a)(e)&&e(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"searchGroups",get:function(){return this._searchGroups},set:function(e){this._searchGroups=e}},{key:"trackedEntityType",get:function(){return this._trackedEntityType},set:function(e){this._trackedEntityType=e}},{key:"enrollment",get:function(){return this._enrollment},set:function(e){this._enrollment=e}},{key:"attributes",get:function(){return this._attributes},set:function(e){this._attributes=e}}]),t}(nt),tn=function e(){Object(B.a)(this,e)},nn=new Map,an=new(function(){function e(){Object(B.a)(this,e),this._optionSets={}}return Object(G.a)(e,[{key:"set",value:function(e){var t=this;e.forEach(function(e,n){t._optionSets[n]=e})}},{key:"get",value:function(){return this._optionSets}}]),e}()),rn=new(function(){function e(){Object(B.a)(this,e)}return Object(G.a)(e,[{key:"set",value:function(e){this._constants=e}},{key:"get",value:function(){return this._constants}}]),e}()),on=new(function(){function e(){Object(B.a)(this,e)}return Object(G.a)(e,[{key:"set",value:function(e){this._systemSettings=e}},{key:"get",value:function(){return this._systemSettings}}]),e}()),sn=n(429),cn=n(1077),ln=n.n(cn),un=(n(6803),n(6804),n(6805),n(6806),n(116)),dn=n.n(un),pn=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,n=e.option,a=e.style,r=e.onSelect,i=e.currentlySelectedValues,o=e.classes,s=e.inFocus,c=e.onFocusOption,l=n.label,u=n.iconLeft,d=n.iconRight,p=!!i&&i.includes(n),f=Object.assign({},t.defaultContainerStyle,a,i&&i.includes(n)?t.selectedStyle:null,s?t.inFocusStyle:null);return I.a.createElement(dn.a,{title:n.label,placement:"bottom",classes:{popper:o.popper},enterDelay:800},I.a.createElement("div",{className:"virtualized-select-option",style:f,onClick:function(){r(n)},role:"option","aria-selected":p,tabIndex:-1,onMouseOver:function(){return c(n)}},u?I.a.createElement("div",{className:o.iconLeftContainer},u):null,I.a.createElement("div",null,l),d?I.a.createElement("div",{className:o.iconRightContainer},d):null))}}]),t}(j.Component);pn.defaultContainerStyle={display:"flex",alignItems:"center",cursor:"pointer",paddingLeft:5,overflow:"hidden",paddingTop:4,paddingBottom:2,whiteSpace:"nowrap",textOverflow:"ellipsis"},pn.selectedStyle={fontWeight:"bold"},pn.inFocusStyle={backgroundColor:"rgba(0,0,0,0.1)"};var fn=Object(k.withStyles)(function(){return{popper:{zIndex:9999},iconLeftContainer:{paddingRight:5},iconRightContainer:{paddingLeft:5}}})(pn),mn=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).filterOptions=function(){return n.state.filterValue?n.prevFilterValue===n.state.filterValue?n.prevFilteredOptions:(n.state.filterValue&&n.prevFilterValue&&n.state.filterValue.indexOf(n.prevFilterValue)>-1&&(n.prevFilteredOptions=t.getFilteredOptions(n.prevFilteredOptions,n.state.filterValue)),n.prevFilteredOptions=t.getFilteredOptions(n.props.options,n.state.filterValue),n.prevFilterValue=n.state.filterValue,n.prevFilteredOptions):n.props.options},n.handleInputChange=function(e){n.isUnmounted||n.setState({filterValue:e})},n.renderValue=function(e){var t=n.props.classes,a=e.iconLeft,r=e.iconRight,i=e.label;return j.createElement("div",{className:t.selectedOptionContainer},a?j.createElement("div",{className:t.selectedIconLeftContainer},a):null,j.createElement("div",null,i),r?j.createElement("div",{className:t.selectedIconRightContainer},r):null)},n.handleChange=n.handleChange.bind(Object(J.a)(n)),n.renderOption=n.renderOption.bind(Object(J.a)(n)),n.handleInputChange=Object(sn.debounce)(n.handleInputChange,500),n.prevFilteredOptions=[],n.state={},n.isUnmounted=!1,n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"getFilteredOptions",value:function(e,t){var n=t.toLowerCase();return e&&e.filter(function(e){return e.label.toLowerCase().indexOf(n)>-1})||[]}}]),Object(G.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.options!==this.props.options&&(this.prevFilterValue=null)}},{key:"componentWillUnmount",value:function(){this.isUnmounted=!0}},{key:"handleChange",value:function(e){var t=e&&e.value;t!==this.props.value&&this.props.onSelect(""===t?null:t)}},{key:"getValue",value:function(){var e=this.props.options,t=this.props.value;return e&&t?e.find(function(e){return e.value===t}):null}},{key:"renderOption",value:function(e){var t=e.option===e.focusedOption;return j.createElement(fn,{key:e.option.value,option:e.option,inFocus:t,onFocusOption:e.focusOption,style:e.style,onSelect:e.selectValue,currentlySelectedValues:e.valueArray})}},{key:"render",value:function(){var e=this,n=this.props,a=n.options,r=n.label,i=n.value,o=n.nullable,s=n.style,c=n.menuStyle,l=n.maxHeight,u=n.disabled,d=(n.required,n.useHintLabel),p=n.translations,f=(n.withoutUnderline,n.classes,Object(ue.a)(n,["options","label","value","nullable","style","menuStyle","maxHeight","disabled","required","useHintLabel","translations","withoutUnderline","classes"])),m=f.multi?i:this.getValue(),h=Object(Ie.a)({},t.defaultSelectStyle,s),g=Object(Ie.a)({},t.defaultMenuContainerStyle,c);return j.createElement("div",{ref:function(t){e.materialUIContainerInstance=t}},j.createElement("div",null,j.createElement(ln.a,Object.assign({disabled:u,options:a,onChange:this.handleChange,value:m,valueRenderer:this.renderValue,clearable:o,style:h,menuContainerStyle:g,className:"virtualized-select",placeholder:d?r:"",maxHeight:l||200,optionRenderer:this.renderOption,clearValueText:p.clearText,noResultsText:p.noResults,filterOptions:this.filterOptions,onInputChange:this.handleInputChange},f)),j.createElement("div",null)))}}]),t}(j.Component);mn.defaultSelectStyle={},mn.defaultMenuContainerStyle={},mn.defaultProps={translations:{clearText:"",noResults:""}};var hn=Object(k.withStyles)(function(){return{selectedOptionContainer:{display:"flex",alignItems:"center"},selectedIconLeftContainer:{paddingRight:5},selectedIconRightContainer:{paddingLeft:5}}})(mn),gn=n(177),bn=n.n(gn),vn=n(147),On=n.n(vn),yn=n(396),En=n.n(yn),_n=Object(k.withStyles)(function(){return{list:{padding:0},item:{wordBreak:"break-word",hyphens:"auto",backgroundColor:"#ffffff",borderRadius:5,marginBottom:5,padding:5,border:"1px solid lightGrey","&:hover":{backgroundColor:"white",borderColor:"#71a4f8"}},itemContents:{display:"flex",alignItems:"center"}}})(function(e){var t=e.items,n=e.onSelect,a=e.classes;return j.createElement(bn.a,{className:a.list},t.map(function(e){return j.createElement(On.a,{className:a.item,button:!0,onClick:function(){return n(e.value)},key:e.value},j.createElement(En.a,{primary:j.createElement("div",{className:a.itemContents},e.iconLeft,e.label)}))}))}),jn=n(73),In=n(111),Sn=n.n(In),Cn=n(41),Tn=function(){function e(t,n,a,r){var i=this;if(Object(B.a)(this,e),this.throwIfDataObjectError=function(t){if(!t||!t[i.adapter.keyPath])throw Error(Object(Cn.a)(e.errorMessages.INVALID_STORAGE_OBJECT)({adapter:i.adapter}))},!t)throw new Error(e.errorMessages.INVALID_NAME);if(!a||!Sn()(a||0===a.length))throw new Error(e.errorMessages.NO_ADAPTERS_DEFINED);var o=a.filter(function(t){if(!e.isAdapterValid(t))throw new Error(Object(Cn.a)(e.errorMessages.INVALID_ADAPTER_PROVIDED)({Adapter:t}));return t.isSupported()});if(o.length<=0)throw new Error(e.errorMessages.NO_VALID_ADAPTERS_FOUND);this.name=t,this.version=n,this.Adapters=a,this.AvailableAdapters=o;var s=o[0];this.adapter=new s({name:t,version:n,objectStores:r,keyPath:"id"}),this.adapterType=s}return Object(G.a)(e,null,[{key:"isAdapterValid",value:function(e){return!!"isSupported".split(" ").every(function(t){return e[t]})&&"open set setAll get getAll getKeys count contains remove removeAll close destroy isOpen".split(" ").every(function(t){return e.prototype[t]})}}]),Object(G.a)(e,[{key:"getOpenStatusError",value:function(){return this.adapter.isOpen()?null:Object(Cn.a)(e.errorMessages.STORAGE_NOT_OPEN)({adapter:this.adapter})}},{key:"throwIfNotOpen",value:function(){if(this.getOpenStatusError())throw Error(Object(Cn.a)(e.errorMessages.STORAGE_NOT_OPEN)({adapter:this.adapter}))}},{key:"throwIfStoreNotFound",value:function(t,n){if(!t||!this.adapter.objectStoreNames.includes(t))throw Error(Object(Cn.a)(e.errorMessages.INVALID_OBJECTSTORE)({storageContainer:this,adapter:this.adapter,method:n}))}},{key:"throwIfDataArrayError",value:function(t){if(!t)throw Error(Object(Cn.a)(e.errorMessages.INVALID_STORAGE_ARRAY)({adapter:this.adapter}));t.forEach(this.throwIfDataObjectError)}},{key:"_openFallbackAdapter",value:function(){var t=Object(i.a)(r.a.mark(function t(){var n,a,i,o,s=this,c=arguments;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.AvailableAdapters.findIndex(function(e){return e===s.adapterType}),a=n+1,!(this.AvailableAdapters.length<=a)){t.next=4;break}throw new Error(e.errorMessages.OPEN_FAILED);case 4:return i=this.AvailableAdapters[a],o=new i({name:this.adapter.name,version:this.adapter.version,objectStores:this.adapter.objectStoreNames,keyPath:"id"}),this.adapter=o,this.adapterType=i,t.next=10,this.open.apply(this,c);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"open",value:function(){var t=Object(i.a)(r.a.mark(function t(){var n,a,i=arguments;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.adapter.isOpen()){t.next=2;break}throw new Error(Object(Cn.a)(e.errorMessages.STORAGE_ALREADY_OPEN)({adapter:this.adapter}));case 2:if((n=this.adapter.objectStoreNames)&&Sn()(n)&&0!==n.length){t.next=5;break}throw new Error(e.errorMessages.NO_OBJECTSTORES_DEFINED);case 5:return t.prev=5,t.next=8,(a=this.adapter).open.apply(a,i);case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(5),t.next=14,this._openFallbackAdapter.apply(this,i);case 14:case"end":return t.stop()}},t,this,[[5,10]])}));return function(){return t.apply(this,arguments)}}()},{key:"setWithoutFallback",value:function(){var e=Object(i.a)(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfNotOpen(),this.throwIfStoreNotFound(t,"set"),this.throwIfDataObjectError(n),e.abrupt("return",this.adapter.set(t,n));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"set",value:function(){var t=Object(i.a)(r.a.mark(function t(n,a){var i=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.throwIfNotOpen(),this.throwIfStoreNotFound(n,"set"),this.throwIfDataObjectError(a),t.abrupt("return",Promise.resolve().then(function(){return i.adapter.set(n,a)}).catch(function(t){return R.a.error(Object(Cn.a)(e.errorMessages.SET_FAILED)({adapter:i.adapter,store:n,dataObject:a,error:t})),Promise.reject(e.errorMessages.SET_FAILED)}));case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"setAll",value:function(){var t=Object(i.a)(r.a.mark(function t(n,a){var i=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.throwIfNotOpen(),this.throwIfStoreNotFound(n,"setAll"),this.throwIfDataArrayError(a),t.abrupt("return",Promise.resolve().then(function(){return i.adapter.setAll(n,a)}).catch(function(t){return R.a.error(Object(Cn.a)(e.errorMessages.SET_ALL_FAILED)({adapter:i.adapter,store:n,dataArray:a,error:t})),Promise.reject(e.errorMessages.SET_ALL_FAILED)}));case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"get",value:function(){var t=Object(i.a)(r.a.mark(function t(n,a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.throwIfNotOpen(),this.throwIfStoreNotFound(n,"get"),a){t.next=4;break}throw Error(Object(Cn.a)(e.errorMessages.MISSING_KEY)({adapter:this.adapter,key:a,method:"get"}));case 4:return t.abrupt("return",this.adapter.get(n,a));case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(i.a)(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfNotOpen(),this.throwIfStoreNotFound(t,"getAll"),e.abrupt("return",this.adapter.getAll(t,n));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getKeys",value:function(){var e=Object(i.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfNotOpen(),this.throwIfStoreNotFound(t,"getKeys"),e.abrupt("return",this.adapter.getKeys(t));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var t=Object(i.a)(r.a.mark(function t(n,a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.throwIfNotOpen(),this.throwIfStoreNotFound(n,"remove"),a){t.next=4;break}throw Error(Object(Cn.a)(e.errorMessages.MISSING_KEY)({adapter:this.adapter,key:a,method:"remove"}));case 4:return t.abrupt("return",this.adapter.remove(n,a));case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"removeAll",value:function(){var e=Object(i.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfNotOpen(),this.throwIfStoreNotFound(t,"removeAll"),e.abrupt("return",this.adapter.removeAll(t));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"contains",value:function(){var t=Object(i.a)(r.a.mark(function t(n,a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.throwIfNotOpen(),this.throwIfStoreNotFound(n,"contains"),a){t.next=4;break}throw Error(Object(Cn.a)(e.errorMessages.MISSING_KEY)({adapter:this.adapter,key:a,method:"contains"}));case 4:return t.abrupt("return",this.adapter.contains(n,a));case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"count",value:function(){var e=Object(i.a)(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfNotOpen(),this.throwIfStoreNotFound(t,"count"),e.abrupt("return",this.adapter.count(t,n));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t,n=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(t=this.adapter).close.apply(t,n));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t,n=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(t=this.adapter).destroy.apply(t,n));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();Tn.errorMessages={INVALID_NAME:"A valid database name must be provided",NO_OBJECTSTORES_DEFINED:"no objectStores defined",NO_ADAPTERS_PROVIDED:"no adapters provided",NO_VALID_ADAPTERS_FOUND:"no valid adapters found",INVALID_ADAPTER_PROVIDED:"An invalid adapter was provided",INVALID_OBJECTSTORE:"Specify a valid objectStore",STORAGE_NOT_OPEN:"Please open storage first",STORAGE_ALREADY_OPEN:"Storage is already open",INVALID_STORAGE_OBJECT:"Invalid storage object",INVALID_STORAGE_ARRAY:"Invalid storage array",MISSING_KEY:"Please specifiy key",OPEN_FAILED:"Open storage failed",SET_FAILED:"Could not save to cache",SET_ALL_FAILED:"Could not save all to cache"};var Rn,Nn=n(720),kn=n.n(Nn);function An(e){Rn=e}var wn=function(){return Rn||R.a.error("please set d2 before using it"),Rn},Pn=function(){return wn().Api.getApi()},Dn=function(){return wn().currentUser},xn=function(){return wn().currentUser.authorities.has("F_USER_VIEW")},Fn=wn,Ln=function(){var e=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Pn().baseUrl,"/icons/").concat(t,"/icon.svg"),e.abrupt("return",n);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Un=function(){var e=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",kn.a);case 2:return e.prev=2,e.next=5,Ln(t);case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),n=kn.a;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}();function Mn(e){return e.toLowerCase().replace(/_(.)/g,function(e,t){return t.toUpperCase()})}var Vn,Bn,Gn=function(e){return{momentDate:e,isValid:!!e&&e.isValid()}};function Wn(e,t,n){var a=t.match(n),r=a&&a[0],i=e.replace(n,r),o=t.replace(n,r),s=De(i,o,!0);return s.isValid()?Gn(s):function(e,t,n){var a=e.split(n),r=t.split(n);if(a.length===r.length){var i=r.map(function(e,t){var n="",r=a[t];if(e&&r){var i=e.charAt(0);"M"===i?1===r.length?n="M":2===r.length&&(n="MM"):"D"===i?1===r.length?n="D":2===r.length&&(n="DD"):"Y"===i&&(2===r.length?n="YY":4===r.length&&(n="YYYY"))}return n||e}).join(n),o=De(e,i,!0);return Gn(o)}return Gn(null)}(i,o,r)}function Hn(e,t,n){var a=e.replace(n,""),r=t.replace(n,""),i=De(a,r,!0);return i.isValid()?Gn(i):Gn(null)}function zn(e,t){var n=/[.,\-_\/\\]/g;return n.test(e)&&n.test(t)?Wn(e,t,n):Hn(e,t,n)}function Yn(e){return e=(e=(e=e.replace(/[ ]/g,"")).replace(",",".")).replace(/^[+]$/,""),Number(e)}function Kn(e){var t=De(e,["HH:mm","H:mm","HH.mm","H.mm"],!0);return{isValid:t.isValid(),momentTime:t}}var qn=(Vn={},Object(Wt.a)(Vn,ft.NUMBER,Yn),Object(Wt.a)(Vn,ft.INTEGER,Yn),Object(Wt.a)(Vn,ft.INTEGER_POSITIVE,Yn),Object(Wt.a)(Vn,ft.INTEGER_ZERO_OR_POSITIVE,Yn),Object(Wt.a)(Vn,ft.INTEGER_NEGATIVE,Yn),Object(Wt.a)(Vn,ft.DATE,function(e){return De(e,"YYYY-MM-DD").toISOString()}),Object(Wt.a)(Vn,ft.DATETIME,function(e){return De(e,"YYYY-MM-DD HH:mm").toISOString()}),Object(Wt.a)(Vn,ft.TIME,function(e){var t=Kn(e);return t.isValid?t.momentTime:null}),Object(Wt.a)(Vn,ft.TRUE_ONLY,function(e){return"true"===e||null}),Object(Wt.a)(Vn,ft.BOOLEAN,function(e){return"true"===e}),Vn);function Xn(e,t){return null==e?null:qn[t]?qn[t](e):e}var Zn=(Bn={},Object(Wt.a)(Bn,ft.NUMBER,Yn),Object(Wt.a)(Bn,ft.INTEGER,Yn),Object(Wt.a)(Bn,ft.INTEGER_POSITIVE,Yn),Object(Wt.a)(Bn,ft.INTEGER_ZERO_OR_POSITIVE,Yn),Object(Wt.a)(Bn,ft.INTEGER_NEGATIVE,Yn),Object(Wt.a)(Bn,ft.DATE,function(e){return De(e,"YYYY-MM-DD").toISOString()}),Object(Wt.a)(Bn,ft.DATETIME,function(e){return De(e).toISOString()}),Object(Wt.a)(Bn,ft.TRUE_ONLY,function(e){return"true"===e||null}),Object(Wt.a)(Bn,ft.BOOLEAN,function(e){return"true"===e}),Object(Wt.a)(Bn,ft.COORDINATE,function(e){var t=JSON.parse(e);return{latitude:t[1],longitude:t[0]}}),Bn);function Jn(e,t){return null==e?null:Zn[t]?Zn[t](e):e}var Qn=function(){function e(t,n){Object(B.a)(this,e),this.cachedOptionSets=t,this.locale=n}return Object(G.a)(e,null,[{key:"_buildOptionIcon",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t,n,a,i=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},n=t&&t.icon){e.next=4;break}return e.abrupt("return",null);case 4:return e.prev=4,e.next=7,Ln(n);case 7:return a=e.sent,e.abrupt("return",new et(function(e){t.color&&(e.color=t.color),e.data=a}));case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",null);case 14:case"end":return e.stop()}},e,null,[[4,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"getRenderType",value:function(e){return e&&Mn(e)}}]),Object(G.a)(e,[{key:"_getTranslation",value:function(e,t){var n=this;if(this.locale){var a=e.find(function(e){return e.property===t&&e.locale===n.locale});return a&&a.value}return null}},{key:"build",value:function(){var t=Object(i.a)(r.a.mark(function t(n,a,o,s,c){var l,u,d,p,f,m=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l=this.cachedOptionSets.get(a)){t.next=4;break}return R.a.warn(Object(Ze.b)(e.OPTION_SET_NOT_FOUND)({id:a})),t.abrupt("return",null);case 4:return n.type=c(l.valueType),u=l.options.map(function(){var t=Object(i.a)(r.a.mark(function t(n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._buildOptionIcon(n.style);case 2:return a=t.sent,t.abrupt("return",new st(function(t){t.id=n.id,t.value=n.code,t.text=m._getTranslation(n.translations,e.translationPropertyNames.NAME)||n.displayName,t.icon=a}));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),t.next=8,Promise.all(u);case 8:return d=t.sent,p=l.optionGroups&&new Map(l.optionGroups.map(function(e){return[e.id,new ct(function(t){t.id=e.id,t.optionIds=new Map(e.options.map(function(e){return[e,e]}))})]})),(f=new pt(l.id,d,p,n,Xn)).inputType=e.getRenderType(s)||(o?lt.VERTICAL_RADIOBUTTONS:null),t.abrupt("return",f);case 13:case"end":return t.stop()}},t,this)}));return function(e,n,a,r,i){return t.apply(this,arguments)}}()}]),e}();Qn.OPTION_SET_NOT_FOUND="Optionset not found",Qn.translationPropertyNames={NAME:"NAME",DESCRIPTION:"DESCRIPTION",SHORT_NAME:"SHORT_NAME"};var $n,ea=Qn,ta="NAME",na="DESCRIPTION",aa="SHORT_NAME",ra=($n={},Object(Wt.a)($n,ft.NUMBER,ft.NUMBER_RANGE),Object(Wt.a)($n,ft.INTEGER,ft.INTEGER_RANGE),Object(Wt.a)($n,ft.INTEGER_POSITIVE,ft.INTEGER_POSITIVE_RANGE),Object(Wt.a)($n,ft.INTEGER_ZERO_OR_POSITIVE,ft.INTEGER_ZERO_OR_POSITIVE_RANGE),Object(Wt.a)($n,ft.INTEGER_NEGATIVE,ft.INTEGER_NEGATIVE_RANGE),Object(Wt.a)($n,ft.DATE,ft.DATE_RANGE),Object(Wt.a)($n,ft.DATETIME,ft.DATETIME_RANGE),Object(Wt.a)($n,ft.TIME,ft.TIME_RANGE),$n),ia=function(){function e(t,n){Object(B.a)(this,e),this.cachedTrackedEntityAttributes=t,this.locale=n}return Object(G.a)(e,null,[{key:"_getSearchAttributeValueType",value:function(e,t){var n=ra[e];return!t&&n?n:e}}]),Object(G.a)(e,[{key:"_getAttributeTranslation",value:function(e,t){var n=this;if(this.locale){var a=e.find(function(e){return e.property===t&&e.locale===n.locale});return a&&a.value}return null}},{key:"_buildElement",value:function(){var t=Object(i.a)(r.a.mark(function t(n){var a,i,o=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.trackedEntityAttribute,i=new gt(function(t){t.id=a.id,t.name=o._getAttributeTranslation(a.translations,ta)||a.displayName,t.shortName=o._getAttributeTranslation(a.translations,aa)||a.displayShortName,t.formName=o._getAttributeTranslation(a.translations,ta)||a.displayName,t.description=o._getAttributeTranslation(a.translations,na)||a.description,t.displayInForms=!0,t.displayInReports=n.displayInList,t.compulsory=!!a.unique,t.disabled=!1,t.type=e._getSearchAttributeValueType(a.valueType,a.unique)}),t.next=4,Promise.resolve();case 4:return t.abrupt("return",i);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"_buildSection",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new yt(function(e){e.id=yt.MAIN_SECTION_ID,e.showContainer=!1}),e.next=3,t.asyncForEach(function(){var e=Object(i.a)(r.a.mark(function e(t){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._buildElement(t);case 2:(i=e.sent)&&n.addElement(i);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"_buildRenderFoundation",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Kt,e.t0=n,e.next=4,this._buildSection(t);case 4:return e.t1=e.sent,e.t0.addSection.call(e.t0,e.t1),e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_buildSearchGroup",value:function(){var e=Object(i.a)(r.a.mark(function e(t,n,a){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Lt,e.next=3,this._buildRenderFoundation(n);case 3:return i.searchForm=e.sent,"main"===t?(i.minAttributesRequiredToSearch=a,i.id="main"):(i.unique=!0,i.id="unique"),e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getTrackedEntityAttribute",value:function(e){var t=e.trackedEntityAttributeId,n=t?this.cachedTrackedEntityAttributes.get(t):null;return n||R.a.error(Object(Ze.b)("Tried to create a searchAttribute where trackedEntityAttributeId was not specified or the trackedEntityAttribute could not be retrieved from the cache")({attribute:e})),n}},{key:"build",value:function(e,t){var n=this,a=e.map(function(e){return Object(Ie.a)({},e,{trackedEntityAttribute:n.getTrackedEntityAttribute(e)})}).filter(function(e){return e.trackedEntityAttribute&&(e.searchable||e.trackedEntityAttribute.unique)}).reduce(function(e,t){return t.trackedEntityAttribute.unique?e[t.trackedEntityAttribute.id]=[t]:e.main=e.main?[].concat(Object(Xe.a)(e.main),[t]):[t],e},{}),r=Object.keys(a).map(function(e){return n._buildSearchGroup(e,a[e],t)});return Promise.all(r)}}]),e}();ia.errorMessages={TRACKED_ENTITY_ATTRIBUTE_NOT_FOUND:"Tracked entity attribute not found"};var oa,sa=ia;function ca(e){return e.charAt(0).toLocaleUpperCase()+e.slice(1)}function la(e){return zn(e,on.get().dateFormat)}function ua(e){var t=on.get().dateFormat;return De(e).format(t)}function da(e){var t=on.get().dateFormat;return e.format(t)}function pa(e){return e.toString()}var fa,ma=(oa={},Object(Wt.a)(oa,ft.NUMBER,pa),Object(Wt.a)(oa,ft.INTEGER,pa),Object(Wt.a)(oa,ft.INTEGER_POSITIVE,pa),Object(Wt.a)(oa,ft.INTEGER_ZERO_OR_POSITIVE,pa),Object(Wt.a)(oa,ft.INTEGER_NEGATIVE,pa),Object(Wt.a)(oa,ft.DATE,function(e){return da(De(e))}),Object(Wt.a)(oa,ft.DATETIME,function(e){var t=De(e);return{date:da(t),time:t.format("HH:mm")}}),Object(Wt.a)(oa,ft.TIME,function(e){return De(e,"HH:mm",!0).format("HH:mm")}),Object(Wt.a)(oa,ft.TRUE_ONLY,function(){return"true"}),Object(Wt.a)(oa,ft.BOOLEAN,function(e){return e?"true":"false"}),Object(Wt.a)(oa,ft.AGE,function(e){var t=De(),n=De(e),a=t.diff(n,"years");n.add(a,"years");var r=t.diff(n,"months");n.add(r,"months");var i=t.diff(n,"days");return{date:da(De(e)),years:a.toString(),months:r.toString(),days:i.toString()}}),oa);function ha(e,t){return(e||0===e||!1===e)&&ma[t]?ma[t](e):e}function ga(e){return da(De(e))}function ba(e){return I.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()}},e.name)}var va,Oa=(fa={},Object(Wt.a)(fa,ft.NUMBER,pa),Object(Wt.a)(fa,ft.INTEGER,pa),Object(Wt.a)(fa,ft.INTEGER_POSITIVE,pa),Object(Wt.a)(fa,ft.INTEGER_ZERO_OR_POSITIVE,pa),Object(Wt.a)(fa,ft.INTEGER_NEGATIVE,pa),Object(Wt.a)(fa,ft.DATE,ga),Object(Wt.a)(fa,ft.DATE_RANGE,function(e){return t=ga,n=e,I.a.createElement("span",null,t(n.from)," ","->"," ",t(n.to));var t,n}),Object(Wt.a)(fa,ft.DATETIME,function(e){var t=De(e),n=da(t),a=t.format("HH:mm");return"".concat(n," ").concat(a)}),Object(Wt.a)(fa,ft.TIME,function(e){return De(e,"HH:mm",!0).format("HH:mm")}),Object(Wt.a)(fa,ft.TRUE_ONLY,function(){return"Yes"}),Object(Wt.a)(fa,ft.BOOLEAN,function(e){return e?"Yes":"No"}),Object(Wt.a)(fa,ft.COORDINATE,function(e){return"[ ".concat(e.longitude,", ").concat(e.latitude," ]")}),Object(Wt.a)(fa,ft.AGE,ga),Object(Wt.a)(fa,ft.FILE_RESOURCE,ba),Object(Wt.a)(fa,ft.IMAGE,ba),Object(Wt.a)(fa,ft.ORGANISATION_UNIT,function(e){return e.name}),fa);function ya(e,t,n){return e||0===e||!1===e?n&&n.optionSet?n.optionSet.getOptionText(e):Oa[t]?Oa[t](e):e:e}function Ea(e){return da(De(e))}function _a(e){return I.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()}},e.name)}var ja,Ia=(va={},Object(Wt.a)(va,ft.NUMBER,pa),Object(Wt.a)(va,ft.INTEGER,pa),Object(Wt.a)(va,ft.INTEGER_POSITIVE,pa),Object(Wt.a)(va,ft.INTEGER_ZERO_OR_POSITIVE,pa),Object(Wt.a)(va,ft.INTEGER_NEGATIVE,pa),Object(Wt.a)(va,ft.DATE,Ea),Object(Wt.a)(va,ft.DATETIME,function(e){var t=De(e),n=da(t),a=t.format("HH:mm");return"".concat(n," ").concat(a)}),Object(Wt.a)(va,ft.TIME,function(e){return De(e,"HH:mm",!0).format("HH:mm")}),Object(Wt.a)(va,ft.TRUE_ONLY,function(){return"Yes"}),Object(Wt.a)(va,ft.BOOLEAN,function(e){return e?"Yes":"No"}),Object(Wt.a)(va,ft.COORDINATE,function(e){return"[ ".concat(e.longitude,", ").concat(e.latitude," ]")}),Object(Wt.a)(va,ft.AGE,Ea),Object(Wt.a)(va,ft.FILE_RESOURCE,_a),Object(Wt.a)(va,ft.IMAGE,_a),Object(Wt.a)(va,ft.ORGANISATION_UNIT,function(e){return e.name}),va);function Sa(e,t,n){return e||0===e||!1===e?n&&n.optionSet?n.optionSet.getOptionText(e):Ia[t]?Ia[t](e):e:e}function Ca(e){var t=De(e);return t.locale("en"),t.format("YYYY-MM-DD")}function Ta(e,t){return{from:e(t.from),to:e(t.to)}}var Ra=(ja={},Object(Wt.a)(ja,ft.NUMBER,pa),Object(Wt.a)(ja,ft.NUMBER_RANGE,function(e){return Ta(pa,e)}),Object(Wt.a)(ja,ft.INTEGER,pa),Object(Wt.a)(ja,ft.INTEGER_RANGE,function(e){return Ta(pa,e)}),Object(Wt.a)(ja,ft.INTEGER_POSITIVE,pa),Object(Wt.a)(ja,ft.INTEGER_POSITIVE_RANGE,function(e){return Ta(pa,e)}),Object(Wt.a)(ja,ft.INTEGER_ZERO_OR_POSITIVE,pa),Object(Wt.a)(ja,ft.INTEGER_ZERO_OR_POSITIVE_RANGE,function(e){return Ta(pa,e)}),Object(Wt.a)(ja,ft.INTEGER_NEGATIVE,pa),Object(Wt.a)(ja,ft.INTEGER_NEGATIVE_RANGE,function(e){return Ta(pa,e)}),Object(Wt.a)(ja,ft.DATE,Ca),Object(Wt.a)(ja,ft.DATE_RANGE,function(e){return Ta(Ca,e)}),Object(Wt.a)(ja,ft.TRUE_ONLY,function(){return"true"}),Object(Wt.a)(ja,ft.BOOLEAN,function(e){return e?"true":"false"}),Object(Wt.a)(ja,ft.FILE_RESOURCE,function(e){return e.value}),Object(Wt.a)(ja,ft.IMAGE,function(e){return e.value}),Object(Wt.a)(ja,ft.COORDINATE,function(e){return"[".concat(e.longitude,",").concat(e.latitude,"]")}),Object(Wt.a)(ja,ft.PERCENTAGE,function(e){return e.replace("%","")}),Object(Wt.a)(ja,ft.ORGANISATION_UNIT,function(e){return e.id}),ja);function Na(e,t){return(e||0===e||!1===e)&&Ra[t]?Ra[t](e):e}var ka,Aa=n(102),wa=n.n(Aa);function Pa(e){var t=e.date,n=Kn(e.time).momentTime,a=n.hour(),r=n.minute(),i=la(t).momentDate;return i.hour(a),i.minute(r),i.toISOString()}function Da(e){return la(e).momentDate.toISOString()}function xa(e){var t=Kn(e).momentTime;return t.locale("en"),t.format("HH:mm")}function Fa(e,t){return{from:e(t.from),to:e(t.to)}}var La=(ka={},Object(Wt.a)(ka,ft.NUMBER,Yn),Object(Wt.a)(ka,ft.NUMBER_RANGE,function(e){return Fa(Yn,e)}),Object(Wt.a)(ka,ft.INTEGER,Yn),Object(Wt.a)(ka,ft.INTEGER_RANGE,function(e){return Fa(Yn,e)}),Object(Wt.a)(ka,ft.INTEGER_POSITIVE,Yn),Object(Wt.a)(ka,ft.INTEGER_POSITIVE_RANGE,function(e){return Fa(Yn,e)}),Object(Wt.a)(ka,ft.INTEGER_ZERO_OR_POSITIVE,Yn),Object(Wt.a)(ka,ft.INTEGER_ZERO_OR_POSITIVE_RANGE,function(e){return Fa(Yn,e)}),Object(Wt.a)(ka,ft.INTEGER_NEGATIVE,Yn),Object(Wt.a)(ka,ft.INTEGER_NEGATIVE_RANGE,function(e){return Fa(Yn,e)}),Object(Wt.a)(ka,ft.DATE,Da),Object(Wt.a)(ka,ft.DATE_RANGE,function(e){return Fa(Da,e)}),Object(Wt.a)(ka,ft.DATETIME,Pa),Object(Wt.a)(ka,ft.DATETIME_RANGE,function(e){return Fa(Pa,e)}),Object(Wt.a)(ka,ft.TIME,xa),Object(Wt.a)(ka,ft.TIME_RANGE,function(e){return Fa(xa,e)}),Object(Wt.a)(ka,ft.TRUE_ONLY,function(e){return"true"===e||null}),Object(Wt.a)(ka,ft.BOOLEAN,function(e){return"true"===e}),Object(Wt.a)(ka,ft.AGE,function(e){return Da(e.date)}),Object(Wt.a)(ka,ft.USERNAME,function(e){return e.username}),ka);function Ua(e,t){if(null==e)return null;var n;if(wa()(e)){if(!(n=e.trim()))return null}else n=e;return La[t]?La[t](n):n}var Ma=function(){function e(t,n,a){Object(B.a)(this,e),this.cachedTrackedEntityAttributes=t,this.locale=a,this.optionSetFactory=new ea(n,a)}return Object(G.a)(e,null,[{key:"buildtetFeatureType",value:function(e){return new gt(function(t){t.id="FEATURETYPE_".concat(e),t.name="POINT"===e?s.a.t("Coordinate"):s.a.t("Area"),t.formName=t.name,t.compulsory=!1,t.displayInForms=!0,t.disabled=!1,t.type="POINT"===e?ft.COORDINATE:ft.POLYGON})}}]),Object(G.a)(e,[{key:"_getAttributeTranslation",value:function(e,t){var n=this;if(this.locale){var a=e.find(function(e){return e.property===t&&e.locale===n.locale});return a&&a.value}return null}},{key:"build",value:function(){var t=Object(i.a)(r.a.mark(function t(n){var a,i,o=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.trackedEntityAttributeId&&this.cachedTrackedEntityAttributes.get(n.trackedEntityAttributeId)){t.next=4;break}return R.a.error(Object(Ze.b)(e.errorMessages.TRACKED_ENTITY_ATTRIBUTE_NOT_FOUND)({cachedProgramTrackedEntityAttribute:n})),t.abrupt("return",null);case 4:if(i=new gt(function(t){t.id=a.id,t.compulsory=n.mandatory,t.name=o._getAttributeTranslation(a.translations,e.translationPropertyNames.NAME)||a.displayName,t.shortName=o._getAttributeTranslation(a.translations,e.translationPropertyNames.SHORT_NAME)||a.displayShortName,t.formName=t.name,t.description=o._getAttributeTranslation(a.translations,e.translationPropertyNames.DESCRIPTION)||a.description,t.displayInForms=!0,t.displayInReports=n.displayInList,t.disabled=!1,t.type=a.valueType}),a.unique&&(i.unique=new ht(function(e){e.scope=a.orgunitScope?mt.ORGANISATION_UNIT:mt.ENTIRE_SYSTEM,e.onValidate=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Object(Ze.d)(Ua,Na)(t,a.valueType);if(r.onGetUnsavedAttributeValues){var s=r.onGetUnsavedAttributeValues(i.id);if(s)if(s.find(function(e){return e===o}))return{valid:!1,data:{attributeValueExistsUnsaved:!0}}}if(e.scope===mt.ORGANISATION_UNIT){var c=r.orgUnitId;n=Pn().get("trackedEntityInstances",{ou:c,filter:"".concat(i.id,":EQ:").concat(o)})}else n=Pn().get("trackedEntityInstances",{ouMode:"ACCESSIBLE",filter:"".concat(i.id,":EQ:").concat(o)});return n.then(function(e){var t=e.trackedEntityInstances&&e.trackedEntityInstances[0]||{},n={id:t.trackedEntityInstance,tetId:t.trackedEntityType};return{valid:0===e.trackedEntityInstances.length,data:n}})},a.pattern&&(e.generatable=!!a.pattern)})),!a.optionSet||!a.optionSet.id){t.next=10;break}return t.next=9,this.optionSetFactory.build(i,a.optionSet.id,n.renderOptionsAsRadio,null,function(e){return e});case 9:i.optionSet=t.sent;case 10:return t.abrupt("return",i);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}();Ma.translationPropertyNames={NAME:"NAME",DESCRIPTION:"DESCRIPTION",SHORT_NAME:"SHORT_NAME"},Ma.errorMessages={TRACKED_ENTITY_ATTRIBUTE_NOT_FOUND:"TrackedEntityAttributeId missing from programTrackedEntityAttribute or trackedEntityAttribute not found"};var Va=Ma,Ba=function(){function e(t,n,a,r,i){Object(B.a)(this,e),this.locale=r,this.trackedEntityTypeCollection=i,this.cachedTrackedEntityAttributes=t,this.cachedTrackedEntityTypes=a,this.dataElementFactory=new Va(t,n,r)}return Object(G.a)(e,null,[{key:"_addLabels",value:function(e,t){t.enrollmentDateLabel&&(e.enrollmentDateLabel=t.enrollmentDateLabel),t.incidentDateLabel&&(e.incidentDateLabel=t.incidentDateLabel)}},{key:"_addFlags",value:function(e,t){e.allowFutureEnrollmentDate=t.selectEnrollmentDatesInFuture,e.allowFutureIncidentDate=t.selectIncidentDatesInFuture,e.showIncidentDate=t.displayIncidentDate}},{key:"_getFeatureType",value:function(e){return e?ca(e.toLowerCase()):"None"}}]),Object(G.a)(e,[{key:"_buildTetFeatureTypeField",value:function(e){var t=e&&this.cachedTrackedEntityTypes.get(e);if(!t)return null;var n=t.featureType;return n&&["POINT","POLYGON"].includes(n)?Va.buildtetFeatureType(n):null}},{key:"_buildSection",value:function(){var e=Object(i.a)(r.a.mark(function e(t,n){var a,o,c=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this._buildTetFeatureTypeField(n),t&&!(t.length<=0)||a){e.next=3;break}return e.abrupt("return",null);case 3:if(o=new yt(function(e){e.id=yt.MAIN_SECTION_ID,e.name=s.a.t("Profile")}),a&&o.addElement(a),!(t&&t.length>0)){e.next=8;break}return e.next=8,t.asyncForEach(function(){var e=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.dataElementFactory.build(t);case 2:(n=e.sent)&&o.addElement(n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_buildEnrollmentForm",value:function(){var t=Object(i.a)(r.a.mark(function t(n){var a,i,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new Kt(function(t){t.featureType=e._getFeatureType(n.featureType),t.name=n.displayName}),t.next=3,this._buildSection(n.programTrackedEntityAttributes,n.trackedEntityTypeId);case 3:if((i=t.sent)&&a.addSection(i),n.dataEntryForm){i||(i=new yt(function(e){e.id=yt.MAIN_SECTION_ID})),i.showContainer=!1,o=n.dataEntryForm;try{a.customForm=new Et.a(function(e){e.id=o.id,e.data=o.htmlCode})}catch(r){R.a.error(Object(Ze.b)(e.errorMessages.CUSTOM_FORM_TEMPLATE_ERROR)({template:o.htmlCode,error:r,method:"buildEnrollment"}))}}return t.abrupt("return",a);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_buildInputSearchGroupFoundation",value:function(t,n){var a=this,r=(t.programTrackedEntityAttributes||[]).reduce(function(e,t){if(!t.trackedEntityAttributeId)return R.a.error(Object(Ze.b)("TrackedEntityAttributeId missing from programTrackedEntityAttribute")({programTeiAttribute:t})),e;var n=a.cachedTrackedEntityAttributes.get(t.trackedEntityAttributeId);return n?e[n.id]=n:R.a.error(Object(Ze.b)("could not retrieve tei attribute")({programTeiAttribute:t})),e},{}),i=n.searchForm,o=new Kt,s=new yt(function(e){e.id=yt.MAIN_SECTION_ID});return Array.from(i.getSection(yt.MAIN_SECTION_ID).elements.entries()).map(function(e){return e[1]}).forEach(function(t){var n=e._buildSearchGroupElement(t,r[t.id]);n&&s.addElement(n)}),o.addSection(s),o}},{key:"_buildInputSearchGroups",value:function(e){var t=this;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(function(e){return!e.unique}).map(function(n){return new Ut(function(a){a.id=n.id,a.minAttributesRequiredToSearch=n.minAttributesRequiredToSearch,a.searchFoundation=t._buildInputSearchGroupFoundation(e,n),a.onSearch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.orgUnitId,a=t.program;return Pn().get("trackedEntityInstances/count.json",{ou:n,program:a,ouMode:"ACCESSIBLE",filter:Object.keys(e).filter(function(t){return e[t]||0===e[t]||!1===e[t]}).map(function(t){return"".concat(t,":LIKE:").concat(e[t])}),pageSize:1,page:1,totalPages:!0})}})})}},{key:"build",value:function(){var t=Object(i.a)(r.a.mark(function t(n){var a,i,o=this,s=arguments;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:[],i=new $t(function(t){if(e._addLabels(t,n),e._addFlags(t,n),n.trackedEntityTypeId){var r=o.trackedEntityTypeCollection.get(n.trackedEntityTypeId);r&&(t.trackedEntityType=r)}t.inputSearchGroups=o._buildInputSearchGroups(n,a)}),t.next=4,this._buildEnrollmentForm(n);case 4:return i.enrollmentForm=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}],[{key:"_buildSearchGroupElement",value:function(e,t){return new gt(function(n){n.id=e.id,n.name=e.name,n.shortName=e.shortName,n.formName=e.formName,n.description=e.description,n.displayInForms=!0,n.displayInReports=e.displayInReports,n.compulsory=e.compulsory,n.disabled=e.disabled,n.type=t.valueType,n.optionSet=e.optionSet})}}]),e}();Ba.errorMessages={CUSTOM_FORM_TEMPLATE_ERROR:"Error in custom form template"};var Ga=Ba;var Wa=function(){function e(t,n){Object(B.a)(this,e),this.locale=n,this.optionSetFactory=new ea(t,n)}return Object(G.a)(e,null,[{key:"_getDataElementType",value:function(e){return{}[e]||e}},{key:"_buildDataElementIconAsync",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t,n,a,i=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},n=t&&t.icon){e.next=4;break}return e.abrupt("return",null);case 4:return e.prev=4,e.next=7,Ln(n);case 7:return a=e.sent,e.abrupt("return",new et(function(e){t.color&&(e.color=t.color),e.data=a}));case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",null);case 14:case"end":return e.stop()}},e,null,[[4,11]])}));return function(){return e.apply(this,arguments)}}()}]),Object(G.a)(e,[{key:"_getDataElementTranslation",value:function(e,t){return this.locale&&e.translations[this.locale]&&e.translations[this.locale][t]}},{key:"build",value:function(){var t=Object(i.a)(r.a.mark(function t(n){var a,i,o=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.dataElement){t.next=3;break}return R.a.error(Object(Ze.b)("programStageDataElement does not contain a dataElement")({programStageDataElement:n})),t.abrupt("return",null);case 3:return a=n.dataElement,i=new gt(function(t){t.id=a.id,t.name=o._getDataElementTranslation(a,e.propertyNames.NAME)||a.displayName,t.shortName=o._getDataElementTranslation(a,e.propertyNames.SHORT_NAME)||a.displayShortName,t.formName=o._getDataElementTranslation(a,e.propertyNames.FORM_NAME)||a.displayFormName,t.description=o._getDataElementTranslation(a,e.propertyNames.DESCRIPTION)||a.description,t.displayInForms=!0,t.displayInReports=n.displayInReports,t.compulsory=n.compulsory,t.disabled=!1,t.type=e._getDataElementType(a.valueType)}),t.next=7,e._buildDataElementIconAsync(a.style);case 7:if(i.icon=t.sent,!a.optionSet||!a.optionSet.id){t.next=12;break}return t.next=11,this.optionSetFactory.build(i,a.optionSet.id,n.renderOptionsAsRadio,n.renderType&&n.renderType.DESKTOP&&n.renderType.DESKTOP.type,e._getDataElementType);case 11:i.optionSet=t.sent;case 12:return t.abrupt("return",i);case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}();Wa.propertyNames={NAME:"NAME",DESCRIPTION:"DESCRIPTION",SHORT_NAME:"SHORT_NAME",FORM_NAME:"FORM_NAME"};var Ha=Wa,za=function(){function e(t){Object(B.a)(this,e),this.cachedRelationshipTypes=t}return Object(G.a)(e,[{key:"_relationshipConstraintIsStage",value:function(t){return t.relationshipEntity===e.RELATIONSHIP_ENTITY_NAME&&(!t.programStage&&t.program&&t.program.id===this.currentProgramId||t.programStage&&t.programStage.id===this.currentProgramStageId)}},{key:"_convertConstraint",value:function(e){var t={entity:e.relationshipEntity,programId:e.program?e.program.id:null,programStageId:e.programStage?e.programStage.id:null,trackedEntityTypeId:e.trackedEntityType?e.trackedEntityType.id:null};return!t.programStageId&&this._relationshipConstraintIsStage(e)&&(t.programStageId=this.currentProgramStageId),t}},{key:"_buildRelationshipType",value:function(e){var t=this;return new qt(function(n){n.id=e.id,n.name=e.displayName,n.from=t._convertConstraint(e.fromConstraint),n.to=t._convertConstraint(e.toConstraint),n.access=e.access})}},{key:"build",value:function(e,t){var n=this;return this.currentProgramId=e,this.currentProgramStageId=t,this.cachedRelationshipTypes.filter(function(e){return e.access.data.read&&(n._relationshipConstraintIsStage(e.fromConstraint)||n._relationshipConstraintIsStage(e.toConstraint))}).map(function(e){return n._buildRelationshipType(e)})}}]),e}();za.RELATIONSHIP_ENTITY_NAME="PROGRAM_STAGE_INSTANCE";var Ya=za,Ka=function(){function e(t,n,a){Object(B.a)(this,e),this.cachedOptionSets=t,this.locale=a,this.relationshipTypesFactory=new Ya(n),this.dataElementFactory=new Ha(t,a)}return Object(G.a)(e,[{key:"_buildSection",value:function(){var e=Object(i.a)(r.a.mark(function e(t,n){var a,o=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new yt(function(e){e.id=n.id,e.name=n.displayName}),!n.dataElements){e.next=4;break}return e.next=4,n.dataElements.asyncForEach(function(){var e=Object(i.a)(r.a.mark(function e(n){var i,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.id,s=t[i]){e.next=5;break}return R.a.error(Object(Ze.b)("could not find programStageDataElement")({sectionDataElement:n})),e.abrupt("return");case 5:return e.next=7,o.dataElementFactory.build(s);case 7:(c=e.sent)&&a.addElement(c);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_buildMainSection",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new yt(function(e){e.id=yt.MAIN_SECTION_ID}),!t){e.next=4;break}return e.next=4,t.asyncForEach(function(){var e=Object(i.a)(r.a.mark(function e(t){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.dataElementFactory.build(t);case 2:(i=e.sent)&&n.addElement(i);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"build",value:function(){var t=Object(i.a)(r.a.mark(function t(n,a){var o,s,c,l,u,d=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=new Xt(function(t){t.id=n.id,t.name=n.displayName,t.relationshipTypes=d.relationshipTypesFactory.build(a,n.id),t.enableUserAssignment=!!n.enableUserAssignment,t.stageForm=new Kt(function(t){t.id=n.id,t.name=n.displayName,t.description=n.description,t.featureType=e._getFeatureType(n),t.access=n.access,t.addLabel({id:"eventDate",label:n.executionDateLabel||"Incident date"}),t.validationStrategy=n.validationStrategy&&Mn(n.validationStrategy)})}),s=o.stageForm,"CUSTOM"!==n.formType||!n.dataEntryForm){t.next=12;break}return t.next=5,this._buildMainSection(n.programStageDataElements);case 5:(c=t.sent).showContainer=!1,s.addSection(c),l=n.dataEntryForm;try{s.customForm=new Et.a(function(e){e.id=l.id,e.data=l.htmlCode})}catch(f){R.a.error(Object(Ze.b)(e.CUSTOM_FORM_TEMPLATE_ERROR)({template:l.htmlCode,error:f}))}t.next=23;break;case 12:if(!((p=n.programStageSections)&&Object(ot.a)(p)&&p.length>0)){t.next=18;break}return u=e._convertProgramStageDataElementsToObject(n.programStageDataElements),t.next=16,n.programStageSections.asyncForEach(function(){var e=Object(i.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,d._buildSection(u,{id:t.id,displayName:t.displayName,dataElements:t.dataElements});case 3:e.t1=e.sent,e.t0.addSection.call(e.t0,e.t1);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 16:t.next=23;break;case 18:return t.t0=s,t.next=21,this._buildMainSection(n.programStageDataElements);case 21:t.t1=t.sent,t.t0.addSection.call(t.t0,t.t1);case 23:return t.abrupt("return",o);case 24:case"end":return t.stop()}var p},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}],[{key:"_convertProgramStageDataElementsToObject",value:function(e){return e?e.reduce(function(e,t){return e[t.dataElement.id]=t,e},{}):{}}},{key:"_getFeatureType",value:function(e){return e.featureType?ca(e.featureType.toLowerCase()):"None"}}]),e}();Ka.CUSTOM_FORM_TEMPLATE_ERROR="Error in custom form template";var qa=Ka,Xa=function(){function e(t){Object(B.a)(this,e),this.cachedCategories=t}return Object(G.a)(e,[{key:"build",value:function(e){var t=this;return new Qe(function(n){var a=e.id;n.id=a;var r=t.cachedCategories[a];r?n.name=r.displayName:R.a.error(Object(Ze.b)("Could not retrieve cachedCategory")({id:a}))})}}]),e}(),Za=function(){function e(t){Object(B.a)(this,e),this.name=t.name,this.version=t.version,this.objectStoreNames=t.objectStores,this.keyPath=t.keyPath}return Object(G.a)(e,null,[{key:"isSupported",value:function(){return e.indexedDB&&e.iDBKeyRange&&e.iDBTransaction}}]),Object(G.a)(e,[{key:"_upgrade",value:function(t){var n=this;this.db.objectStoreNames&&Array.from(this.db.objectStoreNames).forEach(function(e){n.db.deleteObjectStore(e)});this.objectStoreNames.forEach(function(a){var r=n.db.createObjectStore(a);t&&t(r,e)})}},{key:"_facilitateDowngradeIfApplicable",value:function(t){var n=this,a=e.indexedDB.open(this.name);return new Promise(function(r,i){a.onsuccess=function(a){var o=a.target.result.version;n.db=a.target.result,o>n.version?Promise.resolve().then(function(){return t&&t({get:function(e,t){return n.db.objectStoreNames.contains(e)?n.get(e,t):Promise.resolve(null)},isDowngrade:!0})}).then(function(){n.destroy().then(function(){n.db=void 0,r(!0)}).catch(function(t){n.db=void 0,R.a.error(Object(Cn.a)(e.errorMessages.OPEN_FAILED)({error:t})),i(e.errorMessages.OPEN_FAILED)})}):n.close().then(function(){n.db=void 0,r(!1)}).catch(function(t){n.db=void 0,R.a.error(Object(Cn.a)(e.errorMessages.OPEN_FAILED)({error:t})),i(e.errorMessages.OPEN_FAILED)})},a.onerror=function(t){R.a.error(Object(Cn.a)(e.errorMessages.OPEN_FAILED)({error:t})),i(e.errorMessages.OPEN_FAILED)}})}},{key:"open",value:function(){var t=Object(i.a)(r.a.mark(function t(n,a,i){var o,s,c=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._facilitateDowngradeIfApplicable(n);case 2:return o=t.sent,s=e.indexedDB.open(this.name,this.version),t.next=6,new Promise(function(t,r){s.onsuccess=function(e){c.db=e.target.result,t()},s.onerror=function(t){r(Object(Cn.a)(e.errorMessages.OPEN_FAILED)({adapter:c,error:t}))},s.onblocked=function(t){r(Object(Cn.a)(e.errorMessages.OPEN_BLOCKED)({adapter:c,error:t}))},s.onupgradeneeded=function(e){c.db=e.target.result;var t=e.target.transaction;return Promise.resolve().then(function(){return!o&&n&&n({get:function(e,n){return c.db.objectStoreNames.contains(e)?c.getForUpgrade(e,n,t):Promise.resolve(null)}})}).then(function(){return c._upgrade(i),Promise.resolve()}).then(function(){return a&&a({set:function(e,n){return c.setForUpgrade(e,n,t)}})})}});case 6:case"end":return t.stop()}},t,this)}));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"setForUpgrade",value:function(t,n,a){var r=this;return new Promise(function(i,o){var s=JSON.parse(JSON.stringify(n)),c=s[r.keyPath],l=a.objectStore(t).put(s,c);l.onsuccess=function(){i(s)},l.onerror=function(t){o(Object(Cn.a)(e.errorMessages.SET_FAILED)({adapter:r,error:t}))}})}},{key:"set",value:function(t,n){var a=this;return new Promise(function(r,i){var o,s;try{var c=JSON.parse(JSON.stringify(n)),l=c[a.keyPath];(o=a.db.transaction([t],e.transactionMode.READ_WRITE)).oncomplete=function(){r(c)},o.onerror=function(t){i(Object(Cn.a)(e.errorMessages.SET_FAILED)({adapter:a,error:t}))},o.onabort=function(){i(Object(Cn.a)(e.errorMessages.SET_FAILED)({adapter:a,aborted:!0,error:s}))},o.objectStore(t).put(c,l)}catch(u){o?function(e){s=e,o.abort()}(u):i(Object(Cn.a)(e.errorMessages.SET_FAILED)({adapter:a,error:u}))}})}},{key:"setAll",value:function(t,n){var a=this;return new Promise(function(r,i){var o,s,c=function(e){s=e,o.abort()};try{(o=a.db.transaction([t],e.transactionMode.READ_WRITE)).oncomplete=function(){r()},o.onerror=function(t){i(Object(Cn.a)(e.errorMessages.SET_FAILED)({adapter:a,error:t}))},o.onabort=function(){i(Object(Cn.a)(e.errorMessages.SET_FAILED)({adapter:a,aborted:!0,error:s}))};var l=o.objectStore(t),u=0;!function t(){if(u<n.length){var r=n[u],i=JSON.parse(JSON.stringify(r));Ee()(i)&&Ee()(i[a.keyPath])||c(Object(Cn.a)(e.errorMessages.INVALID_STORAGE_OBJECT)({adapter:a}));var o=i[a.keyPath];l.put(i,o).onsuccess=function(){u+=1,t()}}}()}catch(d){o&&c(d),i(Object(Cn.a)(e.errorMessages.SET_FAILED)({adapter:a,error:d}))}})}},{key:"getForUpgrade",value:function(t,n,a){var r=this;return new Promise(function(i,o){var s=a.objectStore(t).get(n);s.onsuccess=function(e){var t=e.target.result;Ee()(t)&&(t[r.keyPath]=n),i(t)},s.onerror=function(t){o(Object(Cn.a)(e.errorMessages.GET_FAILED)({adapter:r,error:t}))}})}},{key:"get",value:function(t,n){var a=this;return new Promise(function(r,i){var o,s;try{var c;(o=a.db.transaction([t],e.transactionMode.READ_ONLY)).oncomplete=function(){r(c)},o.onerror=function(t){i(Object(Cn.a)(e.errorMessages.GET_FAILED)({adapter:a,error:t}))},o.onabort=function(){i(Object(Cn.a)(e.errorMessages.GET_FAILED)({adapter:a,aborted:!0,error:s}))},o.objectStore(t).get(n).onsuccess=function(e){var t=e.target.result;Ee()(t)&&(t[a.keyPath]=n),c=t}}catch(l){o&&function(e){s=e,o.abort()}(l),i(Object(Cn.a)(e.errorMessages.GET_FAILED)({adapter:a,error:l}))}})}},{key:"_getAllInBatches",value:function(){var t=Object(i.a)(r.a.mark(function t(n,a,i){var o,s,c,l,u,d,p,f,m,h,g,b=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s=(o=a||{}).predicate,c=o.project,l=o.onIDBGetRequest,u=o.batchSize,d=function(t){return new Promise(function(a){var r=l?l(n,e):n.getAll(t,u);r.onsuccess=function(e){var t,n=r.result,o=n?n.length:0;o>0&&(n.forEach(function(e){b._processGetAllItem(e,s,c,i)}),t=n[o-1].id),a({count:o,lastId:t})}})},f=!1;case 3:return t.next=5,d(p);case 5:m=t.sent,h=m.count,g=m.lastId,h<u?f=!0:p=IDBKeyRange.lowerBound(g,!0);case 9:if(!f){t.next=3;break}case 10:case"end":return t.stop()}},t)}));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"_getAllWithCursor",value:function(t,n,a,r){var i=this,o=n||{},s=o.predicate,c=o.project,l=o.onIsAborted,u=o.onIDBGetRequest;(u?u(t,e):t.openCursor()).onsuccess=function(e){if(!!l&&l())r();else{var t=e.target.result;if(t){t.value[i.keyPath]=t.primaryKey||t.key;var n=t.value;i._processGetAllItem(n,s,c,a),t.continue()}}}}},{key:"_processGetAllItem",value:function(e,t,n,a){if(!t||t(e)){var r=n?n(e):e;a.push(r)}}},{key:"getAll",value:function(t,n){var a=this;return new Promise(function(r,i){var o,s,c=function(e){s=e,o.abort()},l=n||{},u=l.batchSize,d=l.isAborted;try{var p=[],f=(o=a.db.transaction([t],e.transactionMode.READ_ONLY)).objectStore(t);u?a._getAllInBatches(f,n,p,c):a._getAllWithCursor(f,n,p,c),o.oncomplete=function(){d&&d()?i(Object(Cn.a)(e.errorMessages.GET_ALL_FAILED)({adapter:a,aborted:!0,error:s})):r(p)},o.onerror=function(t){d&&d()?i(Object(Cn.a)(e.errorMessages.GET_ALL_FAILED)({adapter:a,aborted:!0,error:s})):i(Object(Cn.a)(e.errorMessages.GET_ALL_FAILED)({adapter:a,error:t}))},o.onabort=function(){i(Object(Cn.a)(e.errorMessages.GET_ALL_FAILED)({adapter:a,aborted:!0,error:s}))}}catch(m){o&&c(m),i(Object(Cn.a)(e.errorMessages.GET_ALL_FAILED)({adapter:a,error:m}))}})}},{key:"getKeys",value:function(t){var n=this;return new Promise(function(a,r){var i,o;try{var s=[];(i=n.db.transaction([t],e.transactionMode.READ_ONLY)).oncomplete=function(){a(s)},i.onerror=function(t){r(Object(Cn.a)(e.errorMessages.GET_KEYS_FAILED)({adapter:n,error:t}))},i.onabort=function(){r(Object(Cn.a)(e.errorMessages.GET_KEYS_FAILED)({adapter:n,aborted:!0,error:o}))},i.objectStore(t).openCursor().onsuccess=function(e){var t=e.target.result;t&&(s.push(t.key),t.continue())}}catch(c){i&&function(e){o=e,i.abort()}(c),r(Object(Cn.a)(e.errorMessages.GET_KEYS_FAILED)({adapter:n,error:c}))}})}},{key:"remove",value:function(t,n){var a=this;return new Promise(function(r,i){var o,s;try{(o=a.db.transaction([t],e.transactionMode.READ_WRITE)).oncomplete=function(){r()},o.onerror=function(t){i(Object(Cn.a)(e.errorMessages.REMOVE_FAILED)({adapter:a,error:t}))},o.onabort=function(){i(Object(Cn.a)(e.errorMessages.REMOVE_FAILED)({adapter:a,aborted:!0,error:s}))},o.objectStore(t).delete(n)}catch(c){o&&function(e){s=e,o.abort()}(c),i(Object(Cn.a)(e.errorMessages.REMOVE_FAILED)({adapter:a,error:c}))}})}},{key:"removeAll",value:function(t){var n=this;return new Promise(function(a,r){var i,o;try{(i=n.db.transaction([t],e.transactionMode.READ_WRITE)).oncomplete=function(){a()},i.onerror=function(t){r(Object(Cn.a)(e.errorMessages.REMOVE_ALL_FAILED)({adapter:n,error:t}))},i.onabort=function(){r(Object(Cn.a)(e.errorMessages.REMOVE_ALL_FAILED)({adapter:n,aborted:!0,error:o}))},i.objectStore(t).clear()}catch(s){i&&function(e){o=e,i.abort()}(s),r(Object(Cn.a)(e.errorMessages.REMOVE_ALL_FAILED)({adapter:n,error:s}))}})}},{key:"contains",value:function(t,n){var a=this;return new Promise(function(r,i){var o,s;try{var c;(o=a.db.transaction([t],e.transactionMode.READ_ONLY)).oncomplete=function(){r(c)},o.onerror=function(t){i(Object(Cn.a)(e.errorMessages.CONTAINS_FAILED)({adapter:a,error:t}))},o.onabort=function(){i(Object(Cn.a)(e.errorMessages.CONTAINS_FAILED)({adapter:a,aborted:!0,error:s}))},o.objectStore(t).get(n).onsuccess=function(e){var t=e.target.result;c=!!t}}catch(l){o&&function(e){s=e,o.abort()}(l),i(Object(Cn.a)(e.errorMessages.CONTAINS_FAILED)({adapter:a,error:l}))}})}},{key:"count",value:function(t,n){var a=this;return new Promise(function(r,i){var o,s,c=n||{},l=c.onIDBGetRequest,u=c.query;try{var d;(o=a.db.transaction([t],e.transactionMode.READ_ONLY)).oncomplete=function(){r(d)},o.onerror=function(t){i(Object(Cn.a)(e.errorMessages.COUNT_FAILED)({adapter:a,error:t}))},o.onabort=function(){i(Object(Cn.a)(e.errorMessages.COUNT_FAILED)({adapter:a,aborted:!0,error:s}))};var p=o.objectStore(t);(l?l(p):p.count(u)).onsuccess=function(e){d=e.target.result}}catch(f){o&&function(e){s=e,o.abort()}(f),i(Object(Cn.a)(e.errorMessages.COUNT_FAILED)({adapter:a,error:f}))}})}},{key:"close",value:function(){var t=this;return new Promise(function(n,a){if(t.db)try{t.db.close(),t.db=null,n()}catch(r){a(Object(Cn.a)(e.errorMessages.CLOSE_FAILED)({adapter:t,error:r}))}else n()})}},{key:"destroy",value:function(){var t=Object(i.a)(r.a.mark(function t(){var n=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(t,a){n.close().then(function(){t()}).catch(function(t){a(Object(Cn.a)(e.errorMessages.CLOSE_FAILED_FROM_DESTROY)({adapter:n,error:t}))})});case 2:return t.next=4,new Promise(function(t,a){var r=e.indexedDB.deleteDatabase(n.name);r.onsuccess=function(e){t(e)},r.onerror=function(t){a(Object(Cn.a)(e.errorMessages.DESTROY_FAILED)({adapter:n,error:t}))},r.onblocked=function(t){a(Object(Cn.a)(e.errorMessages.DESTROY_BLOCKED)({adapter:n,error:t}))}});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"isOpen",value:function(){return!!this.db}}]),e}();Za.errorMessages={OPEN_FAILED:"open indexedDB failed",OPEN_BLOCKED:"indexedDB blocked",OPEN_DATABASE_FIRST:"Open database first",INVALID_STORAGE_OBJECT:"Invalid storage object",STORAGE_ARRAY_NOT_PROVIDED:"An array must be provided",SET_FAILED:"Save to indexedDB failed",INVALID_KEY:"Key is invalid",GET_FAILED:"Get from indexedDB failed",GET_ALL_FAILED:"Get All from indexedDB failed",GET_KEYS_FAILED:"Get Keys from indexedDB failed",REMOVE_FAILED:"Remove from indexedDB failed",REMOVE_ALL_FAILED:"Remove all from indexedDB failed",CONTAINS_FAILED:"Contains check from indexedDB failed",COUNT_FAILED:"Count from indexedDB failed",CLOSE_FAILED:"Close indexedDB failed",DESTROY_FAILED:"Destroy indexedDB failed",DESTROY_BLOCKED:"Destroy indexedDB blocked",CLOSE_FAILED_FROM_DESTROY:"Close indexedDB failed from destroy"},Za.transactionMode={READ_WRITE:"readwrite",READ_ONLY:"readonly"},Za.adapterName="IndexedDBAdapter",Za.indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.oIndexedDB||window.msIndexedDB,Za.iDBKeyRange=function(){var e=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;return e?e.bind(window):null}(),Za.iDBTransaction=function(){var e=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction;return e?e.bind(window):null}();var Ja=Za,Qa=function(){function e(t,n,a){Object(B.a)(this,e),this.key="".concat(t,".").concat(n,".**index**"),this.storage=a}return Object(G.a)(e,[{key:"all",value:function(){var e=this.storage.getItem(this.key);if(e)try{e=JSON.parse(e)}catch(t){e=null}return e||this.storage.setItem(this.key,JSON.stringify([])),JSON.parse(this.storage.getItem(this.key))}},{key:"add",value:function(e){var t=this.all();t.push(e),this.storage.setItem(this.key,JSON.stringify(t))}},{key:"remove",value:function(e){var t=this.all();t.includes(e)&&(t.splice(t.indexOf(e),1),this.storage.setItem(this.key,JSON.stringify(t)))}},{key:"find",value:function(e){return this.all().indexOf(e)}},{key:"exists",value:function(e){return-1!==this.all().indexOf(e)}},{key:"destroy",value:function(){this.storage.removeItem(this.key)}}]),e}(),$a=function(){function e(t){Object(B.a)(this,e),this.name=t.name,this.version=t.version||1,this.objectStoreNames=t.objectStores,this.keyPath=t.keyPath,this.opened=!1}return Object(G.a)(e,null,[{key:"isSupported",value:function(){return!!e.storage}}]),Object(G.a)(e,[{key:"open",value:function(t,n){var a=this;this.indexer=this.objectStoreNames.reduce(function(t,n){return t[n]=new Qa(a.name,n,e.storage),t},{});var r="".concat(this.name,".").concat(e.CACHEVERSIONKEY),i=e.storage.getItem(r),o=i&&JSON.parse(i);return this.opened=!0,this.version!==o?Promise.resolve().then(function(){return t&&t({get:a.get.bind(a)})}).then(function(){return a._executeDestroy(),e.storage.setItem(r,JSON.stringify(a.version)),Promise.resolve()}).then(function(){return n&&n({set:a.set.bind(a)})}):Promise.resolve()}},{key:"_executeSet",value:function(t,n){var a=JSON.parse(JSON.stringify(n)),r=a[this.keyPath];delete a[this.keyPath];var i=this.getStoreKey(t,r);this.indexer[t].exists(i)||this.indexer[t].add(i),e.storage.setItem(i,JSON.stringify(a))}},{key:"set",value:function(t,n){var a=this;return new Promise(function(r,i){try{a._executeSet(t,n),r()}catch(o){i(Object(Cn.a)(e.errorMessages.SET_FAILED)({adapter:a,error:o}))}})}},{key:"setAll",value:function(e,t){var n=this;try{return t.forEach(function(t){n._executeSet(e,t)}),Promise.resolve()}catch(a){return Promise.reject(a)}}},{key:"get",value:function(t,n){var a=this;return new Promise(function(r){var i,o=e.storage.getItem(a.getStoreKey(t,n));o&&((i=JSON.parse(o))[a.keyPath]=n),r(i)})}},{key:"getAll",value:function(t,n){var a=this,r=n||{},i=r.predicate,o=r.project,s=this.indexer[t].all().reduce(function(n,r){var s=e.storage.getItem(r);if(s&&(!i||i(s))){var c=JSON.parse(s);c[a.keyPath]=a.mainKeyFromStoreKey(r,t);var l=o?o(c):c;n.push(l)}return n},[]);return Promise.resolve(s)}},{key:"_executeGetKeys",value:function(e){var t=this;return this.indexer[e].all().map(function(n){return t.mainKeyFromStoreKey(n,e)})}},{key:"getKeys",value:function(e){return Promise.resolve(this._executeGetKeys(e))}},{key:"_executeRemove",value:function(t,n){var a=this.getStoreKey(t,n);this.indexer[t].remove(a),e.storage.removeItem(a)}},{key:"remove",value:function(e,t){return this._executeRemove(e,t),Promise.resolve()}},{key:"_executeRemoveAll",value:function(e){var t=this;this._executeGetKeys(e).forEach(function(n){t._executeRemove(e,n)})}},{key:"removeAll",value:function(e){return Promise.resolve(this._executeRemoveAll(e))}},{key:"contains",value:function(e,t){var n=this.getStoreKey(e,t);return Promise.resolve(this.indexer[e].exists(n))}},{key:"count",value:function(t,n){return n&&Promise.reject(Object(Cn.a)(e.errorMessages.KEY_BASED_COUNT_IS_NOT_SUPPORTED)({adapter:this})),Promise.resolve(this.indexer[t].all().length)}},{key:"close",value:function(){return this.opened=!1,Promise.resolve()}},{key:"_executeDestroy",value:function(){var e=this;this.objectStoreNames.forEach(function(t){e._executeRemoveAll(t),e.indexer[t].destroy()})}},{key:"destroy",value:function(){return this.opened=!1,this._executeDestroy(),Promise.resolve()}},{key:"isOpen",value:function(){return this.opened}},{key:"getStoreKey",value:function(e,t){return"".concat(this.name,".").concat(e,".").concat(t)}},{key:"mainKeyFromStoreKey",value:function(e,t){return e.replace("".concat(this.name,".").concat(t,"."),"")}}]),e}();$a.storage=window.localStorage,$a.adapterName="DomLocalStorageAdapter",$a.CACHEVERSIONKEY="__VERSION__",$a.errorMessages={INVALID_STORAGE_OBJECT:"Invalid storage object",SET_FAILED:"Save to localStorage failed",INVALID_KEY:"Key is invalid",KEY_BASED_COUNT_IS_NOT_SUPPORTED:"Key based count is not supported by DomLocalStorageAdapter",STORAGE_NOT_OPENED:"Please call open first in the DomLocalStorageAdapter"};var er=$a,tr=function(){function e(t){Object(B.a)(this,e),this.name=t.name,this.version=t.version||1,this.objectStoreNames=t.objectStores,this.keyPath=t.keyPath,this.opened=!1}return Object(G.a)(e,null,[{key:"isSupported",value:function(){return!0}}]),Object(G.a)(e,[{key:"open",value:function(){this.storage=this.objectStoreNames.reduce(function(e,t){return e[t]=new Map,e},{}),this.opened=!0}},{key:"_executeSet",value:function(e,t){var n=t[this.keyPath];e.set(n,t)}},{key:"set",value:function(e,t){var n=this.storage[e];this._executeSet(n,t)}},{key:"setAll",value:function(e,t){var n=this,a=this.storage[e];t.forEach(function(e){n._executeSet(a,e)})}},{key:"get",value:function(e,t){return this.storage[e].get(t)}},{key:"getAll",value:function(t,n){var a=this.storage[t],r=Array.from(a.values()),i=n||{},o=i.predicate,s=i.project,c=i.onEditSource,l=c?c(r,e):r,u=o?l.filter(o):l;return s?u.map(s):u}},{key:"getKeys",value:function(e){var t=this.storage[e];return Array.from(t.keys())}},{key:"contains",value:function(e,t){return this.storage[e].has(t)}},{key:"count",value:function(t,n){if(n)throw Error(Object(Cn.a)(e.errorMessages.KEY_BASED_COUNT_IS_NOT_SUPPORTED)({adapter:this}));return this.storage[t].size}},{key:"remove",value:function(e,t){this.storage[e].delete(t)}},{key:"removeAll",value:function(e){this.storage[e]=new Map}},{key:"close",value:function(){this.opened=!1}},{key:"destroy",value:function(){this.opened=!1,this.storage=this.objectStoreNames.reduce(function(e,t){return e[t]=new Map,e},{})}},{key:"isOpen",value:function(){return this.opened}}]),e}();tr.errorMessages={INVALID_STORE_NAME:"Invalid store name",KEY_BASED_COUNT_IS_NOT_SUPPORTED:"Key based count is not supported by DomLocalStorageAdapter"};var nr=tr,ar={USER_CACHES:"userCaches",STATUS:"status",SYSTEM_SETTINGS:"systemSettings"},rr={CONSTANTS:"constants",ORGANISATION_UNIT_LEVELS:"ouLevels",RELATIONSHIP_TYPES:"relationshipTypes",TRACKED_ENTITY_TYPES:"trackedEntityTypes",PROGRAMS:"programs",PROGRAM_RULES:"programRules",PROGRAM_RULES_VARIABLES:"programRulesVariables",PROGRAM_INDICATORS:"programIndicators",TRACKED_ENTITY_ATTRIBUTES:"trackedEntityAttributes",OPTION_SETS:"optionSets",CATEGORIES:"categories",CATEGORY_OPTIONS_BY_CATEGORY:"categoryOptionsByCategory",CATEGORY_OPTIONS:"categoryOptions",REDUX_PERSIST:"reduxPersist"};function ir(e){var t=e.name+Dn().id,n=e.version,a=Object.keys(rr).map(function(e){return rr[e]});return new Tn(t,n,[e.adapterType],a)}function or(){return(or=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ir(t),e.next=3,n.open(function(e){return e.get(rr.REDUX_PERSIST,"reduxPersist:offline").then(function(e){a=e})},function(e){return a?e.set(rr.REDUX_PERSIST,a):null},function(e,t){t===Ja&&e.name===rr.CATEGORY_OPTIONS&&e.createIndex("category","categories",{multiEntry:!0})});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var sr=function(e){return or.apply(this,arguments)},cr="dhis2ca";function lr(){return 1e3*(Number("33.1.0".split(".")[0])-30)+Number("1")}function ur(e,t){var n=lr();return new Tn(e,n,t,Object.keys(ar).map(function(e){return ar[e]}))}function dr(){return(dr=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ur(cr,t),e.next=3,n.open(function(e){return e.get(ar.USER_CACHES,"accessHistory").then(function(e){a=e})},function(e){return a?e.set(ar.USER_CACHES,a):null});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var pr=function(e){return dr.apply(this,arguments)},fr=[{INDEXED_DB:Ja,LOCAL_STORAGE:er,MEMORY:nr}.INDEXED_DB],mr={};function hr(){return gr.apply(this,arguments)}function gr(){return(gr=Object(i.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(fr);case 2:return mr.main=e.sent,e.next=5,sr(mr.main);case 5:mr.user=e.sent;case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function br(){return mr.main}function vr(){return mr.user}function Or(e){return yr.apply(this,arguments)}function yr(){return(yr=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),e.next=3,n.get(rr.CATEGORY_OPTIONS_BY_CATEGORY,t);case 3:return a=e.sent,e.abrupt("return",a.options);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Er(e,t,n){return _r.apply(this,arguments)}function _r(){return(_r=Object(i.a)(r.a.mark(function e(t,n,a){var i,o,s,c,l,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.predicate,o=a.project,s=a.onIsAborted,c=function(e){return!!n[e.id]&&i(e)},l=vr(),e.next=5,l.getAll(rr.CATEGORY_OPTIONS,{predicate:c,project:o,onIsAborted:s,onIDBGetRequest:function(e){return e.index("category").openCursor(IDBKeyRange.only(t))}});case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jr(e,t,n){var a=vr(),r=e.map(function(e){return a.get(rr.CATEGORY_OPTIONS,e).then(function(e){return t(e)?n(e):null})});return Promise.all(r).then(function(e){return e.filter(function(e){return e})})}function Ir(e,t,n){return Sr.apply(this,arguments)}function Sr(){return(Sr=Object(i.a)(r.a.mark(function e(t,n,a){var i,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.predicate,o=a.project,vr().adapterType!==nr){e.next=3;break}return e.abrupt("return",jr(n,i,o));case 3:return e.next=5,Er(t,n,a);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cr(){return(Cr=Object(i.a)(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(t);case 2:return a=e.sent,e.abrupt("return",Ir(t,a,n));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Tr=function(){function e(t,n,a,r,i,o,s){Object(B.a)(this,e),this.trackedEntityTypeCollection=o,this.programStageFactory=new qa(t,n,s),this.enrollmentFactory=new Ga(a,t,r,s,o),this.searchGroupFactory=new sa(a,s),this.dataElementFactory=new Va(a,t,s),this.categoryFactory=new Xa(i)}return Object(G.a)(e,[{key:"_buildCategories",value:function(e){var t=this;return new Map(e.map(function(e){return[e.id,t.categoryFactory.build(e)]}))}},{key:"_buildCategoryCombination",value:function(e){var t=this;return e&&!e.isDefault&&e.categories&&e.categories.length>0?new $e(function(n){n.name=e.displayName,n.id=e.id,n.categories=t._buildCategories(e.categories,t.cachedCategories)}):null}},{key:"_buildProgramAttributes",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a,o=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(function(){var e=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.dataElementFactory.build(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"build",value:function(){var t=Object(i.a)(r.a.mark(function t(n){var a,o,s=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("WITHOUT_REGISTRATION"!==n.programType){t.next=8;break}return a=new Zt(function(e){e.id=n.id,e.access=n.access,e.name=n.displayName,e.shortName=n.displayShortName,e.organisationUnits=n.organisationUnits,e.categoryCombination=s._buildCategoryCombination(n.categoryCombo)}),o=n.programStages&&n.programStages[0],t.next=5,this.programStageFactory.build(o,a.id);case 5:a.stage=t.sent,t.next=21;break;case 8:if(a=new en(function(e){e.id=n.id,e.access=n.access,e.name=n.displayName,e.shortName=n.displayShortName,e.organisationUnits=n.organisationUnits,e.trackedEntityType=s.trackedEntityTypeCollection.get(n.trackedEntityTypeId)}),!n.programTrackedEntityAttributes){t.next=16;break}return t.next=12,this.searchGroupFactory.build(n.programTrackedEntityAttributes,n.minAttributesRequiredToSearch);case 12:return a.searchGroups=t.sent,t.next=15,this._buildProgramAttributes(n.programTrackedEntityAttributes);case 15:a.attributes=t.sent;case 16:return t.next=18,n.programStages.asyncForEach(function(){var e=Object(i.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,s.programStageFactory.build(t,a.id);case 3:e.t1=e.sent,e.t0.addStage.call(e.t0,e.t1);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 18:return t.next=20,this.enrollmentFactory.build(n,a.searchGroups);case 20:a.enrollment=t.sent;case 21:return t.next=23,e._buildProgramIcon(n.style);case 23:return a.icon=t.sent,t.abrupt("return",a);case 25:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}],[{key:"_buildProgramIcon",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t,n,a=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},(n=new et).color=t.color||"#e0e0e0",e.next=5,Un(t.icon);case 5:return n.data=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}]),e}(),Rr=[{regExp:new RegExp("([^\\w\\d])(and)([^\\w\\d])","gi"),replacement:"$1&&$3"},{regExp:new RegExp("([^\\w\\d])(or)([^\\w\\d])","gi"),replacement:"$1||$3"},{regExp:new RegExp("V{execution_date}","g"),replacement:"V{event_date}"}];function Nr(e){return Rr.reduce(function(e,t){return e=e.replace(t.regExp,t.replacement)},e)}function kr(e){return e.match(/[A#]{\w+.?\w*}/g)||[]}function Ar(e,t){var n,a=(n=e)&&wa()(n)?n.replace(/^[#VCAvca]{/,"").replace(/}$/,""):n,r=a.split(".");return 2===r.length?{id:a,displayName:a,programRuleVariableSourceType:"DATAELEMENT_CURRENT_EVENT",dataElementId:r[1],programId:t}:{id:a,displayName:a,programRuleVariableSourceType:"TEI_ATTRIBUTE",trackedEntityAttributeId:r[0],programId:t}}function wr(e,t,n){(function(e,t){return e.condition.indexOf("V{value_count}")>=0||t.data.indexOf("V{value_count}")>=0})(e,t)&&function(e,t,n){var a=n.reduce(function(e,t,n){var a="d2:count('".concat(t.displayName,"')");return e+=0!==n?" + ".concat(a):"".concat(a)},"");a="(".concat(a,")"),e.condition=e.condition.replace(new RegExp("V{value_count}","g"),a),t.data=t.data.replace(new RegExp("V{value_count}","g"),a)}(e,t,n)}function Pr(e,t,n){(function(e,t){return e.condition.indexOf("V{zero_pos_value_count}")>=0||t.data.indexOf("V{zero_pos_value_count}")>=0})(e,t)&&function(e,t,n){var a=n.reduce(function(e,t,n){var a="d2:countifzeropos('".concat(t.displayName,"')");return e+=0!==n?" + ".concat(a):"".concat(a)},"");a="(".concat(a,")"),e.condition=e.condition.replace(new RegExp("V{zero_pos_value_count}","g"),a),t.data=t.data.replace(new RegExp("V{zero_pos_value_count}","g"),a)}(e,t,n)}function Dr(e,t){if(!e.displayInForm)return null;var n={id:e.id,content:e.shortName||e.displayName,data:e.expression,programRuleActionType:"DISPLAYKEYVALUEPAIR",location:"indicators"},a={id:e.id,condition:e.filter?e.filter:"true",description:e.description,displayName:e.displayName,programId:e.programId,programRuleActions:[n]},r=function(e,t,n){var a=kr(t.condition),r=kr(e.data),i=a.map(function(e){return Ar(e,n)}),o=r.map(function(e){return Ar(e,n)});return{variables:[].concat(Object(Xe.a)(i),Object(Xe.a)(o)),variableObjectsCurrentExpression:o}}(n,a,t),i=r.variables,o=r.variableObjectsCurrentExpression;return wr(a,n,o),Pr(a,n,o),n.data=Nr(n.data),a.condition=Nr(a.condition),{rule:a,variables:i}}function xr(e,t){return e.getAll(t)}function Fr(e,t){return e.getAll(t)}function Lr(e,t){return e.getAll(t)}function Ur(e,t){return e.getAll(t)}function Mr(e,t){return e.getAll(t)}function Vr(e,t){return e.getAll(t).then(function(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})})}function Br(){return Gr.apply(this,arguments)}function Gr(){return(Gr=Object(i.a)(r.a.mark(function e(){var t,n,a,i,o,s,c,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=vr(),n=xr(t,rr.PROGRAMS),a=Fr(t,rr.PROGRAM_RULES_VARIABLES),i=Lr(t,rr.PROGRAM_RULES),o=Ur(t,rr.PROGRAM_INDICATORS),s=Mr(t,rr.RELATIONSHIP_TYPES),c=Vr(t,rr.CATEGORIES),e.next=9,Promise.all([n,a,i,o,s,c]);case 9:return l=e.sent,e.abrupt("return",l);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wr(e){var t=e.reduce(function(e,t){var n=t.programId;return e[n]=e[n]||[],e[n].push(t),e},{});Object.keys(t).forEach(function(e){var n,a=t[e],r=at.get(e);if(r){var i=(n=e,a.map(function(e){return Dr(e,n)}).filter(function(e){return e}).reduce(function(e,t){return e.rules=e.rules||[],e.rules.push(t.rule),e.variables=e.variables?[].concat(Object(Xe.a)(e.variables),Object(Xe.a)(t.variables)):t.variables,e},{rules:null,variables:null})),o=i.rules,s=i.variables;o&&r.addProgramRules(o),s&&r.addProgramRuleVariables(s)}})}function Hr(e,t,n,a,r,i,o,s){return zr.apply(this,arguments)}function zr(){return(zr=Object(i.a)(r.a.mark(function e(t,n,a,o,s,c,l,u){var d,p,f;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<=0)){e.next=2;break}return e.abrupt("return",[]);case 2:return d=new Tr(n,a,o,s,c,l,u),p=t.map(function(){var e=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.build(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(p);case 6:return f=e.sent,e.abrupt("return",f);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yr(e,t,n,a){(function(e){return e.sort(function(e,t){return e.name===t.name?0:e.name>t.name?1:-1}),e})(e).forEach(function(e){at.set(e.id,e)}),t&&function(e){var t=e.reduce(function(e,t){var n=t.programId;return e[n]=e[n]||[],e[n].push(t),e},{});Object.keys(t).forEach(function(e){var n=t[e],a=at.get(e);a&&(a.programRuleVariables=n)})}(t),n&&function(e){var t=e.reduce(function(e,t){var n=t.programId;return e[n]=e[n]||[],e[n].push(t),e},{});Object.keys(t).forEach(function(e){var n=t[e],a=at.get(e);if(a){var r=n.filter(function(e){return!e.programStageId}),i=n.filter(function(e){return e.programStageId}).reduce(function(e,t){return e[t.programStageId]=e[t.programStageId]||[],e[t.programStageId].push(t),e},{});a.programRules=r,Object.keys(i).forEach(function(e){var t=i[e],n=a.getStage(e);n&&(n.programRules=t)})}})}(n),a&&Wr(a)}function Kr(e,t,n,a,r){return qr.apply(this,arguments)}function qr(){return(qr=Object(i.a)(r.a.mark(function e(t,n,a,i,o){var s,c,l,u,d,p,f,m;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Br();case 2:return s=e.sent,c=Object(jn.a)(s,6),l=c[0],u=c[1],d=c[2],p=c[3],f=c[4],m=c[5],e.next=12,Hr(l,n,f,a,i,m,o,t);case 12:Yr(e.sent,u,d,p);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xr(e){return Zr.apply(this,arguments)}function Zr(){return(Zr=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),e.abrupt("return",n.getAll(t));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jr(e){return Qr.apply(this,arguments)}function Qr(){return(Qr=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xr(t);case 2:n=e.sent,rn.set(n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var $r=function(){function e(t,n,a){Object(B.a)(this,e),this.cachedTrackedEntityAttributes=t,this.locale=a,this.optionSetFactory=new ea(n,a)}return Object(G.a)(e,null,[{key:"buildtetFeatureType",value:function(e){return new gt(function(t){t.id="FEATURETYPE_".concat(e),t.name="POINT"===e?s.a.t("Coordinate"):s.a.t("Area"),t.formName=t.name,t.compulsory=!1,t.displayInForms=!0,t.disabled=!1,t.type="POINT"===e?ft.COORDINATE:ft.POLYGON})}}]),Object(G.a)(e,[{key:"_getAttributeTranslation",value:function(e,t){var n=this;if(this.locale){var a=e.find(function(e){return e.property===t&&e.locale===n.locale});return a&&a.value}return null}},{key:"build",value:function(){var t=Object(i.a)(r.a.mark(function t(n){var a,i,o=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.trackedEntityAttributeId&&this.cachedTrackedEntityAttributes.get(n.trackedEntityAttributeId)){t.next=4;break}return R.a.error(Object(Ze.b)(e.errorMessages.TRACKED_ENTITY_ATTRIBUTE_NOT_FOUND)({cachedTrackedEntityTypeAttribute:n})),t.abrupt("return",null);case 4:if(i=new gt(function(t){t.id=a.id,t.compulsory=n.mandatory,t.name=o._getAttributeTranslation(a.translations,e.translationPropertyNames.NAME)||a.displayName,t.shortName=o._getAttributeTranslation(a.translations,e.translationPropertyNames.SHORT_NAME)||a.displayShortName,t.formName=o._getAttributeTranslation(a.translations,e.translationPropertyNames.NAME)||a.displayName,t.description=o._getAttributeTranslation(a.translations,e.translationPropertyNames.DESCRIPTION)||a.description,t.displayInForms=!0,t.displayInReports=n.displayInList,t.disabled=!1,t.type=a.valueType}),a.unique&&(i.unique=new ht(function(e){e.scope=a.orgunitScope?mt.ORGANISATION_UNIT:mt.ENTIRE_SYSTEM,e.onValidate=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Object(Ze.d)(Ua,Na)(t,a.valueType);if(r.onGetUnsavedAttributeValues){var s=r.onGetUnsavedAttributeValues(i.id);if(s)if(s.find(function(e){return e===o}))return{valid:!1,data:{attributeValueExistsUnsaved:!0}}}if(e.scope===mt.ORGANISATION_UNIT){var c=r.orgUnitId;n=Pn().get("trackedEntityInstances",{ou:c,filter:"".concat(i.id,":EQ:").concat(o)})}else n=Pn().get("trackedEntityInstances",{ouMode:"ACCESSIBLE",filter:"".concat(i.id,":EQ:").concat(o)});return n.then(function(e){var t=e.trackedEntityInstances&&e.trackedEntityInstances[0]||{},n={id:t.trackedEntityInstance,tetId:t.trackedEntityType};return{valid:0===e.trackedEntityInstances.length,data:n}})},a.pattern&&(e.generatable=!!a.pattern)})),!a.optionSet||!a.optionSet.id){t.next=10;break}return t.next=9,this.optionSetFactory.build(i,a.optionSet.id,null,null,function(e){return e});case 9:i.optionSet=t.sent;case 10:return t.abrupt("return",i);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}();$r.translationPropertyNames={NAME:"NAME",DESCRIPTION:"DESCRIPTION",SHORT_NAME:"SHORT_NAME"},$r.errorMessages={TRACKED_ENTITY_ATTRIBUTE_NOT_FOUND:"TrackedEntityAttributeId missing from trackedEntityTypeAttribute or trackedEntityAttribute not found"};var ei=$r,ti=function(){function e(t,n,a){Object(B.a)(this,e),this.cachedTrackedEntityAttributes=t,this.dataElementFactory=new ei(t,n,a)}return Object(G.a)(e,null,[{key:"_buildSearchGroupElement",value:function(e,t){return new gt(function(n){n.id=e.id,n.name=e.name,n.shortName=e.shortName,n.formName=e.formName,n.description=e.description,n.displayInForms=!0,n.displayInReports=e.displayInReports,n.compulsory=e.compulsory,n.disabled=e.disabled,n.type=t.valueType,n.optionSet=e.optionSet})}},{key:"_buildTetFeatureTypeField",value:function(e){var t=e.featureType;return t&&["POINT","POLYGON"].includes(t)?ei.buildtetFeatureType(t):null}}]),Object(G.a)(e,[{key:"_buildSection",value:function(){var t=Object(i.a)(r.a.mark(function t(n){var a,o,c,l=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e._buildTetFeatureTypeField(n),(o=n.trackedEntityTypeAttributes)&&!(o.length<=0)||a){t.next=4;break}return t.abrupt("return",null);case 4:if(c=new yt(function(e){e.id=yt.MAIN_SECTION_ID,e.name=s.a.t("Profile")}),a&&c.addElement(a),!(o&&o.length>0)){t.next=9;break}return t.next=9,o.asyncForEach(function(){var e=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.dataElementFactory.build(t);case 2:(n=e.sent)&&c.addElement(n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:return t.abrupt("return",c);case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"_buildFoundation",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Kt(function(e){e.name=t.displayName,e.id=t.id}),e.next=3,this._buildSection(t);case 3:return(a=e.sent)&&n.addSection(a),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_buildInputSearchGroupFoundation",value:function(t,n){var a=this,r=(t.trackedEntityTypeAttributes||[]).reduce(function(e,t){if(!t.trackedEntityAttributeId)return R.a.error(Object(Ze.b)("TrackedEntityAttributeId missing from trackedEntityTypeAttribute")({typeTeiAttribute:t})),e;var n=a.cachedTrackedEntityAttributes.get(t.trackedEntityAttributeId);return n?e[n.id]=n:R.a.error(Object(Ze.b)("could not retrieve tei attribute")({typeTeiAttribute:t})),e},{}),i=n.searchForm,o=new Kt,s=new yt(function(e){e.id=yt.MAIN_SECTION_ID});return Array.from(i.getSection(yt.MAIN_SECTION_ID).elements.entries()).map(function(e){return e[1]}).forEach(function(t){var n=e._buildSearchGroupElement(t,r[t.id]);n&&s.addElement(n)}),o.addSection(s),o}},{key:"_buildInputSearchGroups",value:function(e,t){var n=this;return t.filter(function(e){return!e.unique}).map(function(t){return new Ut(function(a){a.id=t.id,a.minAttributesRequiredToSearch=t.minAttributesRequiredToSearch,a.searchFoundation=n._buildInputSearchGroupFoundation(e,t),a.onSearch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.orgUnitId,a=t.trackedEntityType;return Pn().get("trackedEntityInstances/count.json",{ou:n,trackedEntityType:a,ouMode:"ACCESSIBLE",filter:Object.keys(e).filter(function(t){return e[t]||0===e[t]||!1===e[t]}).map(function(t){return"".concat(t,":LIKE:").concat(e[t])})})}})})}},{key:"build",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a,i,o,s=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:[],a=s.length>2?s[2]:void 0,e.next=4,this._buildFoundation(t);case 4:return i=e.sent,o=this._buildInputSearchGroups(t,n),e.abrupt("return",new Mt(function(e){e.form=i,e.inputSearchGroups=o,e.trackedEntityType=a}));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),ni=function(){function e(t,n,a){Object(B.a)(this,e),this.locale=a,this.dataElementFactory=new ei(t,n,a),this.searchGroupFactory=new sa(t,a),this.teiRegistrationFactory=new ti(t,n,a)}return Object(G.a)(e,[{key:"_getTranslation",value:function(e,t){var n=this;if(this.locale){var a=e.find(function(e){return e.property===t&&e.locale===n.locale});return a&&a.value}return null}},{key:"_buildAttributes",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a,o=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(function(){var e=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.dataElementFactory.build(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(n);case 3:return a=e.sent,e.abrupt("return",a.filter(function(e){return e}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"build",value:function(){var t=Object(i.a)(r.a.mark(function t(n){var a,i=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=new Vt(function(t){t.id=n.id,t.name=i._getTranslation(n.translations,e.translationPropertyNames.NAME)||n.displayName}),!n.trackedEntityTypeAttributes){t.next=8;break}return t.next=4,this.searchGroupFactory.build(n.trackedEntityTypeAttributes,n.minAttributesRequiredToSearch);case 4:return a.searchGroups=t.sent,t.next=7,this._buildAttributes(n.trackedEntityTypeAttributes);case 7:a.attributes=t.sent;case 8:return t.next=10,this.teiRegistrationFactory.build(n,a.searchGroups,a);case 10:return a.teiRegistration=t.sent,t.abrupt("return",a);case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}();ni.translationPropertyNames={NAME:"NAME",SHORT_NAME:"SHORT_NAME",DESCRIPTION:"DESCRIPTION"};var ai=ni;function ri(e,t,n,a){return ii.apply(this,arguments)}function ii(){return(ii=Object(i.a)(r.a.mark(function e(t,n,a,o){var s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=new ai(n,a,o),e.next=3,Object(Xe.a)(t.values()).asyncForEach(function(){var e=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.build(t);case 2:n=e.sent,nn.set(n.id,n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",nn);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=vr(),r=t.map(function(e){return a.getAll(e)});return Promise.all(r).then(function(e){return e.reduce(function(e,n,a){return e[t[a]]=n.reduce(function(e,t){return e.set(t.id,t),e},new Map),e},{})})}function si(e){return ci.apply(this,arguments)}function ci(){return(ci=Object(i.a)(r.a.mark(function e(t){var n,a,i,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oi(rr.TRACKED_ENTITY_ATTRIBUTES,rr.OPTION_SETS,rr.TRACKED_ENTITY_TYPES);case 2:return n=e.sent,e.next=5,ri(n[rr.TRACKED_ENTITY_TYPES],n[rr.TRACKED_ENTITY_ATTRIBUTES],n[rr.OPTION_SETS],t);case 5:return a=e.sent,i=Kr(t,n[rr.OPTION_SETS],n[rr.TRACKED_ENTITY_ATTRIBUTES],n[rr.TRACKED_ENTITY_TYPES],a),o=Jr(rr.CONSTANTS),r=n[rr.OPTION_SETS],an.set(r),e.next=11,Promise.all([i,o]);case 11:case"end":return e.stop()}var r},e)}))).apply(this,arguments)}function li(){return ui.apply(this,arguments)}function ui(){return(ui=Object(i.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=br(),e.abrupt("return",t.getAll(ar.SYSTEM_SETTINGS));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function di(e){return pi.apply(this,arguments)}function pi(){return(pi=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,e.t0){e.next=5;break}return e.next=4,li();case 4:e.t0=e.sent;case 5:n=e.t0,a=new tn,n.forEach(function(e){a[e.id]=e.value}),on.set(a);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var fi=n(34),mi=function(e){return e.options},hi=function(e){return e.onSelect},gi=function(){return Object(fi.createSelector)(mi,hi,function(e,t){return function(n){var a=e.find(function(e){return e.value===n});t({name:a.label,id:a.value,writeAccess:a.writeAccess})}})},bi=We(function(){return{marginTop:5,paddingTop:3}},function(){return{size:22}},function(e){return e.options})(hn),vi=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).state={options:null,prevOrgUnitId:null},n.onSelectSelector=gi(),n.loadCagoryOptions(n.props),n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"getOptionsAsync",value:function(e,t,n){return function(e,t){return Cr.apply(this,arguments)}(e,{predicate:function(e){if(!t)return!0;var n=e.organisationUnits;return!n||!!n[t]},project:function(e){return{label:e.displayName,value:e.id,writeAccess:e.access.data.write}},onIsAborted:n})}},{key:"getDerivedStateFromProps",value:function(e,t){return e.selectedOrgUnitId!==t.prevOrgUnitId?{prevOrgUnitId:e.selectedOrgUnitId,options:null}:null}}]),Object(G.a)(t,[{key:"componentDidUpdate",value:function(e){this.state.options||e.selectedOrgUnitId===this.props.selectedOrgUnitId||this.loadCagoryOptions(this.props)}},{key:"componentWillUnmount",value:function(){this.cancelablePromise&&this.cancelablePromise.cancel(),this.cancelablePromise=null}},{key:"loadCagoryOptions",value:function(e){var n,a=this,r=e.category,i=e.selectedOrgUnitId;this.setState({options:null}),this.cancelablePromise&&this.cancelablePromise.cancel();(n=Object(Ze.c)(t.getOptionsAsync(r.id,i,function(){return n&&a.cancelablePromise!==n}))).promise.then(function(e){e.sort(function(e,t){return e.label===t.label?0:e.label<t.label?-1:1}),a.setState({options:e}),a.cancelablePromise=null}).catch(function(e){e&&(e.aborted||e.isCanceled)||(R.a.error(Object(Ze.b)("An error occured loading category options")({error:e})),a.setState({options:[]}))}),this.cancelablePromise=n}},{key:"render",value:function(){var e=this.props,t=(e.selectedOrgUnitId,e.onSelect),n=Object(ue.a)(e,["selectedOrgUnitId","onSelect"]),a=this.state.options,r=this.onSelectSelector({options:a,onSelect:t});return j.createElement(bi,Object.assign({options:a,value:"",placeholder:s.a.t("Select")},n,{onSelect:r}))}}]),t}(j.Component),Oi="setOrgUnitId",yi="storeOrgUnitObject",Ei="setProgramId",_i="setCategoryId",ji="resetCategorySelections",Ii="goBackToListContext",Si="resetProgramIdBase",Ci=function(){return Se(Si)()},Ti=(n(6812),n(14)),Ri=n.n(Ti),Ni=Object(k.withStyles)(function(e){return{button:{border:"none",fontSize:e.typography.pxToRem(16),display:"inline-block",textDecoration:"underline",cursor:"pointer","&:disabled":{color:"rgba(0, 0, 0, 0.26)",cursor:"default"}}}})(function(e){var t=e.classes,n=e.children,a=(e.muiClasses,e.muiButtonRef,e.className),r=Object(ue.a)(e,["classes","children","muiClasses","muiButtonRef","className"]);return j.createElement("button",Object.assign({className:Ri()(t.button,a)},r),n)}),ki=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleClick=n.handleClick.bind(Object(J.a)(n)),n.handleClickCategoryOption=n.handleClickCategoryOption.bind(Object(J.a)(n)),n.buildProgramsArray(),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"buildProgramsArray",value:function(){this.programsArray=Array.from(at.values())}},{key:"getProgramIcon",value:function(e){var t=this.props.classes;return e.icon.data?I.a.createElement("div",{className:t.iconContainer},I.a.createElement("img",{style:{backgroundColor:e.icon.color},className:t.icon,src:e.icon.data,alt:e.name})):null}},{key:"getOptionsFromPrograms",value:function(e){var t=this;return e.map(function(e){return{label:e.name,value:e.id,iconLeft:t.getProgramIcon(e)}})}},{key:"handleClick",value:function(e){this.props.handleClickProgram(e.value)}},{key:"handleClickCategoryOption",value:function(e,t){this.props.handleSetCatergoryCombo(e,t)}},{key:"handleResetProgram",value:function(){this.props.onResetProgramId(Ci())}},{key:"handleResetCategoryOption",value:function(e){this.props.onResetCategoryOption(e)}},{key:"handleResetOrgUnit",value:function(){this.props.onResetOrgUnit()}},{key:"getOptions",value:function(){var e=this;return this.props.selectedOrgUnitId?this.getOptionsFromPrograms(this.programsArray.filter(function(t){return t.organisationUnits[e.props.selectedOrgUnitId]&&t.access.data.read})):this.getOptionsFromPrograms(this.programsArray.filter(function(e){return e.access.data.read}))}},{key:"areAllProgramsAvailable",value:function(e){return e.length===this.programsArray.filter(function(e){return e.access.data.read}).length}},{key:"renderSelectedProgram",value:function(e){var t=this;return I.a.createElement(I.a.Fragment,null,I.a.createElement("h4",{className:this.props.classes.title},s.a.t("Selected Program")),I.a.createElement("div",{className:this.props.classes.selectedText},I.a.createElement("div",{className:this.props.classes.selectedTextAndIconContainer},this.getProgramIcon(e),I.a.createElement("div",{className:this.props.classes.selectedProgramNameContainer},e.name)),I.a.createElement(be.a,{className:this.props.classes.selectedButton,onClick:function(){return t.handleResetProgram()}},I.a.createElement(it.a,{className:this.props.classes.selectedButtonIcon}))))}},{key:"renderWithSelectedProgram",value:function(e){var t=this;if(e.categoryCombination){var n=this.props,a=n.classes,r=n.selectedCategories,i=n.selectedOrgUnitId;return I.a.createElement("div",null,I.a.createElement(Ye.a,{elevation:0,className:a.selectedPaper},I.a.createElement(qe.a,{container:!0,spacing:8},I.a.createElement(qe.a,{item:!0,xs:12,sm:6},this.renderSelectedProgram(e)),Array.from(e.categoryCombination.categories.values()).map(function(e){return I.a.createElement(qe.a,{key:e.id,item:!0,xs:12,sm:6},I.a.createElement("h4",{className:a.title},e.name),r&&r[e.id]?I.a.createElement("div",{className:a.selectedText},I.a.createElement("div",{className:a.selectedCategoryNameContainer},r[e.id].name),I.a.createElement(be.a,{className:a.selectedButton,onClick:function(){return t.handleResetCategoryOption(e.id)}},I.a.createElement(it.a,{className:a.selectedButtonIcon}))):I.a.createElement(vi,{category:e,onSelect:function(n){t.handleClickCategoryOption(n,e.id)},selectedOrgUnitId:i}))}))))}return I.a.createElement("div",null,I.a.createElement(Ye.a,{elevation:0,className:this.props.classes.selectedPaper},this.renderSelectedProgram(e)))}},{key:"renderWithoutSelectedProgram",value:function(e){var t=this,n=this.props,a=n.handleClickProgram,r=n.classes,i=this.areAllProgramsAvailable(e)?null:I.a.createElement("div",{className:this.props.classes.programsHiddenText},s.a.t("Some programs are being filtered."),I.a.createElement(Ni,{className:this.props.classes.programsHiddenTextResetOrgUnit,onClick:function(){return t.handleResetOrgUnit()}},s.a.t("Show all")));return I.a.createElement(Ye.a,{elevation:0,className:r.paper},I.a.createElement("h4",{className:r.title},s.a.t("Program")),e.length<=t.props.buttonModeMaxLength?I.a.createElement(_n,{items:e,onSelect:a}):I.a.createElement("div",null,I.a.createElement("div",{id:"program-selector"},I.a.createElement(hn,{options:e,onSelect:a,placeholder:s.a.t("Select program"),value:""}))),i)}},{key:"renderEmpty",value:function(){var e=this;return I.a.createElement("div",null,I.a.createElement(Ye.a,{elevation:0,className:this.props.classes.paper},I.a.createElement("h4",{className:this.props.classes.title},s.a.t("Program")),I.a.createElement("div",{className:this.props.classes.noProgramsContainer},s.a.t("No programs available."),I.a.createElement(Ni,{className:this.props.classes.programsHiddenTextResetOrgUnit,onClick:function(){return e.handleResetOrgUnit()}},s.a.t("Show all")))))}},{key:"render",value:function(){var e=this.getOptions();if(0===e.length)return this.renderEmpty();var t=this.props.selectedProgram?at.get(this.props.selectedProgram):null;return t?this.renderWithSelectedProgram(t):this.renderWithoutSelectedProgram(e)}}]),t}(j.Component),Ai=Object(k.withStyles)(function(e){return{paper:{padding:8,backgroundColor:e.palette.grey.lighter,borderRadius:8},title:{margin:0,fontWeight:425,fontSize:15,paddingBottom:5},form:{width:"100%"},selectedText:{marginTop:5,marginBottom:5,marginLeft:5,padding:5,borderLeft:"2px solid #71a4f8",display:"flex",alignItems:"center",justifyContent:"space-between"},selectedTextContainer:{display:"flex",alignItems:"center",overflow:"hidden"},selectedTextAndIconContainer:{display:"flex",alignItems:"center",overflow:"hidden"},selectedProgramNameContainer:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},selectedCategoryNameContainer:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},selectedPaper:{backgroundColor:e.palette.grey.lighter,borderRadius:8,padding:8},selectedButton:{float:"right",width:20,height:20,padding:0},selectedButtonIcon:{width:20,height:20},programsHiddenText:{fontSize:12,color:e.palette.grey.dark,paddingTop:5},programsHiddenTextResetOrgUnit:{cursor:"pointer",color:"inherit",paddingLeft:2},noProgramsContainer:{fontSize:14,textAlign:"center",backgroundColor:"white",padding:10,borderRadius:5,border:"1px solid lightGrey"},iconContainer:{display:"flex",alignItems:"center",paddingRight:5},icon:{width:22,height:22,borderRadius:2}}},{index:1})(ki),wi=n(124),Pi=n.n(wi);function Di(e){return Boolean(e)||0===e||!1===e}function xi(e,t){return zn(e,t).isValid}var Fi=function(e){return Kn(e).isValid};var Li=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ui=function(e){return Li.test(e)},Mi=function(e){if(isNaN(e))return!1;var t=Number(e);return Number.isSafeInteger(t)},Vi=function(e){if(isNaN(e))return!1;var t=Number(e);return Number.isSafeInteger(t)&&t>0},Bi=function(e){if(isNaN(e))return!1;var t=Number(e);return Number.isSafeInteger(t)&&t<0},Gi=function(e){return"0"===e||Vi(e)},Wi=function(e){return!(isNaN(e)||Number(e)===1/0)},Hi=function(e){var t=e.replace("%","");return!(isNaN(t)||Number(t)===1/0)},zi=function(e){return null!==e.match(/^(http|https):\/\/[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,6}(:[0-9]{1,5})?(\/.*)?$/)},Yi={date:"Please provide a valid date",years:"Please provide a valid positive integer",months:"Please provide a valid positive integer",days:"Please provide a valid positive integer"};function Ki(e){return!e||Gi(e)}function qi(e,t){if(function(e){return!e.date&&!e.years&&!e.months&&!e.days}(e))return!1;var n=function(e,t,n){var a=[];return Ki(e)||a.push({years:Yi.years}),Ki(t)||a.push({months:Yi.months}),Ki(n)||a.push({days:Yi.days}),a.length>0?{valid:!1,errorMessage:a.reduce(function(e,t){return Object(Ie.a)({},e,t)},{})}:{valid:!0}}(e.years,e.months,e.days);return n.valid?function(e,t){return!e||xi(e,t)?{valid:!0}:{valid:!1,errorMessage:{date:Yi.date}}}(e.date,t):n}var Xi=function(e){return/^[^a-zA-Z]+$/.test(e)},Zi=function(e){return!!(e&&e.id&&e.name)};function Ji(e){return"number"===typeof e||"string"===typeof e&&null===e.match(/[^0-9.,-]+/)}var Qi=function(e){if(!e)return!1;var t=e.longitude,n=e.latitude;if(!Ji(n)||!Ji(t))return!1;var a=parseInt(t,10),r=parseInt(n,10);return a>=-180&&a<=180&&r>=-90&&r<=90},$i=n(317),eo=n.n($i),to=function(e){var t=e.multiLine,n=e.classes,a=e.inputRef,r=(e.style,Object(ue.a)(e,["multiLine","classes","inputRef","style"]));return I.a.createElement(I.a.Fragment,null,t?I.a.createElement("textarea",Object.assign({ref:a,className:Ri()(eo.a.textArea,n.input)},r)):I.a.createElement("input",Object.assign({ref:a,className:Ri()(eo.a.input,n.input)},r)))};to.defaultProps={classes:{}};var no=to,ao=n(443),ro=n.n(ao);var io=function(e){var t=e.children,n=e.shrink,a=Ri()(ro.a.label,n?ro.a.labelShrinked:ro.a.labelUnshrinked);return I.a.createElement("div",{className:a},t)},oo=n(1079),so=n.n(oo),co=function(){return function(e){return function(t){function n(){var t,a;Object(B.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(a=Object(W.a)(this,(t=Object(H.a)(n)).call.apply(t,[this].concat(i)))).renderDisabled=function(t){return j.createElement(e,Object.assign({placeholder:a.props.label},t))},a}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,n=t.shrinkDisabled,a=Object(ue.a)(t,["shrinkDisabled"]),r=!!this.props.inFocus||!!this.props.value;return n?this.renderDisabled(a):j.createElement("div",{className:so.a.container},j.createElement(io,{shrink:r},this.props.label),j.createElement(e,a))}}]),n}(j.Component)}},lo=function(){return function(e){return function(t){function n(e){var t;return Object(B.a)(this,n),(t=Object(W.a)(this,Object(H.a)(n).call(this,e))).setFocus=function(){t.setState({inFocus:!0}),t.props.onSetFocus&&t.props.onSetFocus()},t.removeFocus=function(){t.setState({inFocus:!1}),t.props.onRemoveFocus&&t.props.onRemoveFocus()},t.state={inFocus:!1},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.state.inFocus,n=this.props,a=(n.inFocus,n.onSetFocus,n.onRemoveFocus,Object(ue.a)(n,["inFocus","onSetFocus","onRemoveFocus"]));return j.createElement(e,Object.assign({inFocus:t,onSetFocus:this.setFocus,onRemoveFocus:this.removeFocus},a))}}]),n}(j.Component)}},uo=function(){return function(e){return function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).handleBlur=function(e){t.props.onRemoveFocus(),t.props.onBlur&&t.props.onBlur(e)},t.handleFocus=function(){t.props.onSetFocus(),t.props.onFocus&&t.props.onFocus()},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,n=(t.onSetFocus,t.onRemoveFocus,t.onFocus,t.inFocus),a=(t.onBlur,t.classes),r=Object(ue.a)(t,["onSetFocus","onRemoveFocus","onFocus","inFocus","onBlur","classes"]),i=a.inputWrapperFocused,o=a.inputWrapperUnfocused,s=Object(ue.a)(a,["inputWrapperFocused","inputWrapperUnfocused"]),c=n?i:o;return j.createElement("div",{className:Ri()(eo.a.inputWrapper,c)},j.createElement(e,Object.assign({onFocus:this.handleFocus,onBlur:this.handleBlur},r,{classes:s})))}}]),n}(j.Component)}},po=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleBlur=function(e){n.props.onBlur(e.currentTarget.value),n.setState({focus:!1})},n.handleChange=function(e){n.props.onChange&&n.props.onChange(e.currentTarget.value)},n.handleFocus=function(){n.setState({focus:!0})},n.state={},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onBlur,e.onChange,e.value),n=(e.classes,Object(ue.a)(e,["onBlur","onChange","value","classes"]));return I.a.createElement(no,Object.assign({classes:{},onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,value:t||""},n))}}]),t}(j.Component),fo=lo()(co()(uo()(po))),mo="right",ho="center",go="up",bo={ABSOLUTE:"absolute",INLINE:"inline"},vo=n(324),Oo=n.n(vo),yo=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).getRightCalendarStyle=function(e){return e===bo.INLINE?{marginLeft:"-".concat(n.calculateMarginLeftInline(),"px")}:Object(Ie.a)({},n.getAbsoluteVerticalPosition(),{right:0})},n.getLeftCalendarStyle=function(e){return e===bo.INLINE?{}:Object(Ie.a)({},n.getAbsoluteVerticalPosition(),{left:0})},n.getCenterCalendarStyle=function(e){return e===bo.INLINE?{marginLeft:"-".concat(n.calculateMarginLeftInline()/2,"px")}:Object(Ie.a)({},n.getAbsoluteVerticalPosition(),{left:"50%",transform:"translate(-50%, 0)"})},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getAbsoluteBottom",value:function(){return this.props.inputUsesFloatingLabel?60:40}},{key:"getAbsoluteVerticalPosition",value:function(){return this.props.absoluteDirection===go?{bottom:this.getAbsoluteBottom()}:{top:0}}},{key:"calculateMarginLeftInline",value:function(){var e=this.props,t=e.inputWidth;return e.calendarWidth-t}},{key:"getPopupStyle",value:function(){var e=this.props,t=e.anchorPosition,n=e.mode;return t===mo?this.getRightCalendarStyle(n):t===ho?this.getCenterCalendarStyle(n):this.getLeftCalendarStyle(n)}},{key:"render",value:function(){var e=this.props,t=e.open,n=e.mode,a=(e.anchorPosition,e.absoluteDirection,e.children);if(!t)return null;var r=n===bo.INLINE?Oo.a.containerInline:Oo.a.containerAbsolute,i=n===bo.INLINE?Oo.a.calendarInline:Oo.a.calendarAbsolute,o=this.getPopupStyle();return j.createElement("div",{className:r},j.createElement("div",{className:i,style:o},a))}}]),t}(j.Component),Eo=n(441),_o=(n(823),n(6842),function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(J.a)(n)),n.displayOptions=Object(Ie.a)({},t.displayOptions,n.props.displayOptions),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"handleChange",value:function(e){var t=this.props.onConvertValueOut(e);this.props.onDateSelected(t)}},{key:"getValue",value:function(e){return this.props.onConvertValueIn(e)}},{key:"getMinMaxProps",value:function(){var e={},t=this.props.minMoment,n=this.props.maxMoment;if(t){var a=t.toDate();e.min=a,e.minDate=a}if(n){var r=n.toDate();e.max=r,e.maxDate=r}return e}},{key:"render",value:function(){var e=this.props,t=e.value,n=(e.classes,e.currentWidth),a=e.height,r=(e.minMoment,e.maxMoment,e.onDateSelected,e.displayOptions,Object(ue.a)(e,["value","classes","currentWidth","height","minMoment","maxMoment","onDateSelected","displayOptions"]));return I.a.createElement("div",null,I.a.createElement(Eo.a,Object.assign({},this.getMinMaxProps(),{selected:this.getValue(t),onSelect:this.handleChange,width:n,height:a,autoFocus:!1,displayOptions:this.displayOptions},r)))}}]),t}(j.Component));_o.displayOptions={showHeader:!1};var jo=_o;var Io=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleBlur=function(e){n.props.onBlur(e)},n.handleChange=function(e){n.props.onChange&&n.props.onChange(e.currentTarget.value)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onBlur,e.onChange,e.value),n=Object(ue.a)(e,["onBlur","onChange","value"]);return I.a.createElement(no,Object.assign({value:t||"",onBlur:this.handleBlur,onChange:this.handleChange},n))}}]),t}(I.a.Component),So=uo()(Io),Co=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).state={popoverOpen:!1},n.handleTextFieldFocus=n.handleTextFieldFocus.bind(Object(J.a)(n)),n.handleDateSelected=n.handleDateSelected.bind(Object(J.a)(n)),n.handleTextFieldBlur=n.handleTextFieldBlur.bind(Object(J.a)(n)),n.hidePopover=n.hidePopover.bind(Object(J.a)(n)),n.handleDocumentClick=n.handleDocumentClick.bind(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"splitPassOnProps",value:function(e){var n={input:{},popup:{},calendar:{}};return e?Object.keys(e).reduce(function(n,a){var r;r=a.startsWith(t.propContainers.CALENDAR)?t.propContainers.CALENDAR:a.startsWith(t.propContainers.POPUP)?t.propContainers.POPUP:t.propContainers.INPUT;var i,o=(i=a.replace(r,"")).charAt(0).toLocaleLowerCase()+i.slice(1);return n[r][o]=e[a],n},n):n}}]),Object(G.a)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleDocumentClick)}},{key:"handleTextFieldFocus",value:function(){document.removeEventListener("click",this.handleDocumentClick),this.setState({popoverOpen:!0}),this.props.onFocus&&this.props.onFocus()}},{key:"handleDateSelected",value:function(e){this.props.onBlur(e),this.hidePopover(),this.props.onDateSelectedFromCalendar&&this.props.onDateSelectedFromCalendar(),document.removeEventListener("click",this.handleDocumentClick)}},{key:"handleDocumentClick",value:function(e){e.target&&e.target.className&&e.target.className.startsWith&&e.target.className.startsWith("Cal__")||e.target&&e.target.className&&e.target.className.baseVal&&e.target.className.baseVal.startsWith("Cal__")||(this.hidePopover(),document.removeEventListener("click",this.handleDocumentClick))}},{key:"handleTextFieldBlur",value:function(e){this.props.onBlur(e.currentTarget.value),e.relatedTarget&&"Cal__Container__root"===e.relatedTarget.className?document.addEventListener("click",this.handleDocumentClick):this.hidePopover()}},{key:"hidePopover",value:function(){this.setState({popoverOpen:!1})}},{key:"render",value:function(){var e=this,n=this.props,a=n.width,r=n.maxWidth,i=n.calendarWidth,o=n.calendarHeight,s=n.inputWidth,c=(n.onBlur,n.onFocus,n.onDateSelectedFromCalendar,n.textFieldRef),l=Object(ue.a)(n,["width","maxWidth","calendarWidth","calendarHeight","inputWidth","onBlur","onFocus","onDateSelectedFromCalendar","textFieldRef"]),u=this.state.popoverOpen,d=c?{ref:c}:null,p=s||a,f=i||a,m=t.splitPassOnProps(l),h=o||350;return j.createElement("div",{ref:function(t){e.containerInstance=t},style:{width:a,maxWidth:r}},j.createElement(So,Object.assign({},d,{onFocus:this.handleTextFieldFocus,onBlur:this.handleTextFieldBlur,classes:{},width:p},m.input)),j.createElement(yo,Object.assign({open:u,onClose:this.hidePopover,width:f,height:h,inputWidth:p,inputUsesFloatingLabel:!!m.input.label},m.popup),j.createElement(jo,Object.assign({onDateSelected:this.handleDateSelected,value:this.props.value,currentWidth:f,height:h},m.calendar))))}}]),t}(j.Component);Co.propContainers={CALENDAR:"calendar",POPUP:"popup",INPUT:"input"};var To=Co,Ro={HORIZONTAL:"horizontal",VERTICAL:"vertical"},No=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=(e.orientation,Object(ue.a)(e,["value","orientation"]));return I.a.createElement(To,Object.assign({value:t||"",calendarMaxMoment:l()(),width:150,calendarWidth:350},n))}}]),t}(j.Component),ko=lo()(No),Ao=n(256),wo=n.n(Ao),Po=function(){return function(e){return function(t){function n(e){var t;Object(B.a)(this,n),(t=Object(W.a)(this,Object(H.a)(n).call(this,e))).handleChange=t.handleChange.bind(Object(J.a)(t));var a=t.props.value;return t.state={value:a},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.setState({value:e.value})}},{key:"handleChange",value:function(e){this.setState({value:e})}},{key:"render",value:function(){var t=this.props,n=(t.onChange,t.value,Object(ue.a)(t,["onChange","value"])),a=this.state.value;return j.createElement(e,Object.assign({onChange:this.handleChange,value:a},n))}}]),n}(j.Component)}};function Do(e,t,n,a){var r=e&&t(e);if(!r||!r.isValid)return{date:e,years:"",months:"",days:""};var i=a(),o=a(r.momentDate),s=i.diff(o,"years");o.add(s,"years");var c=i.diff(o,"months");o.add(c,"months");var l=i.diff(o,"days");return{date:n(r.momentDate),years:s.toString(),months:c.toString(),days:l.toString()}}var xo={error:"innerInputError",info:"innerInputInfo",warning:"innerInputWarning",validating:"innerInputValidating"},Fo=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).onClear=function(){n.props.onBlur(null)},n.handleNumberBlur=function(e){var a=n.props,r=a.onParseDate,i=a.onGetFormattedDateStringFromMoment,o=a.onRemoveFocus,s=a.moment;if(o&&o(),t.isEmptyNumbers(e))n.props.onBlur(e.date?{date:e.date}:null);else if(t.isValidNumbers(e)){var c=s(void 0,void 0,!0);c.subtract(t.getNumberOrZero(e.years),"years"),c.subtract(t.getNumberOrZero(e.months),"months"),c.subtract(t.getNumberOrZero(e.days),"days");var l=Do(i(c),r,i,s);n.props.onBlur(l)}else n.props.onBlur(Object(Ie.a)({},e,{date:""}))},n.handleDateBlur=function(e){var t=n.props,a=t.onParseDate,r=t.onGetFormattedDateStringFromMoment,i=t.onRemoveFocus,o=t.moment;i&&i();var s=e?Do(e,a,r,o):null;n.props.onBlur(s)},n.renderMessage=function(e){var t=n.props,a=t.classes,r=t.innerMessage;if(r){var i=r.message&&r.message[e],o=a&&a[xo[r.messageType]]||"";return i&&I.a.createElement("div",{className:o},i)}return null},n.renderNumberInput=function(e,t,a){var r=n.props,i=r.innerMessage,o=r.onChange,c=(r.inFocus,r.value,r.onBlur,r.dateCalendarOnConvertValueIn,r.dateCalendarOnConvertValueOut,r.dateCalendarWidth,r.datePopupAnchorPosition,r.dateCalendarTheme,r.dateCalendarLocale,r.moment,r.onParseDate,Object(ue.a)(r,["innerMessage","onChange","inFocus","value","onBlur","dateCalendarOnConvertValueIn","dateCalendarOnConvertValueOut","dateCalendarWidth","datePopupAnchorPosition","dateCalendarTheme","dateCalendarLocale","moment","onParseDate"]));return I.a.createElement("div",{className:wo.a.ageNumberInputContainer},I.a.createElement(fo,Object.assign({label:s.a.t(a),value:e[t],onBlur:function(a){return n.handleNumberBlur(Object(Ie.a)({},e,Object(Wt.a)({},t,a)))},onChange:function(n){return o(Object(Ie.a)({},e,Object(Wt.a)({},t,n)))}},c)),i&&n.renderMessage(t))},n.renderDateInput=function(e,t){var a=n.props,r=a.onChange,i=a.innerMessage,o=(a.inFocus,a.value,a.onBlur,a.shrinkDisabled,a.dateCalendarOnConvertValueIn),s=a.dateCalendarOnConvertValueOut,c=a.dateCalendarWidth,l=a.datePopupAnchorPosition,u=a.dateCalendarTheme,d=a.dateCalendarLocale,p=a.datePlaceholder,f=(a.moment,a.onParseDate,Object(ue.a)(a,["onChange","innerMessage","inFocus","value","onBlur","shrinkDisabled","dateCalendarOnConvertValueIn","dateCalendarOnConvertValueOut","dateCalendarWidth","datePopupAnchorPosition","dateCalendarTheme","dateCalendarLocale","datePlaceholder","moment","onParseDate"])),m=Ri()(Object(Wt.a)({},wo.a.ageDateInputContainerHorizontal,!t));return I.a.createElement("div",{className:m},I.a.createElement(ko,Object.assign({onBlur:n.handleDateBlur,value:e.date,onChange:function(t){return r(Object(Ie.a)({},e,{date:t}))},calendarWidth:c,popupAnchorPosition:l,calendarTheme:u,calendarLocale:d,calendarOnConvertValueIn:o,calendarOnConvertValueOut:s,placeholder:p},f)),i&&n.renderMessage("date"))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.orientation,a=e.disabled,r=t||{},i=n===Ro.VERTICAL,o=i?wo.a.containerVertical:wo.a.containerHorizontal,s=i?null:wo.a.ageClearHorizontal;return I.a.createElement("div",{className:o},this.renderDateInput(r,i),this.renderNumberInput(r,"years","Years"),this.renderNumberInput(r,"months","Months"),this.renderNumberInput(r,"days","Days"),I.a.createElement("div",{className:s},I.a.createElement(be.a,{style:{width:42,height:42},disabled:!!a},I.a.createElement(it.a,{onClick:this.onClear}))))}}],[{key:"isEmptyNumbers",value:function(e){return!e.years&&!e.months&&!e.days}},{key:"isPositiveOrZeroNumber",value:function(e){return Vi(e)||0===Number(e)}},{key:"isValidNumbers",value:function(e){return t.isPositiveOrZeroNumber(e.years||"0")&&t.isPositiveOrZeroNumber(e.months||"0")&&t.isPositiveOrZeroNumber(e.days||"0")}},{key:"getNumberOrZero",value:function(e){return e||0}}]),t}(j.Component),Lo=Po()(Fo),Uo=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return I.a.createElement("div",null,"Multi")}}]),t}(I.a.Component),Mo=n(1091),Vo=n.n(Mo),Bo=function(e){e.className;var t=Object(ue.a)(e,["className"]);return I.a.createElement("svg",Object.assign({className:Ri()(Vo.a.icon,e.className)},t))},Go=function(e){return I.a.createElement(Bo,e,I.a.createElement("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))},Wo=function(e){return I.a.createElement(Bo,e,I.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))},Ho=n(206),zo=n.n(Ho),Yo={SPACE:" ",ENTER:"Enter"},Ko=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleSelect=function(){if(n.isSpaceClickWhenSelected)n.isSpaceClickWhenSelected=!1;else{var e=n.props,t=e.onSelect,a=e.optionData;t(e.isSelected?null:a.value)}},n.handleKeyPress=function(e){if([Yo.SPACE,Yo.ENTER].includes(e.key)){var t=n.props,a=t.onSelect,r=t.optionData;if(t.isSelected)return n.isSpaceClickWhenSelected=e.key===Yo.SPACE,void a(null);n.isSpaceClickWhenSelected=!1,a(r.value)}},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.optionData,n=e.isSelected,a=e.groupId,r=e.children,i=e.inFocus,o=e.inputRef,s=e.focusClass,c=e.unFocusClass,l=(e.onSelect,e.disabled),u=Object(ue.a)(e,["optionData","isSelected","groupId","children","inFocus","inputRef","focusClass","unFocusClass","onSelect","disabled"]),d=a+(t.id||t.name);return j.createElement("div",null,j.createElement("label",{htmlFor:d,className:Ri()(zo.a.label,Object(Wt.a)({},zo.a.labelDisabled,l))},j.createElement("input",Object.assign({ref:o,type:"radio",className:zo.a.input,name:a,id:d,checked:n,value:t.value,onClick:this.handleSelect,onKeyPress:this.handleKeyPress,disabled:l},u)),j.createElement("div",{className:zo.a.iconFocusContainer},j.createElement("div",{className:i?Ri()(zo.a.inFocus,s):Ri()(c)}),j.createElement("div",{className:zo.a.iconContainer},r)),j.createElement("span",{className:zo.a.name},t.name)))}}]),t}(j.Component),qo=function(){return function(e){return function(t){function n(e){var t;return Object(B.a)(this,n),(t=Object(W.a)(this,Object(H.a)(n).call(this,e))).handleInputMouseDown=function(){t.isMouseClick=!0},t.handleInputFocus=function(){t.props.onSetFocus&&t.props.onSetFocus(),t.isMouseClick?t.isMouseClick=!1:t.setState({inFocus:!0})},t.handleInputBlur=function(){t.props.onRemoveFocus&&t.props.onRemoveFocus(),t.state.inFocus&&t.setState({inFocus:!1}),t.isMouseClick=!1},t.setInputInstance=function(e){t.inputInstance=e},t.state={inFocus:!1,isMouseClick:!1},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"componentDidMount",value:function(){this.inputInstance.addEventListener("mousedown",this.handleInputMouseDown),this.inputInstance.addEventListener("focus",this.handleInputFocus),this.inputInstance.addEventListener("blur",this.handleInputBlur)}},{key:"componentWillUnmount",value:function(){this.inputInstance.removeEventListener("mousedown",this.handleInputMouseDown),this.inputInstance.removeEventListener("focus",this.handleInputFocus),this.inputInstance.removeEventListener("blur",this.handleInputBlur)}},{key:"render",value:function(){var t=this.props,n=(t.onSetFocus,t.onRemoveFocus,t.inFocus,Object(ue.a)(t,["onSetFocus","onRemoveFocus","inFocus"]));return j.createElement(e,Object.assign({inputRef:this.setInputInstance,inFocus:this.state.inFocus},n))}}]),n}(j.Component)}},Xo=n(325),Zo=n.n(Xo),Jo=qo()(Ko),Qo=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).getCheckedClass=function(e,t,n){return Ri()(e,t&&Object(Wt.a)({},t,n))},n.getUncheckedClass=function(e,t,n){return Ri()(e,t&&Object(Wt.a)({},t,n))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getCheckedIcon",value:function(){var e=this.props,t=e.classes,n=e.disabled,a=t||{},r=a.iconDisabled,i=a.iconSelected;return j.createElement(Go,{className:this.getCheckedClass(i,r,n)})}},{key:"getUncheckedIcon",value:function(){var e=this.props,t=e.classes,n=e.disabled,a=t||{},r=a.iconDisabled,i=a.iconDeselected;return j.createElement(Wo,{className:this.getUncheckedClass(i,r,n)})}},{key:"getPostProcessedCustomIcon",value:function(e,t){var n=this.props,a=n.classes,r=n.disabled,i=a||{},o=i.iconSelected,s=i.iconDeselected,c=i.iconDisabled;return j.cloneElement(e,t?{className:this.getCheckedClass(o,c,r)}:{className:this.getUncheckedClass(s,c,r)},null)}},{key:"getIconElement",value:function(e,t){var n=this.props.children,a=n?n(e,t):null;return a?this.getPostProcessedCustomIcon(a,t):t?this.getCheckedIcon():this.getUncheckedIcon()}},{key:"getOption",value:function(e,n,a){var r=this.props,i=r.orientation,o=r.id,s=r.value,c=r.onSelect,l=r.classes,u=r.onSetFocus,d=r.onRemoveFocus,p=r.disabled,f=i===Ro.HORIZONTAL?Zo.a.optionContainerHorizontal:Zo.a.optionContainerVertical,m=n||0===a&&!s&&!1!==s&&0!==s?0:-1,h=this.getIconElement(e,n);return j.createElement("div",{className:f,key:e.id||e.name},j.createElement(Jo,{optionData:e,isSelected:n,tabIndex:m,groupId:o,onSelect:c,focusClass:l&&t.getFocusClass(l,n),unFocusClass:l&&l.unFocus,onSetFocus:u,onRemoveFocus:d,disabled:p},h))}},{key:"getSelectionOptions",value:function(){var e=this,t=this.props,n=t.options,a=t.onGetOptionData,r=t.value;return n.map(function(t,n){var i=a?a(t):t,o=i.value===r;return e.getOption(i,o,n)})}},{key:"render",value:function(){var e=this.props.orientation===Ro.HORIZONTAL?Zo.a.containerHorizontal:Zo.a.containerVertical;return j.createElement("div",{className:e},this.getSelectionOptions())}}],[{key:"getFocusClass",value:function(e,t){return t?e.focusSelected:e.focusUnselected}}]),t}(j.Component),$o=function(e){var t=e.multiSelect,n=Object(ue.a)(e,["multiSelect"]);return t?j.createElement(Uo,Object.assign({orientation:Ro.HORIZONTAL},n)):j.createElement(Qo,Object.assign({orientation:Ro.HORIZONTAL},n))},es=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).options=t.getOptions(!!n.props.useRealBooleanValues),n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"getOptions",value:function(e){return[{name:s.a.t("Yes"),value:!!e||"true"},{name:s.a.t("No"),value:!e&&"false"}]}}]),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.allowMultiple,n=(e.useRealBooleanValues,Object(ue.a)(e,["allowMultiple","useRealBooleanValues"]));return I.a.createElement("div",null,I.a.createElement($o,Object.assign({options:this.options,multiSelect:t},n)))}}]),t}(j.Component),ts=n(49),ns=n(825),as=n(827),rs=n(826),is=n(434),os=function(e){return I.a.createElement(Bo,e,I.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),I.a.createElement("path",{d:"M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm4 8h-3v3h-2v-3H8V8h3V5h2v3h3v2z"}))},ss=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleBlur=function(e){n.props.onBlur(e.currentTarget.value)},n.handleChange=function(e){n.props.onChange&&n.props.onChange(e.currentTarget.value)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onBlur,e.onChange,e.value),n=(e.classes,e.className),a=Object(ue.a)(e,["onBlur","onChange","value","classes","className"]);return I.a.createElement(no,Object.assign({classes:{input:n},onBlur:this.handleBlur,onChange:this.handleChange,value:t||""},a))}}]),t}(j.Component),cs=lo()(co()(uo()(ss))),ls=n(92),us=n.n(ls),ds=n(176),ps=n.n(ds),fs={basic:{color:"primary",variant:"text"},primary:{color:"primary",variant:"raised"},secondary:{color:"secondary",variant:"raised"},destructive:{color:void 0,variant:"raised"}},ms=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.kind,n=e.size,a=e.disabled,r=e.onClick,i=e.children,o=e.className;return j.createElement(ps.a,{className:o,size:n,onClick:r,disabled:a,color:fs[t].color,variant:fs[t].variant},i)}}]),t}(j.Component);ms.defaultProps={size:"medium",kind:"basic",disabled:!1};var hs=ms,gs=Object(ts.d)(is.ReactLeafletSearch),bs={LATITUDE:"latitude",LONGITUDE:"longitude"},vs=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleBlur=function(e,t){var a=Object(Ie.a)({},n.props.value,Object(Wt.a)({},e,t));a.latitude||a.longitude?n.props.onBlur(a):n.props.onBlur(null)},n.handleChange=function(e,t){n.props.onChange&&n.props.onChange(Object(Ie.a)({},n.props.value,Object(Wt.a)({},e,t)))},n.handleClear=function(){n.props.onBlur(null)},n.getPosition=function(){var e=n.props.value,t=null;return e&&e.latitude&&e.longitude&&!isNaN(parseFloat(e.latitude))&&!isNaN(parseFloat(e.longitude))&&(t=[parseFloat(e.latitude),parseFloat(e.longitude)]),t},n.closeMap=function(){n.setState({showMap:!1})},n.openMap=function(){n.setState({showMap:!0,position:n.getPosition()})},n.onMapPositionChange=function(e){var t=e.latlng;n.setMapPosition([t.lat,t.lng],e.target.getZoom())},n.setMapPosition=function(e,t){n.setState({position:e,zoom:t})},n.onSetCoordinate=function(){var e=n.state.position,t=e&&2===e.length?{latitude:e[0],longitude:e[1]}:null;n.props.onBlur(t),n.setState({showMap:!1})},n.renderMapIcon=function(){var e=n.props,t=e.classes,a=e.shrinkDisabled,r=e.disabled,i=t||{},o=i.mapIconContainer,s=i.mapIcon,c=i.mapIconContainerDisabled,l=Ri()(Object(Wt.a)({},us.a.mapIconContainer,a),Object(Wt.a)({},us.a.mapIconContainerWithMargin,!a),o,Object(Wt.a)({},c,r));return j.createElement("div",{className:l},j.createElement(be.a,{disabled:!!r,style:{height:42,width:42,borderRadius:0,padding:0},classes:{root:Ri()(us.a.mapIcon,s)}},j.createElement(os,{onClick:n.openMap})))},n.renderMapDialog=function(){return j.cloneElement(n.props.mapDialog,{open:n.state.showMap,onClose:n.closeMap},[].concat(Object(Xe.a)(j.Children.toArray(n.props.mapDialog.props.children)),[j.createElement("div",{className:us.a.dialogContent,key:"dialogContent"},n.renderMap(),n.renderDialogActions())]))},n.setMapInstance=function(e){n.mapInstance=e},n.search=function(e){var t=n.mapInstance&&n.mapInstance.leafletElement?n.mapInstance.leafletElement.getZoom():13;n.setMapPosition(Object(Xe.a)(e),t)},n.renderMap=function(){var e=n.state,t=e.position,a=e.zoom,r=t||n.props.mapCenter;return j.createElement("div",{className:us.a.mapContainer},j.createElement(ns.a,{center:r,zoom:a,onClick:n.onMapPositionChange,className:us.a.leafletContainer,key:"map",ref:function(e){n.setMapInstance(e)}},j.createElement(gs,{position:"topleft",inputPlaceholder:"Search",closeResultsOnClick:!0,search:null,mapStateModifier:n.search,showMarker:!1}),j.createElement(as.a,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),t&&j.createElement(rs.a,{position:t})))},n.renderDialogActions=function(){return j.createElement("div",{className:us.a.dialogActionOuterContainer},j.createElement("div",{className:us.a.dialogActionInnerContainer},j.createElement(hs,{kind:"basic",onClick:n.closeMap},s.a.t("Cancel"))),j.createElement("div",{className:us.a.dialogActionInnerContainer},j.createElement(hs,{kind:"primary",onClick:n.onSetCoordinate},s.a.t("Set coordinate"))))},n.renderLatitude=function(){var e=n.props,t=(e.mapCenter,e.onBlur,e.onChange,e.value),a=(e.orientation,e.shrinkDisabled),r=e.classes,i=(e.mapDialog,e.disabled),o=Object(ue.a)(e,["mapCenter","onBlur","onChange","value","orientation","shrinkDisabled","classes","mapDialog","disabled"]),s=r||{},c=(s.mapIconContainer,s.mapIcon,Object(ue.a)(s,["mapIconContainer","mapIcon"]));return j.createElement(cs,Object.assign({shrinkDisabled:a,label:"Latitude",value:t&&t.latitude,classes:c,className:us.a.latitudeTextInput,onBlur:function(e){return n.handleBlur(bs.LATITUDE,e)},onChange:function(e){return n.handleChange(bs.LATITUDE,e)},disabled:i},o))},n.renderLongitude=function(){var e=n.props,t=(e.mapCenter,e.onBlur,e.onChange,e.value),a=(e.orientation,e.shrinkDisabled),r=e.classes,i=(e.mapDialog,e.disabled),o=Object(ue.a)(e,["mapCenter","onBlur","onChange","value","orientation","shrinkDisabled","classes","mapDialog","disabled"]),s=r||{},c=(s.mapIconContainer,s.mapIcon,Object(ue.a)(s,["mapIconContainer","mapIcon"]));return j.createElement(cs,Object.assign({shrinkDisabled:a,label:"Longitude",value:t&&t.longitude,className:us.a.longitudeTextInput,classes:c,onBlur:function(e){return n.handleBlur(bs.LONGITUDE,e)},onChange:function(e){return n.handleChange(bs.LONGITUDE,e)},disabled:i},o))},n.renderClearButton=function(){var e=n.props,t=e.shrinkDisabled,a=e.disabled,r=t?us.a.clearIcon:us.a.clearIconWithMargin;return j.createElement("div",{className:r},j.createElement(be.a,{style:{height:42,width:42,borderRadius:0,padding:0},disabled:!!a},j.createElement(it.a,{onClick:n.handleClear})))},n.renderVertical=function(){return j.createElement("div",null,j.createElement("div",{className:us.a.coordinateFieldsVertical},n.renderMapDialog(),j.createElement("div",{className:us.a.buttonsContainerVertical},n.renderMapIcon(),n.renderClearButton()),j.createElement("div",{className:us.a.inputContainer},n.renderLatitude()),j.createElement("div",{className:us.a.inputContainer},n.renderLongitude())))},n.renderHorizontal=function(){return j.createElement("div",null,j.createElement("div",{className:us.a.coordinateFieldsHorizontal},n.renderMapDialog(),n.renderMapIcon(),j.createElement("div",{className:us.a.inputContainer},n.renderLatitude()),j.createElement("div",{className:us.a.inputContainer},n.renderLongitude()),n.renderClearButton()))},n.state={showMap:!1,zoom:13},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return this.props.orientation===Ro.VERTICAL?this.renderVertical():this.renderHorizontal()}}]),t}(j.Component);vs.defaultProps={mapCenter:[51.505,-.09]};var Os=n(444),ys=n.n(Os);var Es=lo()(co()(function(e){var t=e.value,n=Object(ue.a)(e,["value"]);return I.a.createElement(To,Object.assign({value:t||""},n))})),_s=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleBlur=function(e){n.props.onBlur(e.currentTarget.value)},n.handleChange=function(e){n.props.onChange&&n.props.onChange(e.currentTarget.value)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onBlur,e.onChange,e.value),n=Object(ue.a)(e,["onBlur","onChange","value"]);return I.a.createElement(no,Object.assign({value:t||"",onBlur:this.handleBlur,onChange:this.handleChange},n))}}]),t}(I.a.Component),js=lo()(co()(uo()(_s))),Is=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).getValue=function(){return n.props.value||{}},n.handleTimeChange=n.handleTimeChange.bind(Object(J.a)(n)),n.handleDateChange=n.handleDateChange.bind(Object(J.a)(n)),n.handleTimeBlur=n.handleTimeBlur.bind(Object(J.a)(n)),n.handleDateBlur=n.handleDateBlur.bind(Object(J.a)(n)),n.touchedFields=new Set,n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"handleTimeChange",value:function(e){this.props.onChange({time:e,date:this.getValue().date})}},{key:"handleDateChange",value:function(e){this.props.onChange({time:this.getValue().time,date:e})}},{key:"handleTimeBlur",value:function(e){this.touchedFields.add("timeTouched");var t=this.getValue();this.handleBlur({time:e,date:t.date},!!t.date)}},{key:"handleDateBlur",value:function(e){this.touchedFields.add("dateTouched");var t=this.getValue();this.handleBlur({time:t.time,date:e},!!t.time)}},{key:"handleBlur",value:function(e,t){var n=this.props.onBlur,a=2===this.touchedFields.size;e.date||e.time?n(e,{touched:a||t}):n(void 0,{touched:a})}},{key:"render",value:function(){var e=this.props,t=(e.value,e.dateMaxWidth),n=e.dateWidth,a=e.calendarWidth,r=e.popupAnchorPosition,i=e.calendarTheme,o=e.calendarLocale,s=e.calendarOnConvertValueIn,c=e.calendarOnConvertValueOut,l=e.classes,u=e.orientation,d=(e.onBlur,e.dateLabel),p=e.timeLabel,f=(e.onChange,Object(ue.a)(e,["value","dateMaxWidth","dateWidth","calendarWidth","popupAnchorPosition","calendarTheme","calendarLocale","calendarOnConvertValueIn","calendarOnConvertValueOut","classes","orientation","onBlur","dateLabel","timeLabel","onChange"])),m=u===Ro.VERTICAL,h=this.getValue(),g=h.date,b=h.time,v={width:n,maxWidth:t};return I.a.createElement("div",{className:ys.a.root},I.a.createElement("div",{className:Ri()(ys.a.fieldsContainer,Object(Wt.a)({},ys.a.fieldsContainerVertical,m))},I.a.createElement("div",{style:v},I.a.createElement(Es,Object.assign({value:g,maxWidth:t,width:n,calendarWidth:a,onChange:this.handleDateChange,onBlur:this.handleDateBlur,label:d,calendarTheme:i,popupAnchorPosition:r,calendarLocale:o,calendarOnConvertValueIn:s,calendarOnConvertValueOut:c,classes:l},f))),I.a.createElement(js,Object.assign({value:b,onChange:this.handleTimeChange,onBlur:this.handleTimeBlur,label:p,classes:l},f))))}}]),t}(j.Component);Is.defaultProps={dateLabel:s.a.t("Date"),timeLabel:s.a.t("Time")};var Ss=Is,Cs=n(397),Ts=n.n(Cs),Rs=n(200),Ns=n.n(Rs),ks=n(42),As=n.n(ks),ws=n(824),Ps=n(1163),Ds=n(140),xs=n.n(Ds),Fs=(n(6851),function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(){n.props.disabled||n.props.onClick()},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentWillMount",value:function(){var e=As.a.control({position:"topright"}),t=s.a.t("Delete polygon"),n=I.a.createElement("div",{className:"leaflet-draw-toolbar leaflet-bar"},I.a.createElement("a",{className:Ri()("leaflet-draw-edit-remove",{"leaflet-disabled":this.props.disabled}),onClick:this.onClick,title:t,role:"button",tabIndex:"0"}));e.onAdd=function(e){var t=As.a.DomUtil.create("div","");return C.a.render(n,t),t},this.leafletElement=e}},{key:"createLeafletElement",value:function(){return this.leafletElement}},{key:"updateLeafletElement",value:function(e,t){if(t.position!==e.position&&this.leafletElement.setPosition(t.position),t.disabled!==e.disabled){var n=this.leafletElement.getContainer().getElementsByClassName("leaflet-draw-edit-remove");n&&n.length>0&&(n[0].className=Ri()("leaflet-draw-edit-remove",{"leaflet-disabled":t.disabled}))}}}]),t}(n(160).a)),Ls=Object(ts.d)(Fs),Us=Object(ts.d)(is.ReactLeafletSearch);var Ms=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).onFeatureGroupReady=function(e,t){if(t){var n=new As.a.GeoJSON(t);if(e){var a=e.leafletElement;a.clearLayers(),n.eachLayer(function(e){a.addLayer(e)});var r=e.contextValue.map,i=t.features[0].geometry.coordinates[0].map(function(e){return[e[1],e[0]]});r.fitBounds(i)}}else if(e){e.leafletElement.clearLayers()}},n.getCenter=function(e){if(!e)return n.props.mapCenter;var t=e.features[0].geometry.coordinates[0],a=As.a.latLngBounds(t.map(function(e){return[e[0],e[1]]})).getCenter(),r=a.lat;return[a.lng,r]},n.getFeatureCollection=function(e){return Array.isArray(e)?function(e){return e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[e[0].map(function(e){return[].concat(Object(Xe.a)(e),[0])})]}}]}:null}(e):null},n.closeMap=function(){n.setState({showMap:!1})},n.openMap=function(){n.setState({showMap:!0,mapCoordinates:n.props.value})},n.onMapPolygonCreated=function(e){var t=e.layer.toGeoJSON().geometry.coordinates;n.setState({mapCoordinates:t,zoom:e.target.getZoom()})},n.onMapPolygonEdited=function(e){var t=e.layers.getLayers()[0].toGeoJSON().geometry.coordinates;n.setState({mapCoordinates:t,zoom:e.target.getZoom()})},n.onMapPolygonDelete=function(){n.setState({mapCoordinates:null})},n.onSetPolygon=function(){n.props.onBlur(n.state.mapCoordinates),n.closeMap()},n.renderMapDialog=function(){return j.cloneElement(n.props.mapDialog,{open:n.state.showMap,onClose:n.closeMap},[].concat(Object(Xe.a)(j.Children.toArray(n.props.mapDialog.props.children)),[j.createElement("div",{className:xs.a.dialogContent,key:"dialogContent"},n.renderMap(),n.renderDialogActions())]))},n.renderMap=function(){var e=n.state.zoom,t=n.getFeatureCollection(n.state.mapCoordinates),a=!!t,r=n.getCenter(t);return j.createElement("div",{className:xs.a.mapContainer},j.createElement(ns.a,{zoom:e,center:r,className:xs.a.map,key:"map"},j.createElement(Us,{position:"topleft",inputPlaceholder:"Search",closeResultsOnClick:!0}),j.createElement(as.a,{url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),j.createElement(ws.a,{ref:function(e){n.onFeatureGroupReady(e,t)}},j.createElement(Ps.a,{position:"topright",onEdited:n.onMapPolygonEdited,onCreated:n.onMapPolygonCreated,onDeleted:n.onMapPolygonDelete,draw:{rectangle:!1,polyline:!1,circle:!1,marker:!1,circlemarker:!1},edit:{remove:!1}}),j.createElement(Ls,{onClick:n.onMapPolygonDelete,disabled:!a}))))},n.renderDialogActions=function(){return j.createElement("div",{className:xs.a.dialogActionOuterContainer},j.createElement("div",{className:xs.a.dialogActionInnerContainer},j.createElement(hs,{kind:"basic",onClick:n.closeMap},s.a.t("Cancel"))),j.createElement("div",{className:xs.a.dialogActionInnerContainer},j.createElement(hs,{kind:"primary",onClick:n.onSetPolygon},s.a.t("Set area"))))},n.state={showMap:!1,zoom:13},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=!!this.props.value;return j.createElement("div",{className:xs.a.container},j.createElement("div",{className:xs.a.statusContainer},j.createElement(Ts.a,{className:xs.a.mapIcon,onClick:this.openMap}),j.createElement("div",{className:xs.a.statusText},e?"Polygon captured":"No polygon captured"),e&&j.createElement(Ns.a,{className:xs.a.checkIcon,color:"primary"})),this.renderMapDialog())}}]),t}(j.Component);Ms.defaultProps={mapCenter:[51.505,-.09]};var Vs=n(1093),Bs=n.n(Vs),Gs=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=Object(ue.a)(e,["classes"]),a=t||{};return j.createElement("div",{className:Bs.a.container},j.createElement(no,Object.assign({classes:a},n)))}}]),t}(j.Component),Ws=uo()(Gs),Hs=function(e){return I.a.createElement(Bo,e,I.a.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))},zs=function(e){return I.a.createElement(Bo,e,I.a.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))},Ys=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).options=t.getOptions(!!n.props.useRealTrueValue),n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"getOptions",value:function(e){return[{name:s.a.t("Yes"),value:!!e||"true"}]}}]),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.useRealTrueValue,Object(ue.a)(e,["useRealTrueValue"]));return I.a.createElement("div",null,I.a.createElement($o,Object.assign({options:this.options},t),function(e,t){return t?I.a.createElement(Hs,null):I.a.createElement(zs,null)}))}}]),t}(j.Component),Ks=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleDebounced=function(e){n.props.onDebounced(e)},n.handleChange=function(e){n.setState({value:e.currentTarget.value}),n.debouncer(Object(Ie.a)({},e))},n.state={value:n.props.value||""},n.debouncer=Object(sn.debounce)(n.handleDebounced,500),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.setState({value:e.value||""})}},{key:"componentWillUnmount",value:function(){this.debouncer.cancel()}},{key:"render",value:function(){var e=this.props,t=(e.onDebounced,e.value,Object(ue.a)(e,["onDebounced","value"])),n=this.state.value;return j.createElement(no,Object.assign({onChange:this.handleChange,value:n},t))}}]),t}(j.Component),qs=n(445),Xs=n.n(qs),Zs={error:"innerInputError",info:"innerInputInfo",warning:"innerInputWarning",validating:"innerInputValidating"};function Js(e){var t=e.innerMessage,n=e.messageKey,a=e.classes;if(t){var r=t.message&&t.message[n],i=a&&a[Zs[t.messageType]]||"";return r?I.a.createElement("div",{className:i},r):null}return null}var Qs=lo()(co()(uo()(no))),$s="from",ec="to",tc=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).getValue=function(){return n.props.value||{}},n.getNewValue=function(e,t){var a=Object(Ie.a)({},n.getValue(),Object(Wt.a)({},e,t));return a.from||a.to?a:null},n.handleFromChange=function(e){n.props.onChange({from:e.currentTarget.value,to:n.getValue().to})},n.handleToChange=function(e){n.props.onChange({from:n.getValue().from,to:e.currentTarget.value})},n.handleFromBlur=function(e){n.touchedFields.add("fromTouched");var t=n.getValue();n.handleBlur({from:e.currentTarget.value,to:t.to},!!t.to)},n.handleToBlur=function(e){n.touchedFields.add("toTouched");var t=n.getValue();n.handleBlur({from:t.from,to:e.currentTarget.value},!!t.from)},n.handleBlur=function(e,t){var a=2===n.touchedFields.size;e.from||e.to?n.props.onBlur(e,{touched:a||t}):n.props.onBlur(void 0,{touched:a})},n.getInnerMessage=function(e){var t=n.props,a=t.classes,r=t.innerMessage;return j.createElement(Js,{classes:a,messageKey:e,innerMessage:r})},n.touchedFields=new Set,n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=(e.onChange,e.onBlur,Object(ue.a)(e,["value","onChange","onBlur"])),a=t&&t.from?t.from:"",r=t&&t.to?t.to:"";return j.createElement("div",{className:Xs.a.container},j.createElement("div",{className:Xs.a.inputContainer},j.createElement(Qs,Object.assign({label:s.a.t("From"),onChange:this.handleFromChange,onBlur:this.handleFromBlur,value:a},n)),this.getInnerMessage($s)),j.createElement("div",{className:Xs.a.inputContainer},j.createElement(Qs,Object.assign({label:s.a.t("To"),onChange:this.handleToChange,onBlur:this.handleToBlur,value:r},n)),this.getInnerMessage(ec)))}}]),t}(j.Component),nc=n(446),ac=n.n(nc),rc=lo()(co()(To)),ic="from",oc="to",sc=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).getValue=function(){return n.props.value||{}},n.handleFromChange=function(e){n.props.onChange({from:e,to:n.getValue().to})},n.handleToChange=function(e){n.props.onChange({from:n.getValue().from,to:e})},n.handleFromBlur=function(e){n.touchedFields.add("fromTouched");var t=n.getValue();n.handleBlur({from:e,to:t.to},!!t.to)},n.handleToBlur=function(e){n.touchedFields.add("toTouched");var t=n.getValue();n.handleBlur({from:t.from,to:e},!!t.from)},n.handleBlur=function(e,t){var a=2===n.touchedFields.size;e.from||e.to?n.props.onBlur(e,{touched:a||t}):n.props.onBlur(void 0,{touched:a})},n.getInnerMessage=function(e){var t=n.props,a=t.classes,r=t.innerMessage;return j.createElement(Js,{classes:a,innerMessage:r,messageKey:e})},n.touchedFields=new Set,n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onBlur,e.onChange,e.value),n=(e.innerMessage,Object(ue.a)(e,["onBlur","onChange","value","innerMessage"])),a=t&&t.from?t.from:"",r=t&&t.to?t.to:"";return j.createElement("div",{className:ac.a.container},j.createElement("div",{className:ac.a.inputContainer},j.createElement(rc,Object.assign({label:s.a.t("From"),value:a,onBlur:this.handleFromBlur,onChange:this.handleFromChange},n)),this.getInnerMessage(ic)),j.createElement("div",{className:ac.a.inputContainer},j.createElement(rc,Object.assign({label:s.a.t("To"),value:r,onBlur:this.handleToBlur,onChange:this.handleToChange},n)),this.getInnerMessage(oc)))}}]),t}(j.Component),cc=n(447),lc=n.n(cc),uc=lo()(Ss),dc="from",pc="to",fc=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).getValue=function(){return n.props.value||{}},n.getNewValue=function(e,t){var a=n.getValue(),r=Object(Ie.a)({},a,Object(Wt.a)({},e,t));return r.from||r.to?r:null},n.handleFromChange=function(e){n.props.onChange({from:e,to:n.getValue().to})},n.handleToChange=function(e){n.props.onChange({from:n.getValue().from,to:e})},n.toHasValue=function(){var e=n.getValue();return!!(e.to&&e.to.date&&e.to.time)},n.fromHasValue=function(){var e=n.getValue();return!!(e.to&&e.to.date&&e.to.time)},n.handleFromBlur=function(e,t){t&&t.touched&&n.touchedFields.add("fromTouched"),n.handleBlur({from:e,to:n.getValue().to},n.toHasValue())},n.handleToBlur=function(e,t){t&&t.touched&&n.touchedFields.add("toTouched"),n.handleBlur({from:n.getValue().from,to:e},n.fromHasValue())},n.handleBlur=function(e,t){var a=2===n.touchedFields.size;e.from||e.to?n.props.onBlur(e,{touched:a||t}):n.props.onBlur(void 0,{touched:a})},n.getInnerMessage=function(e){var t=n.props,a=t.classes,r=t.innerMessage;return j.createElement(Js,{classes:a,innerMessage:r,messageKey:e})},n.touchedFields=new Set,n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onBlur,e.onChange,e.value),n=Object(ue.a)(e,["onBlur","onChange","value"]),a=t&&t.from?t.from:"",r=t&&t.to?t.to:"";return j.createElement("div",{className:lc.a.container},j.createElement("div",{className:lc.a.inputContainer},j.createElement(uc,Object.assign({dateLabel:s.a.t("From date"),timeLabel:s.a.t("From time"),value:a,onBlur:this.handleFromBlur,onChange:this.handleFromChange},n)),this.getInnerMessage(dc)),j.createElement("div",{className:lc.a.inputContainer},j.createElement(uc,Object.assign({dateLabel:s.a.t("To date"),timeLabel:s.a.t("To time"),value:r,onBlur:this.handleToBlur,onChange:this.handleToChange},n)),this.getInnerMessage(pc)))}}]),t}(j.Component),mc=n(723),hc=n.n(mc),gc=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.children,a=e.labelRef,r=e.useVerticalOrientation,i=Object(ue.a)(e,["classes","children","labelRef","useVerticalOrientation"]),o=r?hc.a.labelContainerVertical:hc.a.labelContainer;return j.createElement("div",Object.assign({ref:a,className:Ri()(o,t.label)},i),n)}}]),t}(j.PureComponent),bc=n(257),vc=n.n(bc),Oc=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return j.createElement("tbody",null,this.props.children)}}]),t}(j.Component),yc=n(3),Ec=n.n(yc),_c=n(77),jc=n.n(_c),Ic=function(e,t){e.children;var n,a=e.className,r=Object(ue.a)(e,["children","className"]),i=t.table,o=Ri()(jc.a.tableCell,(n={},Object(Wt.a)(n,jc.a.tableCellBody,!i),Object(Wt.a)(n,jc.a.tableCellHeader,i&&i.head),Object(Wt.a)(n,jc.a.tableCellFooter,i&&i.footer),n),a);return j.createElement("td",Object.assign({className:o},r),e.children)};Ic.contextTypes={table:Ec.a.object};var Sc=Ic,Cc=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getChildContext",value:function(){return{table:{footer:!0}}}},{key:"render",value:function(){return j.createElement("tfoot",null,this.props.children)}}]),t}(j.Component);Cc.childContextTypes={table:Ec.a.object};var Tc=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getChildContext",value:function(){return{table:{head:!0}}}},{key:"render",value:function(){return j.createElement("thead",null,this.props.children)}}]),t}(j.Component);Tc.childContextTypes={table:Ec.a.object};var Rc=Tc,Nc=function(e){e.children;var t=e.className,n=e.innerRef,a=Object(ue.a)(e,["children","className","innerRef"]),r=Ri()(jc.a.tableCell,jc.a.tableCellHeader,t);return j.createElement("td",Object.assign({ref:n,className:r},a),e.children)},kc=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,n=e.rowsCount,a=e.rowsPerPage,r=e.currentPage,i=e.rowsCountSelector,o=e.rowsCountSelectorLabel,s=e.navigationElements,c=e.onGetLabelDisplayedRows,l=t.getRowsCountElement(o,i),u=c&&t.wrapDisplayedRowsElement(c(t.getFromToLabel(n,a,r),n.toString()));return j.createElement("div",{className:jc.a.pagination},l,u,s)}}],[{key:"getFromToLabel",value:function(e,t,n){var a=t*(n-1)+1;if(a>e)return"-";var r=Math.min(t*n,e);return"".concat(a,"-").concat(r)}},{key:"getRowsCountElement",value:function(e,t){return t?e?j.createElement("div",{className:jc.a.paginationRowsPerPageElementContainer},e,":",j.createElement("span",{className:jc.a.paginationRowsPerPageElement},t)):t:null}},{key:"wrapDisplayedRowsElement",value:function(e){return j.createElement("div",{className:jc.a.paginationDisplayRowsContainer},e)}}]),t}(j.Component),Ac=function(e,t){e.children;var n,a=e.className,r=Object(ue.a)(e,["children","className"]),i=t.table,o=Ri()(jc.a.tableRow,(n={},Object(Wt.a)(n,jc.a.tableRowBody,!i),Object(Wt.a)(n,jc.a.tableRowHeader,i&&i.head),Object(Wt.a)(n,jc.a.tableRowFooter,i&&i.footer),n),a);return j.createElement("tr",Object.assign({className:o},r),e.children)};Ac.contextTypes={table:Ec.a.object};var wc=Ac,Pc={ASC:"asc",DESC:"desc"},Dc="Left",xc="Right",Fc=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleSort=function(){var e=n.props,t=e.isActive,a=e.direction;e.disabled||(t?n.props.onSort(a===Pc.ASC?Pc.DESC:Pc.ASC):n.props.onSort(n.props.initialDirection||Pc.DESC))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"renderChildrenContainer",value:function(e){var t=this.props.disabled?jc.a.sortLabelChildren:Ri()(jc.a.sortLabelChildren,jc.a.sortLabelChildrenEnabled);return j.createElement("div",{className:Ri()(t,this.props.childrenClass,e),onClick:this.handleSort,role:"button",tabIndex:0},this.props.children)}},{key:"render",value:function(){var e=this,t=this.props,n=(t.children,t.isActive),a=t.direction,r=t.onSort,i=t.onGetIcons,o=t.placement,s=i&&i(n,a,r),c=Ri()(jc.a.sortLabelContainer,Object(Wt.a)({},jc.a.sortLabelRight,o===xc));return j.createElement("div",{className:c},o===xc?j.createElement(j.Fragment,null,j.createElement("div",{className:jc.a.sortLabelIcon},s),e.renderChildrenContainer([jc.a.sortLabelChildrenLast])):j.createElement(j.Fragment,null,e.renderChildrenContainer([jc.a.sortLabelChildrenFirst]),j.createElement("div",{className:jc.a.sortLabelIcon},s)))}}]),t}(j.Component),Lc=function(e){e.children;var t=e.className,n=Object(ue.a)(e,["children","className"]),a=Ri()(jc.a.table,t);return j.createElement("table",Object.assign({className:a},n),e.children)},Uc=n(1094),Mc=n.n(Uc),Vc=function(e){e.className;var t=Object(ue.a)(e,["className"]),n=Ri()(Mc.a.horizontal,e.className);return I.a.createElement("div",Object.assign({className:n},t))},Bc=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){n.props.onChange&&n.props.onChange(e.currentTarget.value,e)},n.handleBlur=function(e){n.props.onBlur&&n.props.onBlur(e.currentTarget.value,e)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=(e.onBlur,e.onChange,e.classes),a=Object(ue.a)(e,["value","onBlur","onChange","classes"]);return I.a.createElement(Ws,Object.assign({value:t||"",onChange:this.handleChange,onBlur:this.handleBlur,classes:n},a))}}]),t}(j.Component),Gc=Object(k.withStyles)(function(e){return{inputWrapperFocused:{border:"2px solid ".concat(e.palette.primary.light),borderRadius:"5px"},inputWrapperUnfocused:{padding:2}}})(Bc),Wc=n(47),Hc=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onBlur,n=Object(ue.a)(e,["onBlur"]);return j.createElement(es,Object.assign({onSelect:t},n))}}]),t}(j.Component),zc=Object(k.withStyles)(function(e){return{iconSelected:{fill:e.palette.secondary.main},iconDeselected:{fill:e.palette.grey[700]},iconDisabled:{fill:"rgba(0,0,0,0.30)"},focusSelected:{backgroundColor:Object(Wc.fade)(e.palette.secondary.main,.4)}}})(Hc);var Yc,Kc="capitalize",qc="capitalizeFirstLetter",Xc="capitalizeFirstLetterInWords";Yc={},Object(Wt.a)(Yc,Kc,function(e){return e.toLocaleUpperCase()}),Object(Wt.a)(Yc,qc,ca),Object(Wt.a)(Yc,Xc,function(e){return e.split(" ").map(function(e){return e.charAt(0).toLocaleUpperCase()+e.slice(1)}).reduce(function(e,t){return"".concat(e," ").concat(t)},"")});var Zc,Jc=function(e){return{accentColor:e.palette.secondary.main,floatingNav:{background:Object(Wc.fade)(Object(Wc.darken)(e.palette.primary.dark,.6),.8),chevron:Object(Wc.lighten)(e.palette.secondary.light,.4),color:"white"},headerColor:e.palette.primary.main,todayColor:e.palette.secondary.main,selectionColor:e.palette.primary.main,weekdayColor:e.palette.primary.main}},Qc=function(){function e(){Object(B.a)(this,e)}return Object(G.a)(e,null,[{key:"set",value:function(t){e.currentData=t}},{key:"get",value:function(){return e.currentData}}]),e}(),$c=function(){return function(e){return function(t){function n(e){var t;Object(B.a)(this,n),(t=Object(W.a)(this,Object(H.a)(n).call(this,e))).calendarTheme=Jc(t.props.theme);var a=Qc.get(),r=t.props.calendarWidth||t.props.width;return t.calendarLocaleData={locale:a.dateFnsLocale,headerFormat:r>=400?a.calendarFormatHeaderLong:a.calendarFormatHeaderShort,weekdays:a.weekDaysShort.map(function(e){return ca(e)}),blank:a.selectDatesText,todayLabel:{long:a.todayLabelLong,short:a.todayLabelShort},weekStartsOn:a.weekStartsOn},t}return Object(z.a)(n,t),Object(G.a)(n,null,[{key:"convertValueIntoCalendar",value:function(e){if(!e)return null;var t=la(e);return t.isValid?t.momentDate.toDate():null}},{key:"convertValueOutFromCalendar",value:function(e){return ua(e)}}]),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,a=(t.theme,Object(ue.a)(t,["theme"]));return j.createElement(e,Object.assign({calendarTheme:this.calendarTheme,calendarLocale:this.calendarLocaleData,calendarOnConvertValueIn:n.convertValueIntoCalendar,calendarOnConvertValueOut:n.convertValueOutFromCalendar},a))}}]),n}(j.Component)}},el=Object(k.withTheme)()($c()(Object(k.withStyles)(function(e){return{inputWrapperFocused:{border:"2px solid ".concat(e.palette.primary.light),borderRadius:"5px"},inputWrapperUnfocused:{padding:2},innerInputError:{color:e.palette.error.main,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputWarning:{color:e.palette.warning.dark,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputInfo:{color:"green",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputValidating:{color:"orange",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)}}})(function(e){var t=e.calendarTheme,n=e.calendarLocale,a=e.calendarOnConvertValueIn,r=e.calendarOnConvertValueOut,i=Object(ue.a)(e,["calendarTheme","calendarLocale","calendarOnConvertValueIn","calendarOnConvertValueOut"]);return j.createElement(Lo,Object.assign({onParseDate:la,onGetFormattedDateStringFromMoment:da,moment:De,dateCalendarTheme:t,dateCalendarLocale:n,dateCalendarOnConvertValueIn:a,dateCalendarOnConvertValueOut:r,datePlaceholder:on.get().dateFormat.toLowerCase()},i))}))),tl=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onBlur,n=Object(ue.a)(e,["onBlur"]);return I.a.createElement(Ys,Object.assign({onSelect:t},n))}}]),t}(I.a.Component),nl=Object(k.withStyles)(function(e){return{iconSelected:{fill:e.palette.secondary.main},iconDeselected:{fill:e.palette.grey[700]},iconDisabled:{fill:"rgba(0,0,0,0.30)"},focusSelected:{backgroundColor:Object(Wc.fade)(e.palette.secondary.main,.4)}}})(tl),al=n(1095),rl=n.n(al),il=(Zc=hn,function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleBlur=function(e){n.props.onRemoveFocus(),n.props.onBlur&&n.props.onBlur(e)},n.handleFocus=function(){n.props.onSetFocus(),n.props.onFocus&&n.props.onFocus()},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onSetFocus,e.onRemoveFocus,e.onFocus,e.inFocus),n=(e.onBlur,e.classes),a=Object(ue.a)(e,["onSetFocus","onRemoveFocus","onFocus","inFocus","onBlur","classes"]),r=n.inputWrapperFocused,i=n.inputWrapperUnfocused,o=Object(ue.a)(n,["inputWrapperFocused","inputWrapperUnfocused"]),s=t?r:i;return j.createElement("div",{className:Ri()(rl.a.inputWrapper,s)},j.createElement(Zc,Object.assign({onFocus:this.handleFocus,onBlur:this.handleBlur},a,{classes:o})))}}]),t}(j.Component)),ol=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleSelect=function(e){n.props.onBlur&&n.props.onBlur(e)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=(e.onBlur,e.onChange,e.classes),a=Object(ue.a)(e,["value","onBlur","onChange","classes"]);return I.a.createElement(il,Object.assign({value:t||"",onSelect:this.handleSelect,classes:n},a))}}]),t}(j.Component),sl=Object(k.withStyles)(function(e){return{inputWrapperFocused:{border:"2px solid ".concat(e.palette.primary.light),borderRadius:"5px"},inputWrapperUnfocused:{padding:2}}})(ol);var cl=function(){return function(e){return function(t){function n(e){var t;return Object(B.a)(this,n),(t=Object(W.a)(this,Object(H.a)(n).call(this,e))).translations={clearText:s.a.t("Clear"),noResults:s.a.t("No results")},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=Object(A.a)({},this.props);return j.createElement(e,Object.assign({translations:this.translations},t))}}]),n}(j.Component)}},ll=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=Object(A.a)({},this.props);return j.createElement($o,e)}}]),t}(j.Component),ul=Object(k.withStyles)(function(e){return{iconSelected:{fill:e.palette.secondary.main},iconDisabled:{fill:"rgba(0,0,0,0.30)"},iconDeselected:{fill:e.palette.grey[700]},focusSelected:{backgroundColor:Object(Wc.fade)(e.palette.secondary.main,.4)}}})(ll),dl=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=Object(A.a)({},this.props);return j.createElement(To,Object.assign({placeholder:on.get().dateFormat.toLowerCase()},e))}}]),t}(j.Component),pl=Object(k.withTheme)()($c()(Object(k.withStyles)(function(e){return{inputWrapperFocused:{border:"2px solid ".concat(e.palette.primary.light),borderRadius:"5px"},inputWrapperUnfocused:{padding:2},innerInputError:{color:e.palette.error.main,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputWarning:{color:e.palette.warning.dark,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputInfo:{color:"green",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputValidating:{color:"orange",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)}}})(dl))),fl=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=Object(A.a)({},this.props);return j.createElement(Ss,e)}}]),t}(j.Component),ml=Object(k.withTheme)()($c()(Object(k.withStyles)(function(e){return{inputWrapperFocused:{border:"2px solid ".concat(e.palette.primary.light),borderRadius:"5px"},inputWrapperUnfocused:{padding:2},innerInputError:{color:e.palette.error.main,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputWarning:{color:e.palette.warning.dark,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputInfo:{color:"green",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputValidating:{color:"orange",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)}}})(fl))),hl=n(37),gl=n.n(hl),bl=function(e){function t(e){var n;Object(B.a)(this,t),n=Object(W.a)(this,Object(H.a)(t).call(this,e));var a=e.classes,r=(a.dialogPaper,Object(ue.a)(a,["dialogPaper"]));return n.passOnClasses=r,n.dialogClasses={paper:e.classes.dialogPaper},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.classes,e.dialogLabel),n=Object(ue.a)(e,["classes","dialogLabel"]);return j.createElement(vs,Object.assign({mapDialog:j.createElement(te.a,{classes:this.dialogClasses},j.createElement(se.a,{key:"title"},t))},n,{classes:this.passOnClasses}))}}]),t}(j.Component),vl=gl()(function(e){return{inputWrapperFocused:{position:"relative",boxShadow:"0px 0px 0px 2px ".concat(e.palette.primary.light),zIndex:10,margin:"2px 0px 2px 0px"},inputWrapperUnfocused:{margin:"2px 0px 2px 0px"},innerInputError:{color:e.palette.error.main,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputWarning:{color:e.palette.warning.dark,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputInfo:{color:"green",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputValidating:{color:"orange",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},mapIconContainer:{fill:e.palette.primary.dark},mapIconContainerDisabled:{fill:"rgba(0,0,0,0.30)"},dialogPaper:{maxWidth:"none",width:"75%",height:"75%"}}})(bl),Ol=n(45),yl=function(e){function t(e){var n;Object(B.a)(this,t),n=Object(W.a)(this,Object(H.a)(t).call(this,e));var a=e.classes,r=(a.dialogPaper,Object(ue.a)(a,["dialogPaper"]));return n.passOnClasses=r,n.dialogClasses={paper:e.classes.dialogPaper},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.classes,e.dialogLabel),n=Object(ue.a)(e,["classes","dialogLabel"]);return j.createElement(Ms,Object.assign({mapDialog:j.createElement(Ol.c,{classes:this.dialogClasses},j.createElement(Ol.f,{key:"title"},t))},n))}}]),t}(j.Component),El=gl()(function(e){return{inputWrapperFocused:{border:"2px solid ".concat(e.palette.primary.light),borderRadius:"5px"},inputWrapperUnfocused:{padding:2},dialogPaper:{maxWidth:"none",width:"75%",height:"75%"}}})(yl),_l=n(1096),jl=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getExpandedItems",value:function(){var e=this.props.roots;if(e&&1===e.length)return e.map(function(e){return e.path})}},{key:"render",value:function(){var e=this.props,t=e.roots,n=e.classes,a=e.treeKey,r=Object(ue.a)(e,["roots","classes","treeKey"]);return t?j.createElement("div",{className:n.orgunitTree},j.createElement(_l.OrgUnitTreeMultipleRoots,Object.assign({key:a,roots:t,initiallyExpanded:this.getExpandedItems(),hideCheckboxes:!0},r))):null}}]),t}(j.Component),Il=Object(k.withStyles)(function(){return{orgunitTree:{padding:5,minHeight:42,paddingTop:10,backgroundColor:"white"}}})(We(function(){return{margin:4}},function(){return{size:20}})(jl)),Sl=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleFilterChange=function(e){n.props.onSearch(e.currentTarget.value)},n.classes={input:n.props.classes.searchField},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.roots,n=e.onSelectClick,a=e.searchText,r=(e.onSearch,e.ready),i=e.treeKey,o=e.classes,c=e.selected,l=e.maxTreeHeight,u=e.disabled,d=(Object(ue.a)(e,["roots","onSelectClick","searchText","onSearch","ready","treeKey","classes","selected","maxTreeHeight","disabled"]),l?{maxHeight:l,overflowY:"auto"}:null);return j.createElement("div",{className:o.container},j.createElement("div",{className:o.debounceFieldContainer},j.createElement(Ks,{onDebounced:this.handleFilterChange,value:a,placeholder:s.a.t("Search"),classes:this.classes,disabled:u})),!u&&j.createElement("div",{className:o.orgUnitTreeContainer,style:d},j.createElement(Il,{roots:t,onSelectClick:n,ready:r,treeKey:i,selected:c})))}}]),t}(j.Component);Sl.defaultProps={roots:[]};var Cl=Object(k.withStyles)(function(){return{container:{border:"1px solid #C4C4C4",borderRadius:"3px",height:"100%",width:"100%",boxShadow:"0px 0px 2px 0px #C4C4C4 inset",zIndex:0,backgroundColor:"white"},searchField:{borderBottomLeftRadius:0,borderBottomRightRadius:0,boxShadow:"none",border:"none"},debounceFieldContainer:{padding:2,paddingBottom:0},orgUnitTreeContainer:{padding:2,borderTop:"1px solid #C4C4C4",overflow:"auto"}}})(Sl),Tl=n(70),Rl=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderSelectedOrgUnit=function(e){var t=n.props,a=t.classes,r=t.disabled,i=Ri()(a.clearSelectedOrgUnitButton,Object(Wt.a)({},a.clearSelectedOrgUnitButtonDisabled,r));return j.createElement("div",{className:a.selectedOrgUnitContainer},j.createElement("div",{className:a.selectedOrgUnitText},e.name),j.createElement(Ol.h,{className:i,onClick:n.onDeselectOrgUnit},j.createElement(Tl.g,{className:a.clearSelectedOrgUnitIcon})))},n.onSelectOrgUnit=function(e,t){n.props.onBlur({id:t.id,name:t.displayName,path:t.path})},n.onDeselectOrgUnit=function(){n.props.onBlur(null)},n.renderOrgUnitField=function(){var e=n.props,t=(e.classes,Object(ue.a)(e,["classes"]));return j.createElement(Cl,Object.assign({onSelectClick:n.onSelectOrgUnit},t))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.value;return e?this.renderSelectedOrgUnit(e):this.renderOrgUnitField()}}]),t}(j.Component),Nl=Object(k.withStyles)(function(e){return{selectedOrgUnitContainer:{display:"flex",alignItems:"center"},clearSelectedOrgUnitButton:{height:e.typography.pxToRem(44),width:e.typography.pxToRem(44),marginLeft:e.typography.pxToRem(10)},clearSelectedOrgUnitIcon:{height:e.typography.pxToRem(20),width:e.typography.pxToRem(20)},selectedOrgUnitText:{marginRight:e.typography.pxToRem(20)}}})(Rl),kl=Object(k.withTheme)()(Object(k.withStyles)(function(e){return{inputWrapperFocused:{border:"2px solid ".concat(e.palette.primary.light),borderRadius:"5px"},inputWrapperUnfocused:{padding:2},innerInputError:{color:e.palette.error.main,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputWarning:{color:e.palette.warning.dark,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputInfo:{color:"green",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputValidating:{color:"orange",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)}}})(function(e){var t=Object(A.a)({},e);return j.createElement(tc,t)})),Al=Object(k.withTheme)()($c()(Object(k.withStyles)(function(e){return{inputWrapperFocused:{border:"2px solid ".concat(e.palette.primary.light),borderRadius:"5px"},inputWrapperUnfocused:{padding:2},innerInputError:{color:e.palette.error.main,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputWarning:{color:e.palette.warning.dark,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputInfo:{color:"green",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputValidating:{color:"orange",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)}}})(function(e){var t=Object(A.a)({},e);return j.createElement(sc,t)}))),wl=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.valueConverter,a=e.classes,r=n?n(t):t;return j.createElement("div",{className:a.container},r)}}]),t}(j.Component),Pl=Object(k.withStyles)(function(e){return{container:{width:"100%",fontWeight:500}}})(wl),Dl=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=Object(A.a)({},this.props);return j.createElement(fc,e)}}]),t}(j.Component),xl=Object(k.withTheme)()($c()(Object(k.withStyles)(function(e){return{inputWrapperFocused:{border:"2px solid ".concat(e.palette.primary.light),borderRadius:"5px"},inputWrapperUnfocused:{padding:2},innerInputError:{color:e.palette.error.main,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputWarning:{color:e.palette.warning.dark,padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputInfo:{color:"green",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)},innerInputValidating:{color:"orange",padding:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(12)}}})(Dl))),Fl="validatingMessage",Ll="errorMessage",Ul="warningMessage",Ml="infoMessage",Vl="errorMessage",Bl="warningMessage",Gl="infoMessage",Wl="validatingMessage",Hl=function(e){return function(t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){function a(){var e,n;Object(B.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(W.a)(this,(e=Object(H.a)(a)).call.apply(e,[this].concat(i)))).getMessage=function(e){return t[e]?n.props[t[e]]:n.props[e]},n}return Object(z.a)(a,n),Object(G.a)(a,[{key:"render",value:function(){var t=this.props,n=(t.errorMessage,t.warningMessage,t.infoMessage,t.validatingMessage,t.rulesErrorMessage),r=t.rulesWarningMessage,i=t.rulesErrorMessageOnComplete,o=t.rulesWarningMessageOnComplete,s=t.rulesCompulsoryError,c=t.touched,l=t.validationAttempted,u=Object(ue.a)(t,["errorMessage","warningMessage","infoMessage","validatingMessage","rulesErrorMessage","rulesWarningMessage","rulesErrorMessageOnComplete","rulesWarningMessageOnComplete","rulesCompulsoryError","touched","validationAttempted"]),d=c||l?a.getMessage(this.getMessage(Vl),this.getMessage(Bl),this.getMessage(Gl),this.getMessage(Wl)):{};d.message||(d=a.getRulesMessage(n,r,i,o,s,c,l));var p=d.message?Object(Wt.a)({},d.typeKey,d.message):null;return j.createElement("div",null,j.createElement(e,Object.assign({},p,u)))}}],[{key:"getMessage",value:function(e,t,n,a){var r,i;return a?(r=a,i=Fl):e?(r=e,i=Ll):t?(r=t,i=Ul):n&&(r=n,i=Ml),{message:r,typeKey:i}}},{key:"getRulesMessage",value:function(e,t,n,a,r,i,o){var s,c;return e?(s=e,c=Ll):n&&o?(s=n,c=Ll):t?(s=t,c=Ul):a&&o?(s=a,c=Ul):r&&(i||o)&&(s=r,c=Ll),{message:s,typeKey:c}}}]),a}(j.Component)}(t,e)}},zl=n(137),Yl=n.n(zl),Kl=function(e){return{base:{paddingTop:10},error:{color:e.palette.error.main,fontSize:e.typography.pxToRem(14)},warning:{color:e.palette.warning.dark,fontSize:e.typography.pxToRem(14)},info:{color:"green",fontSize:e.typography.pxToRem(14)},validating:{color:e.palette.grey.dark,fontSize:e.typography.pxToRem(14)},validatingContainer:{display:"flex",alignItems:"center",color:e.palette.grey.dark},validatingIndicator:{fontSize:12,marginTop:1,marginRight:4}}},ql="error",Xl="warning",Zl="info",Jl="validating",Ql=function(){return function(e){return Object(k.withStyles)(Kl)(function(e){return function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).convertMessage=function(e,a){if(Yl()(e)&&!j.isValidElement(e))return{innerMessage:{message:e,messageType:a}};var r=t.props.classes;return{element:n.createMessageElement(e,r.base,r[a],{container:r.validatingContainer,indicator:r.validatingIndicator},a)}},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"getMessage",value:function(e,t,n,a){var r={};return a?r=this.convertMessage(a,Jl):e?r=this.convertMessage(e,ql):t?r=this.convertMessage(t,Xl):n&&(r=this.convertMessage(n,Zl)),r}},{key:"render",value:function(){var t=this.props,n=(t.classes,t.errorMessage),a=t.warningMessage,r=t.infoMessage,i=t.validatingMessage,o=Object(ue.a)(t,["classes","errorMessage","warningMessage","infoMessage","validatingMessage"]),s=this.getMessage(n,a,r,i),c=s.innerMessage?{innerMessage:s.innerMessage}:null;return j.createElement("div",null,j.createElement(e,Object.assign({},c,o)),s.element)}}],[{key:"createMessageElement",value:function(e,t,n,a,r){return r===Jl?j.createElement("div",{className:t},j.createElement("div",{className:a.container},j.createElement("div",{className:a.indicator},j.createElement(D,{size:14,color:"inherit"})),j.createElement("div",{className:n},e))):j.createElement("div",{className:Ri()(t,n)},e)}}]),n}(j.Component)}(e))}},$l=function(e){return{container:{padding:8},activeContainer:{backgroundColor:e.palette.info.main},validatingContainer:{},errorContainer:{backgroundColor:e.palette.error.lighter},warningContainer:{backgroundColor:e.palette.warning.lighter},infoContainer:{}}},eu=function(e){return function(t){return Object(k.withStyles)($l)(function(e,t){return function(n){function a(){return Object(B.a)(this,a),Object(W.a)(this,Object(H.a)(a).apply(this,arguments))}return Object(z.a)(a,n),Object(G.a)(a,[{key:"render",value:function(){var n,a=this.props,r=a.classes,i=Object(ue.a)(a,["classes"]),o=Ri()(r.container,(n={},Object(Wt.a)(n,r.activeContainer,i.inFocus),Object(Wt.a)(n,r.validatingContainer,i.validatingMessage&&!i.inFocus),Object(Wt.a)(n,r.errorContainer,i.errorMessage&&!i.inFocus&&!i.validatingMessage),Object(Wt.a)(n,r.warningContainer,i.warningMessage&&!i.inFocus&&!i.validatingMessage&&!i.errorMessage),Object(Wt.a)(n,r.infoContainer,i.infoMessage&&!i.inFocus&&!i.validatingMessage&&!i.errorMessage&&!i.warningMessage),n));return j.createElement("div",{className:o,style:t},j.createElement(e,i))}}]),a}(j.Component)}(t,e))}},tu=function(){return function(e){return function(t){function n(){return Object(B.a)(this,n),Object(W.a)(this,Object(H.a)(n).apply(this,arguments))}return Object(z.a)(n,t),Object(G.a)(n,[{key:"shouldComponentUpdate",value:function(e){var t=this;return Object.keys(e).some(function(n){return e[n]!==t.props[n]&&!Object(Je.a)(e[n])})}},{key:"render",value:function(){return j.createElement(e,this.props)}}]),n}(j.Component)}},nu=function(e){return function(t){return function(n){var a=e(n);return j.createElement(t,a)}}},au=function(){return function(e){return function(t){function n(){return Object(B.a)(this,n),Object(W.a)(this,Object(H.a)(n).apply(this,arguments))}return Object(z.a)(n,t),Object(G.a)(n,[{key:"goto",value:function(){if(this.gotoInstance){this.gotoInstance.scrollIntoView();var e=window.scrollY;e&&window.scroll(0,e-48)}}},{key:"render",value:function(){var t=this;return j.createElement("div",{ref:function(e){t.gotoInstance=e}},j.createElement(e,this.props))}}]),n}(j.Component)}},ru=function(){return function(e){return function(t){function n(){return Object(B.a)(this,n),Object(W.a)(this,Object(H.a)(n).apply(this,arguments))}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,n=t.hidden,a=Object(ue.a)(t,["hidden"]);return n?null:j.createElement(e,a)}}]),n}(j.Component)}},iu=function(e){return{label:{color:e.palette.text.primary,paddingBottom:4},labelVertical:{color:e.palette.text.primary}}},ou=function(e){return{container:{display:"flex",alignItems:"center"},required:{color:e.palette.required},iconContainer:{paddingLeft:5,display:"flex",alignItems:"center"},icon:{width:22,height:22,borderRadius:2}}},su=function(e){return function(t){var n=e&&e.onGetUseVerticalOrientation,a=e&&e.onGetCustomFieldLabeClass,r=function(e){return function(t){return function(n){function a(e){var t;return Object(B.a)(this,a),(t=Object(W.a)(this,Object(H.a)(a).call(this,e))).setClasses(e.classes),t}return Object(z.a)(a,n),Object(G.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.classes||{},n=this.props.classes||{};Object.keys(t).length!==Object.keys(n).length?this.setClasses(t):Object.keys(t).some(function(e){return t[e]!==n[e]})&&this.setClasses(t)}},{key:"setClasses",value:function(t){if(t)if(e&&e.onSplitClasses){var n=e.onSplitClasses(t,this.props);this.labelContainerClass=n.labelContainerClass,this.labelClasses=n.labelClasses,this.passOnClasses=n.passOnClasses}else this.passOnClasses=t}},{key:"getLabelElement",value:function(e,t,n){return j.createElement(gc,{labelRef:t,classes:this.labelClasses||{},useVerticalOrientation:n},e)}},{key:"render",value:function(){var n=this.props,a=n.label,r=n.labelRef,i=(n.classes,n.styles),o=Object(ue.a)(n,["label","labelRef","classes","styles"]),s=e&&e.onGetUseVerticalOrientation&&e.onGetUseVerticalOrientation(this.props),c=this.getLabelElement(a,r,s),l=s?vc.a.labelContainerVertical:vc.a.labelContainer,u=i||{};return j.createElement("div",{className:s?vc.a.containerVertical:vc.a.container},j.createElement("div",{className:Ri()(l,this.labelContainerClass),style:u.labelContainerStyle},c),j.createElement("div",{className:vc.a.inputContainer,style:u.inputContainerStyle},j.createElement(t,Object.assign({},this.passOnClasses,o))))}}]),a}(j.Component)}}({onGetUseVerticalOrientation:function(e){return n&&n(e)},onSplitClasses:function(e,t){var r=e.label,i=e.labelVertical,o=Object(ue.a)(e,["label","labelVertical"]);return{labelContainer:null,labelClasses:{label:n&&n(t)?i:Ri()(r,a&&a(t))},passOnClasses:o}}})(t),i=function(e){return j.createElement("span",null,e.label,j.createElement("span",{className:e.requiredClass},"\xa0*"))},o=function(e){var t=e.icon,n=e.label,a=e.iconClass;return t?j.createElement("img",{className:a,src:t.data,style:{backgroundColor:t.color},alt:"Icon for ".concat(n||"")}):null},s=function(e){var t=e.label;return e.required&&t?j.createElement(i,e):t},c=Object(k.withStyles)(ou)(function(e){var t=e.label,n=e.required,a=e.icon,r=e.classes;return j.createElement("div",{className:r.container},j.createElement(s,{label:t||"",required:n,requiredClass:r.required}),j.createElement("div",{className:r.iconContainer},j.createElement(o,{icon:a,label:t,iconClass:r.icon})))});return Object(k.withStyles)(iu)(function(e){e.label,e.required,e.icon;var t=Object(ue.a)(e,["label","required","icon"]),n=(e.classes,Object(ue.a)(e,["classes"]));return j.createElement(r,Object.assign({label:j.createElement(c,n)},t))})}},cu="USER_CAPTURE",lu="USER_SEARCH",uu={};function du(e,t){uu[e]=t}function pu(e){return uu[e]}var fu="initRegUnitListRoots",mu="initRegUnitListRootsFailed",hu="searchRegisteringUnits",gu="clearOrgUnitSearch",bu="setRegisteringUnitSearchRoots",vu="setSearchRootsFailed",Ou="showRegUnitLoadingIndicator",yu=Object(Y.c)(function(e){return{roots:pu("regUnit")||pu("captureRoots"),searchText:e.registeringUnitList.searchText,ready:!e.registeringUnitList.isLoading,treeKey:e.registeringUnitList.key}},function(e){return{onSearch:function(t){var n=t?function(e){return Se(hu)({searchText:e})}(t):Se(gu)();e(n)}}})(Cl),Eu=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).state={open:!1},n.handleShowWarning=n.handleShowWarning.bind(Object(J.a)(n)),n.handleClose=n.handleClose.bind(Object(J.a)(n)),n.handleClick=n.handleClick.bind(Object(J.a)(n)),n.handleReset=n.handleReset.bind(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"handleShowWarning",value:function(){this.props.showWarning?this.setState({open:!0}):this.handleReset()}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"handleClick",value:function(e,t){var n={id:t.id,name:t.displayName};this.props.handleClickOrgUnit(t.id,n)}},{key:"handleReset",value:function(){this.props.handleClickOrgUnit(void 0,null)}},{key:"render",value:function(){var e=this;return this.props.selectedOrgUnitId?I.a.createElement("div",null,I.a.createElement(Ye.a,{elevation:0,className:this.props.classes.selectedPaper},I.a.createElement("h4",{className:this.props.classes.title},s.a.t("Selected registering unit")),I.a.createElement("div",{className:this.props.classes.selectedItemContainer},I.a.createElement("div",null,this.props.selectedOrgUnit.name),I.a.createElement("div",{className:this.props.classes.selectedItemClear},I.a.createElement(be.a,{className:this.props.classes.selectedButton,onClick:function(){return e.props.onReset()}},I.a.createElement(it.a,{className:this.props.classes.selectedButtonIcon}))))),I.a.createElement(te.a,{open:this.state.open,onClose:this.handleClose},I.a.createElement(se.a,null,s.a.t("Start Again")),I.a.createElement(ie.a,null,I.a.createElement(Pi.a,null,s.a.t("Are you sure? All unsaved data will be lost."))),I.a.createElement(ae.a,null,I.a.createElement(le,{onClick:this.handleClose,secondary:!0},s.a.t("Cancel")),I.a.createElement(le,{onClick:this.handleReset,primary:!0},s.a.t("Accept"))))):I.a.createElement("div",null,I.a.createElement(Ye.a,{elevation:0,className:this.props.classes.paper},I.a.createElement("h4",{className:this.props.classes.title},s.a.t("Registering Organisation Unit")),I.a.createElement("div",null,I.a.createElement(yu,{onSelectClick:this.handleClick}))))}}]),t}(j.Component),_u=Object(k.withStyles)(function(e){return{paper:{padding:8,backgroundColor:e.palette.grey.lighter,borderRadius:8},title:{margin:0,fontWeight:425,fontSize:15,paddingBottom:5},form:{width:"100%"},listItem:{backgroundColor:"#ffffff",borderRadius:5,marginBottom:5,padding:5,border:"1px solid lightGrey"},selectedText:{marginTop:5,marginBottom:5,padding:5,borderLeft:"2px solid #71a4f8"},selectedPaper:{backgroundColor:e.palette.grey.lighter,borderRadius:8,padding:8},selectedButton:{width:20,height:20,padding:0},selectedButtonIcon:{width:20,height:20},selectedItemContainer:{display:"flex",alignItems:"center",minHeight:28,margin:"7px 0px 7px 0px",paddingLeft:5,borderLeft:"2px solid ".concat(e.palette.primary.light)},selectedItemClear:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}})(Eu),ju=n(252),Iu=n.n(ju),Su=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleStartAgainClick=function(){n.props.onStartAgain()},n.handleNewClick=function(){n.props.onClickNew()},n.handleFindClick=function(){alert("Not implemented yet.")},n.getButtonText=function(){if(n.props.selectedProgram){var e=n.props.selectedProgram instanceof en?n.props.selectedProgram.trackedEntityType.name:"Event";return s.a.t("New {{typeName}}",{typeName:e})}return s.a.t("New")},n.handleStartAgainClick=n.handleStartAgainClick.bind(Object(J.a)(n)),n.handleNewClick=n.handleNewClick.bind(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.showResetButton;return I.a.createElement("div",{className:t.container},n?I.a.createElement("div",{className:t.startAgainContainer},I.a.createElement(le,{onClick:this.handleStartAgainClick,small:!0,secondary:!0},s.a.t("Start again"))):null,I.a.createElement(le,{onClick:this.handleNewClick},I.a.createElement(Iu.a,{className:t.icon}),this.getButtonText()))}}]),t}(j.Component),Cu=Object(k.withStyles)(function(){return{container:{display:"flex",justifyContent:"flex-end",flexGrow:1},startAgainContainer:{flexGrow:1},icon:{paddingRight:5}}})(Su),Tu=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleClickProgram=n.handleClickProgram.bind(Object(J.a)(n)),n.handleSetCatergoryCombo=n.handleSetCatergoryCombo.bind(Object(J.a)(n)),n.handleClickOrgUnit=n.handleClickOrgUnit.bind(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"getSelectedProgram",value:function(e){return at.get(e)||{}}}]),Object(G.a)(t,[{key:"handleClickProgram",value:function(e){this.props.onSetProgramId(e)}},{key:"handleSetCatergoryCombo",value:function(e,t){this.props.onSetCategoryOption(t,e)}},{key:"handleClickOrgUnit",value:function(e,t){this.props.onSetOrgUnit(e,t)}},{key:"calculateColumnWidths",value:function(){var e=this.props.selectedProgramId,n=t.getSelectedProgram(e),a=3,r=3,i=6;return n&&n.categoryCombination&&(a=3,r=6,i=3),{orgUnitSelectorWidth:a,programSelectorWidth:r,actionButtonsWidth:i}}},{key:"render",value:function(){var e=this.calculateColumnWidths(),t=e.orgUnitSelectorWidth,n=e.programSelectorWidth,a=e.actionButtonsWidth;return I.a.createElement(Ye.a,{className:this.props.classes.paper},I.a.createElement(qe.a,{container:!0,spacing:16},I.a.createElement(qe.a,{item:!0,xs:12,sm:t},I.a.createElement(_u,{selectedOrgUnitId:this.props.selectedOrgUnitId,handleClickOrgUnit:this.handleClickOrgUnit,selectedOrgUnit:this.props.selectedOrgUnit,onReset:this.props.onResetOrgUnitId})),I.a.createElement(qe.a,{item:!0,xs:12,sm:n},I.a.createElement(Ai,{selectedProgram:this.props.selectedProgramId,selectedOrgUnitId:this.props.selectedOrgUnitId,selectedCategories:this.props.selectedCategories,handleClickProgram:this.handleClickProgram,handleSetCatergoryCombo:this.handleSetCatergoryCombo,handleResetCategorySelections:this.props.onResetAllCategoryOptions,buttonModeMaxLength:5,onResetProgramId:this.props.onResetProgramId,onResetCategoryOption:this.props.onResetCategoryOption,onResetOrgUnit:this.props.onResetOrgUnitId})),I.a.createElement(qe.a,{item:!0,xs:12,sm:a},I.a.createElement(Cu,{selectedProgram:this.props.selectedProgramId,onStartAgain:this.props.onStartAgain,onClickNew:this.props.onClickNew,selectionComplete:this.props.selectionComplete,showResetButton:!(!this.props.selectedProgramId&&!this.props.selectedOrgUnitId)}))))}}]),t}(j.Component),Ru=Object(k.withStyles)(function(){return{paper:{flexGrow:1,padding:10}}})(Tu),Nu=Object(Y.c)(function(e){return{selectedProgramId:e.currentSelections.programId,selectedCategories:e.currentSelections.categoriesMeta,selectedOrgUnitId:e.currentSelections.orgUnitId,selectionComplete:e.currentSelections.complete,selectedOrgUnit:e.currentSelections.orgUnitId?e.organisationUnits[e.currentSelections.orgUnitId]:null}},function(e){return{onSetOrgUnitId:function(t){e(function(e){return Se(Oi)(e)}(t))},onStoreOrgUnitObject:function(t){e(function(e){return Se(yi)(e)}(t))},onSetCategoryOptionId:function(t,n){e(function(e,t){return Se(_i)({categoryId:e,selectedCategoryOptionId:t})}(t,n))},onResetCategoryOptionSelections:function(){e(Se(ji)())},onGoBackToListContext:function(){e(Se(Ii)())}}})(Ru),ku=n(201),Au=n.n(ku),wu=n(707),Pu=n.n(wu),Du=n(91),xu=n.n(Du),Fu=n(251),Lu=n.n(Fu),Uu=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getHeader",value:function(){var e=this.props.header;return e&&e.type&&"SectionHeaderSimple"===e.type.name&&this.props.onChangeCollapseState?I.a.cloneElement(e,{onChangeCollapseState:this.props.onChangeCollapseState,isCollapsed:this.props.isCollapsed,extendedCollapsibility:this.props.extendedCollapsibility}):e}},{key:"renderContents",value:function(){var e=this,t=this.props,n=t.isCollapsed,a=t.contentStyle,r=t.mainActionButton,i=t.classes,o=!n,s=Object.assign({},a,n?{display:"none"}:null),c=r?I.a.createElement("div",{className:i.mainActionButton},r):null;return I.a.createElement("div",null,this.getHeader(),I.a.createElement("div",{style:s},c,o?e.props.children:null))}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,a=Ri()(this.props.classes.container,n);return I.a.createElement("div",{className:a,style:t},this.renderContents())}}]),t}(j.Component),Mu=Object(k.withStyles)(function(e){return{container:{flexGrow:1,display:"flex",flexDirection:"column",position:"relative",border:"1px solid ".concat(e.palette.grey.blueGrey)},mainActionButton:{position:"absolute",right:15,top:30}}})(Uu),Vu=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleChangeCollapse=n.handleChangeCollapse.bind(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"handleChangeCollapse",value:function(){this.props.onChangeCollapseState()}},{key:"render",value:function(){var e=this,t=this.props,n=t.titleStyle,a=t.extendedCollapsibility,r=t.containerStyle,i=t.classes,o=t.secondary,s=t.onChangeCollapseState,c=a?{onClick:this.handleChangeCollapse}:null,l=a?Object(Ie.a)({},r,{cursor:"pointer"}):r;return I.a.createElement("div",Object.assign({className:o?i.containerSecondary:i.container,style:l},c),I.a.createElement("div",{className:i.title,style:n},this.props.title),I.a.createElement("div",{className:i.children},this.props.children,s?I.a.createElement(be.a,{title:e.props.isCollapsed?"\xc5pne":"Lukk",onClick:e.handleChangeCollapse},e.props.isCollapsed?I.a.createElement(Tl.k,null):I.a.createElement(Tl.l,null)):null))}}]),t}(j.Component),Bu=Object(k.withStyles)(function(e){return{container:{display:"flex"},containerSecondary:{display:"flex"},title:Object(Ie.a)({},e.typography.title,{fontSize:16,fontWeight:500,padding:"16px 8px 16px 8px"}),children:{flexGrow:1,display:"flex",justifyContent:"flex-end",alignItems:"center",paddingRight:5}}})(Vu),Gu=n(1097),Wu=n.n(Gu),Hu=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleUpdateAsyncState=function(e,t){n.props.onUpdateFieldUIOnly(t,e,n.props.id)},n.handleCommitAsync=function(e,t,a){n.props.onUpdateFieldAsync(e,t,n.props.id,a)},n.renderField=function(e,t,a,r){var i=n.props,o=i.fields,s=i.values,c=i.fieldsUI,l=i.validationAttempted,u=i.id,d=(i.onFieldsValidated,i.onUpdateField,i.onUpdateFieldAsync,i.onUpdateFieldUIOnly,i.validateIfNoUIData,i.children,i.onRenderDivider,i.onGetContainerProps,i.onIsValidating,i.onGetValidationContext,i.onCleanUp,i.loadNr,i.onPostProcessErrorMessage),p=Object(ue.a)(i,["fields","values","fieldsUI","validationAttempted","id","onFieldsValidated","onUpdateField","onUpdateFieldAsync","onUpdateFieldUIOnly","validateIfNoUIData","children","onRenderDivider","onGetContainerProps","onIsValidating","onGetValidationContext","onCleanUp","loadNr","onPostProcessErrorMessage"]),f=e.props||{},m=c[e.id]||{},h=s[e.id],g=n.commitFieldUpdate.bind(Object(J.a)(n),e.id),b=e.commitEvent||"onBlur",v=Object(Wt.a)({},b,g),O={};f.async&&(O.onCommitAsync=function(t){return n.handleCommitAsync(e.id,f.label,t)},O.asyncUIState=n.asyncUIState[e.id]);var y=d&&m.errorMessage?d(m.errorMessage,m.errorType,m.errorData,"".concat(u,"-").concat(e.id),e.id):m.errorMessage;return j.createElement("div",{key:e.id,className:Wu.a.fieldOuterContainer},j.createElement("div",r&&r(t,o.length,e),j.createElement(e.component,Object.assign({ref:function(t){n.setFieldInstance(t,e.id)},value:h,errorMessage:y,touched:m.touched,validationAttempted:l,validatingMessage:m.validatingMessage},v,f,p,O))),a&&a(t,o.length,e))},n.fieldInstances=new Map,n.asyncUIState=t.getAsyncUIState(n.props.fieldsUI),n.fieldsValidatingPromiseContainer={},n.commitUpdateTriggeredForFields={},n.props.validateIfNoUIData&&n.validateAllFields(n.props),n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"validateField",value:function(){var e=Object(i.a)(r.a.mark(function e(t,n,a,o){var s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validators&&0!==t.validators.length){e.next=2;break}return e.abrupt("return",{valid:!0});case 2:return e.next=4,t.validators.reduce(function(){var e=Object(i.a)(r.a.mark(function e(t,i){var s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(!0!==(s=e.sent)){e.next=13;break}if(!((c=i.validator(n,a))instanceof Promise)){e.next=10;break}return c=o?o(i.validatingMessage,c):c,e.next=9,c;case 9:c=e.sent;case 10:if(!(!0===c||c&&c.valid)){e.next=12;break}return e.abrupt("return",!0);case 12:return e.abrupt("return",{message:c&&c.errorMessage||i.message,type:i.type,data:c&&c.data});case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve(!0));case 4:if(!0===(s=e.sent)){e.next=7;break}return e.abrupt("return",{valid:!1,errorMessage:s.message,errorType:s.type,errorData:s.data});case 7:return e.abrupt("return",{valid:!0});case 8:case"end":return e.stop()}},e)}));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"getAsyncUIState",value:function(e){return Object.keys(e).reduce(function(n,a){var r=e[a];return n[a]=t.getFieldAsyncUIState(r),n},{})}},{key:"getFieldAsyncUIState",value:function(e){var t=["valid","errorMessage","touched"];return Object.keys(e).reduce(function(n,a){return t.includes(a)||(n[a]=e[a]),n},{})}},{key:"updateAsyncUIState",value:function(e,n,a){return Object.keys(n).reduce(function(a,r){var i=n[r];return i!==e[r]&&(a[r]=t.getFieldAsyncUIState(i)),a},a)}},{key:"executeValidateAllFields",value:function(e,n){var a=e.id,o=e.fields,c=e.values,l=e.onGetValidationContext,u=e.onIsValidating,d=l&&l(),p=o.map(function(){var e=Object(i.a)(r.a.mark(function e(i){var o,l,p,f;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.id,l=n[o]||{},n[o]=l,l.validatingCompleteUid||(l.validatingCompleteUid=xu()()),l.cancelableValidatingPromise&&l.cancelableValidatingPromise.cancel(),p=function(e,t){return l.cancelableValidatingPromise=Object(Ze.c)(t),u&&u(i.id,a,l.validatingCompleteUid,e),l.cancelableValidatingPromise.promise},e.prev=6,e.next=9,t.validateField(i,c[i.id],d,p);case 9:f=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),e.t0&&Yl()(e.t0)&&e.t0.isCanceled?f=null:(f={valid:!1,errorMessage:s.a.t("error encountered during field validation"),errorType:s.a.t("error")},R.a.error({reason:e.t0,field:i}));case 15:return e.abrupt("return",{id:i.id,validationData:f});case 16:case"end":return e.stop()}},e,null,[[6,12]])}));return function(t){return e.apply(this,arguments)}}());return Promise.all(p).then(function(e){return e.filter(function(e){return!!e.validationData})})}}]),Object(G.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.id!==this.props.id||e.loadNr!==this.props.loadNr){this.asyncUIState=t.getAsyncUIState(this.props.fieldsUI),this.commitUpdateTriggeredForFields={};var n=e.onCleanUp;n&&n(this.getCleanUpData()),this.props.validateIfNoUIData&&this.validateAllFields(e)}else this.asyncUIState=t.updateAsyncUIState(this.props.fieldsUI,e.fieldsUI,this.asyncUIState)}},{key:"componentWillUnmount",value:function(){var e=this.props.onCleanUp;e&&e(this.getCleanUpData())}},{key:"getCleanUpData",value:function(){var e=this,t=Object.keys(this.fieldsValidatingPromiseContainer).map(function(t){var n=e.fieldsValidatingPromiseContainer[t]||{},a=n.cancelableValidatingPromise,r=n.validatingCompleteUid;return a&&a.cancel(),r}).filter(function(e){return!!e});return this.fieldsValidatingPromiseContainer={},t}},{key:"validateAllFields",value:function(e){var n=this;this.validateAllCancelablePromise&&this.validateAllCancelablePromise.cancel(),this.validateAllCancelablePromise=Object(Ze.c)(t.executeValidateAllFields(e,this.fieldsValidatingPromiseContainer)),this.validateAllCancelablePromise.promise.then(function(t){var a=t.reduce(function(e,t){return e[t.id]=t.validationData,e},{}),r=t.map(function(e){return{promises:n.fieldsValidatingPromiseContainer[e.id],id:e.id,commitUpdateTriggeredForField:n.commitUpdateTriggeredForFields[e.id]}}).filter(function(e){return!e.commitUpdateTriggeredForField});e.onFieldsValidated&&e.onFieldsValidated(a,e.id,r.map(function(e){return e.promises.validatingCompleteUid})),r.forEach(function(e){n.fieldsValidatingPromiseContainer[e.id]=null}),n.validateAllCancelablePromise=null}).catch(function(e){e&&Yl()(e)&&e.isCanceled||R.a.error({reason:e,message:"formBuilder validate all fields failed"})})}},{key:"getFieldProp",value:function(e){return this.props.fields.find(function(t){return t.id===e})}},{key:"hasCommitedValueChanged",value:function(e,t){var n=!0,a=this.props.values[e.id];return Yl()(t)?e.onIsEqual&&e.onIsEqual(t,a)&&(n=!1):(t||"")===(a||"")&&(n=!1),n}},{key:"commitFieldUpdate",value:function(){var e=Object(i.a)(r.a.mark(function e(n,a,i){var o,c,l,u,d,p,f,m,h,g,b,v=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.props,c=o.onUpdateFieldUIOnly,l=o.onUpdateField,u=o.onGetValidationContext,d=o.id,p=o.onIsValidating,f=this.getFieldProp(n),m=!i||!Ee()(i.touched)||i.touched,this.hasCommitedValueChanged(f,a)){e.next=6;break}return c({touched:m},n,d),e.abrupt("return");case 6:return h=this.fieldsValidatingPromiseContainer[n]||{},this.fieldsValidatingPromiseContainer[n]=h,h.validatingCompleteUid||(h.validatingCompleteUid=xu()()),h.cancelableValidatingPromise&&h.cancelableValidatingPromise.cancel(),g=function(e,t){return h.cancelableValidatingPromise=Object(Ze.c)(t),p&&p(n,d,h.validatingCompleteUid,e,{touched:!0}),h.cancelableValidatingPromise.promise},this.commitUpdateTriggeredForFields[n]=!0,b=t.validateField(f,a,u&&u(),g).then(function(e){var t=e.valid,r=e.errorMessage,i=e.errorType,o=e.errorData;l(a,{valid:t,touched:m,errorMessage:r,errorType:i,errorData:o},n,d,h.validatingCompleteUid),v.fieldsValidatingPromiseContainer[n]=null}).catch(function(e){e&&Yl()(e)&&e.isCanceled||(R.a.error({reason:e,field:f,value:a}),l(a,{valid:!1,touched:!0,errorMessage:s.a.t("error encountered during field validation"),errorType:s.a.t("error")},n,d,h.validatingCompleteUid),v.fieldsValidatingPromiseContainer[n]=null)}),e.next=15,b;case 15:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"setFieldInstance",value:function(e,t){e?this.fieldInstances.set(t,e):this.fieldInstances.has(t)&&this.fieldInstances.delete(t)}},{key:"isValid",value:function(e){var t=this;return Object.keys(this.props.fieldsUI).every(function(n){var a=t.props.fieldsUI[n];if(e&&!e.includes(a.errorType))return!0;return a.valid})}},{key:"getInvalidFields",value:function(e){var t=this;return this.props.fields.reduce(function(n,a){var r=t.props.fieldsUI[a.id];return r.valid?e&&e[a.id]&&n.push({prop:a,instance:t.fieldInstances.get(a.id),uiState:r}):n.push({prop:a,instance:t.fieldInstances.get(a.id),uiState:r}),n},[])}},{key:"renderFields",value:function(){var e=this,t=this.props,n=t.fields,a=t.children,r=t.onRenderDivider,i=t.onGetContainerProps;return a?a(this.renderField,n):n.map(function(t,n){return e.renderField(t,n,r,i)})}},{key:"render",value:function(){return j.createElement(j.Fragment,null,this.renderFields())}}]),t}(j.Component),zu="UpdateFieldUIOnly",Yu=Object(Y.c)(function(e,t){return{fieldsUI:e.formsSectionsFieldsUI[t.id]||{}}},function(e){return{onUpdateFieldUIOnly:function(t,n,a){e(function(e,t,n){return Se(zu)({uiState:e,elementId:t,sectionId:n})}(t,n,a))}}})(function(e){var t=e.formBuilderRef,n=Object(ue.a)(e,["formBuilderRef"]);return I.a.createElement(Hu,Object.assign({ref:t},n))}),Ku=function(e){return{dividerContainer:{},divider:{backgroundColor:e.palette.dividerForm}}},qu=function(e){return{evenNumbers:{backgroundColor:e.palette.grey.lightest}}},Xu=n(1098),Zu=n(321);function Ju(e){return xi(e,on.get().dateFormat)}function Qu(e){return function(e,t){if(!e)return!1;var n=e.date,a=e.time;return!(!n||!a)&&xi(n,t)&&Fi(a)}(e,on.get().dateFormat)}function $u(e){return qi(e,on.get().dateFormat)}function ed(e){return e&&Ju(e)}function td(e){return e&&Qu(e)}var nd=function(e){var t,n,a=e.date,r=e.time;if(/[:.]/.test(r)){var i=r.split(/[:.]/),o=Object(jn.a)(i,2);t=o[0],n=o[1]}else 3===r.length?(t=r.substring(0,1),n=r.substring(2,3)):(t=r.substring(0,2),n=r.substring(3,4));var s=la(a).momentDate;return s.hour(t),s.minute(n),s};function ad(e,t){return e&&t.validator(e)}var rd=function(e){return function(t){var n=[];return ad(t.from,e)||n.push({from:e.message}),ad(t.to,e)||n.push({to:e.message}),n.length>0?{valid:!1,errorMessage:n.reduce(function(e,t){return Object(Ie.a)({},e,t)},{})}:Yn(t.from)<=Yn(t.to)}};function id(e){return e&&Fi(e)}var od,sd=function(e,t){var n,a;if(/[:.]/.test(e)){var r=e.split(/[:.]/),i=Object(jn.a)(r,2);n=i[0],a=i[1]}else 3===e.length?(n=e.substring(0,1),a=e.substring(2,3)):(n=e.substring(0,2),a=e.substring(3,4));var o=De(t);return o.hour(n),o.minute(a),o},cd={COMPULSORY:s.a.t("A value is required"),NUMBER:s.a.t("Please provide a valid number"),INTEGER:s.a.t("Please provide a valid integer"),POSITIVE_INTEGER:s.a.t("Please provide a positive integer"),ZERO_OR_POSITIVE_INTEGER:s.a.t("Please provide zero or a positive integer"),NEGATIVE_INTEGER:s.a.t("Please provide a negative integer"),DATE:s.a.t("Please provide a valid date"),DATETIME:s.a.t("Please provide a valid date and time"),TIME:s.a.t("Please provide a valid time"),PERCENTAGE:s.a.t("Please provide a valid percentage"),URL:s.a.t("Please provide a valid url"),EMAIL:s.a.t("Please provide a valid email address"),AGE:s.a.t("Please provide a valid age"),PHONE_NUMBER:s.a.t("Please provide a valid phone number"),ORGANISATION_UNIT:s.a.t("Please provide a valid organisation unit"),COORDINATE:s.a.t("Please provide valid coordinates"),UNIQUENESS:s.a.t("This value already exists"),RANGE:s.a.t('"From" cannot be greater than "To"')},ld={UNIQUENESS:s.a.t("Checking...")},ud=function(e){return Di(e&&Object(Zu.a)(e)?e.trim():e)},dd=function(){return{validator:Mi,message:cd.INTEGER}},pd=function(){return{validator:Vi,message:cd.POSITIVE_INTEGER}},fd=function(){return{validator:Gi,message:cd.ZERO_OR_POSITIVE_INTEGER}},md=function(){return{validator:Bi,message:cd.NEGATIVE_INTEGER}},hd=function(){return{validator:Wi,message:cd.NUMBER}},gd=(od={},Object(Wt.a)(od,ft.NUMBER,hd),Object(Wt.a)(od,ft.INTEGER,dd),Object(Wt.a)(od,ft.INTEGER_POSITIVE,pd),Object(Wt.a)(od,ft.INTEGER_ZERO_OR_POSITIVE,fd),Object(Wt.a)(od,ft.INTEGER_NEGATIVE,md),Object(Wt.a)(od,ft.TIME,function(){return{validator:Fi,message:cd.TIME}}),Object(Wt.a)(od,ft.DATE,function(){return{validator:Ju,message:cd.DATE}}),Object(Wt.a)(od,ft.DATETIME,function(){return{validator:Qu,message:cd.DATETIME}}),Object(Wt.a)(od,ft.EMAIL,function(){return{validator:Ui,message:cd.EMAIL}}),Object(Wt.a)(od,ft.PERCENTAGE,function(){return{validator:Hi,message:cd.PERCENTAGE}}),Object(Wt.a)(od,ft.URL,function(){return{validator:zi,message:cd.URL}}),Object(Wt.a)(od,ft.AGE,function(){return{validator:$u,message:cd.AGE}}),Object(Wt.a)(od,ft.PHONE_NUMBER,function(){return{validator:Xi,message:cd.PHONE_NUMBER}}),Object(Wt.a)(od,ft.ORGANISATION_UNIT,function(){return{validator:Zi,message:cd.ORGANISATION_UNIT}}),Object(Wt.a)(od,ft.COORDINATE,function(){return{validator:Qi,message:cd.COORDINATE}}),Object(Wt.a)(od,ft.DATE_RANGE,function(){return{validator:(e=cd.DATE,function(t){var n=[];return ed(t.from)||n.push({from:e}),ed(t.to)||n.push({to:e}),n.length>0?{valid:!1,errorMessage:n.reduce(function(e,t){return Object(Ie.a)({},e,t)},{})}:la(t.from).momentDate<=la(t.to).momentDate}),message:cd.RANGE};var e}),Object(Wt.a)(od,ft.DATETIME_RANGE,function(){return{validator:(e=cd.DATETIME,function(t){var n=[];return td(t.from)||n.push({from:e}),td(t.to)||n.push({to:e}),n.length>0?{valid:!1,errorMessage:n.reduce(function(e,t){return Object(Ie.a)({},e,t)},{})}:nd(t.from)<=nd(t.to)}),message:cd.RANGE};var e}),Object(Wt.a)(od,ft.TIME_RANGE,function(){return{validator:(e=cd.TIME,function(t){var n=[];if(id(t.from)||n.push({from:e}),id(t.to)||n.push({to:e}),n.length>0)return{valid:!1,errorMessage:n.reduce(function(e,t){return Object(Ie.a)({},e,t)},{})};var a=De();return sd(t.from,a)<=sd(t.to,a)}),message:cd.RANGE};var e}),Object(Wt.a)(od,ft.NUMBER_RANGE,function(){return{validator:rd(hd()),message:cd.RANGE}}),Object(Wt.a)(od,ft.INTEGER_RANGE,function(){return{validator:rd(dd()),message:cd.RANGE}}),Object(Wt.a)(od,ft.INTEGER_POSITIVE_RANGE,function(){return{validator:rd(pd()),message:cd.RANGE}}),Object(Wt.a)(od,ft.INTEGER_ZERO_OR_POSITIVE_RANGE,function(){return{validator:rd(fd()),message:cd.RANGE}}),Object(Wt.a)(od,ft.INTEGER_NEGATIVE_RANGE,function(){return{validator:rd(md()),message:cd.RANGE}}),od);function bd(e){var t=gd[e.type]&&gd[e.type](e);return t?t=(t=(t=Object(ot.a)(t)?t:[t]).map(function(e){return Object(Ie.a)({},e,{type:"dataType"})})).map(function(e){return Object(Ie.a)({},e,{validator:function(t){if(!t&&0!==t&&!1!==t)return!0;var n=Object(Zu.a)(t)?t.trim():t;return e.validator(n)}})}):[]}function vd(e){return e.compulsory?[{validator:ud,message:cd.COMPULSORY}]:[]}function Od(e){return e.unique?[{validator:function(t,n){return!t&&0!==t&&!1!==t||e.unique.onValidate(t,n)},message:cd.UNIQUENESS,validatingMessage:ld.UNIQUENESS,type:"unique"}]:[]}function yd(e){return function(e,t){return e.reduce(function(e,n){return[].concat(Object(Xe.a)(e),Object(Xe.a)(n(t)))},[])}([vd,bd,Od],e)}var Ed,_d,jd=function(e,t){var n=e&&e.theme&&e.theme.typography.pxToRem;return n?n(t):t},Id="onBlur",Sd=function(e){return{id:e.id,validators:yd(e),commitEvent:Id}},Cd={labelContainerStyle:{flexBasis:200},inputContainerStyle:{flexBasis:150}},Td={labelContainerStyle:{width:150},inputContainerStyle:{width:150}},Rd=function(e,t,n){return Object(Ie.a)({},function(e){return{styles:Cd,label:e.formName,metaCompulsory:e.compulsory,metaDisabled:e.disabled||e.unique&&e.unique.generatable,icon:e.icon?{data:e.icon.data,color:e.icon.color}:null}}(n),t&&t.formHorizontal?function(e){return{style:{width:jd(e,150)},styles:Td}}(t):{},e)},Nd=function(e,t){return Object(Ie.a)({},Sd(t),e)},kd=function(){return function(e){return function(t){function n(){return Object(B.a)(this,n),Object(W.a)(this,Object(H.a)(n).apply(this,arguments))}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,n=t.metaCompulsory,a=t.rulesCompulsory,r=Object(ue.a)(t,["metaCompulsory","rulesCompulsory"]);return j.createElement(e,Object.assign({required:!(!n&&!a)},r))}}]),n}(j.Component)}},Ad=function(){return function(e){return function(t){function n(){return Object(B.a)(this,n),Object(W.a)(this,Object(H.a)(n).apply(this,arguments))}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,n=t.metaDisabled,a=t.rulesDisabled,r=Object(ue.a)(t,["metaDisabled","rulesDisabled"]);return j.createElement(e,Object.assign({disabled:!(!n&&!a)},r))}}]),n}(j.Component)}},wd=n(66),Pd=n.n(wd),Dd=function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])},xd=function(){return function(e){return au()(ru()(tu()(Ad()(kd()(Hl()(lo()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.textLabel)}})(Ql()(nu(Dd)(Po()(e))))))))))))}},Fd=function(e){return function(t){return function(n){function a(t){var n;return Object(B.a)(this,a),(n=Object(W.a)(this,Object(H.a)(a).call(this,t))).defaultClass=e&&e(n.props),n}return Object(z.a)(a,n),Object(G.a)(a,[{key:"render",value:function(){var e=this.props,n=e.customFormElementProps,a=Object(ue.a)(e,["customFormElementProps"]),r=Ri()(n.className,this.defaultClass);return I.a.createElement("div",Object.assign({},n,{className:r}),I.a.createElement(t,a))}}]),a}(I.a.Component)}},Ld=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.ageLabel)}})(Ql()(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(Po()(el)))))))))))),Ud=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.booleanLabel)}})(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(Ql()(zc))))))))))),Md=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.coordinateLabel)}})(Ql()(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(Po()(vl)))))))))))),Vd=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.dateLabel)}})(Ql()(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(Po()(pl)))))))))))),Bd=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.dateTimeLabel)}})(Ql()(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(Po()(ml)))))))))))),Gd=new function e(){var t=this;Object(B.a)(this,e),this.get=function(e){return t.fileUrls[e]},this.set=function(e,n){t.fileUrls[e]=URL.createObjectURL(n)},this.clear=function(){t.fileUrls=Object.keys(t.fileUrls).reduce(function(e,n){return URL.revokeObjectURL(t.fileUrls[n]),e},{})},this.fileUrls={}},Wd=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleFileChange=function(e){e.preventDefault();var t=e.target.files[0];e.target.value=null,t&&n.props.onCommitAsync(function(){var e=new FormData;return e.append("file",t),Pn().post("fileResources",e).then(function(e){var n=e&&e.response&&e.response.fileResource;return n?(Gd.set(n.id,t),{name:n.name,value:n.id}):null})})},n.handleButtonClick=function(){n.hiddenFileSelectorRef.click()},n.handleRemoveClick=function(){n.props.onBlur(null)},n.getFileUrl=function(){var e=n.props.value;return e?e.url||Gd.get(e.value):null},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,a=t.classes,r=t.asyncUIState,i=t.orientation,o=t.disabled,c=r&&r.loading,l=this.getFileUrl(),u=i===Ro.VERTICAL,d=u?a.verticalContainer:a.horizontalContainer,p=u?a.verticalSelectedFileTextContainer:a.horizontalSelectedFileTextContainer;return I.a.createElement("div",null,I.a.createElement("input",{className:a.input,type:"file",ref:function(t){e.hiddenFileSelectorRef=t},onChange:function(t){return e.handleFileChange(t)}}),c?I.a.createElement("div",{className:d},I.a.createElement("div",{className:a.innerContainer},I.a.createElement(D,null)),I.a.createElement("div",{className:a.innerContainer},s.a.t("Uploading file"))):n?I.a.createElement("div",{className:d},I.a.createElement("div",{className:p},I.a.createElement(Ns.a,{className:a.checkIcon}),I.a.createElement("a",{className:!u&&a.horizontalLink,target:"_blank",href:l,rel:"noopener noreferrer"},n.name)," ".concat(s.a.t("selected"),".")),I.a.createElement("div",{className:a.innerContainer},I.a.createElement(Ni,{disabled:o,onClick:e.handleRemoveClick,className:a.deleteButton},s.a.t("Delete")))):I.a.createElement("div",null,I.a.createElement(le,{onClick:e.handleButtonClick,color:"primary",disabled:o},s.a.t("Select file"))))}}]),t}(j.Component),Hd=Object(k.withStyles)(function(e){return{horizontalContainer:{display:"flex",alignItems:"center",flexWrap:"wrap"},verticalContainer:{display:"flex",flexWrap:"wrap",flexDirection:"column",alignItems:"flex-start"},innerContainer:{padding:e.typography.pxToRem(2),paddingRight:e.typography.pxToRem(10)},horizontalSelectedFileTextContainer:{padding:e.typography.pxToRem(2),paddingRight:e.typography.pxToRem(10),display:"flex",alignItems:"center",flexWrap:"wrap",wordBreak:"break-word"},verticalSelectedFileTextContainer:{padding:e.typography.pxToRem(2),paddingRight:e.typography.pxToRem(10),display:"flex",flexWrap:"wrap",flexDirection:"column",alignItems:"flex-start",wordBreak:"break-word"},checkIcon:{color:e.palette.success[700]},deleteButton:{color:e.palette.error.main,textDecoration:"underline",cursor:"pointer"},input:{display:"none"},horizontalLink:{paddingRight:e.typography.pxToRem(5)}}})(Wd),zd=xd()(Hd),Yd=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleImageChange=function(e){e.preventDefault();var t=e.target.files[0];e.target.value=null,t&&n.props.onCommitAsync(function(){var e=new FormData;return e.append("file",t),Pn().post("fileResources",e).then(function(e){var n=e&&e.response&&e.response.fileResource;return n?(Gd.set(n.id,t),{name:n.name,value:n.id}):null})})},n.handleButtonClick=function(){n.hiddenimageSelectorRef.click()},n.handleRemoveClick=function(){n.props.onBlur(null)},n.getimageUrl=function(){var e=n.props.value;return e?e.url||Gd.get(e.value):null},n.render=function(){var e=n.props,t=e.value,a=e.classes,r=e.asyncUIState,i=e.orientation,o=e.disabled,c=i===Ro.VERTICAL,l=r&&r.loading,u=n.getimageUrl(),d=c?a.verticalContainer:a.horizontalContainer,p=c?a.verticalSelectedImageTextContainer:a.horizontalSelectedImageTextContainer;return I.a.createElement("div",null,I.a.createElement("input",{className:a.input,type:"file",accept:"image/*",ref:function(e){n.hiddenimageSelectorRef=e},onChange:function(e){return n.handleImageChange(e)}}),l?I.a.createElement("div",{className:d},I.a.createElement("div",{className:a.innerContainer},I.a.createElement(D,null)),I.a.createElement("div",{className:a.innerContainer},s.a.t("Uploading image"))):t?I.a.createElement("div",{className:d},!c&&I.a.createElement("div",{className:a.innerContainer},I.a.createElement("a",{target:"_blank",href:u,rel:"noopener noreferrer"},I.a.createElement("img",{src:u,alt:"",className:a.image}))),I.a.createElement("div",{className:p},I.a.createElement(Ns.a,{className:a.checkIcon}),c?I.a.createElement("a",{target:"_blank",href:u,rel:"noopener noreferrer"},t.name):t.name," ".concat(s.a.t("selected"),".")),I.a.createElement("div",{className:a.innerContainer},I.a.createElement(Ni,{disabled:o,className:a.deleteButton,onClick:n.handleRemoveClick},s.a.t("Delete")))):I.a.createElement("div",null,I.a.createElement(le,{disabled:o,onClick:n.handleButtonClick,color:"primary"},s.a.t("Select image"))))},n}return Object(z.a)(t,e),t}(j.Component),Kd=Object(k.withStyles)(function(e){return{horizontalContainer:{display:"flex",alignItems:"center",flexWrap:"wrap"},verticalContainer:{display:"flex",flexWrap:"wrap",flexDirection:"column",alignItems:"flex-start"},innerContainer:{padding:e.typography.pxToRem(2),paddingRight:e.typography.pxToRem(10)},horizontalSelectedImageTextContainer:{padding:e.typography.pxToRem(2),paddingRight:e.typography.pxToRem(10),display:"flex",alignItems:"center",flexWrap:"wrap",wordBreak:"break-word"},verticalSelectedImageTextContainer:{padding:e.typography.pxToRem(2),paddingRight:e.typography.pxToRem(10),display:"flex",flexWrap:"wrap",flexDirection:"column",alignItems:"flex-start",wordBreak:"break-word"},checkIcon:{color:e.palette.success[700]},deleteButton:{color:e.palette.error.main},input:{display:"none"},image:{maxHeight:e.typography.pxToRem(52),maxWidth:e.typography.pxToRem(70)}}})(Yd),qd=xd()(Kd),Xd=function(){return{iconContainer:{display:"flex",alignItems:"center",paddingRight:5},icon:{width:22,height:22,borderRadius:2}}},Zd=function(){return function(e){return Object(k.withStyles)(Xd)(function(t){function n(e){var t;return Object(B.a)(this,n),(t=Object(W.a)(this,Object(H.a)(n).call(this,e))).options=t.getOptions(),t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"getIcon",value:function(e){var t=this.props,n=t.label,a=t.classes;return e?j.createElement("div",{className:a.iconContainer},j.createElement("img",{style:{backgroundColor:e.color},className:a.icon,src:e.data,alt:n})):null}},{key:"getOptions",value:function(){var e=this;return this.props.options.map(function(t){return Object(Ie.a)({},t,{iconRight:e.getIcon(t.icon),iconLeft:null})})}},{key:"render",value:function(){var t=this.props,n=(t.options,t.classes,Object(ue.a)(t,["options","classes"]));return j.createElement(e,Object.assign({options:this.options},n))}}]),n}(j.Component))}},Jd=Object(fi.createSelectorCreator)(fi.defaultMemoize,function(e,t){return Object.keys(t).every(function(n){return t[n]===e[n]})}),Qd=function(e,t){var n=e.rulesEffectsOptionsVisibility[t.formId]||{};return{hideOptions:n.hideOptions&&n.hideOptions[t.id],hideOptionGroups:n.hideOptionGroups&&n.hideOptionGroups[t.id],showOptionGroups:n.showOptionGroups&&n.showOptionGroups[t.id]}},$d=[{key:"showOptionGroups",createFilter:function(e,t){var n=e.map(function(e){return t.get(e.optionGroupId)});return function(e){return n.some(function(t){return t&&!!t.optionIds.get(e.id)})}}},{key:"hideOptionGroups",createFilter:function(e,t){var n=e.map(function(e){return t.get(e.optionGroupId)});return function(e){return!n.some(function(t){return t&&!!t.optionIds.get(e.id)})}}},{key:"hideOptions",createFilter:function(e){return function(t){return!e.some(function(e){return e.optionId===t.id})}}}],ep=function(){var e=Jd(Qd,function(e){return e});return function(t,n){return{rulesOptionsVisibility:e(t,n)}}},tp=function(){return function(e){return Object(Y.c)(ep,function(){return{}})(function(e){var t,n;return n=t=function(t){function n(e){var t;return Object(B.a)(this,n),(t=Object(W.a)(this,Object(H.a)(n).call(this,e))).filteredOptions=n.getFilteredOptions(e),t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.rulesOptionsVisibility!==this.props.rulesOptionsVisibility&&(this.filteredOptions=n.getFilteredOptions(e))}},{key:"render",value:function(){var t=this.props,n=(t.options,Object(ue.a)(t,["options"]));return j.createElement(e,Object.assign({options:this.filteredOptions},n))}}]),n}(j.Component),t.getFilteredOptions=function(e){var t=e.options,n=e.rulesOptionsVisibility,a=e.optionGroups,r=$d.filter(function(e){return n[e.key]&&n[e.key].length>0}).map(function(e){return e.createFilter(n[e.key],a)});return t.filter(function(e){return r.every(function(t){return t(e)})})},n}(e))}},np=au()(ru()(tu()(Ad()(kd()(lo()(Hl()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.textLabel)}})(Ql()(Zd()(tp()(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(cl()(sl)))))))))))))),ap=au()(ru()(tu()(Ad()(kd()(lo()(Hl()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.optionSetBoxesLabel)}})(Ql()(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(tp()(ul)))))))))))),rp="RequestFilterFormFieldOrgUnits",ip="FilteredFormFieldOrgUnitsRetrieved",op="FilterFormFieldOrgUnitsFailed",sp="ResetFormFieldOrgUnitsFilter",cp=function(e,t){return[e,t].join("-")},lp=function(e,t){var n=cp(t.formId,t.elementId),a=e.formsFieldsMisc[t.formId][t.elementId]||{},r=pu(n)||pu("searchRoots");return{searchText:a.orgUnitsSearchText,ready:!a.orgUnitsLoading,treeKey:a.orgUnitsSearchText||"initial",roots:r}},up=function(e){return{filterOrgUnits:function(t,n,a){e(function(e,t,n){return Se(rp)({formId:e,elementId:t,searchText:n})}(t,n,a))},resetOrgUnits:function(t,n){e(function(e,t){return Se(sp)({formId:e,elementId:t})}(t,n))}}},dp=au()(ru()(tu()(Ad()(kd()(Hl()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.orgUnitLabel)}})(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(Ql()(Po()((Ed=Nl,Object(Y.c)(lp,up)(function(e){return function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).handleFilterOrgUnits=function(e){e?t.props.filterOrgUnits(t.props.formId,t.props.elementId,e):t.props.resetOrgUnits(t.props.formId,t.props.elementId)},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"componentWillUnmount",value:function(){var e=this.props,t=e.formId,n=e.elementId;du(cp(t,n),null)}},{key:"render",value:function(){var t=this.props,n=(t.formId,t.elementId,t.filterOrgUnits,t.resetOrgUnits,Object(ue.a)(t,["formId","elementId","filterOrgUnits","resetOrgUnits"]));return j.createElement(e,Object.assign({onSearch:this.handleFilterOrgUnits},n))}}]),n}(j.Component)}(Ed)))))))))))))),pp=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(eu()((_d=function(){return{paddingTop:10,paddingBottom:10}},function(e){return function(e,t){return function(n){function a(){return Object(B.a)(this,a),Object(W.a)(this,Object(H.a)(a).apply(this,arguments))}return Object(z.a)(a,n),Object(G.a)(a,[{key:"render",value:function(){var n=Object(A.a)({},this.props);return j.createElement("div",{style:t(this.props)},j.createElement(e,n))}}]),a}(j.Component)}(e,_d)})(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.polygonLabel)}})(Ql()(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(Po()(El))))))))))))),fp=au()(ru()(tu()(Ad()(kd()(lo()(Hl()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.textLabel)}})(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(Ql()(Po()(Gc)))))))))))),mp=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.trueOnlyLabel)}})(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(Ql()(nl))))))))))),hp=function(e){return function(t){return function(n){var a=Object(jn.a)(e,2),r=a[0],i=a[1],o=Object(Wt.a)({},i,n[r]),s=Object(Ie.a)({},n);return s[r]&&delete s[r],j.createElement(t,Object.assign({},s,o))}}},gp=Object(j.createContext)({inputName:"userfield_input",suggestionName:"userfield_search_suggestion"}),bp=lo()(uo()(Ks)),vp=function(e){var t=e.onUpdateValue,n=e.onHighlightSuggestion,a=e.onSelectSuggestion,r=e.onResetDisplayedHighlight,i=e.onExitSearch,o=e.inputWrapperClasses,s=e.inputDomRef,c=e.useUpwardList,l=Object(ue.a)(e,["onUpdateValue","onHighlightSuggestion","onSelectSuggestion","onResetDisplayedHighlight","onExitSearch","inputWrapperClasses","inputDomRef","useUpwardList"]),u=j.useContext(gp),d=u.inputName,p=u.suggestionName,f=j.useCallback(function(e){return t(e.currentTarget.value)},[t]),m=j.useCallback(function(e){40===e.keyCode&&!c||38===e.keyCode&&c?(n(),e.stopPropagation(),e.preventDefault()):13===e.keyCode&&a()},[n,a,c]),h=j.useCallback(function(e){e.relatedTarget&&function(e,t){if(e.getAttribute("name")===t)return!0;var n=e.parentElement;return!!n&&n.getAttribute("name")===t}(e.relatedTarget,p)||i()},[i,p]);return j.createElement(bp,Object.assign({name:d,inputRef:s,onDebounced:f,onFocus:r,onKeyDown:m,onBlur:h,classes:o},l))},Op=n(724),yp=n.n(Op),Ep=n(725),_p=n.n(Ep),jp=function(e){var t=e.children,n=e.onHighlightNext,a=e.onHighlightPrev,r=j.useRef(null);j.useLayoutEffect(function(){r.current&&(r.current.scrollTop=r.current.scrollHeight)},[]);var i=j.useContext(gp).suggestionName,o=j.useCallback(function(e){38===e.keyCode?(n(),e.stopPropagation(),e.preventDefault()):40===e.keyCode&&(a(),e.stopPropagation(),e.preventDefault())},[n,a]);return j.createElement("div",{name:i,tabIndex:-1,onKeyDown:o,role:"none"},j.createElement("div",{ref:r,className:_p.a.listUp},j.createElement("div",{name:i,className:_p.a.listUpInner},t)))},Ip=n(1099),Sp=n.n(Ip),Cp=n(148),Tp=n.n(Cp),Rp=n(448),Np=n.n(Rp);var kp=function(e){var t=e.user,n=e.query,a=e.isHighlighted,r=e.onHighlightNext,i=e.onHighlightPrev,o=e.suggestionRef,s=e.onSelect,c=e.onExitSearch,l=e.useUpwardList,u=j.useContext(gp),d=u.inputName,p=u.suggestionName,f="".concat(t.name," (").concat(t.username,")"),m=function(e,t){var n=e.toLocaleLowerCase(),a=t.toLocaleLowerCase(),r=n.indexOf(a);return r<=-1?[]:[[r,r+t.length]]}(f,n),h=Sp()(f,m),g=j.useCallback(function(e){40===e.keyCode&&!l||38===e.keyCode&&l?r(t):38===e.keyCode&&!l||40===e.keyCode&&l?i(t):13===e.keyCode&&s(t),e.stopPropagation(),e.preventDefault()},[r,i,s,t,l]),b=j.useCallback(function(e){o(e,t)},[o,t]),v=j.useCallback(function(e){s(t),e.stopPropagation()},[s,t]),O=j.useCallback(function(e){e.relatedTarget&&function(e,t,n){if(e.getAttribute("name")===t||e.getAttribute("name")===n)return!0;var a=e.parentElement;return!!a&&a.getAttribute("name")===t}(e.relatedTarget,p,d)||c()},[c,p,d]);return j.createElement("div",{name:p,role:"button",tabIndex:-1,ref:b,className:l?Ri()(Np.a.suggestion,Np.a.suggestionInUpList):Np.a.suggestion,onKeyDown:g,onClick:v,onBlur:O},j.createElement(Tp.a,{selected:a,component:"div"},j.createElement("div",null,h.map(function(e,t){return e.highlight?j.createElement("span",{key:String(t),style:{fontWeight:500}},e.text):j.createElement("strong",{key:String(t),style:{fontWeight:300}},e.text)}))))},Ap=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,n=e.suggestions,a=e.query,r=e.highlighted,i=Object(ue.a)(e,["suggestions","query","highlighted"]);return j.createElement("div",{className:yp.a.container},n.length>0?t.renderSuggestions(n,a,r,i):t.renderEmpty())}}],[{key:"renderSuggestions",value:function(e,t,n,a){var r=e.map(function(e){return j.createElement(kp,Object.assign({key:e.id,user:e,query:t,isHighlighted:n===e},a))});return a.useUpwardList?j.createElement(jp,{key:t,onHighlightNext:a.onHighlightNext,onHighlightPrev:a.onHighlightPrev},r):j.createElement("div",null,j.createElement("div",{className:yp.a.list},r))}},{key:"renderEmpty",value:function(){return null}}]),t}(j.Component),wp={SELECT_BEST_CHOICE:"selectBestChoice",CLEAR:"clear",DO_NOTHING:"doNothing"},Pp=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).resetHighlighted=function(){n.setState({highlightedSuggestion:void 0})},n.search=function(e){return Pn().get("users",t.getSearchQueryParams(e)).then(function(e){return(e&&e.users||[]).map(function(e){return{id:e.id,username:e.userCredentials.username,name:e.displayName}})})},n.handleInputChange=function(e){if(n.cancelablePromise&&n.cancelablePromise.cancel(),e.length>1){var t=n.search(e),a=Object(Ze.c)(t);n.cancelablePromise=a,a.promise.then(function(t){n.setSuggestions(t,e)}).catch(function(e){e&&e.isCanceled||n.setSuggestionsError(s.a.t("suggestions could not be retrieved"))})}else n.resetSuggestions()},n.handleHighlightFirstSuggestion=function(){var e=n.state.suggestions;e.length>0&&n.highlightSuggestion(e[0])},n.handleSelectFirstSuggestion=function(){var e=n.state.suggestions;e.length>0&&n.props.onSet(e[0])},n.handleExitSearchFromInput=function(){var e=n.props.exitBehaviour,t=n.state.suggestions;switch(e){case wp.SELECT_BEST_CHOICE:t.length>0?n.props.onSet(t[0]):(n.clearInput(),n.cancelablePromise&&n.cancelablePromise.cancel());break;case wp.CLEAR:n.clear(),n.cancelablePromise&&n.cancelablePromise.cancel();break;case wp.DO_NOTHING:}},n.handleExitSearchFromSuggestions=function(){var e=n.props.exitBehaviour,t=n.state.highlightedSuggestion;switch(e){case wp.SELECT_BEST_CHOICE:n.props.onSet(t);break;case wp.CLEAR:n.clear(),n.cancelablePromise&&n.cancelablePromise.cancel();break;case wp.DO_NOTHING:}},n.handleHighlightNextSuggestion=function(){var e=n.state,t=e.suggestions,a=e.highlightedSuggestion,r=t.findIndex(function(e){return e===a});r<t.length-1&&n.highlightSuggestion(t[r+1])},n.handleHighlightPrevSuggestion=function(){var e=n.state,t=e.suggestions,a=e.highlightedSuggestion,r=t.findIndex(function(e){return e===a});r>0?n.highlightSuggestion(t[r-1]):0===r&&n.highlightInput()},n.handleSuggestionRef=function(e,t){e?n.suggestionElements.set(t.id,e):n.suggestionElements.has(t.id)&&n.suggestionElements.delete(t.id)},n.handleInputDomRef=function(e){n.inputDomElement=e},n.handleSuggestionSelect=function(e){n.props.onSet(e)},n.suggestionElements=new Map,n.state={suggestions:[],searchValue:"",inputKey:0},n.domNames={inputName:"userfield_input".concat(xu()()),suggestionName:"userfield_search_suggestion"},n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"getSearchQueryParams",value:function(e){return{fields:"displayName,id,userCredentials[username]",paging:!0,pageSize:10,page:1,query:e,totalPages:!1}}}]),Object(G.a)(t,[{key:"componentDidMount",value:function(){this.props.focusInputOnMount&&this.inputDomElement&&this.inputDomElement.focus()}},{key:"componentWillUnmount",value:function(){this.cancelablePromise&&this.cancelablePromise.cancel()}},{key:"clearInput",value:function(){var e=this.state.inputKey;this.setState({inputKey:(e+1)%2})}},{key:"clear",value:function(){this.clearInput(),this.resetSuggestions()}},{key:"setSuggestions",value:function(e,t){this.setState({suggestions:e,highlightedSuggestion:void 0,searchValue:t})}},{key:"resetSuggestions",value:function(){this.setState({suggestions:[],highlightedSuggestion:void 0,searchValue:""})}},{key:"setSuggestionsError",value:function(e){this.setState({suggestionsError:e})}},{key:"highlightSuggestion",value:function(e){this.setState({highlightedSuggestion:e});var t=this.suggestionElements.get(e.id);t&&t.focus()}},{key:"highlightInput",value:function(){this.setState({highlightedSuggestion:void 0}),this.inputDomElement&&this.inputDomElement.focus()}},{key:"renderInput",value:function(){var e=this.state.inputKey,t=this.props,n=t.inputWrapperClasses,a=t.inputPlaceholderText,r=t.useUpwardList;return j.createElement(vp,{key:e,inputDomRef:this.handleInputDomRef,onUpdateValue:this.handleInputChange,onHighlightSuggestion:this.handleHighlightFirstSuggestion,onSelectSuggestion:this.handleSelectFirstSuggestion,onResetDisplayedHighlight:this.resetHighlighted,onExitSearch:this.handleExitSearchFromInput,inputWrapperClasses:n,placeholder:a,useUpwardList:r})}},{key:"renderSuggestions",value:function(){var e=this.state,t=e.suggestions,n=e.searchValue,a=e.highlightedSuggestion,r=this.props.useUpwardList;return j.createElement(Ap,{suggestionRef:this.handleSuggestionRef,suggestions:t,query:n,highlighted:a,onHighlightNext:this.handleHighlightNextSuggestion,onHighlightPrev:this.handleHighlightPrevSuggestion,onSelect:this.handleSuggestionSelect,onExitSearch:this.handleExitSearchFromSuggestions,useUpwardList:r})}},{key:"render",value:function(){return j.createElement("div",null,j.createElement(gp.Provider,{value:this.domNames},this.renderInput(),this.renderSuggestions()))}}]),t}(j.Component),Dp=n(7589),xp=n(327),Fp=n.n(xp),Lp=function(e){var t=e.user,n=e.onClear,a=e.focusInputOnMount,r=j.useRef();j.useEffect(function(){a&&r.current&&r.current.focus()},[a]);return j.createElement("div",{className:Fp.a.container},j.createElement("div",{ref:function(e){r.current=e},role:"button",className:Fp.a.inputContainer,tabIndex:0,onKeyDown:function(e){[8,46].includes(e.keyCode)&&n()}},j.createElement(no,{classes:Fp.a,value:"",disabled:!0})),j.createElement("div",{className:Fp.a.chipContainer},j.createElement(Dp.a,{onRemove:function(){n()},onClick:function(){n()}},t.name)))},Up=Object(k.withStyles)(function(e){return{inputWrapperFocused:{border:"2px solid ".concat(e.palette.primary.light),borderRadius:"5px"},inputWrapperUnfocused:{padding:2}}})(function(e){var t=e.classes,n=e.value,a=e.onSet,r=e.useUpwardSuggestions,i=e.focusOnMount,o=void 0!==i&&i,s=e.inputPlaceholderText,c=j.useRef(o),l=j.useRef(o);j.useEffect(function(){c&&(c.current=!1)}),j.useEffect(function(){l&&(l.current=!1)});return n?j.createElement(Lp,{user:n,onClear:function(){a(),c.current=!0},focusInputOnMount:l.current}):j.createElement("div",null,j.createElement(Pp,{onSet:function(e){a(e),l.current=!0},inputWrapperClasses:t,focusInputOnMount:c.current,useUpwardList:r,inputPlaceholderText:s,exitBehaviour:"selectBestChoice"}))}),Mp=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.textLabel)}})(Ql()(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(hp(["onBlur","onSet"])(Po()(Up))))))))))))),Vp=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.ageLabel)}})(Ql()(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(Po()(kl)))))))))))),Bp=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.dateLabel)}})(Ql()(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(Po()(Al)))))))))))),Gp=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.dateTimeLabel)}})(Ql()(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(Po()(xl)))))))))))),Wp=eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldLabelMediaBasedClass," ").concat(Pd.a.viewModeLabel)}})(nu(function(e){e.formHorizontal,e.fieldLabelMediaBasedClass;return Object(ue.a)(e,["formHorizontal","fieldLabelMediaBasedClass"])})(Pl))),Hp=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(Ql()(Fd()(Po()(el)))))))))),zp=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(Ql()(Fd()(zc))))))))),Yp=n(1100),Kp=n.n(Yp),qp=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(Ql()(Fd(function(){return Kp.a.defaultCustomContainer})(Po()(vl)))))))))),Xp=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(Ql()(Fd()(Po()(pl)))))))))),Zp=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(Ql()(Fd()(Po()(ml)))))))))),Jp=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(Ql()(Fd()(Po()(Hd)))))))))),Qp=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(Ql()(Fd()(Po()(Kd)))))))))),$p=n(1101),ef=n.n($p),tf=au()(ru()(tu()(Ad()(kd()(lo()(Hl()(Ql()(cl()(Fd(function(){return ef.a.defaultCustomContainer})(Zd()(tp()(sl)))))))))))),nf=au()(ru()(tu()(Ad()(kd()(lo()(Hl()(Ql()(tp()(ul))))))))),af=n(132);n(6929);function rf(e){var t=e.label,n=e.value,a=e.open,r=e.depth,i=e.isSelected,o=e.children,s=e.onClick,c=e.onIconClick,l=o&&Array.isArray(o),u=20*r;return l||(u+=7),I.a.createElement("div",null,I.a.createElement("div",{role:"button",tabIndex:-1,className:Ri()("label",{selected:i}),onClick:function(){return s(n)}},I.a.createElement("div",{style:{minWidth:u}}),l?I.a.createElement("div",{role:"button",tabIndex:-1,className:"icon",onClick:function(e){return c(e,!a,n)}},a?"\u2212":"+"):I.a.createElement("div",{className:"icon"}),I.a.createElement("div",{className:"text"},t)),a&&o&&I.a.createElement("div",{className:"children"},o))}var of,sf,cf,lf,uf,df,pf=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).onIconClick=function(e,t,a){e&&e.stopPropagation();var r=n.updateState(n.props.list,t,a);n.props.onIconClick(a,t,Object(Xe.a)(r))},n.onClick=function(e){var t=n.props,a=t.multiple;if(t.selectable){var r=n.props.selected,i=!!r&&r.includes(e);"undefined"!==typeof a&&a?(i?r=r.filter(function(t){return t!==e}):(r=r.slice(0)).push(e),n.props.setSelected(r,!i,e)):n.props.setSelected(i?[]:[e],!i,e)}},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"updateState",value:function(e,t,n){if(!Array.isArray(e))return e;for(var a=!1,r=0;r<e.length;r+=1)e[r].value===n&&(e[r].open=t,a=!0),a||"undefined"===typeof e[r].children||this.updateState(e[r].children,t,n);return e}},{key:"node",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.isArray(e)?e.map(function(e){var a=e.open,r=e.label,i=e.value,o=e.children;return I.a.createElement(rf,{key:"node-".concat(i),depth:n,open:a,label:r,value:i,onClick:t.onClick,onIconClick:t.onIconClick,isSelected:!!t.props.selected&&t.props.selected.includes(i)},o?t.node(o,n+1):null)}):null}},{key:"view",value:function(){return this.node(this.props.list)}},{key:"render",value:function(){return 0===this.props.list.length?null:I.a.createElement("div",{className:"ou-tree-container"},I.a.createElement("div",{className:"ou-tree"},this.view()))}}]),t}(I.a.Component),ff=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={list:[],selected:n.props.value},n.setSelected=function(e){n.setState({selected:e}),Array.isArray(e)&&e.length>0?n.props.onBlur(e[0]):n.props.onBlur(null)},n.onIconClick=function(){var e=Object(i.a)(r.a.mark(function e(t,a,i){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({list:i}),!a){e.next=4;break}return e.next=4,n.fetchNode(t);case 4:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),n.fetchRoot=Object(i.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(af.getInstance)();case 3:e.sent.models.organisationUnits.list({level:1,paging:!1,fields:"id,path,displayName,children::isNotEmpty"}).then(function(e){var t=n.props.value,a=e.toArray();n.setState({list:a.map(function(e){var a=e.path,r=e.displayName,i=t&&t.startsWith(a)&&t!==a;return i&&n.fetchNode(a,!0),{open:i,value:a,label:r,children:[]}})})}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("OrgUnitTree root fetch failed");case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.fetchNode=function(){var e=Object(i.a)(r.a.mark(function e(t){var a,i,o=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]&&o[1],e.prev=1,i=t.substr(t.lastIndexOf("/")+1),e.next=5,Object(af.getInstance)();case 5:e.sent.models.organisationUnits.list({paging:!1,filter:"id:in:[".concat(i,"]"),fields:":all,displayName,path,children[id,displayName,path,children]"}).then(function(e){var r=e.toArray()[0].children.valuesContainerMap,i=[],o=!0,s=!1,c=void 0;try{for(var l,u=r.entries()[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var d=l.value,p=Object(jn.a)(d,2),f=(p[0],p[1]),m=n.props.value,h=f.children.valuesContainerMap.size>0?[]:null,g=null!==h&&m&&m.startsWith(f.path);g&&a&&m.substr(f.path.length).indexOf("/")>-1?n.fetchNode(f.path,a):g=!1,i.push({open:g,children:h,value:f.path,label:f.displayName})}}catch(v){s=!0,c=v}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}i.sort(function(e,t){return e.label.localeCompare(t.label)});var b=n.state.list;n.setChildren(t,i,b),n.setState({list:Object(Xe.a)(b)})}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("OrgUnitTree fetchNode failed"),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentWillMount",value:function(){var e=Object(i.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchRoot();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){var t=e.value;this.setState({selected:t})}},{key:"setChildren",value:function(e,t,n){if(Array.isArray(n))for(var a=0;a<n.length;a+=1){if(n[a].value===e)return void(n[a].children=t.slice(0));n[a].children&&n[a].children.length>0&&this.setChildren(e,t,n[a].children)}}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.selectable,a=e.required,r=this.state,i=r.list,o=r.selected;return I.a.createElement(pf,{required:a,label:t,multiple:!1,selectable:"undefined"===typeof n||n,list:i,selected:o,onIconClick:this.onIconClick,setSelected:this.setSelected})}}]),t}(I.a.Component),mf=au()(ru()(tu()(Ad()(kd()(Hl()(Ql()(Fd()(Po()(ff))))))))),hf=n(1102),gf=n.n(hf),bf=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(Ql()(Fd(function(){return gf.a.defaultCustomContainer})(Po()(El)))))))))),vf=n(1103),Of=n.n(vf),yf=au()(ru()(tu()(Ad()(kd()(lo()(Hl()(Ql()(Fd(function(){return Of.a.defaultCustomContainer})(Po()(Gc)))))))))),Ef=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(Ql()(Fd()(nl))))))))),_f=n(1104),jf=n.n(_f),If=au()(ru()(tu()(Ad()(kd()(Hl()(lo()(Ql()(Fd(function(){return jf.a.defaultCustomContainer})(hp(["onBlur","onSet"])(Po()(Up))))))))))),Sf=n(1105),Cf=n.n(Sf),Tf=Fd(function(){return Cf.a.defaultCustomContainer})(Pl),Rf=function(e,t){var n,a=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,orientation:t.formHorizontal?Ro.VERTICAL:Ro.HORIZONTAL,shrinkDisabled:t.formHorizontal,dateCalendarWidth:t.formHorizontal?250:350,datePopupAnchorPosition:(n=t.formHorizontal,n?"center":"left")},t,e);return Nd({component:Ld,props:a},e)},Nf=function(e,t){var n=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,orientation:t.formHorizontal?Ro.VERTICAL:Ro.HORIZONTAL,id:e.id},t,e);return Nd({component:Ud,props:n},e)},kf=function(e,t){var n=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,orientation:t.formHorizontal?Ro.VERTICAL:Ro.HORIZONTAL,shrinkDisabled:t.formHorizontal,dialogLabel:e.formName},t,e);return Nd({component:Md,props:n},e)},Af=function(e,t){var n,a=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,width:t.formHorizontal?150:"100%",maxWidth:t.formHorizontal?150:350,calendarWidth:t.formHorizontal?250:350,popupAnchorPosition:(n=t.formHorizontal,n?"center":"left")},t,e);return Nd({component:Vd,props:a},e)},wf=function(e,t){var n,a=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,dateWidth:t.formHorizontal?150:"100%",dateMaxWidth:t.formHorizontal?150:350,orientation:t.formHorizontal?Ro.VERTICAL:Ro.HORIZONTAL,shrinkDisabled:t.formHorizontal,calendarWidth:t.formHorizontal?250:350,popupAnchorPosition:(n=t.formHorizontal,n?"center":"left")},t,e);return Nd({component:Bd,props:a},e)},Pf=function(e,t){var n=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,async:!0,orientation:t.formHorizontal?Ro.VERTICAL:Ro.HORIZONTAL},t,e);return Nd({component:zd,props:n},e)},Df=function(e,t){var n=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,async:!0,orientation:t.formHorizontal?Ro.VERTICAL:Ro.HORIZONTAL},t,e);return Nd({component:qd,props:n},e)},xf="DataElement missing",Ff=function(e){return e.dataElement?e.dataElement.getConvertedOptionSet(ha):(R.a.error(Object(Ze.b)(xf)({clientOptionSet:e})),null)},Lf=function(e){return e.options.map(function(e){return{id:e.id,name:e.text,value:e.value}})},Uf=function(e){return e.options.map(function(e){return{id:e.id,label:e.text,value:e.value,icon:e.icon?{data:e.icon.data,color:e.icon.color}:null}})},Mf=function(e){return Object(Ze.d)(Ff,Lf)(e)},Vf=function(e){return Object(Ze.d)(Ff,Uf)(e)},Bf=(of={},Object(Wt.a)(of,lt.DROPDOWN,function(e){return{options:Vf(e.optionSet),nullable:!e.compulsory,style:{width:"100%"}}}),Object(Wt.a)(of,lt.HORIZONTAL_RADIOBUTTONS,function(e){return{options:Mf(e.optionSet)}}),Object(Wt.a)(of,lt.VERTICAL_RADIOBUTTONS,function(e){return{orientation:Ro.VERTICAL,options:Mf(e.optionSet)}}),of),Gf=(sf={},Object(Wt.a)(sf,lt.DROPDOWN,np),Object(Wt.a)(sf,lt.HORIZONTAL_RADIOBUTTONS,ap),Object(Wt.a)(sf,lt.VERTICAL_RADIOBUTTONS,ap),sf),Wf=function(e,t){var n=e.optionSet,a=n.inputType,r=Bf[a](e),i=Rd(Object(Ie.a)({id:e.id,formId:t.formId,formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,optionGroups:n.optionGroups},r),t,e);return Nd({component:Gf[a],props:i,commitEvent:a===lt.DROPDOWN?"onBlur":"onSelect"},e)},Hf=function(e,t){var n=Rd({formId:t.formId,elementId:e.id,formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,maxTreeHeight:200},t,e);return Nd({component:dp,props:n},e)},zf=function(e,t){var n=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,orientation:t.formHorizontal?Ro.VERTICAL:Ro.HORIZONTAL,shrinkDisabled:t.formHorizontal,dialogLabel:e.formName},t,e);return Nd({component:pp,props:n},e)},Yf=function(e,t,n,a){var r=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,multiLine:a&&a.multiLine},t,e);return Nd({component:fp,props:r},e)},Kf=function(e,t){var n=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,orientation:t.formHorizontal?Ro.VERTICAL:Ro.HORIZONTAL,id:e.id},t,e);return Nd({component:mp,props:n},e)},qf=function(e,t){var n=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass},t,e);return Nd({component:Mp,props:n},e)},Xf=function(e,t,n){var a=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,multiLine:n&&n.multiLine},t,e);return Nd({component:Vp,props:a},e)},Zf=function(e,t){var n,a=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,width:t.formHorizontal?150:"100%",maxWidth:t.formHorizontal?150:350,calendarWidth:t.formHorizontal?250:350,popupAnchorPosition:(n=t.formHorizontal,n?"center":"left")},t,e);return Nd({component:Bp,props:a},e)},Jf=function(e,t){var n,a=Rd({formHorizontal:t.formHorizontal,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass,dateWidth:t.formHorizontal?150:"100%",dateMaxWidth:t.formHorizontal?150:350,orientation:t.formHorizontal?Ro.VERTICAL:Ro.HORIZONTAL,shrinkDisabled:t.formHorizontal,calendarWidth:t.formHorizontal?250:350,popupAnchorPosition:(n=t.formHorizontal,n?"center":"left")},t,e);return Nd({component:Gp,props:a},e)},Qf=Object(Ze.d)(Ua,Sa),$f={labelContainerStyle:{flexBasis:200},inputContainerStyle:{flexBasis:150}},em=function(e,t){var n={valueConverter:function(t){return e.convertValue(t,Qf)},styles:$f,label:e.formName,dataElement:e,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass};return{id:e.id,component:Wp,props:n}},tm=function(e,t){return Object(Ie.a)({},function(e){return{metaCompulsory:e.compulsory}}(t),e)},nm=function(e,t){return Object(Ie.a)({},Sd(t),e)},am=function(e){var t=tm({orientation:Ro.HORIZONTAL,shrinkDisabled:!1},e);return nm({component:Hp,props:t},e)},rm=function(e){var t=tm({orientation:Ro.HORIZONTAL,id:e.id},e);return nm({component:zp,props:t},e)},im=function(e){var t=tm({orientation:Ro.HORIZONTAL,shrinkDisabled:!1},e);return nm({component:qp,props:t},e)},om=function(e){var t=tm({width:350,maxWidth:350,calendarWidth:350},e);return nm({component:Xp,props:t},e)},sm=function(e){var t=tm({dateWidth:"100%",dateMaxWidth:350,calendarWidth:350,orientation:Ro.HORIZONTAL,shrinkDisabled:!1},e);return nm({component:Zp,props:t},e)},cm=function(e){var t=tm({async:!0,orientation:Ro.HORIZONTAL},e);return nm({component:Jp,props:t},e)},lm=function(e){var t=tm({async:!0,orientation:Ro.HORIZONTAL},e);return nm({component:Qp,props:t},e)},um=(cf={},Object(Wt.a)(cf,lt.DROPDOWN,function(e){return{options:Vf(e.optionSet),nullable:!e.compulsory}}),Object(Wt.a)(cf,lt.HORIZONTAL_RADIOBUTTONS,function(e){return{options:Mf(e.optionSet)}}),Object(Wt.a)(cf,lt.VERTICAL_RADIOBUTTONS,function(e){return{orientation:Ro.VERTICAL,options:Mf(e.optionSet)}}),cf),dm=(lf={},Object(Wt.a)(lf,lt.DROPDOWN,tf),Object(Wt.a)(lf,lt.HORIZONTAL_RADIOBUTTONS,nf),Object(Wt.a)(lf,lt.VERTICAL_RADIOBUTTONS,nf),lf),pm=function(e,t){var n=e.optionSet,a=n.inputType,r=um[a](e),i=tm(Object(Ie.a)({id:e.id,formId:t.formId,optionGroups:n.optionGroups},r),e);return nm({component:dm[a],props:i,commitEvent:a===lt.DROPDOWN?"onBlur":"onSelect"},e)},fm=function(e){var t=tm({},e);return nm({component:mf,props:t},e)},mm=function(e){var t=tm({orientation:Ro.HORIZONTAL,shrinkDisabled:!1},e);return nm({component:bf,props:t},e)},hm=function(e,t){var n=tm({multiLine:t&&t.multiLine},e);return nm({component:yf,props:n},e)},gm=function(e){var t=tm({orientation:Ro.HORIZONTAL,id:e.id},e);return nm({component:Ef,props:t},e)},bm=function(e){var t=tm({},e);return nm({component:If,props:t},e)},vm=Object(Ze.d)(Ua,Sa),Om=function(e,t){var n={valueConverter:function(t){return e.convertValue(t,vm)},label:e.formName,dataElement:e,fieldLabelMediaBasedClass:t.fieldLabelMediaBasedClass};return{id:e.id,component:Tf,props:n}},ym={NO_FORMFIELD_FOR_TYPE:"Formfield component not specified for type"},Em=(uf={},Object(Wt.a)(uf,ft.EMAIL,Yf),Object(Wt.a)(uf,ft.TEXT,Yf),Object(Wt.a)(uf,ft.PHONE_NUMBER,Yf),Object(Wt.a)(uf,ft.LONG_TEXT,function(e,t,n){return Yf(e,t,n,{multiLine:!0})}),Object(Wt.a)(uf,ft.NUMBER,Yf),Object(Wt.a)(uf,ft.NUMBER_RANGE,Xf),Object(Wt.a)(uf,ft.INTEGER,Yf),Object(Wt.a)(uf,ft.INTEGER_RANGE,Xf),Object(Wt.a)(uf,ft.INTEGER_POSITIVE,Yf),Object(Wt.a)(uf,ft.INTEGER_POSITIVE_RANGE,Xf),Object(Wt.a)(uf,ft.INTEGER_NEGATIVE,Yf),Object(Wt.a)(uf,ft.INTEGER_NEGATIVE_RANGE,Xf),Object(Wt.a)(uf,ft.INTEGER_ZERO_OR_POSITIVE,Yf),Object(Wt.a)(uf,ft.INTEGER_ZERO_OR_POSITIVE_RANGE,Xf),Object(Wt.a)(uf,ft.BOOLEAN,Nf),Object(Wt.a)(uf,ft.TRUE_ONLY,Kf),Object(Wt.a)(uf,ft.DATE,Af),Object(Wt.a)(uf,ft.DATE_RANGE,Zf),Object(Wt.a)(uf,ft.DATETIME,wf),Object(Wt.a)(uf,ft.DATETIME_RANGE,Jf),Object(Wt.a)(uf,ft.TIME,Yf),Object(Wt.a)(uf,ft.TIME_RANGE,Xf),Object(Wt.a)(uf,ft.PERCENTAGE,Yf),Object(Wt.a)(uf,ft.URL,Yf),Object(Wt.a)(uf,ft.AGE,Rf),Object(Wt.a)(uf,ft.ORGANISATION_UNIT,Hf),Object(Wt.a)(uf,ft.COORDINATE,kf),Object(Wt.a)(uf,ft.POLYGON,zf),Object(Wt.a)(uf,ft.USERNAME,qf),Object(Wt.a)(uf,ft.FILE_RESOURCE,Pf),Object(Wt.a)(uf,ft.IMAGE,Df),Object(Wt.a)(uf,ft.UNKNOWN,function(e,t){return null}),uf);var _m={NO_FORMFIELD_FOR_TYPE:"Formfield component not specified for type"},jm=(df={},Object(Wt.a)(df,ft.EMAIL,hm),Object(Wt.a)(df,ft.TEXT,hm),Object(Wt.a)(df,ft.PHONE_NUMBER,hm),Object(Wt.a)(df,ft.LONG_TEXT,function(e){return hm(e,{multiLine:!0})}),Object(Wt.a)(df,ft.NUMBER,hm),Object(Wt.a)(df,ft.INTEGER,hm),Object(Wt.a)(df,ft.INTEGER_POSITIVE,hm),Object(Wt.a)(df,ft.INTEGER_NEGATIVE,hm),Object(Wt.a)(df,ft.INTEGER_ZERO_OR_POSITIVE,hm),Object(Wt.a)(df,ft.BOOLEAN,rm),Object(Wt.a)(df,ft.TRUE_ONLY,gm),Object(Wt.a)(df,ft.DATE,om),Object(Wt.a)(df,ft.DATETIME,sm),Object(Wt.a)(df,ft.TIME,hm),Object(Wt.a)(df,ft.PERCENTAGE,hm),Object(Wt.a)(df,ft.URL,hm),Object(Wt.a)(df,ft.AGE,am),Object(Wt.a)(df,ft.ORGANISATION_UNIT,fm),Object(Wt.a)(df,ft.COORDINATE,im),Object(Wt.a)(df,ft.POLYGON,mm),Object(Wt.a)(df,ft.USERNAME,bm),Object(Wt.a)(df,ft.FILE_RESOURCE,cm),Object(Wt.a)(df,ft.IMAGE,lm),Object(Wt.a)(df,ft.UNKNOWN,function(e){return null}),df);function Im(e,t,n){return n?function(e,t){if(t.viewMode)return Om(e,t);var n=e.type;return jm[n]?e.optionSet?pm(e,t):jm[n](e):(R.a.warn(Object(Ze.b)(_m.NO_FORMFIELD_FOR_TYPE)({metaData:e})),jm[ft.UNKNOWN](e))}(e,t):function(e,t,n){if(t.viewMode)return em(e,t);var a=e.type;return Em[a]?e.optionSet?Wf(e,t):Em[a](e,t,n):(R.a.warn(Object(Ze.b)(ym.NO_FORMFIELD_FOR_TYPE)({metaData:e})),Em[ft.UNKNOWN](e,t,n))}(e,t)}var Sm,Cm=n(438),Tm=n(53),Rm="#",Nm="A",km="V",Am="C",wm="#",Pm={DATAELEMENT_CURRENT_EVENT:"DATAELEMENT_CURRENT_EVENT",DATAELEMENT_NEWEST_EVENT_PROGRAM_STAGE:"DATAELEMENT_NEWEST_EVENT_PROGRAM_STAGE",DATAELEMENT_NEWEST_EVENT_PROGRAM:"DATAELEMENT_NEWEST_EVENT_PROGRAM",DATAELEMENT_PREVIOUS_EVENT:"DATAELEMENT_PREVIOUS_EVENT"},Dm={TEI_ATTRIBUTE:"TEI_ATTRIBUTE"},xm=Object(Ie.a)({},Pm,Dm,{CALCULATED_VALUE:"CALCULATED_VALUE"}),Fm=function(){function e(t,n){var a;Object(B.a)(this,e),this.onProcessValue=t,this.dateUtils=n,this.mapSourceTypeToGetterFn=(a={},Object(Wt.a)(a,xm.DATAELEMENT_CURRENT_EVENT,this.getVariableForCurrentEvent),Object(Wt.a)(a,xm.DATAELEMENT_NEWEST_EVENT_PROGRAM,this.getVariableForNewestEventProgram),Object(Wt.a)(a,xm.DATAELEMENT_NEWEST_EVENT_PROGRAM_STAGE,this.getVariableForNewestEventProgramStage),Object(Wt.a)(a,xm.DATAELEMENT_PREVIOUS_EVENT,this.getVariableForPreviousEventProgram),Object(Wt.a)(a,xm.TEI_ATTRIBUTE,this.getVariableForSelectedEntityAttributes),Object(Wt.a)(a,xm.CALCULATED_VALUE,this.getVariableForCalculatedValue),a)}return Object(G.a)(e,null,[{key:"getDataElementValueForVariable",value:function(e,t,n,a,r){return(!!e||0===e||!1===e)&&n&&a&&a[t]&&a[t].optionSetId?Cm.a.getName(r[a[t].optionSetId].options,e):e}},{key:"getTrackedEntityValueForVariable",value:function(e,t,n,a,r){return(!!e||0===e||!1===e)&&n&&a&&a[t]&&a[t].optionSetId?Cm.a.getName(r[a[t].optionSetId].options,e):e}}]),Object(G.a)(e,[{key:"getVariables",value:function(e,t,n,a,r,i,o,s,c){var l=this,u=e.programRulesVariables||[],d={executingEvent:t,eventsContainer:n,dataElements:a,trackedEntityAttributes:r,selectedEntity:i,selectedEnrollment:o,optionSets:c,selectedOrgUnit:s},p=u.reduce(function(e,t){var n,i=t.displayName,o=t.programRuleVariableSourceType,s=l.mapSourceTypeToGetterFn[o];return s?(Pm[o]?n=l.preCheckDataElementSpecificSourceType(t,a):Dm[o]&&(n=l.preCheckTrackedEntitySpecificSourceType(t,r)),n?(e[i]=n,e):((n=s.bind(l)(t,d))||Pm[o]&&(n=l.postGetVariableForDataElementSpecificSourceType(t,a)),n&&(e[i]=n),e)):(R.a.error("Unknown programRuleVariableSourceType:".concat(t.programRuleVariableSourceType)),n=l.buildVariable("",null,Tm.a.TEXT,!1,Rm,null,t.useNameForOptionSet),e[i]=n,e)},{}),f=Object(Ie.a)({},p,this.getContextVariables(d));return Object(Ie.a)({},f,this.getConstantVariables(e.constants))}},{key:"processValue",value:function(e,t){return this.onProcessValue(e,t)}},{key:"buildVariable",value:function(e,t,n,a,r,i,o){var s=this,c=t?t.map(function(e){return s.onProcessValue(e,n)}):null;return{variableValue:this.onProcessValue(e,n),useCodeForOptionSet:!o,variableType:o?Tm.a.TEXT:n,hasValue:a,variableEventDate:i,variablePrefix:r,allValues:c}}},{key:"preCheckDataElementSpecificSourceType",value:function(e,t){var n=e.dataElementId;return n&&t&&t[n]?null:(R.a.warn("Variable id:".concat(e.id," name:").concat(e.displayName," contains an invalid dataelement id (id: ").concat(n||"",")")),this.buildVariable("",null,Tm.a.TEXT,!1,Rm,null,e.useNameForOptionSet))}},{key:"preCheckTrackedEntitySpecificSourceType",value:function(e,t){var n=e.trackedEntityAttributeId;return n&&t&&t[n]?null:(R.a.warn("Variable id:".concat(e.id," name:").concat(e.displayName," contains an invalid trackedEntityAttribute id (id: ").concat(n||"",")")),this.buildVariable("",null,Tm.a.TEXT,!1,Nm,null,e.useNameForOptionSet))}},{key:"postGetVariableForDataElementSpecificSourceType",value:function(e,t){var n=t[e.dataElementId];return this.buildVariable("",null,n.valueType,!1,Rm,"",e.useNameForOptionSet)}},{key:"getVariableForCalculatedValue",value:function(e){return this.buildVariable("",null,Tm.a.TEXT,!1,wm,"",e.useNameForOptionSet)}},{key:"getVariableForSelectedEntityAttributes",value:function(t,n){if(!n.selectedEntity)return R.a.warn("Variable id:".concat(t.id," name:").concat(t.displayName," has sourcetype").concat(t.programRuleVariableSourceType,", but no selectedEntity was found")),this.buildVariable("",null,Tm.a.TEXT,!1,Nm,null,t.useNameForOptionSet);var a=t.trackedEntityAttributeId,r=n.trackedEntityAttributes[a],i=n.selectedEntity[a];if(!(!!i||0===i||!1===i))return this.buildVariable("",null,r.valueType,!1,Nm,null,t.useNameForOptionSet);var o=e.getTrackedEntityValueForVariable(i,a,t.useNameForOptionSet,n.trackedEntityAttributes,n.optionSets);return this.buildVariable(o,null,r.valueType,!0,Nm,null,t.useNameForOptionSet)}},{key:"getVariableForCurrentEvent",value:function(t,n){var a=t.dataElementId,r=n.dataElements[a],i=n.executingEvent;if(!i)return null;var o=i&&i[a];if(!o&&0!==o&&!1!==o)return null;var s=e.getDataElementValueForVariable(o,a,t.useNameForOptionSet,n.dataElements,n.optionSets);return this.buildVariable(s,null,r.valueType,!0,Rm,i.eventDate,t.useNameForOptionSet)}},{key:"getVariableForNewestEventProgramStage",value:function(t,n){var a=t.programStageId;if(!a)return R.a.warn("Variable id:".concat(t.id," name:").concat(t.displayName," does not have a programstage defined, despite that the variable has sourcetype").concat(t.programRuleVariableSourceType)),null;var r=n.eventsContainer&&n.eventsContainer.byStage[a];if(!r)return null;var i=t.dataElementId,o=n.dataElements[i],s=r.map(function(a){return e.getDataElementValueForVariable(a[i],i,t.useNameForOptionSet,n.dataElements,n.optionSets)}).filter(function(e){return!!e||!1===e||0===e}),c=Object(Xe.a)(r).reverse().find(function(e){var t=e[i];return!!t||0===t||!1===t});if(!c)return null;var l=c[i],u=e.getDataElementValueForVariable(l,i,t.useNameForOptionSet,n.dataElements,n.optionSets);return this.buildVariable(u,s,o.valueType,!0,Rm,c.eventDate,t.useNameForOptionSet)}},{key:"getVariableForNewestEventProgram",value:function(t,n){var a=n.eventsContainer&&n.eventsContainer.all;if(!a||0===a.length)return null;var r=t.dataElementId,i=n.dataElements[r],o=a.map(function(a){return e.getDataElementValueForVariable(a[r],r,t.useNameForOptionSet,n.dataElements,n.optionSets)}).filter(function(e){return!!e||!1===e||0===e}),s=Object(Xe.a)(a).reverse().find(function(e){var t=e[r];return!!t||0===t||!1===t});if(!s)return null;var c=s[r],l=e.getDataElementValueForVariable(c,r,t.useNameForOptionSet,n.dataElements,n.optionSets);return this.buildVariable(l,o,i.valueType,!0,Rm,s.eventDate,t.useNameForOptionSet)}},{key:"getVariableForPreviousEventProgram",value:function(t,n){var a=n.eventsContainer&&n.eventsContainer.all;if(!a||0===a.length)return null;var r=n.executingEvent;if(!r)return null;var i=a.findIndex(function(e){return e.eventId===r.eventId});if(i-1<0)return null;var o=t.dataElementId,s=n.dataElements[o],c=a.slice(0,i),l=c.map(function(a){return e.getDataElementValueForVariable(a[o],o,t.useNameForOptionSet,n.dataElements,n.optionSets)}).filter(function(e){return!!e||!1===e||0===e}),u=Object(Xe.a)(c).reverse().find(function(e){var t=e[o];return!!t||0===t||!1===t});if(!u)return null;var d=u[o],p=e.getDataElementValueForVariable(d,o,t.useNameForOptionSet,n.dataElements,n.optionSets);return this.buildVariable(p,l,s.valueType,!0,Rm,u.eventDate,t.useNameForOptionSet)}},{key:"getContextVariables",value:function(e){var t={};return t.current_date=this.buildVariable(this.dateUtils.getToday(),null,Tm.a.DATE,!0,km,null,!1),t=Object(Ie.a)({},t,this.getEventContextVariables(e.executingEvent,e.eventsContainer)),t=Object(Ie.a)({},t,this.getEnrollmentContextVariables(e.selectedEnrollment)),t=Object(Ie.a)({},t,this.getOrganisationContextVariables(e.selectedOrgUnit))}},{key:"getEventContextVariables",value:function(e,t){var n={};return e&&(n.event_date=this.buildVariable(e.eventDate,null,Tm.a.DATE,!0,km,null,!1),n.due_date=this.buildVariable(e.dueDate,null,Tm.a.DATE,!0,km,null,!1),n.event_id=this.buildVariable(e.eventId||"",null,Tm.a.TEXT,!!e,km,e.eventDate,!1)),t&&(n.event_count=this.buildVariable(t.all&&t.all.length||0,null,Tm.a.INTEGER,!0,km,null,!1)),n}},{key:"getEnrollmentContextVariables",value:function(e){var t={};return e&&(t.enrollment_date=this.buildVariable(e&&e.enrollmentDate||"",null,Tm.a.DATE,!(!e||!e.enrollmentDate),km,null,!1),t.enrollment_id=this.buildVariable(e&&e.enrollment||"",null,Tm.a.TEXT,!(!e||!e.enrollmentDate),km,null,!1),t.enrollment_count=this.buildVariable(e?1:0,null,Tm.a.INTEGER,!0,km,null,!1),t.tei_count=this.buildVariable(e?1:0,null,Tm.a.INTEGER,!0,km,null,!1),t.incident_date=this.buildVariable(e&&e.incidentDate||"",null,Tm.a.DATE,!!e,km,null,!1)),t}},{key:"getOrganisationContextVariables",value:function(e){var t={};return t.orgunit_code=this.buildVariable(e.code,null,Tm.a.TEXT,!!e.code,km,null,!1),t}},{key:"getConstantVariables",value:function(e){var t=this;return e?e.reduce(function(e,n){return e[n.id]=t.buildVariable(n.value,null,Tm.a.INTEGER,!0,Am,null,!1),e},{}):{}}}]),e}(),Lm=(Sm={},Object(Wt.a)(Sm,Tm.a.TEXT,"convertText"),Object(Wt.a)(Sm,Tm.a.LONG_TEXT,"convertLongText"),Object(Wt.a)(Sm,Tm.a.LETTER,"convertLetter"),Object(Wt.a)(Sm,Tm.a.PHONE_NUMBER,"convertPhoneNumber"),Object(Wt.a)(Sm,Tm.a.EMAIL,"convertEmail"),Object(Wt.a)(Sm,Tm.a.BOOLEAN,"convertBoolean"),Object(Wt.a)(Sm,Tm.a.TRUE_ONLY,"convertTrueOnly"),Object(Wt.a)(Sm,Tm.a.DATE,"convertDate"),Object(Wt.a)(Sm,Tm.a.DATETIME,"convertDateTime"),Object(Wt.a)(Sm,Tm.a.TIME,"convertTime"),Object(Wt.a)(Sm,Tm.a.NUMBER,"convertNumber"),Object(Wt.a)(Sm,Tm.a.INTEGER,"convertInteger"),Object(Wt.a)(Sm,Tm.a.INTEGER_POSITIVE,"convertIntegerPositive"),Object(Wt.a)(Sm,Tm.a.INTEGER_NEGATIVE,"convertIntegerNegative"),Object(Wt.a)(Sm,Tm.a.INTEGER_ZERO_OR_POSITIVE,"convertIntegerZeroOrPositive"),Object(Wt.a)(Sm,Tm.a.PERCENTAGE,"convertPercentage"),Object(Wt.a)(Sm,Tm.a.URL,"convertUrl"),Object(Wt.a)(Sm,Tm.a.AGE,"convertAge"),Sm),Um=n(184),Mm=function(){function e(t){Object(B.a)(this,e),this.converterObject=t,this.processValue=this.processValue.bind(this)}return Object(G.a)(e,null,[{key:"addQuotesToValueIfString",value:function(e){return wa()(e)?"'".concat(e,"'"):e}}]),Object(G.a)(e,[{key:"processValue",value:function(t,n){wa()(t)&&(t=Object(Um.a)(t));var a=Lm[n];return a?e.addQuotesToValueIfString(this.converterObject[a](t)):(R.a.warn(Object(Cn.a)(e.errorMessages.CONVERTER_NOT_FOUND)({type:n})),t)}}]),e}();Mm.errorMessages={CONVERTER_NOT_FOUND:"converter for type is missing"};var Vm=n(1106);var Bm,Gm={EVENT:"event",TEI:"tei"},Wm={ASSIGN_VALUE:"ASSIGN",HIDE_FIELD:"HIDEFIELD",SHOW_ERROR:"SHOWERROR",SHOW_WARNING:"SHOWWARNING",SHOW_ERROR_ONCOMPLETE:"ERRORONCOMPLETE",SHOW_WARNING_ONCOMPLETE:"WARNINGONCOMPLETE",HIDE_SECTION:"HIDESECTION",MAKE_COMPULSORY:"SETMANDATORYFIELD",DISPLAY_TEXT:"DISPLAYTEXT",DISPLAY_KEY_VALUE_PAIR:"DISPLAYKEYVALUEPAIR",HIDE_OPTION_GROUP:"HIDEOPTIONGROUP",HIDE_OPTION:"HIDEOPTION",SHOW_OPTION_GROUP:"SHOWOPTIONGROUP"},Hm=(Bm={},Object(Wt.a)(Bm,Gm.EVENT,"dataElementId"),Object(Wt.a)(Bm,Gm.TEI,"trackedEntityAttributeId"),Bm);function zm(e,t){var n;var a=(n={},Object(Wt.a)(n,Wm.ASSIGN_VALUE,function(n,a,r,i,o){if(!n[a])return null;var s=(r===Gm.EVENT?i[n[a]]:o[n[a]]).valueType,c=function(e,n){var a;if(e||0===e||!1===e){var r=Lm[n];a=t[r]?t[r](e):e}else a=e;return a}(e(n.data,s),s);return{type:Wm.ASSIGN_VALUE,id:n[a],value:c}}),Object(Wt.a)(n,Wm.HIDE_FIELD,function(e,t){return e[t]?{type:Wm.HIDE_FIELD,id:e[t]}:null}),Object(Wt.a)(n,Wm.SHOW_ERROR,function(e,t){return e[t]?{type:Wm.SHOW_ERROR,id:e[t],message:"".concat(e.content," ").concat(e.data?e.data:"")}:{type:Wm.SHOW_ERROR,id:"general",error:{id:e.id,message:"".concat(e.content," ").concat(e.data?e.data:"")}}}),Object(Wt.a)(n,Wm.SHOW_WARNING,function(e,t){return e[t]?{type:Wm.SHOW_WARNING,id:e[t],message:"".concat(e.content," ").concat(e.data?e.data:"")}:{type:Wm.SHOW_WARNING,id:"general",warning:{id:e.id,message:"".concat(e.content," ").concat(e.data?e.data:"")}}}),Object(Wt.a)(n,Wm.SHOW_ERROR_ONCOMPLETE,function(e,t){return e[t]?{type:Wm.SHOW_ERROR_ONCOMPLETE,id:e[t],message:"".concat(e.content," ").concat(e.data?e.data:"")}:{type:Wm.SHOW_ERROR_ONCOMPLETE,id:"general",error:{id:e.id,message:"".concat(e.content," ").concat(e.data?e.data:"")}}}),Object(Wt.a)(n,Wm.SHOW_WARNING_ONCOMPLETE,function(e,t){return e[t]?{type:Wm.SHOW_WARNING_ONCOMPLETE,id:e[t],message:"".concat(e.content," ").concat(e.data?e.data:"")}:{type:Wm.SHOW_WARNING_ONCOMPLETE,id:"general",warning:{id:e.id,message:"".concat(e.content," ").concat(e.data?e.data:"")}}}),Object(Wt.a)(n,Wm.HIDE_SECTION,function(e,t,n){return n===Gm.EVENT&&e.programStageSectionId?{type:Wm.HIDE_SECTION,id:e.programStageSectionId}:null}),Object(Wt.a)(n,Wm.MAKE_COMPULSORY,function(e,t){return e[t]?{type:Wm.MAKE_COMPULSORY,id:e[t]}:null}),Object(Wt.a)(n,Wm.DISPLAY_TEXT,function(e){return{type:Wm.DISPLAY_TEXT,id:e.location,displayText:{id:e.id,message:"".concat(e.content," ").concat(e.data?e.data:"")}}}),Object(Wt.a)(n,Wm.DISPLAY_KEY_VALUE_PAIR,function(e){return{type:Wm.DISPLAY_KEY_VALUE_PAIR,id:e.location,displayKeyValuePair:{id:e.id,key:e.content,value:e.data}}}),Object(Wt.a)(n,Wm.HIDE_OPTION_GROUP,function(e,t){return e[t]?{type:Wm.HIDE_OPTION_GROUP,id:e[t],optionGroupId:e.optionGroupId}:null}),Object(Wt.a)(n,Wm.HIDE_OPTION,function(e,t){return e[t]?{type:Wm.HIDE_OPTION,id:e[t],optionId:e.optionId}:null}),Object(Wt.a)(n,Wm.SHOW_OPTION_GROUP,function(e,t){return e[t]?{type:Wm.SHOW_OPTION_GROUP,id:e[t],optionGroupId:e.optionGroupId}:null}),n);return function(e,t,n,r){var i=Hm[t];return e.map(function(e){var o=e.action;return a[o]?a[o](e,i,t,n,r):null}).filter(function(e){return e})}}var Ym,Km=function(){function e(t,n,a,r){Object(B.a)(this,e);var i=new Mm(t),o=function(e){var t=function(t,n,a){var r=Object(Um.a)(n),i=Object(Um.a)(a),o=e.rulesDateToMoment(r);return e.rulesDateToMoment(i).diff(o,t)};return{getToday:function(){var t=l()();return e.momentToRulesDate(t)},daysBetween:function(e,n){return t("days",e,n)},weeksBetween:function(e,n){return t("weeks",e,n)},monthsBetween:function(e,n){return t("months",e,n)},yearsBetween:function(e,n){return t("years",e,n)},addDays:function(t,n){var a=Object(Um.a)(t),r=Object(Um.a)(n),i=e.rulesDateToMoment(a).add(r,"days"),o=e.momentToRulesDate(i);return"'".concat(o,"'")}}}(n),s=new Fm(i.processValue,o);this.executionService=Object(Vm.a)(a,s,o),this.onProcessRulesEffects=zm(this.executionService.convertDataToBaseOutputValue,r)}return Object(G.a)(e,[{key:"executeRules",value:function(e,t,n,a,r,i,o,s,c,l){var u;if(n&&n.length>0){var d=n.reduce(function(e,t){return!!t.programStageId&&(e[t.programStageId]=e[t.programStageId]||[],e[t.programStageId].push(t)),e},{});u={all:n,byStage:d}}else u=null;var p=this.executionService.executeRules(e,t,u,a,o,i,r,s,c,{debug:!0});return p?this.onProcessRulesEffects(p,l,a,o):null}}]),e}(),qm=n(36),Xm="UpdateRulesEffects",Zm="UpdateFieldFromRuleEffect",Jm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Se(Xm)({rulesEffects:e,formId:t})},Qm={ERROR:"error",WARNING:"warning",ERROR_ON_COMPLETE:"errorOnComplete",WARNING_ON_COMPLETE:"warningOnComplete"},$m=Object(qm.b)(Object(Wt.a)({},Xm,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.rulesEffects&&t.payload.rulesEffects[Wm.HIDE_FIELD];return n[t.payload.formId]=a?Object.keys(a).reduce(function(e,t){return e[t]=!0,e},{}):null,n}),"rulesEffectsHiddenFields"),eh=Object(qm.b)(Object(Wt.a)({},Xm,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.rulesEffects&&t.payload.rulesEffects[Wm.MAKE_COMPULSORY];return n[t.payload.formId]=a?Object.keys(a).reduce(function(e,t){return e[t]=!0,e},{}):null,n}),"rulesEffectsCompulsoryFields"),th=Object(qm.b)(Object(Wt.a)({},Xm,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.rulesEffects&&t.payload.rulesEffects[Wm.HIDE_SECTION];return n[t.payload.formId]=a?Object.keys(a).reduce(function(e,t){return e[t]=!0,e},{}):null,n}),"rulesEffectsHiddenSections"),nh=(Ym={},Object(Wt.a)(Ym,Wm.SHOW_ERROR,Qm.ERROR),Object(Wt.a)(Ym,Wm.SHOW_WARNING,Qm.WARNING),Object(Wt.a)(Ym,Wm.SHOW_ERROR_ONCOMPLETE,Qm.ERROR_ON_COMPLETE),Object(Wt.a)(Ym,Wm.SHOW_WARNING_ONCOMPLETE,Qm.WARNING_ON_COMPLETE),Ym),ah=Object(qm.b)(Object(Wt.a)({},Xm,function(e,t){var n=Object(Ie.a)({},e),a=[t.payload.rulesEffects&&t.payload.rulesEffects[Wm.SHOW_ERROR],t.payload.rulesEffects&&t.payload.rulesEffects[Wm.SHOW_WARNING],t.payload.rulesEffects&&t.payload.rulesEffects[Wm.SHOW_ERROR_ONCOMPLETE],t.payload.rulesEffects&&t.payload.rulesEffects[Wm.SHOW_WARNING_ONCOMPLETE]];return n[t.payload.formId]=a.reduce(function(e,t){return t?Object.keys(t).reduce(function(e,n){e[n]=e[n]||{};var a=t[n][0],r=nh[a.type];return e[n][r]=a.message,e},e):e},{}),n}),"rulesEffectsMessages"),rh=Object(qm.b)(Object(Wt.a)({},Xm,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.rulesEffects&&t.payload.rulesEffects[Wm.DISPLAY_TEXT],r=t.payload.rulesEffects&&t.payload.rulesEffects[Wm.DISPLAY_KEY_VALUE_PAIR];return n[t.payload.formId]={displayTexts:a&&a.feedback?a.feedback.map(function(e){return e.displayText}):null,displayKeyValuePairs:r&&r.feedback?r.feedback.map(function(e){return e.displayKeyValuePair}):null},n}),"rulesEffectsFeedback",{}),ih=Object(qm.b)(Object(Wt.a)({},Xm,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.rulesEffects&&t.payload.rulesEffects[Wm.DISPLAY_TEXT],r=t.payload.rulesEffects&&t.payload.rulesEffects[Wm.DISPLAY_KEY_VALUE_PAIR];return n[t.payload.formId]={displayTexts:a&&a.indicators?a.indicators.map(function(e){return e.displayText}):null,displayKeyValuePairs:r&&r.indicators?r.indicators.map(function(e){return e.displayKeyValuePair}):null},n}),"rulesEffectsIndicators",{}),oh=Object(qm.b)(Object(Wt.a)({},Xm,function(e,t){var n,a=Object(Ie.a)({},e),r=t.payload.rulesEffects&&t.payload.rulesEffects[Wm.SHOW_ERROR],i=t.payload.rulesEffects&&t.payload.rulesEffects[Wm.SHOW_ERROR_ONCOMPLETE],o=r&&r.general?r.general.map(function(e){return e.error}):null,s=i&&i.general?i.general.map(function(e){return e.error}):null;return a[t.payload.formId]=(n={},Object(Wt.a)(n,nh[Wm.SHOW_ERROR],o),Object(Wt.a)(n,nh[Wm.SHOW_ERROR_ONCOMPLETE],s),n),a}),"rulesEffectsGeneralErrors",{}),sh=Object(qm.b)(Object(Wt.a)({},Xm,function(e,t){var n,a=Object(Ie.a)({},e),r=t.payload.rulesEffects&&t.payload.rulesEffects[Wm.SHOW_WARNING],i=t.payload.rulesEffects&&t.payload.rulesEffects[Wm.SHOW_WARNING_ONCOMPLETE],o=r&&r.general?r.general.map(function(e){return e.warning}):null,s=i&&i.general?i.general.map(function(e){return e.warning}):null;return a[t.payload.formId]=(n={},Object(Wt.a)(n,nh[Wm.SHOW_WARNING],o),Object(Wt.a)(n,nh[Wm.SHOW_WARNING_ONCOMPLETE],s),n),a}),"rulesEffectsGeneralWarnings",{}),ch=Object(qm.b)(Object(Wt.a)({},Xm,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.rulesEffects&&t.payload.rulesEffects[Wm.ASSIGN_VALUE];return n[t.payload.formId]=a?Object.keys(a).reduce(function(e,t){return e[t]=!0,e},{}):null,n}),"rulesEffectsDisabledFields"),lh=Object(qm.b)(Object(Wt.a)({},Xm,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.rulesEffects;return t.payload.rulesEffects&&(n[t.payload.formId]={hideOptions:a[Wm.HIDE_OPTION],hideOptionGroups:a[Wm.HIDE_OPTION_GROUP],showOptionGroups:a[Wm.SHOW_OPTION_GROUP]}),n}),"rulesEffectsOptionsVisibility"),uh=function(e){return function(t){function n(){return Object(B.a)(this,n),Object(W.a)(this,Object(H.a)(n).apply(this,arguments))}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,n=t.customForm,a=Object(ue.a)(t,["customForm"]);return j.createElement(e,a,n?function(e,t){return j.createElement(Xu.a,{onRenderField:e,fields:t,specs:n})}:null)}}]),n}(j.Component)}(function(e){return Object(k.withStyles)(Ku)(function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).renderDivider=function(e,n,a){if(a.props&&a.props.hidden||e+1>=n)return null;var r=t.props.classes;return j.createElement("div",{className:r.dividerContainer},j.createElement(Vc,{className:r.divider}))},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,n=(t.classes,Object(ue.a)(t,["classes"])),a=this.props.formHorizontal?null:{onRenderDivider:this.renderDivider};return j.createElement(e,Object.assign({},a,n))}}]),n}(j.Component))}(function(e){return Object(k.withStyles)(qu)(function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).getContainerProps=function(e,n,a){if(0===e&&(t.hiddenFieldsCount=0),a.props&&a.props.hidden)return t.hiddenFieldsCount+=1,{};var r=t.props.classes;return{className:(e-t.hiddenFieldsCount)%2===0?null:r.evenNumbers}},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,n=t.formHorizontal,a=(t.classes,Object(ue.a)(t,["formHorizontal","classes"])),r=n?null:{onGetContainerProps:this.getContainerProps};return j.createElement(e,Object.assign({},r,a))}}]),n}(j.Component))}(Yu))),dh=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleUpdateFieldAsync=function(e,t,a,r){n.props.onUpdateFieldAsync(e,t,a,n.props.formId,r)},n.handleUpdateField=n.handleUpdateField.bind(Object(J.a)(n)),n.formFields=t.buildFormFields(n.props),n.rulesCompulsoryErrors={},n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"buildFormFields",value:function(e){var t=e.fieldsMetaData,n=e.customForm,a=e.fieldOptions;return Array.from(t.entries()).map(function(e){return e[1]}).map(function(t){return Im(t,Object(Ie.a)({formHorizontal:e.formHorizontal,formId:e.formId,viewMode:e.viewMode},a),!!n)}).filter(function(e){return e})}},{key:"validateDataTypeOnly",value:function(e){return e.isValid(["dataType"])}}]),Object(G.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.fieldsMetaData!==this.props.fieldsMetaData&&(this.formFields=t.buildFormFields(e))}},{key:"rulesIsValid",value:function(){var e=this.props.rulesMessages;return 0===Object.keys(e).map(function(t){return e[t]&&e[t][Qm.ERROR]}).filter(function(e){return e}).length&&0===Object.keys(this.rulesCompulsoryErrors).length}},{key:"validateFull",value:function(e){return!!e.isValid()&&this.rulesIsValid()}},{key:"isValid",value:function(e){var t=this.formBuilderInstance;return t?this.validateBasedOnStrategy(e,t):(R.a.error(Object(Ze.b)("could not get formbuilder instance")({method:"isValid",object:this})),!1)}},{key:"validateBasedOnStrategy",value:function(e,n){var a=this.props.validationStrategy;return a===bt.NONE?t.validateDataTypeOnly(n):a===bt.ON_COMPLETE?e&&e.isCompleting?this.validateFull(n):t.validateDataTypeOnly(n):this.validateFull(n)}},{key:"getInvalidFields",value:function(){var e=this,t=Object.keys(this.props.rulesMessages).reduce(function(t,n){return e.props.rulesMessages[n]&&(e.props.rulesMessages[n][Qm.ERROR]||e.props.rulesMessages[n][Qm.ERROR_ON_COMPLETE])&&(t[n]=!0),t},{}),n=Object.keys(this.rulesCompulsoryErrors).reduce(function(e,t){return e[t]=!0,e},{}),a=Object(Ie.a)({},t,n);return this.formBuilderInstance?this.formBuilderInstance.getInvalidFields(a):[]}},{key:"handleUpdateField",value:function(e,t,n,a,r){this.props.onUpdateField(e,t,n,a,this.props.formId,r)}},{key:"buildRulesCompulsoryErrors",value:function(){var e=this.props.rulesCompulsoryFields,t=this.props.values;this.rulesCompulsoryErrors=Object.keys(e).reduce(function(n,a){if(e[a]){var r=t[a];r||0===r||!1===r||(n[a]="This field is required")}return n},{})}},{key:"getFieldConfigWithRulesEffects",value:function(){var e=this;return this.formFields.map(function(t){return Object(Ie.a)({},t,{props:Object(Ie.a)({},t.props,{hidden:e.props.rulesHiddenFields[t.id],rulesErrorMessage:e.props.rulesMessages[t.id]&&e.props.rulesMessages[t.id][Qm.ERROR],rulesWarningMessage:e.props.rulesMessages[t.id]&&e.props.rulesMessages[t.id][Qm.WARNING],rulesErrorMessageOnComplete:e.props.rulesMessages[t.id]&&e.props.rulesMessages[t.id][Qm.ERROR_ON_COMPLETE],rulesWarningMessageOnComplete:e.props.rulesMessages[t.id]&&e.props.rulesMessages[t.id][Qm.WARNING_ON_COMPLETE],rulesCompulsory:e.props.rulesCompulsoryFields[t.id],rulesCompulsoryError:e.rulesCompulsoryErrors[t.id],rulesDisabled:e.props.rulesDisabledFields[t.id]})})})}},{key:"render",value:function(){var e=this,t=this.props,n=(t.fieldsMetaData,t.values),a=(t.onUpdateField,t.formId,t.formBuilderId),r=(t.rulesCompulsoryFields,t.rulesDisabledFields,t.rulesHiddenFields,t.rulesMessages,t.onUpdateFieldAsync,t.fieldOptions,t.validationStrategy,t.loadNr),i=Object(ue.a)(t,["fieldsMetaData","values","onUpdateField","formId","formBuilderId","rulesCompulsoryFields","rulesDisabledFields","rulesHiddenFields","rulesMessages","onUpdateFieldAsync","fieldOptions","validationStrategy","loadNr"]);return this.buildRulesCompulsoryErrors(),I.a.createElement(uh,Object.assign({formBuilderRef:function(t){e.formBuilderInstance=t},id:a,fields:this.getFieldConfigWithRulesEffects(),values:n,onUpdateField:this.handleUpdateField,onUpdateFieldAsync:this.handleUpdateFieldAsync,validateIfNoUIData:!0,loadNr:r},i))}}]),t}(j.Component);dh.defaultProps={values:{}};var ph=dh,fh="UpdateField",mh=Object(fi.createSelectorCreator)(fi.defaultMemoize,function(e,t){return Object.keys(t).every(function(n){return t[n]===e[n]})}),hh=function(e,t){var n=t.fieldsMetaData,a=e.formsValues[t.formId]||{};return Array.from(n.entries()).map(function(e){return e[1]}).reduce(function(e,t){return e[t.id]=a[t.id],e},{})},gh=function(e,t){var n=t.fieldsMetaData,a=e.rulesEffectsCompulsoryFields[t.formId]||{};return Array.from(n.entries()).map(function(e){return e[1]}).reduce(function(e,t){return e[t.id]=a[t.id],e},{})},bh=function(e,t){var n=t.fieldsMetaData,a=e.rulesEffectsDisabledFields[t.formId]||{};return Array.from(n.entries()).map(function(e){return e[1]}).reduce(function(e,t){return e[t.id]=a[t.id],e},{})},vh=function(e,t){var n=t.fieldsMetaData,a=e.rulesEffectsHiddenFields[t.formId]||{};return Array.from(n.entries()).map(function(e){return e[1]}).reduce(function(e,t){return e[t.id]=a[t.id],e},{})},Oh=Object(fi.createSelectorCreator)(fi.defaultMemoize,function(e,t){return Object.keys(t).every(function(n){var a=t[n]||{},r=e[n]||{};return[Qm.ERROR,Qm.WARNING,Qm.ERROR_ON_COMPLETE,Qm.WARNING_ON_COMPLETE].every(function(e){return a[e]===r[e]})})}),yh=function(e,t){var n=t.fieldsMetaData,a=e.rulesEffectsMessages[t.formId]||{};return Array.from(n.entries()).map(function(e){return e[1]}).reduce(function(e,t){return e[t.id]=a[t.id],e},{})},Eh=Object(Y.c)(function(){var e=mh(hh,function(e){return e}),t=mh(vh,function(e){return e}),n=Oh(yh,function(e){return e}),a=mh(gh,function(e){return e}),r=mh(bh,function(e){return e});return function(i,o){return{values:e(i,o),rulesHiddenFields:t(i,o),rulesMessages:n(i,o),rulesCompulsoryFields:a(i,o),rulesDisabledFields:r(i,o),loadNr:i.forms[o.formId].loadNr}}},function(e){return{onUpdateField:function(t,n,a,r,i){e(function(e,t,n,a,r){return Se(fh)({value:e,uiState:t,formId:r,sectionId:a,elementId:n})}(t,n,a,r,i))}}},function(e,t,n){var a=Object.assign({},n,e,t);return n.onUpdateField?Object(Ie.a)({},a,{onUpdateField:n.onUpdateField}):a},{forwardRef:!0})(ph),_h=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"renderSectionHeader",value:function(){var e=this.props.sectionMetaData.name;return e?I.a.createElement(Bu,{title:e}):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.sectionMetaData,a=t.isHidden,r=t.classes,i=(t.sectionId,Object(ue.a)(t,["sectionMetaData","isHidden","classes","sectionId"]));return a?null:!n.showContainer||this.props.formHorizontal?I.a.createElement(Eh,Object.assign({ref:function(t){e.sectionFieldsInstance=t},fieldsMetaData:n.elements},i)):I.a.createElement("div",null,I.a.createElement(Mu,{header:this.renderSectionHeader(),elevation:2,className:r.section},I.a.createElement("div",{className:r.sectionFieldsInSection},I.a.createElement(Eh,Object.assign({ref:function(t){e.sectionFieldsInstance=t},fieldsMetaData:n.elements},i)))))}}]),t}(I.a.PureComponent),jh=Object(k.withStyles)(function(e){return{sectionFieldsInSection:{margin:e.spacing.unit},section:{backgroundColor:"white",maxWidth:e.typography.pxToRem(892)}}})(_h),Ih=Object(Y.c)(function(e,t){return{isHidden:!(!e.rulesEffectsHiddenSections[t.formId]||!e.rulesEffectsHiddenSections[t.formId][t.sectionMetaData.id])}},function(){return{}})(jh),Sh="FieldsValidated",Ch="FieldIsValidating",Th="CleanUpFormBuilder",Rh="StartUpdateFieldAsync",Nh="UpdateFieldFromAsync",kh="AsyncUpdateFieldFailed",Ah=function(){return{}},wh=function(e){return{onIsValidating:function(t,n,a,r,i,o){var c=function(e,t,n,a,r,i){return Se(Ch)({fieldId:e,formBuilderId:t,formId:n,message:a||s.a.t("This value is validating"),fieldUIUpdates:r,validatingUid:i})}(t,n,o,r,i,a);e(c)},onFieldsValidated:function(t,n,a,r){var i=function(e,t,n,a){return Se(Sh)({fieldsUI:e,formBuilderId:t,formId:n,validatingUids:a})}(t,n,r,a);e(i)},onCleanUp:function(t,n){e(function(e,t){return Se(Th)({remainingUids:e,formId:t})}(t,n))},onUpdateFieldAsyncInner:function(t,n,a,r,i,o){var s=function(e,t,n,a,r,i){return Se(Rh)({elementId:e,fieldLabel:t,formBuilderId:n,formId:a,uid:r,callback:i})}(t,n,a,r,xu()(),i);o?o(s):e(s)}}};function Ph(e){return e?{message:Object(Zu.a)(e)?e:e.message,details:Object(Ht.a)(e)?e:null}:{message:null,details:null}}var Dh=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).renderHorizontal=function(e,t){return I.a.createElement(Ih,Object.assign({key:e.id,innerRef:function(t){n.setSectionInstance(t,e.id)},sectionMetaData:e,customForm:n.props.formFoundation.customForm,formId:n.getFormId(),formBuilderId:n.getFormBuilderId(e.id),sectionId:e.id},t))},n.renderVertical=function(e,t,a){return I.a.createElement("div",{className:n.props.formFoundation.customForm?a.containerCustomForm:a.container,key:e.id},I.a.createElement(Ih,Object.assign({innerRef:function(t){n.setSectionInstance(t,e.id)},sectionMetaData:e,customForm:n.props.formFoundation.customForm,validationStrategy:n.props.formFoundation.validationStrategy,formId:n.getFormId(),formBuilderId:n.getFormBuilderId(e.id),sectionId:e.id},t)))},n.name="D2Form",n.sectionInstances=new Map,n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"validateFormIncludeSectionFailedFields",value:function(e){var t=this,n=[];return{isValid:Array.from(this.sectionInstances.entries()).map(function(e){return e[1]}).every(function(a){var r=a.sectionFieldsInstance;if(!r)return R.a.error(Object(Ze.b)("could not get section fields instance")({method:"validateFormReturningFailedFields",object:t,sectionInstance:a})),!1;var i=r.isValid(e);return i||(n=[].concat(Object(Xe.a)(n),Object(Xe.a)(r.getInvalidFields()))),i}),failedFields:n}}},{key:"validateFormScrollToFirstFailedField",value:function(e){var t=this.validateFormIncludeSectionFailedFields(e),n=t.isValid,a=t.failedFields;if(n)return!0;var r=a.length>0?a[0].instance:null;return r&&r.goto&&r.goto(),!1}},{key:"setSectionInstance",value:function(e,t){e?this.sectionInstances.set(t,e):this.sectionInstances.has(t)&&this.sectionInstances.delete(t)}},{key:"getFormId",value:function(){return this.props.id}},{key:"getFormBuilderId",value:function(e){return"".concat(this.props.id,"-").concat(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.formFoundation,a=(t.id,t.classes),r=Object(ue.a)(t,["formFoundation","id","classes"]),i=this.props.formHorizontal,o=Array.from(n.sections.entries()).map(function(e){return e[1]}).map(function(t){return i?e.renderHorizontal(t,r):e.renderVertical(t,r,a)});return I.a.createElement(I.a.Fragment,null,o)}}]),t}(I.a.PureComponent),xh=function(e){return Object(Y.c)(Ah,wh)(function(e){return function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).handleIsValidating=function(){for(var e,n=t.props.id,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];(e=t.props).onIsValidating.apply(e,r.concat([n]))},t.handleFieldsValidated=function(){for(var e,n=t.props.id,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];(e=t.props).onFieldsValidated.apply(e,r.concat([n]))},t.handleCleanUp=function(){for(var e,n=t.props.id,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];(e=t.props).onCleanUp.apply(e,r.concat([n]))},t.handleUpdateFieldAsyncInner=function(){for(var e=t.props,n=e.onUpdateFieldAsyncInner,a=e.onUpdateFieldAsync,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n.apply(void 0,i.concat([a]))},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,n=(t.onIsValidating,t.onFieldsValidated,t.onCleanUp,t.onUpdateFieldAsyncInner,t.onUpdateFieldAsync,Object(ue.a)(t,["onIsValidating","onFieldsValidated","onCleanUp","onUpdateFieldAsyncInner","onUpdateFieldAsync"]));return j.createElement(e,Object.assign({onIsValidating:this.handleIsValidating,onFieldsValidated:this.handleFieldsValidated,onUpdateFieldAsync:this.handleUpdateFieldAsyncInner,onCleanUp:this.handleCleanUp},n))}}]),n}(j.Component)}(e))}(Object(k.withStyles)(function(){return{container:{},containerCustomForm:{paddingTop:10,paddingBottom:10}}})(function(e){var t=e.formRef,n=Object(ue.a)(e,["formRef"]);return I.a.createElement(Dh,Object.assign({ref:function(e){t&&t(e)}},n))})),Fh="top",Lh="bottom";function Uh(e,t){return"".concat(e,"-").concat(t)}var Mh=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).isNearTop=function(){return window.pageYOffset+n.props.offsetTop>n.stickyContainer.parentElement.offsetTop},n.isAtBottomOfContainer=function(){var e=n.stickyContainer.getBoundingClientRect(),t=n.stickyContainer.parentElement.getBoundingClientRect();return t.bottom<=e.bottom&&n.stickyContainer.offsetTop-Math.abs(t.top)<n.props.offsetTop},n.stickyDisabled=function(){var e=document.documentElement?document.documentElement.clientWidth:0;return(document.documentElement?document.documentElement.clientHeight:0)-(n.props.offsetTop+n.stickyContainer.offsetHeight)<0||e<n.props.minViewpointWidth},n.setStickyContainerInstance=function(e){n.stickyContainer=e,n.setSticky()},n.getRightMargin=function(){var e=n.stickyContainer.parentElement;return(document.documentElement?document.documentElement.clientWidth:0)-(n.stickyContainer.parentElement.offsetLeft+e.offsetWidth)},n.setSticky=function(){var e=n.props.classes;return!n.stickyContainer||!n.stickyDisabled()&&n.isNearTop()?n.stickyContainer&&n.isAtBottomOfContainer()?(n.stickyContainer.className=e.stickyContainerAtBottom,n.stickyContainer.style.top="initial",void(n.stickyContainer.style.marginRight="initial")):void(n.stickyContainer&&(n.stickyContainer.className=e.stickyContainerFixed,n.stickyContainer.style.top="".concat(n.props.offsetTop,"px"),n.stickyContainer.style.width="".concat(n.stickyContainer.parentElement.clientWidth,"px"),n.stickyContainer.style.marginRight="".concat(n.getRightMargin(),"px"))):(n.stickyContainer.className=e.stickyContainerAbsolute,n.stickyContainer.style.top="initial",n.stickyContainer.style.marginRight="initial",void(n.stickyContainer.style.width="initial"))},n.onResize=function(){n.resizeTimer&&window.clearTimeout(n.resizeTimer),n.resizeTimer=window.setTimeout(n.setSticky,250)},n.onScroll=function(){n.scrollTimer&&window.clearTimeout(n.scrollTimer),n.scrollTimer=window.setTimeout(n.setSticky,10)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize),window.addEventListener("scroll",this.onScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),window.removeEventListener("scroll",this.onScroll)}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.children,r=t.containerClass;return j.createElement("div",{className:r||n.container},j.createElement("div",{ref:function(t){e.setStickyContainerInstance(t)}},a))}}]),t}(j.Component);Mh.defaultProps={offsetTop:0,minViewpointWidth:0};var Vh=Object(k.withStyles)(function(){return{container:{position:"relative"},stickyContainerAbsolute:{position:"static"},stickyContainerFixed:{position:"fixed"},stickyContainerAtBottom:{position:"absolute",bottom:0}}})(Mh),Bh=function(e){return function(t){return t.placement===e}},Gh=function(e){return function(t){return t.placement===e&&!t.section}},Wh=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleUpdateField=function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];(e=n.props).onUpdateFieldInner.apply(e,[n.props.id,n.props.itemId,n.props.onUpdateFormField].concat(a))},n.getClasses=function(){var e=n.props,t=e.classes;return e.formHorizontal?{formInnerContainer:t.horizontalFormInnerContainer}:{dataEntryContainer:t.verticalDataEntryContainer,formContainer:t.verticalFormContainer,formInnerContainer:t.verticalFormInnerContainer}},n.handleUpdateFieldAsync=function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];(e=n.props).onUpdateFormFieldAsync.apply(e,a.concat([n.props.id,n.props.itemId]))},n.renderDataEntryFieldsByPlacement=function(e){var t=n.props.fields||[],a=n.props.formHorizontal?Bh(e):Gh(e),r=t?t.filter(a).map(function(e){return e.field}):[];return n.props.formHorizontal?r:[].concat(Object(Xe.a)(r),Object(Xe.a)(n.getFieldSectionsWithPlacement(e)))},n.renderD2Form=function(){var e=n.props,t=e.id,a=e.classes,r=e.itemId,i=(e.completeButton,e.mainButton,e.cancelButton,e.notes,e.completionAttempted),o=e.saveAttempted,s=(e.fields,e.dataEntrySections,e.onUpdateDataEntryField,e.onUpdateFormField,e.onUpdateFieldInner,e.onUpdateFormFieldAsync,e.dataEntryOutputs,e.onAddNote,e.onOpenAddRelationship,e.dataEntryFieldRef,Object(ue.a)(e,["id","classes","itemId","completeButton","mainButton","cancelButton","notes","completionAttempted","saveAttempted","fields","dataEntrySections","onUpdateDataEntryField","onUpdateFormField","onUpdateFieldInner","onUpdateFormFieldAsync","dataEntryOutputs","onAddNote","onOpenAddRelationship","dataEntryFieldRef"])),c=j.createElement(xh,Object.assign({id:Uh(t,r),validationAttempted:i||o,onUpdateField:n.handleUpdateField,onUpdateFieldAsync:n.handleUpdateFieldAsync},s));return n.props.formHorizontal?c:j.createElement("div",{className:a.d2FormContainer},c)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getFieldSectionsWithPlacement",value:function(e){var t=this,n=this.props.fields||[],a=this.props.dataEntrySections||{};return this.props.dataEntrySections?Object.keys(this.props.dataEntrySections).reduce(function(r,i){var o=a[i];if(o.placement===e){var s=n?n.filter(function(e){return e.section===i}).map(function(e,t){return j.createElement(j.Fragment,{key:t},e.field)}):null;s&&s.length>0&&r.push(j.createElement("div",{key:i,className:t.props.classes.dataEntryFieldSectionContainer},j.createElement(Mu,{className:t.props.classes.dataEntryFieldSection,header:j.createElement(Bu,{title:o.name})},s)))}return r},[]):[]}},{key:"render",value:function(){var e=this.props,n=e.classes,a=e.itemId,r=e.formFoundation,i=e.completeButton,o=e.mainButton,s=e.cancelButton,c=e.notes,l=e.dataEntryOutputs;if(!a)return j.createElement("div",null,t.errorMessages.NO_ITEM_SELECTED);if(!r)return j.createElement("div",null,t.errorMessages.FORM_FOUNDATION_MISSING);var u=this.getClasses();return j.createElement("div",{className:u.container},j.createElement("div",{className:u.dataEntryContainer},j.createElement("div",{className:u.formContainer},j.createElement("div",{className:u.formInnerContainer},this.renderDataEntryFieldsByPlacement(Fh),this.renderD2Form(),this.renderDataEntryFieldsByPlacement(Lh),c&&j.createElement("div",{className:n.notes},c))),!this.props.formHorizontal&&l?j.createElement(Vh,{offsetTop:50,minViewpointWidth:769,containerClass:n.stickyOnScroll},j.createElement("div",null,l)):j.createElement("div",{className:n.verticalOutputsContainer},l)),j.createElement("div",{className:n.footerBar},i?j.createElement("div",{className:n.button},i):null,o?j.createElement("div",{className:n.button},o):null,s?j.createElement("div",{className:n.button},s):null))}}]),t}(j.Component);Wh.errorMessages={NO_ITEM_SELECTED:"No item selected",FORM_FOUNDATION_MISSING:"form foundation missing. see log for details"};var Hh=Object(k.withStyles)(function(e){return{d2FormContainer:{paddingTop:10,paddingBottom:10},footerBar:{display:"flex",paddingTop:e.typography.pxToRem(10)},button:{paddingRight:2*e.spacing.unit},horizontalFormInnerContainer:{display:"flex",flexWrap:"wrap",alignItems:"flex-start"},verticalFormContainer:{flexGrow:10,maxWidth:"100%",paddingTop:e.typography.pxToRem(10)},verticalFormInnerContainer:{maxWidth:e.typography.pxToRem(892)},verticalDataEntryContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap"},verticalContainer:{display:"flex",flexDirection:"column",flexWrap:"wrap"},stickyOnScroll:{position:"relative",flexGrow:1,width:e.typography.pxToRem(300),margin:e.typography.pxToRem(10),marginTop:0},verticalOutputsContainer:{marginBottom:e.typography.pxToRem(10)},dataEntryFieldSectionContainer:{paddingTop:e.typography.pxToRem(10),paddingBottom:e.typography.pxToRem(10)},dataEntryFieldSection:{padding:e.typography.pxToRem(8),maxWidth:e.typography.pxToRem(892)}}})(Wh),zh="CompleteDataEntryEvent",Yh="CompleteDataEntryEventError",Kh="SaveDataEntryEvent",qh="SaveValidationFailedForDataEntry",Xh="SaveAbortedForDataEntry",Zh="UpdateDataEntryField",Jh="UpdateDataEntryFormField",Qh="RulesExecutedPostUpdateFieldDataEntry",$h="AddDataEntryNote",eg="RemoveDataEntryNote",tg="SetCurrentDataEntry",ng="StartRunRulesPostUpdateFieldDataEntry",ag="RemoveDataEntryRelationship",rg="AddDataEntryRelationship",ig="DataEntryRelationshipAlreadyExists",og="LoadEditDataEntry",sg=function(e,t,n,a,r){return Se(Zh)({value:e,valueMeta:t,fieldId:n,dataEntryId:a,itemId:r})},cg=function(e,t,n){return Se(ng)({dataEntryId:e,itemId:t,uid:n})},lg=function(e,t,n){return Se(Qh)({dataEntryId:e,itemId:t,uid:n})},ug=function(e,t,n){return Se($h)({dataEntryId:e,itemId:t,note:n})},dg=function(e,t,n,a){return Se(rg)({dataEntryId:e,itemId:t,relationship:n,newToEntity:a})},pg=function(e){return Se(og)(e)},fg=Object(Y.c)(function(e,t){return{itemId:e.dataEntries[t.id]&&e.dataEntries[t.id].itemId}},function(e){return{onUpdateFieldInner:function(t,n,a,r,i,o,s,c,l){var u=function(e,t,n,a,r,i,o,s){return Se(Jh)({value:e,uiState:t,formId:r,formBuilderId:a,elementId:n,dataEntryId:i,itemId:o,updateCompleteUid:s})}(r,i,o,s,c,t,n,l);a?a(u):e(u)}}},null)(Hh),mg=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.open,n=e.header,a=e.text,r=e.confirmText,i=e.onConfirm,o=e.cancelText,s=e.onCancel;return I.a.createElement(te.a,{open:t,onClose:s},I.a.createElement(se.a,null,n),I.a.createElement(ie.a,null,I.a.createElement(Pi.a,null,a)),I.a.createElement(ae.a,null,I.a.createElement(le,{onClick:s,secondary:!0},o),I.a.createElement(le,{onClick:i,primary:!0},r)))}}]),t}(j.Component),hg=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleCancel=function(){n.props.dataEntryHasChanges?n.setState({dialogOpen:!0}):n.props.onCancel()},n.handleCancelDiscard=function(){n.setState({dialogOpen:!1})},n.state={dialogOpen:!1},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return j.createElement("div",null,j.createElement(le,{onClick:this.handleCancel,secondary:!0},s.a.t("Cancel")),j.createElement(mg,{header:s.a.t("Unsaved changes"),text:s.a.t("Leaving this page will discard the changes you made to this event."),confirmText:s.a.t("Yes, discard"),cancelText:s.a.t("No, stay here"),onConfirm:this.props.onCancel,open:this.state.dialogOpen,onCancel:this.handleCancelDiscard}))}}]),t}(j.Component),gg=function(e,t){if(Object.keys(e.formsSectionsFieldsUI).filter(function(e){return e.startsWith(t)}).reduce(function(t,n){return[].concat(Object(Xe.a)(t),Object(Xe.a)(Object.keys(e.formsSectionsFieldsUI[n]).map(function(t){return e.formsSectionsFieldsUI[n][t]})))},[]).some(function(e){return e.modified}))return!0;var n=e.dataEntriesFieldsUI[t];return!!n&&Object.keys(n).some(function(e){return n[e].modified})},bg=Object(Y.c)(function(e,t){var n=e.dataEntries&&e.dataEntries[t.id]&&e.dataEntries[t.id].itemId,a=Uh(t.id,n);return{dataEntryHasChanges:!!gg(e,a)}},function(){return{}},null,{forwardRef:!0})(hg),vg=function(e){return function(t){return function(e,t){return function(n){function a(){var e,t;Object(B.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(a)).call.apply(e,[this].concat(r)))).getWrappedInstance=function(){return t.innerInstance},t.getCancelButtonInstance=function(e){t.props.cancelButtonRef&&t.props.cancelButtonRef(e)},t}return Object(z.a)(a,n),Object(G.a)(a,[{key:"render",value:function(){var n=this,a=this.props,r=a.onCancel,i=(a.cancelButtonRef,Object(ue.a)(a,["onCancel","cancelButtonRef"])),o=t&&t(this.props)||{};return j.createElement(e,Object.assign({ref:function(e){n.innerInstance=e},cancelButton:j.createElement(bg,{id:this.props.id,ref:this.getCancelButtonInstance,onCancel:r,options:o})},i))}}]),a}(j.Component)}(t,e)}};function Og(e,t){return t&&t.some(function(t){var a=(0,t.validator)(e);return!(!0===a||a&&a.valid)&&(n=a&&a.message||t.message,!0)})?n||s.a.t("validation failed"):null;var n}var yg=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleSet=function(e,t){var a=n.props,r=a.validatorContainers,i=a.onUpdateFieldInner,o=a.onUpdateField,s=Og(e,r);i(e,{isValid:!s,validationError:s,touched:!t||null==t.touched||t.touched},n.props.propName,n.props.dataEntryId,n.props.itemId,o)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"validateAndScrollToIfFailed",value:function(){var e=this.props.valueMeta&&this.props.valueMeta.isValid;return e||this.goto(),e}},{key:"goto",value:function(){if(this.gotoInstance){this.gotoInstance.scrollIntoView();var e=window.scrollY;e&&window.scroll(0,e-48)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.completionAttempted,a=t.saveAttempted,r=t.Component,i=(t.validatorContainers,t.propName),o=(t.onUpdateField,t.onUpdateFieldInner,t.valueMeta),s=(t.itemId,t.dataEntryId,t.componentProps),c=Object(ue.a)(t,["completionAttempted","saveAttempted","Component","validatorContainers","propName","onUpdateField","onUpdateFieldInner","valueMeta","itemId","dataEntryId","componentProps"]),l=(o.isValid,o.type,Object(ue.a)(o,["isValid","type"]));return j.createElement("div",{ref:function(t){e.gotoInstance=t},key:i},j.createElement(r,Object.assign({onBlur:this.handleSet,validationAttempted:!(!n&&!a)},l,c,s)))}}]),t}(j.Component),Eg=Object(Y.c)(function(e,t){var n=t.propName,a=e.dataEntries[t.dataEntryId].itemId,r=Uh(t.dataEntryId,a);return{value:e.dataEntriesFieldsValue[r][n],valueMeta:e.dataEntriesFieldsUI[r][n],itemId:a,propName:n}},function(e){return{onUpdateFieldInner:function(t,n,a,r,i,o){var s=sg(t,n,a,r,i);o?o(s,{value:t,valueMeta:n,fieldId:a,dataEntryId:r,itemId:i}):e(sg(t,n,a,r,i))}}},null,{forwardRef:!0})(yg),_g=Object(fi.createSelectorCreator)(fi.defaultMemoize,function(e,t){return!!Object.keys(t).every(function(n){return t[n]===e[n]})&&Object.keys(e).every(function(n){return e[n]===t[n]})}),jg=function(e){return e||{}},Ig=function(){return _g(jg,function(e){return e})},Sg=function(e){return function(t){return Object(Y.c)(function(e){return function(t,n){var a,r=e.getPassOnFieldData,i=e.getPropName;if(r&&r(n)){var o=i(n),s=t.dataEntries[n.id].itemId,c=Uh(n.id,s),l=t.dataEntriesFieldsValue[c][o];a=Object(Wt.a)({},"".concat(o,"DataEntryFieldValue"),l)}return Object(Ie.a)({},a)}}(e),function(){return{}})(function(e,t){return function(n){function a(t){var n;return Object(B.a)(this,a),(n=Object(W.a)(this,Object(H.a)(a).call(this,t))).handleRef=function(t){if(n.props.dataEntryFieldRef){var a=(0,e.getPropName)(n.props);if(!a)return void R.a.error(Object(Ze.b)("data entry field needs a key, but no propName was specified")({}));n.props.dataEntryFieldRef(t,a)}},n.reselectComponentProps=Ig(),n}return Object(z.a)(a,n),Object(G.a)(a,[{key:"getFieldElement",value:function(){var t=this.props,n=t.id,a=t.completionAttempted,r=t.saveAttempted,i=t.onUpdateDataEntryField,o=e.getComponent,s=e.getComponentProps,c=e.getValidatorContainers,l=e.getPropName,u=o(this.props),d=this.reselectComponentProps(s&&s(this.props)),p=c&&c(this.props)||[];return j.createElement(Eg,{ref:this.handleRef,dataEntryId:n,completionAttempted:a,saveAttempted:r,Component:u,validatorContainers:p,propName:l(this.props),onUpdateField:i,componentProps:d})}},{key:"getFields",value:function(){var t=this.props.fields,n=e.getMeta,a=e.getIsHidden,r=n&&n(this.props);if(a&&a(this.props))return t?Object(Xe.a)(t):[];var i={field:this.getFieldElement(),placement:r&&r.placement||Fh,section:r&&r.section};return t?[].concat(Object(Xe.a)(t),[i]):[i]}},{key:"render",value:function(){var e=this.props,n=(e.fields,Object(ue.a)(e,["fields"]));return j.createElement("div",null,j.createElement(t,Object.assign({fields:this.getFields()},n)))}}]),a}(j.Component)}(e,t))}},Cg=function(e,t){var n=e.dataEntries&&e.dataEntries[t.dataEntryId]&&e.dataEntries[t.dataEntryId].itemId,a=Uh(t.dataEntryId,n);return{itemId:n,notes:e.dataEntriesNotes[a]||[]}},Tg=function(){return function(e){return Object(Y.c)(Cg,function(){return{}})(function(e){return function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).handleAddNote=function(e){t.props.onAddNote(t.props.itemId,t.props.dataEntryId,e)},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,n=(t.onAddNote,t.itemId,t.dataEntryId,Object(ue.a)(t,["onAddNote","itemId","dataEntryId"]));return j.createElement(e,Object.assign({},n,{onAddNote:this.handleAddNote}))}}]),n}(j.Component)}(e))}},Rg=n(726),Ng=lo()(Gc),kg=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).toggleIsOpen=function(){n.setState(function(e){return{addIsOpen:!e.addIsOpen}})},n.onCancel=function(){n.props.onBlur(null,{touched:!1}),n.toggleIsOpen()},n.onNewNoteEditorBlur=function(e){n.props.onBlur(e,{touched:!1})},n.handleAddNote=function(){n.props.value&&n.props.onAddNote(n.props.value),n.toggleIsOpen(),n.props.onBlur(null,{touched:!1})},n.handleChange=function(e){n.setState({value:e})},n.renderInput=function(){var e=n.props.classes;return j.createElement("div",{className:e.newNoteFormContainer},j.createElement(Rg.Editor,{onEdit:n.handleChange},j.createElement(Ng,{onBlur:n.onNewNoteEditorBlur,onChange:n.handleChange,value:n.state.value,multiLine:!0})),j.createElement("div",{className:e.newCommentButtonContainer},j.createElement(le,{onClick:n.handleAddNote,className:e.addCommentContainer,primary:!0},s.a.t("Add comment")),j.createElement(le,{onClick:n.onCancel},s.a.t("Cancel"))))},n.renderButton=function(e){var t=n.props,a=t.smallMainButton,r=t.classes;return j.createElement(Ol.n,{title:e?"":s.a.t("You dont have access to write comments")},j.createElement("div",{className:r.newNoteButtonContainer},j.createElement(le,{onClick:n.toggleIsOpen,disabled:!e,small:a},s.a.t("Write comment"))))},n.render=function(){var e=n.props,t=e.notes,a=e.classes,r=e.entityAccess;return j.createElement("div",{className:a.notesContainer},j.createElement(Ol.i,{dense:!0,className:a.notesList},t.map(function(e){return j.createElement(Ol.j,{className:a.noteItem,key:e.clientId},j.createElement("div",{className:a.noteItemHeader},j.createElement("div",{className:a.noteItemUser},e.storedBy),j.createElement("div",{className:a.noteItemDate},e.storedDate)),j.createElement("div",null,j.createElement(Rg.Parser,null,e.value)))})),j.createElement("div",{className:a.newNoteContainer},n.state.addIsOpen?n.renderInput():n.renderButton(r.write)))},n.state={addIsOpen:!!n.props.value,value:n.props.value||null},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.value===this.props.value&&this.props.value===this.state.value||this.setState({value:e.value})}}]),t}(j.Component);kg.defaultProps={entityAccess:{read:!0,write:!0}};var Ag=Object(k.withStyles)(function(e){return{noteItem:{display:"flex",flexDirection:"column",alignItems:"normal",background:e.palette.grey.lighter,marginBottom:e.typography.pxToRem(3),fontSize:e.typography.pxToRem(14)},commandButton:{width:e.typography.pxToRem(30),height:e.typography.pxToRem(30)},borderBoxContent:{margin:e.typography.pxToRem(10)},newCommentButtonContainer:{marginTop:e.typography.pxToRem(10)},newNoteContainer:{},newNoteFormContainer:{background:e.palette.grey.lighter,padding:e.typography.pxToRem(10)},notesContainer:{},noteItemHeader:{display:"flex"},noteItemUser:{flexGrow:1,fontWeight:"bold"},noteItemDate:{color:e.palette.grey[600]},notesList:{padding:0},newNoteButtonContainer:{display:"inline-block"},addCommentContainer:{marginRight:5,marginLeft:2}}})(kg),wg=function(e,t){var n=e.dataEntries&&e.dataEntries[t.dataEntryId]&&e.dataEntries[t.dataEntryId].itemId,a=Uh(t.dataEntryId,n);return{relationships:e.dataEntriesRelationships[a],itemId:n}},Pg=function(e){return{onRemoveRelationship:function(t,n,a){e(function(e,t,n){return Se(ag)({dataEntryId:e,itemId:t,relationshipClientId:n})}(n,t,a))}}},Dg=function(){return function(e){return Object(Y.c)(wg,Pg)(function(e){return function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).handleOpenAddRelationship=function(){t.props.onOpenAddRelationship(t.props.itemId,t.props.dataEntryId)},t.handleRemoveRelationship=function(e){t.props.onRemoveRelationship(t.props.itemId,t.props.dataEntryId,e)},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,n=(t.onOpenAddRelationship,t.onRemoveRelationship,t.itemId,t.dataEntryId,Object(ue.a)(t,["onOpenAddRelationship","onRemoveRelationship","itemId","dataEntryId"]));return j.createElement(e,Object.assign({},n,{onOpenAddRelationship:this.handleOpenAddRelationship,onRemoveRelationship:this.handleRemoveRelationship}))}}]),n}(j.Component)}(e))}},xg={PROGRAM_STAGE_INSTANCE:s.a.t("This event")},Fg=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderRelationships=function(){return n.props.relationships.map(function(e){return n.renderRelationship(e)})},n.renderRelationship=function(e){var t=n.props,a=t.classes,r=t.onRemoveRelationship,i=n.canDelete(e),o=Ri()(a.relationshipDetails,Object(Wt.a)({},a.relationshipHighlight,n.shouldHighlightRelationship(e)));return j.createElement("div",{className:a.relationship,key:e.clientId},j.createElement("div",{className:o},j.createElement("div",{className:a.relationshipTypeName},e.relationshipType.name),j.createElement("div",{className:a.relationshipEntities},n.getEntityName(e.from),j.createElement(Tl.d,{className:a.arrowIcon}),n.getEntityName(e.to))),j.createElement("div",{className:a.relationshipActions},j.createElement(Ol.n,{title:i?"":s.a.t("You dont have access to delete this relationship")},j.createElement("div",null,j.createElement(Ol.h,{onClick:function(){r(e.clientId)},disabled:!i},j.createElement(Tl.g,null))))))},n.shouldHighlightRelationship=function(e){var t=n.props.highlightRelationshipId;return t&&t===e.clientId},n.getEntityName=function(e){var t=n.props.onRenderConnectedEntity;return e.id===n.props.currentEntityId?xg[e.type]:t?t(e):e.name},n.canDelete=function(e){var t=n.props,a=t.entityAccess,r=t.writableRelationshipTypes;return e.from.id===n.props.currentEntityId&&a.write&&r.some(function(t){return t.id===e.relationshipType.id&&t.access.data.write})},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this,n=Object.keys(e).filter(function(n){return e[n]!==t.props[n]}),a=n.length;return!(1===a&&"highlightRelationshipId"===n[0]&&!e.highlightRelationshipId)&&a>0}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.onOpenAddRelationship,a=e.entityAccess,r=e.writableRelationshipTypes,i=e.relationshipsRef,o=e.smallMainButton,c=a.write&&r.length>0;return j.createElement("div",{className:t.container,ref:i},j.createElement("div",{className:t.relationshipsContainer},this.renderRelationships()),j.createElement("div",null,j.createElement(Ol.n,{title:c?"":s.a.t("You dont have access to create any relationships")},j.createElement("div",{className:t.addButtonContainer},j.createElement(le,{onClick:n,disabled:!c,small:o},s.a.t("Add relationship"))))))}}]),t}(j.Component);Fg.defaultProps={entityAccess:{read:!0,write:!0}};var Lg,Ug=Object(k.withStyles)(function(e){return{relationship:{display:"flex",alignItems:"center",padding:5},relationshipDetails:{backgroundColor:e.palette.grey.lighter,padding:7,flexGrow:1},relationshipTypeName:{fontSize:14,fontWeight:600,color:"rgba(0,0,0,0.7)"},relationshipsContainer:{},container:{display:"flex",flexDirection:"column"},relationshipEntities:{marginTop:7,fontSize:15,display:"flex",alignItems:"center"},arrowIcon:{marginLeft:10,marginRight:10,fontSize:15},relationshipActions:{padding:7},addButtonContainer:{display:"inline-block"},"@keyframes background-fade":{"0%":{backgroundColor:e.palette.secondary.lightest},"70%":{backgroundColor:e.palette.secondary.lightest},"100%":{backgroundColor:e.palette.grey.lighter}},relationshipHighlight:{animation:"background-fade 2.5s forwards"}}})(Fg),Mg=function(e){return!e||Ju(e)},Vg=function(){return[{validator:Di,message:s.a.t("A value is required")},{validator:Mg,message:s.a.t("Please provide a valid date")}]},Bg={SAVEANDADDANOTHER:"SAVEANDADDANOTHER",SAVEANDEXIT:"SAVEANDEXIT",FINISH:"FINISH"},Gg=function(e){var t=e.formsValues["singleEvent-newEvent"]||{};if(Object.keys(t).some(function(e){return t[e]}))return!0;var n=e.dataEntriesFieldsValue["singleEvent-newEvent"]||{};return Object.keys(n).some(function(e){return n[e]})},Wg=Object(Ie.a)({},Bg,{FINISH:"FINISH"}),Hg=(Lg={},Object(Wt.a)(Lg,Wg.SAVEANDADDANOTHER,function(e){return{key:Wg.SAVEANDADDANOTHER,text:s.a.t("Save and add another"),onClick:function(){e.onSave(Bg.SAVEANDADDANOTHER)}}}),Object(Wt.a)(Lg,Wg.SAVEANDEXIT,function(e){return{key:Wg.SAVEANDEXIT,text:s.a.t("Save and exit"),onClick:function(){e.onSave(Bg.SAVEANDEXIT)}}}),Object(Wt.a)(Lg,Wg.FINISH,function(e){return{key:Wg.FINISH,text:s.a.t("Finish"),onClick:function(){e.onCancel()}}}),Lg),zg=function(e,t){var n=e.dataEntries&&e.dataEntries[t.id]&&e.dataEntries[t.id].itemId,a=Uh(t.id,n),r=Gg(e),i=e.recentlyAddedEvents&&Object.keys(e.recentlyAddedEvents).length>0;return{saveTypes:e.newEventPage.saveTypes,finalInProgress:e.dataEntriesUI[a]&&e.dataEntriesUI[a].finalInProgress,dataEntryHasChanges:r,hasRecentlyAddedEvents:i}},Yg=function(){return{}},Kg=function(e){return!e},qg=function(){return[{validator:Kg,message:s.a.t("Please add or cancel comment before saving the event")}]},Xg=function(e){return function(t){return function(e,t){return function(n){function a(n){var r;Object(B.a)(this,a),r=Object(W.a)(this,Object(H.a)(a).call(this,n));var i=e.isApplicable(r.props);return r.Component=i?Sg(e)(t):t,r}return Object(z.a)(a,n),Object(G.a)(a,[{key:"render",value:function(){var e=this.Component;return j.createElement(e,this.props)}}]),a}(j.Component)}(e,t)}},Zg=function(e,t){var n=e.dataEntries&&e.dataEntries[t.id]&&e.dataEntries[t.id].itemId,a=Uh(t.id,n);return{dataEntryHasChanges:gg(e,a)}},Jg=function(){return{}},Qg=function(){return function(e){return Object(Y.c)(Zg,Jg)(Object(Z.e)(function(e){return function(t){function n(e){var t;return Object(B.a)(this,n),(t=Object(W.a)(this,Object(H.a)(n).call(this,e))).handleDialogConfirm=function(){t.setState({dialogOpen:!1}),t.unblock()},t.handleDialogCancel=function(){t.setState({dialogOpen:!1})},t.state={dialogOpen:!1},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.history;this.unblock=t.block(function(t,n){var a=e.props.dataEntryHasChanges;return"POP"!==n||!a||(e.setState({dialogOpen:!0}),!1)})}},{key:"componentWillUnmount",value:function(){this.unblock&&this.unblock()}},{key:"render",value:function(){var t=this.props,n=(t.dataEntryHasChanges,t.history,t.location,t.match,t.staticContext,Object(ue.a)(t,["dataEntryHasChanges","history","location","match","staticContext"]));return j.createElement(j.Fragment,null,j.createElement(e,n),j.createElement(mg,{header:s.a.t("Unsaved changes"),text:s.a.t("Leaving this page will discard the changes you made to this event."),confirmText:s.a.t("Yes, discard"),cancelText:s.a.t("No, stay here"),onConfirm:this.handleDialogConfirm,open:this.state.dialogOpen,onCancel:this.handleDialogCancel}))}}]),n}(j.Component)}(e)))}},$g=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getContents",value:function(){var e=this.props,n=e.warnings,a=e.errors,r=e.classes,i=n.map(function(e){return j.createElement("li",{key:e.key},e.name?t.getItemWithName(e.name,e.warning):t.getItemWithoutName(e.warning))}),o=a.map(function(e){return j.createElement("li",{key:e.key},e.name?t.getItemWithName(e.name,e.error):t.getItemWithoutName(e.error))});return j.createElement("div",null,j.createElement("div",null,o.length>1?s.a.t("The following errors were found:"):s.a.t("The following error was found:")),j.createElement("div",{className:r.errors},o),j.createElement("div",{className:r.warningsLabel},i.length>1?s.a.t("The following warnings were found:"):s.a.t("The following warning was found:")),j.createElement("div",{className:r.warnings},i))}},{key:"getButtons",value:function(){var e=this.props,t=e.onAbort,n=e.onSave,a=e.saveEnabled;return j.createElement(j.Fragment,null,j.createElement(le,{onClick:t,color:"primary"},s.a.t("Back to form")),a?j.createElement(le,{onClick:n,color:"primary",autoFocus:!0},s.a.t("Save anyway")):null)}},{key:"render",value:function(){return j.createElement(j.Fragment,null,j.createElement(se.a,{id:"save-dialog-errors-and-warnings-title"},s.a.t("Validation errors and warnings")),j.createElement(ie.a,null,j.createElement(Pi.a,null,this.getContents())),j.createElement(ae.a,null,this.getButtons()))}}],[{key:"getItemWithName",value:function(e,t){return j.createElement(j.Fragment,null,e,": ",t)}},{key:"getItemWithoutName",value:function(e){return j.createElement(j.Fragment,null,e)}}]),t}(j.Component),eb=Object(k.withStyles)(function(e){return{errors:{border:"1px solid ".concat(e.palette.grey.light),borderRadius:e.typography.pxToRem(4),padding:5},warningsLabel:{paddingTop:20},warnings:{border:"1px solid ".concat(e.palette.grey.light),borderRadius:e.typography.pxToRem(4),padding:5}}})($g),tb=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getContents",value:function(){return this.props.errors.map(function(e){return j.createElement("li",{key:e.key},e.name?t.getItemWithName(e.name,e.error):t.getItemWithoutName(e.error))})}},{key:"getButtons",value:function(){var e=this.props,t=e.onAbort,n=e.onSave,a=e.saveEnabled;return j.createElement(j.Fragment,null,j.createElement(le,{onClick:t,color:"primary"},s.a.t("Back to form")),a?j.createElement(le,{onClick:n,color:"primary",autoFocus:!0},s.a.t("Save anyway")):null)}},{key:"render",value:function(){return j.createElement(j.Fragment,null,j.createElement(se.a,{id:"save-dialog-errors-title"},s.a.t("Validation errors")),j.createElement(ie.a,null,j.createElement(Pi.a,null,this.getContents())),j.createElement(ae.a,null,this.getButtons()))}}],[{key:"getItemWithName",value:function(e,t){return j.createElement(j.Fragment,null,e,": ",t)}},{key:"getItemWithoutName",value:function(e){return j.createElement(j.Fragment,null,e)}}]),t}(j.Component),nb=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getContents",value:function(){return this.props.warnings.map(function(e){return j.createElement("li",{key:e.key},e.name?t.getItemWithName(e.name,e.warning):t.getItemWithoutName(e.warning))})}},{key:"render",value:function(){var e=this.props,t=e.onAbort,n=e.onSave;return j.createElement(j.Fragment,null,j.createElement(se.a,{id:"save-dialog-errors-and-warnings-title"},s.a.t("Validation warnings")),j.createElement(ie.a,null,j.createElement(Pi.a,null,this.getContents())),j.createElement(ae.a,null,j.createElement(le,{onClick:t,color:"primary"},s.a.t("Back to form")),j.createElement(le,{onClick:n,color:"primary",autoFocus:!0},s.a.t("Save anyway"))))}}],[{key:"getItemWithName",value:function(e,t){return j.createElement(j.Fragment,null,e,": ",t)}},{key:"getItemWithoutName",value:function(e){return j.createElement(j.Fragment,null,e)}}]),t}(j.Component);function ab(e,t){return t===bt.NONE||t===bt.ON_COMPLETE&&!e}var rb=function(e){var t=e.open,n=e.warnings,a=e.errors,r=e.isCompleting,i=e.validationStrategy,o=Object(ue.a)(e,["open","warnings","errors","isCompleting","validationStrategy"]);return t?n&&n.length>0&&a&&a.length>0?j.createElement(eb,Object.assign({errors:a,warnings:n,saveEnabled:ab(r,i)},o)):a&&a.length>0?j.createElement(tb,Object.assign({errors:a,saveEnabled:ab(r,i)},o)):j.createElement(nb,Object.assign({warnings:n},o)):null},ib=function(e,t,n){return n.foundation},ob=function(e,t,n){return e.rulesEffectsMessages[n.key]},sb=function(e,t,n){return e.rulesEffectsGeneralWarnings[n.key]?e.rulesEffectsGeneralWarnings[n.key].warningOnComplete:void 0},cb=function(e,t,n){return e.rulesEffectsGeneralErrors[n.key]?e.rulesEffectsGeneralErrors[n.key].errorOnComplete:void 0},lb=function(e,t,n,a){var r=function(a){function r(e){var t;return Object(B.a)(this,r),(t=Object(W.a)(this,Object(H.a)(r).call(this,e))).handleSaveAttempt=function(e){t.props.inProgressList.length>0?t.setState({waitForPromisesDialogOpen:!0,saveType:e}):t.validateAndSave(e)},t.handleAbortDialog=function(){t.props.onSaveAbort(t.props.itemId,t.props.id),t.setState({messagesDialogOpen:!1})},t.handleSaveDialog=function(){t.handleSave(t.state.saveType),t.setState({messagesDialogOpen:!1})},t.handleSave=function(e){var n=t.props;(0,n.onSave)(n.itemId,n.id,n.calculatedFoundation,e)},t.getDialogWaitForUploadContents=function(){return j.createElement("div",null,s.a.t("Some operations are still runnning. Please wait.."))},t.setFormInstance=function(e){t.formInstance=e},t.setDataEntryFieldInstance=function(e,n){t.dataEntryFieldInstances.set(n,e)},t.dataEntryFieldInstances=new Map,t.state={messagesDialogOpen:!1,waitForPromisesDialogOpen:!1},t}return Object(z.a)(r,a),Object(G.a)(r,[{key:"componentDidUpdate",value:function(e){this.state.waitForPromisesDialogOpen&&0===this.props.inProgressList.length&&e.inProgressList.length>0&&(this.validateAndSave(this.state.saveType),this.setState({waitForPromisesDialogOpen:!1,saveType:null}))}},{key:"getDataEntryFieldInstances",value:function(){return Array.from(this.dataEntryFieldInstances.entries()).map(function(e){return e[1]})}},{key:"validateDataEntryFields",value:function(){for(var e=this.getDataEntryFieldInstances(),t=!0,n=0;e[n]&&t;)t=e[n].validateAndScrollToIfFailed(),n+=1;return t}},{key:"showMessagesPopup",value:function(e){this.setState({messagesDialogOpen:!0,saveType:e})}},{key:"validateGeneralErrorsFromRules",value:function(e){var t=this.props.calculatedFoundation.validationStrategy;return t===bt.NONE||(t===bt.ON_COMPLETE&&!e||!this.props.hasGeneralErrors)}},{key:"validateForm",value:function(){var e=this.formInstance;if(!e)return R.a.error(Object(Ze.b)(r.errorMessages.FORM_INSTANCE_NOT_FOUND)({SaveButtonBuilder:this})),{error:!0,isValid:!1};var n=!(!t||!t(this.props));return{isValid:e.validateFormScrollToFirstFailedField({isCompleting:n})&&this.validateGeneralErrorsFromRules(n),error:!1}}},{key:"validateAndSave",value:function(e){if(this.validateDataEntryFields()){var t=this.validateForm(),n=t.error,a=t.isValid;n||this.handleSaveValidationOutcome(e,a)}else this.props.onSaveValidationFailed(this.props.itemId,this.props.id)}},{key:"handleSaveValidationOutcome",value:function(e,t){var n=this.props,a=n.onSaveValidationFailed,r=n.itemId,i=n.id,o=n.warnings,s=n.errors;t?s&&s.length>0||o&&o.length>0?this.showMessagesPopup(e):this.handleSave(e):a(r,i)}},{key:"render",value:function(){var a=this.props,r=a.itemId,i=(a.onSave,a.onSaveValidationFailed,a.onSaveAbort,a.warnings),o=a.errors,c=(a.hasGeneralErrors,a.inProgressList,a.calculatedFoundation),l=Object(ue.a)(a,["itemId","onSave","onSaveValidationFailed","onSaveAbort","warnings","errors","hasGeneralErrors","inProgressList","calculatedFoundation"]);if(!r)return null;var u=n?n(l):l;return this.isCompleting=!(!t||!t(this.props)),j.createElement("div",null,j.createElement(e,Object.assign({formRef:this.setFormInstance,dataEntryFieldRef:this.setDataEntryFieldInstance,onSave:this.handleSaveAttempt},u)),j.createElement(te.a,{open:this.state.messagesDialogOpen,onClose:this.handleAbortDialog},j.createElement(rb,{open:this.state.messagesDialogOpen,onAbort:this.handleAbortDialog,onSave:this.handleSaveDialog,errors:o,warnings:i,isCompleting:this.isCompleting,validationStrategy:c.validationStrategy})),j.createElement(te.a,{open:this.state.waitForPromisesDialogOpen},j.createElement(se.a,null,s.a.t("Operations running")),j.createElement(ie.a,null,j.createElement(Pi.a,null,this.getDialogWaitForUploadContents()))))}}]),r}(j.Component);r.errorMessages={INNER_INSTANCE_NOT_FOUND:"Inner instance not found",FORM_INSTANCE_NOT_FOUND:"Form instance not found"};return Object(Y.c)(function(){var e=Object(fi.createSelector)(ob,sb,ib,function(e,t,n){e=e||{},t=t||[];var a=Object.keys(e).map(function(t){var a=e[t][Qm.WARNING_ON_COMPLETE];if(!a)return null;var r=n.getElement(t);return r?{key:t,name:r.name,warning:a}:null}).filter(function(e){return e}),r=t.map(function(e){return{key:e.id,name:null,warning:e.message}});return[].concat(Object(Xe.a)(a),Object(Xe.a)(r))}),t=Object(fi.createSelector)(ob,cb,ib,function(e,t,n){e=e||{},t=t||[];var a=Object.keys(e).map(function(t){var a=e[t][Qm.ERROR_ON_COMPLETE];if(!a)return null;var r=n.getElement(t);return r?{key:t,name:r.name,error:a}:null}).filter(function(e){return e}),r=t.map(function(e){return{key:e.id,name:null,error:e.message}});return[].concat(Object(Xe.a)(a),Object(Xe.a)(r))});return function(n,r){var i=n.dataEntries&&n.dataEntries[r.id]&&n.dataEntries[r.id].itemId,o=Uh(r.id,i),s=n.rulesEffectsGeneralErrors[o]&&n.rulesEffectsGeneralErrors[o].error,c=a?a(r):r.formFoundation;return{itemId:i,saveAttempted:n.dataEntriesUI&&n.dataEntriesUI[o]&&n.dataEntriesUI[o].saveAttempted,warnings:e(n,r,{key:o,foundation:c}),errors:t(n,r,{key:o,foundation:c}),hasGeneralErrors:s&&s.length>0,inProgressList:n.dataEntriesInProgressList[o]||[],calculatedFoundation:c}}},function(e){return{onSaveValidationFailed:function(t,n){e(function(e,t){return Se(qh)({itemId:e,id:t})}(t,n))},onSaveAbort:function(t,n){e(function(e,t){return Se(Xh)({itemId:e,id:t})}(t,n))}}})(r)},ub=function(e){return function(t){return lb(t,e&&e.onIsCompleting,e&&e.onFilterProps,e&&e.onGetFormFoundation)}},db=n(161),pb=n.n(db),fb=n(97),mb=n.n(fb),hb=function(){return function(e,t){return function(e,t){return function(n){function a(n){var r;return Object(B.a)(this,a),(r=Object(W.a)(this,Object(H.a)(a).call(this,n))).getDataEntryOutputs=function(){var e=r.props.dataEntryOutputs,t=r.getOutput(e?e.length:0);return e?[].concat(Object(Xe.a)(e),[t]):[t]},r.getOutput=function(e){return j.createElement("div",{style:{marginTop:10},key:e},j.createElement(t,Object.assign({key:e},r.props)))},r.render=function(){var t=r.props,n=(t.dataEntryOutputs,Object(ue.a)(t,["dataEntryOutputs"]));return j.createElement("div",null,j.createElement(e,Object.assign({ref:function(e){r.innerInstance=e},dataEntryOutputs:r.getDataEntryOutputs()},n)))},r.name="DataEntryOutputBuilder",r}return Object(z.a)(a,n),a}(j.Component)}(e,t)}},gb=function(e){return{listItem:{display:"flex",backgroundColor:e.palette.grey[100],paddingLeft:e.typography.pxToRem(10),marginTop:e.typography.pxToRem(8)},keyValuePairKey:{flexGrow:1},card:{padding:e.typography.pxToRem(10),borderRadius:e.typography.pxToRem(5)}}},bb=function(e,t){var n=e.dataEntries[t.id].itemId,a=Uh(t.id,n);return{feedbackItems:e.rulesEffectsFeedback&&e.rulesEffectsFeedback[a]?e.rulesEffectsFeedback[a]:null}},vb=function(){return{}},Ob=n(402),yb=n.n(Ob),Eb=function(e){return{list:{margin:0},listItem:{paddingLeft:e.typography.pxToRem(10),marginTop:e.typography.pxToRem(8)},header:{display:"flex",alignItems:"center"},headerText:{marginLeft:e.typography.pxToRem(10)},card:{borderRadius:e.typography.pxToRem(5),padding:e.typography.pxToRem(10),backgroundColor:e.palette.warning[100]}}},_b=function(e,t){var n=e.dataEntries[t.id].itemId,a=Uh(t.id,n);return{warningItems:e.rulesEffectsGeneralWarnings[a]?e.rulesEffectsGeneralWarnings[a].warning:null,warningOnCompleteItems:e.rulesEffectsGeneralWarnings[a]?e.rulesEffectsGeneralWarnings[a].warningOnComplete:null}},jb=function(){return{}},Ib=n(400),Sb=n.n(Ib),Cb=function(e){return{card:{padding:e.typography.pxToRem(10),backgroundColor:e.palette.error[100],borderRadius:e.typography.pxToRem(5)},list:{margin:0},listItem:{paddingLeft:e.typography.pxToRem(10),marginTop:e.typography.pxToRem(8)},header:{color:"#902c02",display:"flex",alignItems:"center"},headerText:{marginLeft:e.typography.pxToRem(10)}}},Tb=function(e,t){var n=e.dataEntries[t.id].itemId,a=Uh(t.id,n);return{errorItems:e.rulesEffectsGeneralErrors[a]?e.rulesEffectsGeneralErrors[a].error:null,errorOnCompleteItems:e.rulesEffectsGeneralErrors[a]?e.rulesEffectsGeneralErrors[a].errorOnComplete:null}},Rb=function(){return{}},Nb=function(e){return{listItem:{display:"flex",backgroundColor:e.palette.grey[100],paddingLeft:e.typography.pxToRem(10),marginTop:e.typography.pxToRem(8)},keyValuePairKey:{flexGrow:1},card:{padding:e.typography.pxToRem(10),borderRadius:e.typography.pxToRem(5)}}},kb=function(e,t){var n=e.dataEntries[t.id].itemId,a=Uh(t.id,n);return{indicatorItems:e.rulesEffectsIndicators&&e.rulesEffectsIndicators[a]?e.rulesEffectsIndicators[a]:null}},Ab=function(){return{}},wb={SEARCH_GROUP_RESULT_COUNT_RETRIVED:"SearchGroupResultCountRetrieved",SEARCH_GROUP_RESULT_COUNT_RETRIEVAL_FAILED:"SearchGroupResultCountRetrievalFailed",FILTER_SEARCH_GROUP_FOR_COUNT_SEARCH:"FilterSearchGroupForCountSearch",FILTER_SEARCH_GROUP_FOR_COUNT_TO_BE_EXECUTED:"FilterSearchGroupForCountSearchToBeExecuted",START_SEARCH_GROUP_COUNT_SEARCH:"StartSearchGroupCountSearch",ABORT_SEARCH_GROUP_COUNT_SEARCH:"AbortSearchGroupCountSearch",CANCEL_SEARCH_GROUP_COUNT_SEARCH:"CancelSearchGroupCountSearch"},Pb="UpdateFieldAndRunSearchGroupSearchesBatch",Db="UpdateFieldAndRunSearchGroupSearchesFromAsyncBatch",xb="FilteredSearchActionsForSearchBatch",Fb=function(e,t,n){var a=function(t){function n(){return Object(B.a)(this,n),Object(W.a)(this,Object(H.a)(n).apply(this,arguments))}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){return j.createElement(e,this.props)}}]),n}(j.PureComponent);return function(e){function r(e){var n;return Object(B.a)(this,r),(n=Object(W.a)(this,Object(H.a)(r).call(this,e))).handleFieldUpdate=function(e){var t=n.props,a=t.onUpdateFormField;(0,t.onUpdateFormFieldInner)(e,n.getFilterActions(),a)},n.handleAsyncFieldUpdate=function(){for(var e=n.props,t=e.onUpdateFormFieldAsync,a=e.onUpdateFormFieldInnerAsync,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];a.apply(void 0,i.concat([n.getFilterActions(),t]))},n.searchGroups=t(n.props),n}return Object(z.a)(r,e),Object(G.a)(r,[{key:"getFilterActions",value:function(){var e=this.props.dataEntryKey,t=this.searchGroups,a=n&&n(this.props)||{},r=t.map(function(){return xu()()}),i=t.map(function(t,n){return function(e,t,n,a){return Se(wb.FILTER_SEARCH_GROUP_FOR_COUNT_SEARCH)({searchGroup:e,uid:t,dataEntryKey:n,contextProps:a})}(t,r[n],e,a)}),o=i.map(function(e){return t=e,Se(wb.FILTER_SEARCH_GROUP_FOR_COUNT_TO_BE_EXECUTED)(Object(Ie.a)({},t.payload));var t});return{filterActions:i,filterActionsToBeExecuted:o}}},{key:"render",value:function(){var e=this.props,t=(e.dataEntryKey,e.onUpdateFormField,e.onUpdateFormFieldInner,e.onUpdateFormFieldAsync,e.onUpdateFormFieldInnerAsync,Object(ue.a)(e,["dataEntryKey","onUpdateFormField","onUpdateFormFieldInner","onUpdateFormFieldAsync","onUpdateFormFieldInnerAsync"]));return j.createElement(a,Object.assign({onUpdateFormField:this.handleFieldUpdate,onUpdateFormFieldAsync:this.handleAsyncFieldUpdate},t))}}]),r}(j.Component)},Lb=function(e,t){var n=e.dataEntries&&e.dataEntries[t.id]&&e.dataEntries[t.id].itemId;return{dataEntryKey:Uh(t.id,n)}},Ub=function(e){return{onUpdateFormFieldInner:function(t,n,a){var r=n.filterActions,i=n.filterActionsToBeExecuted;a?a(t,{filterActions:r,filterActionsToBeExecuted:i}):e(function(e,t,n){return Object(He.batchActions)([e].concat(Object(Xe.a)(n),Object(Xe.a)(t)),Pb)}(t,r,i))},onUpdateFormFieldInnerAsync:function(t,n,a,r,i){var o=r.filterActions,s=r.filterActionsToBeExecuted;if(i)i(t,{filterActions:o,filterActionsToBeExecuted:s},n,a);else{e(function(e,t,n){return Ce(e)({onSuccess:t,onError:n})}(t,function(e){return function(e,t,n){return Object(He.batchActions)([e].concat(Object(Xe.a)(n),Object(Xe.a)(t)),Db)}(e,o,s)},function(e){return e}))}}}},Mb=function(e,t){return function(n){return Object(Y.c)(Lb,Ub)(Fb(n,e,t))}},Vb=function(){return function(e){return function(e){return function(t){t.onSearchGroupResultCountRetrieved,t.onSearchGroupResultCountRetrievalFailed;var n=Object(ue.a)(t,["onSearchGroupResultCountRetrieved","onSearchGroupResultCountRetrievalFailed"]);return j.createElement(e,n)}}(e)}},Bb={ADD_FORM_DATA:"AddFormData"};function Gb(e,t){return Se(Bb.ADD_FORM_DATA)({formValues:t,formId:e})}function Wb(e){return e.reduce(function(e,t){var n;return(n=t.type?{type:t.type}:t.onConvertOut?{onConvertOut:t.onConvertOut.toString(),clientId:t.clientId}:{}).clientIgnore=t.clientIgnore,e[t.id||t.dataEntryId]=n,e},{})}function Hb(e,t){var n=e.filter(function(e){return e.type}).map(function(e){return new gt(function(t){t.id=e.id,t.type=e.type})}).map(function(e){return{id:e.id,value:e.convertValue(t[e.id],ha)}}),a=e.filter(function(e){return e.onConvertIn}).map(function(e){return{id:e.dataEntryId,value:e.onConvertIn(t[e.clientId])}});return[].concat(Object(Xe.a)(n),Object(Xe.a)(a)).reduce(function(e,t){return e[t.id]=t.value,e},{})}function zb(e){return(e.notes||[]).map(function(e,t){return Object(Ie.a)({},e,{storedDate:ya(e.storedDate,ft.DATETIME),key:t})})}function Yb(e,t){return t.convertValues(e,ha)}function Kb(e,t){return t.reduce(function(t,n){var a=n.dataEntryId||n.id,r=Og(e[a],n.validatorContainers);return t[a]={isValid:!r,validationError:r},t},{})}var qb={LOAD_NEW_DATA_ENTRY:"LoadNewDataEntry"};function Xb(e,t,n,a,r){var i=a||{},o=r||{},s=n?Wb(n):{},c=n?Kb(i,n):{},l=Uh(e,t);return[Se(qb.LOAD_NEW_DATA_ENTRY)({key:l,itemId:t,dataEntryId:e,dataEntryMeta:s,dataEntryUI:c,dataEntryValues:i}),Gb(l,o)]}var Zb=n(78),Jb=n(253),Qb=n(305),$b=n(174);function ev(e,t,n){var a=e.searchFoundation.getElements().reduce(function(e,n){return e[n.id]=t[n.id],e},{});return e.onSearch(function(e,t){var n=Object(Ze.d)(Ua,Na);return t.convertValues(e,n)}(a,e.searchFoundation),n)}var tv={};function nv(e,t){tv[e]&&tv[e][t]&&(tv[e][t]=null)}var av,rv=function(e){return function(t,n){return t.ofType.apply(t,Object(Xe.a)(e)).map(function(e){var t=e.payload.filter(function(e){return e.type===wb.FILTER_SEARCH_GROUP_FOR_COUNT_SEARCH});return 0===t.length?null:t.map(function(e){var t=e.payload,a=t.dataEntryKey,r=t.searchGroup,i=n.getState(),o=i.formsValues[a]||{},s=i.dataEntriesSearchGroupsPreviousValues[a]&&i.dataEntriesSearchGroupsPreviousValues[a][r.id]||{};return function(e,t,n){var a=e.searchFoundation.getElements();return!(a.filter(function(e){return n[e.id]&&"dataType"===n[e.id].errorType&&!n[e.id].valid}).length>0)&&a.filter(function(e){return t[e.id]}).length>=e.minAttributesRequiredToSearch}(r,o,Object.keys(i.formsSectionsFieldsUI).filter(function(e){return e.startsWith(a)}).reduce(function(e,t){var n=i.formsSectionsFieldsUI[t];return Object(Ie.a)({},e,n)},{}))?!function(e,t,n){return!!e.searchFoundation.getElements().find(function(e){var a=n[e.id];a||!1===a||0===a||(a=null);var r=t[e.id];return r||!1===r||0===r||(r=null),r!==a})}(r,o,s)?Object(Ie.a)({},e,{cancel:!0}):e:Object(Ie.a)({},e,{abort:!0})}).map(function(e){if(e.abort){var t=e.payload,a=t.dataEntryKey,r=t.searchGroup,i=t.uid,o=tv[a]&&tv[a][r.id]||[];return nv(a,r.id),function(e,t,n,a){return Se(wb.ABORT_SEARCH_GROUP_COUNT_SEARCH)({dataEntryKey:e,searchGroup:t,groupId:n,uids:a})}(a,r,r.id,[].concat(Object(Xe.a)(o),[i]))}if(e.cancel){var s=e.payload;return function(e,t){return Se(wb.CANCEL_SEARCH_GROUP_COUNT_SEARCH)({dataEntryKey:e,uid:t})}(s.dataEntryKey,s.uid)}var c=e.payload,l=c.dataEntryKey,u=c.searchGroup,d=c.uid,p=c.contextProps,f=n.getState().formsValues[l];return function(e,t,n,a,r,i){return Se(wb.START_SEARCH_GROUP_COUNT_SEARCH)({searchGroup:e,searchGroupId:t,uid:n,dataEntryKey:a,contextProps:r,values:i})}(u,u.id,d,l,p,f)})}).filter(function(e){return e&&e.length>0}).map(function(e){return function(e){return Object(He.batchActions)(e,xb)}(e)})}},iv=function(e){return function(t,n){return t.ofType(xb).map(function(e){return e.payload.filter(function(e){return e.type===wb.START_SEARCH_GROUP_COUNT_SEARCH})}).filter(function(e){return e&&e.length>0}).mergeMap(function(a){return a.map(function(a){var r=a.payload,i=r.dataEntryKey,o=r.contextProps,c=r.searchGroup,l=r.uid,u=n.getState().formsValues[i];return tv[i]||(tv[i]={}),tv[i][c.id]||(tv[i][c.id]=[]),tv[i][c.id].push(l),Object(Qb.race)(Object(Zb.fromPromise)(ev(c,u,o)).takeUntil(t.ofType(xb).filter(function(e){return e.payload.find(function(e){return[wb.START_SEARCH_GROUP_COUNT_SEARCH,wb.ABORT_SEARCH_GROUP_COUNT_SEARCH].includes(e.type)&&e.payload.searchGroup===c})})).map(function(e){var t=tv[i][c.id];return nv(i,c.id),function(e,t,n,a){return Se(wb.SEARCH_GROUP_RESULT_COUNT_RETRIVED)({count:e,dataEntryKey:t,groupId:n,uids:a})}(e,i,c.id,t)}).catch(function(e){R.a.error(Object(Ze.b)(e)({dataEntryKey:i,searchGroupId:c.id}));var t=tv[i][c.id];return nv(i,c.id),Object(Jb.of)(function(e,t,n,a){return Se(wb.SEARCH_GROUP_RESULT_COUNT_RETRIEVAL_FAILED)({error:e,dataEntryKey:t,groupId:n,uids:a})}(s.a.t("search group result could not be retrieved"),i,c.id,t))}),t.ofType.apply(t,Object(Xe.a)(e)).filter(function(e){return e.payload.find(function(e){return e.type===(qb.LOAD_NEW_DATA_ENTRY||og)&&e.payload.key===i})}).map(function(){return tv[i]=null,null}))})}).mergeAll().filter(function(e){return e})}},ov=Object(k.withStyles)(function(){return{container:{display:"flex",alignItems:"center",padding:8},label:{flexBasis:200},field:{flexBasis:150,flexGrow:1}}})(function(e){var t=e.classes,n=Object(ue.a)(e,["classes"]);return j.createElement("div",{className:t.container},j.createElement("div",{className:t.label},s.a.t("Assigned user")),j.createElement("div",{className:t.field},j.createElement(Up,Object.assign({inputPlaceholderText:s.a.t("Search for user")},n))))}),sv=n(328),cv=n.n(sv),lv=function(e){return e.currentSelections.programId},uv=function(e){return e.stage},dv="BASICINFO",pv="STATUS",fv="COMMENTS",mv="RELATIONSHIPS",hv="ASSIGNEE",gv={errorMessage:"validationError"},bv={labelContainerStyle:{flexBasis:200},inputContainerStyle:{flexBasis:150}},vv={labelContainerStyle:{width:150},inputContainerStyle:{width:150}};function Ov(e){e.formHorizontal,e.fieldOptions,e.validationError,e.modified;return Object(ue.a)(e,["formHorizontal","fieldOptions","validationError","modified"])}var yv=function(e,t){return Object(Ie.a)({},function(e){return{fieldOptions:e.fieldOptions,formHorizontal:e.formHorizontal,styles:e.formHorizontal?vv:bv}}(e),t)},Ev=Hl(gv)(lo()(eu()(tu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldOptions.fieldLabelMediaBasedClass," ").concat(cv.a.coordinateLabel)}})(Ql()(Po()(nu(Ov)(vl)))))))),_v=Hl(gv)(lo()(eu()(tu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldOptions.fieldLabelMediaBasedClass," ").concat(cv.a.polygonLabel)}})(Ql()(Po()(nu(Ov)(El)))))))),jv=function(e){return e?Ro.VERTICAL:Ro.HORIZONTAL},Iv={onIsCompleting:function(e){return e.completeDataEntryFieldValue},onFilterProps:function(e){e.completeDataEntryFieldValue;return Object(ue.a)(e,["completeDataEntryFieldValue"])}},Sv=Vb()(nu(function(e){e.stage,e.onScrollToRelationships,e.recentlyAddedRelationshipId,e.relationshipsRef;return Object(ue.a)(e,["stage","onScrollToRelationships","recentlyAddedRelationshipId","relationshipsRef"])})(fg)),Cv=Xg(function(){var e=hp(["onBlur","onSet"])(lo()(nu(function(e){var t=Ov(e);return t.validationAttempted,t.touched,Object(ue.a)(t,["validationAttempted","touched"])})(ov)));return{isApplicable:function(e){return!(!e.stage||!e.stage.enableUserAssignment)&&xn()},getComponent:function(){return e},getComponentProps:function(e){return{}},getPropName:function(){return"assignee"},getValidatorContainers:function(){return[]},getMeta:function(){return{section:hv}}}}())(Sv),Tv=Xg(function(){var e=Object(fi.createSelector)(uv,function(e){return e?e.relationshipTypesWhereStageIsFrom.filter(function(e){return e.access.data.write}):[]}),t=eu()(tu()(nu(Ov)(Dg()(Ug))));return{isApplicable:function(e){return e.stage&&e.stage.relationshipTypesWhereStageIsFrom.length>0},getComponent:function(){return t},getComponentProps:function(t){return yv(t,{id:"relationship",dataEntryId:t.id,highlightRelationshipId:t.recentlyAddedRelationshipId,relationshipsRef:t.relationshipsRef,onOpenAddRelationship:t.onOpenAddRelationship,writableRelationshipTypes:e(t),fromEntity:"PROGRAM_STAGE_INSTANCE",currentEntityId:"newEvent"})},getValidatorContainers:function(){return[]},getPropName:function(){return"relationship"},getMeta:function(){return{placement:Lh,section:mv}}}}())(Cv),Rv=Sg(function(){var e=Hl(gv)(eu()(tu()(Ql()(Po()(nu(Ov)(Tg()(Ag)))))));return{getComponent:function(){return e},getComponentProps:function(e){return yv(e,{label:"Comments",onAddNote:e.onAddNote,id:"comments",dataEntryId:e.id})},getPropName:function(){return"note"},getValidatorContainers:function(){return qg()},getMeta:function(){return{placement:Lh,section:fv}}}}())(Tv),Nv=Xg({isApplicable:function(e){var t=e.formFoundation.featureType;return["Polygon","Point"].includes(t)},getComponent:function(e){return"Polygon"===e.formFoundation.featureType?_v:Ev},getComponentProps:function(e){var t=e.formFoundation.featureType;return yv(e,"Polygon"===t?{width:e&&e.formHorizontal?150:350,label:s.a.t("Area"),dialogLabel:s.a.t("Area"),required:!1,orientation:jv(e.formHorizontal)}:{width:e&&e.formHorizontal?150:350,label:"Coordinate",dialogLabel:"Coordinate",required:!1,orientation:jv(e.formHorizontal),shrinkDisabled:e.formHorizontal})},getPropName:function(){return"geometry"},getValidatorContainers:function(){return[]},getMeta:function(){return{placement:Fh,section:dv}}})(Rv),kv=function(e){return hb()(e,Object(k.withStyles)(Cb)(Object(Y.c)(Tb,Rb)(function(){var e,t;return t=e=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).render=function(){var e=n.props.classes,a=n.getVisibleErrorItems();return j.createElement("div",null,a&&a.length>0&&j.createElement(pb.a,{className:e.card},j.createElement("div",{className:e.header},j.createElement(Sb.a,null),j.createElement("div",{className:e.headerText},s.a.t("Errors"))),j.createElement("ul",{className:e.list},t.renderErrorItems(a,e))))},n.name="ErrorOutputBuilder",n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getVisibleErrorItems",value:function(){var e=this.props,t=e.errorItems,n=e.errorOnCompleteItems;if(e.saveAttempted){var a=t||[],r=n||[];return[].concat(Object(Xe.a)(a),Object(Xe.a)(r))}return t||[]}}]),t}(j.Component),e.renderErrorItems=function(e,t){return j.createElement("div",null,e.map(function(e){return j.createElement("li",{key:e.id,className:t.listItem},j.createElement(mb.a,{variant:"body1"},e.message))}))},t}())))}(function(e){return hb()(e,Object(k.withStyles)(Eb)(Object(Y.c)(_b,jb)(function(){var e,t;return t=e=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).render=function(){var e=n.props.classes,a=n.getVisibleWarningItems();return j.createElement("div",null,a&&a.length>0&&j.createElement(pb.a,{className:e.card},j.createElement("div",{className:e.header},j.createElement(yb.a,null),j.createElement("div",{className:e.headerText},s.a.t("Warnings"))),j.createElement("ul",{className:e.list},t.renderWarningItems(a,e))))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getVisibleWarningItems",value:function(){var e=this.props,t=e.warningItems,n=e.warningOnCompleteItems;if(e.saveAttempted){var a=t||[],r=n||[];return[].concat(Object(Xe.a)(a),Object(Xe.a)(r))}return t||[]}}]),t}(j.Component),e.renderWarningItems=function(e,t){return j.createElement("div",null,e&&e.map(function(e){return j.createElement("li",{key:e.id,className:t.listItem},j.createElement(mb.a,{variant:"body1"},e.message))}))},t}())))}(function(e){return hb()(e,Object(k.withStyles)(Nb)(Object(Y.c)(kb,Ab)(function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderIndicatorItems=function(e,t){return j.createElement("div",null,e.displayTexts&&e.displayTexts.map(function(e){return j.createElement(On.a,{key:e.id,className:t.listItem,button:!1},j.createElement(mb.a,{variant:"body1"},e.message))}),e.displayKeyValuePairs&&e.displayKeyValuePairs.map(function(e){return j.createElement(On.a,{key:e.id,className:t.listItem,button:!1},j.createElement(mb.a,{variant:"body1",className:t.keyValuePairKey},e.key),j.createElement(mb.a,{variant:"body2"},e.value))}))},n.render=function(){var e=n.props,t=e.indicatorItems,a=e.classes,r=t&&(t.displayTexts||t.displayKeyValuePairs);return j.createElement("div",null,r&&j.createElement(pb.a,{className:a.card},s.a.t("Indicators"),j.createElement(bn.a,{dense:!0},t&&n.renderIndicatorItems(t,a))))},n}return Object(z.a)(t,e),t}(j.Component))))}(function(e){return hb()(e,Object(k.withStyles)(gb)(Object(Y.c)(bb,vb)(function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderFeedbackItems=function(e,t){return j.createElement("div",null,e.displayTexts&&e.displayTexts.map(function(e){return j.createElement(On.a,{key:e.id,className:t.listItem,button:!1},j.createElement(mb.a,{variant:"body1"},e.message))}),e.displayKeyValuePairs&&e.displayKeyValuePairs.map(function(e){return j.createElement(On.a,{key:e.id,className:t.listItem,button:!1},j.createElement(mb.a,{variant:"body1",className:t.keyValuePairKey},e.key),j.createElement(mb.a,{variant:"body2"},e.value))}))},n.render=function(){var e=n.props,t=e.feedbackItems,a=e.classes,r=t&&(t.displayTexts||t.displayKeyValuePairs);return j.createElement("div",null,r&&j.createElement(pb.a,{className:a.card},s.a.t("Feedback"),j.createElement(bn.a,{dense:!0},t&&n.renderFeedbackItems(t,a))))},n}return Object(z.a)(t,e),t}(j.Component))))}(Sg(function(){var e=Hl(gv)(lo()(eu()(tu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldOptions.fieldLabelMediaBasedClass," ").concat(cv.a.dateLabel)}})(Ql()(Po()(nu(Ov)(pl))))))));return{getComponent:function(){return e},getComponentProps:function(e){return yv(e,{width:e&&e.formHorizontal?150:"100%",label:e.formFoundation.getLabel("eventDate"),required:!0,calendarWidth:e.formHorizontal?250:350,popupAnchorPosition:(t=e.formHorizontal,t?"center":"left")});var t},getPropName:function(){return"eventDate"},getValidatorContainers:function(){return Vg()},getMeta:function(){return{placement:Fh,section:dv}}}}())(Nv))))),Av=vg(function(){return{color:"primary"}})(kv),wv=ub(Iv)(function(e){return Object(Y.c)(zg,Yg)(function(e){return function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).getButtonDefinition=function(e){return Hg[e](t.props)},t.getFormHorizontalButtons=function(e,n){var a=[t.getButtonDefinition(Wg.SAVEANDADDANOTHER),t.getButtonDefinition(Wg.SAVEANDEXIT)];return e||!n?a:[t.getButtonDefinition(Wg.FINISH)].concat(a)},t.getFormVerticalButtons=function(e,n,a){var r=a?a.map(function(e){return t.getButtonDefinition(e)}):[t.getButtonDefinition(Wg.SAVEANDEXIT),t.getButtonDefinition(Wg.SAVEANDADDANOTHER)];return e||!n?r:[t.getButtonDefinition(Wg.FINISH)].concat(Object(Xe.a)(r))},t.renderMultiButton=function(e,t,n){var a=e[0],r=e.slice(1);return j.createElement(dn.a,{title:t?"":s.a.t("No write access")},j.createElement("div",null,j.createElement(he,{primary:!0,disabled:!t,onClick:a.onClick,dropDownItems:r},a.text)))},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this,n=this.props,a=n.saveTypes,r=n.dataEntryHasChanges,i=n.hasRecentlyAddedEvents,o=(n.onSave,n.finalInProgress),s=Object(ue.a)(n,["saveTypes","dataEntryHasChanges","hasRecentlyAddedEvents","onSave","finalInProgress"]),c=this.props.formFoundation.access.data.write,l=this.props.formHorizontal?this.getFormHorizontalButtons(r,i):this.getFormVerticalButtons(r,i,a),u=this.renderMultiButton(l,c,o);return j.createElement(e,Object.assign({ref:function(e){t.innerInstance=e},mainButton:u},s))}}]),n}(j.Component)}(e))}(Av)),Pv=Sg(function(){var e=Hl(gv)(lo()(eu()(tu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldOptions.fieldLabelMediaBasedClass," ").concat(cv.a.trueOnlyLabel)}})(Ql()(Po()(nu(Ov)(nl))))))));return{getComponent:function(){return e},getComponentProps:function(e){return yv(e,{label:"Complete event",id:"complete"})},getPropName:function(){return"complete"},getValidatorContainers:function(){return[]},getMeta:function(){return{placement:Lh,section:pv}},getPassOnFieldData:function(){return!0}}}())(wv),Dv=(av={},Object(Wt.a)(av,dv,{placement:Fh,name:s.a.t("Basic info")}),Object(Wt.a)(av,pv,{placement:Lh,name:s.a.t("Status")}),Object(Wt.a)(av,fv,{placement:Lh,name:s.a.t("Comments")}),Object(Wt.a)(av,mv,{placement:Lh,name:s.a.t("Relationships")}),Object(Wt.a)(av,hv,{placement:Lh,name:s.a.t("Assignee")}),av),xv=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).setRelationshipsInstance=function(e){n.relationshipsInstance=e},n.handleSave=function(e,t,a,r){r===Bg.SAVEANDADDANOTHER?(n.props.formHorizontal||n.props.onSetSaveTypes([Bg.SAVEANDADDANOTHER,Bg.SAVEANDEXIT]),n.props.onSaveAndAddAnother(e,t,a)):r===Bg.SAVEANDEXIT&&n.props.onSave(e,t,a)},n.renderHorizontal=function(){var e=n.props.classes;return I.a.createElement("div",{className:e.horizontal},n.renderContent())},n.renderVertical=function(){return I.a.createElement("div",{className:n.props.classes.dataEntryVerticalContainer},n.renderContent())},n.renderContent=function(){var e=n.props,t=e.onUpdateField,a=e.onStartAsyncUpdateField,r=(e.programName,e.orgUnitName,e.classes),i=(e.onSave,e.onSetSaveTypes,e.onSaveAndAddAnother,e.theme,Object(ue.a)(e,["onUpdateField","onStartAsyncUpdateField","programName","orgUnitName","classes","onSave","onSetSaveTypes","onSaveAndAddAnother","theme"]));return I.a.createElement("div",null,I.a.createElement("div",null,I.a.createElement(Pv,Object.assign({id:"singleEvent",onUpdateFormField:t,onUpdateFormFieldAsync:a,onSave:n.handleSave,fieldOptions:n.fieldOptions,dataEntrySections:n.dataEntrySections,relationshipsRef:n.setRelationshipsInstance},i))),I.a.createElement("div",{className:r.savingContextContainer},I.a.createElement(Lu.a,null),I.a.createElement("div",{className:r.savingContextText},n.getSavingText())))},n.fieldOptions={theme:e.theme,fieldLabelMediaBasedClass:e.classes.fieldLabelMediaBased},n.dataEntrySections=Dv,n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentWillMount",value:function(){this.props.onSetSaveTypes(null)}},{key:"componentDidMount",value:function(){this.relationshipsInstance&&this.props.recentlyAddedRelationshipId&&(this.relationshipsInstance.scrollIntoView(),this.props.onScrollToRelationships())}},{key:"componentWillUnmount",value:function(){Gd.clear()}},{key:"getSavingText",value:function(){var e=this.props,t=e.classes,n=e.orgUnitName,a=e.programName,r="".concat(s.a.t("Saving to")," "),i=" ".concat(s.a.t("in")," ");return I.a.createElement("span",null,r,I.a.createElement("span",{className:t.savingContextNames},a),i,I.a.createElement("span",{className:t.savingContextNames},n))}},{key:"render",value:function(){return I.a.createElement("div",null,this.props.formHorizontal?this.renderHorizontal():this.renderVertical())}}]),t}(j.Component),Fv=Object(k.withStyles)(function(e){return{savingContextContainer:{paddingTop:e.typography.pxToRem(10),display:"flex",alignItems:"center",color:e.palette.grey.dark,fontSize:e.typography.pxToRem(13)},savingContextText:{paddingLeft:e.typography.pxToRem(10)},savingContextNames:{fontWeight:"bold"},topButtonsContainer:{display:"flex",flexFlow:"row-reverse"},horizontal:{padding:e.typography.pxToRem(10),paddingTop:e.typography.pxToRem(20),paddingBottom:e.typography.pxToRem(15)},fieldLabelMediaBased:Object(Wt.a)({},e.breakpoints.down(523),{paddingTop:"0px !important"}),dataEntryVerticalContainer:{padding:e.typography.pxToRem(8)}}})(Object(k.withTheme)()(xv)),Lv="post",Uv="update",Mv="delete",Vv="UpdateDataEntryFieldForNewSingleEventActionsBatch",Bv="UpdateFieldForNewSingleEventActionsBatch",Gv="OpenNewEventInDataEntryActionsBatch",Wv="ResetDataEntryForNewEventActionsBatch",Hv="RulesEffectsForNewSingleEventActionsBatch",zv="SaveNewEventAddAnotherBatch",Yv="OpenNewEventInDataEntry",Kv="StartRunRulesOnUpdateForNewSingleEvent",qv="RequestSaveReturnToMainPageForNewSingleEvent",Xv="StartSaveAfterReturnedToMainPage",Zv="StartCancelSaveReturnToMainPageForNewSingleEvent",Jv="CancelSaveNoWorkingListUpdateNeededForSingleEvent",Qv="CancelSaveUpdateWorkingListForSingleNewEvent",$v="SingleNewEventSavedAfterReturnedToMainPage",eO="SaveFailedForNewSingleEventAfterReturnedToMainPage",tO="NewEventInDataEntryOpeningCancel",nO="RequestSaveNewEventAddAnother",aO="startSaveNewEventAddAnother",rO="NewEventSavedAddAnother",iO="SaveFailedForNewEventAddAnother",oO="SetNewEventSaveTypes",sO="ResetDataEntryForNewEvent",cO="AddNewEventNote",lO="NewEventOpenNewRelationship",uO="SaveNewEventRelationshipsIfExists",dO="StartSaveNewEventRelationships",pO="NewEventRelationshipsSaved",fO="SaveFailedForNewEventRelationships",mO="CancelSaveInitializeWorkingListsForSingleNewEvent",hO="StartSaveTeiForNewEventRelationships",gO="TeiForNewEventRelationshipSaved",bO="SaveFailedForNewEventRelationshipTei",vO="NewEventScrolledToRelationships",OO=function(e){return Se(Kv)(e)},yO=function(e){return Se($v)(null,{selections:e})},EO=function(){return Se(Zv)()},_O=function(){return Se(Jv)()},jO=function(){return Se(mO)()},IO=function(){return Se(tO)()},SO=function(e,t,n,a){var r=aO;return Se(aO)({selections:n},{offline:{effect:{url:"events",method:Lv,data:e,clientId:a},commit:{type:uO,meta:{selections:n,relationshipData:t,triggerAction:r}},rollback:{type:iO,meta:{selections:n,clientId:a}}}})},CO=function(e){return Se(rO)(null,{selections:e})},TO=Object(Y.c)(function(){var e=Object(fi.createSelector)(lv,function(e){var t=at.get(e);return t&&t.name||""});return function(t,n){return{recentlyAddedRelationshipId:t.newEventPage.recentlyAddedRelationshipId,ready:!t.newEventPage.dataEntryIsLoading,error:n.formFoundation?null:s.a.t("This is not an event program or the metadata is corrupt. See log for details."),programName:e(t),orgUnitName:t.organisationUnits[t.currentSelections.orgUnitId]&&t.organisationUnits[t.currentSelections.orgUnitId].name}}},function(e){return{onUpdateDataEntryField:function(t){var n=t.payload,a=n.dataEntryId,r=n.itemId,i=xu()();e(Object(He.batchActions)([t,cg(a,r,i),OO(Object(Ie.a)({},t.payload,{uid:i}))],Vv))},onUpdateField:function(t){var n=t.payload,a=n.dataEntryId,r=n.itemId,i=xu()();e(Object(He.batchActions)([t,cg(a,r,i),OO(Object(Ie.a)({},t.payload,{uid:i}))],Bv))},onStartAsyncUpdateField:function(t,n,a){e(function(e,t,n){return Ce(e)({onSuccess:t,onError:n})}(t,function(e){var t=xu()();return Object(He.batchActions)([e,cg(n,a,t),OO(Object(Ie.a)({},e.payload,{dataEntryId:n,itemId:a,uid:t}))],Bv)},function(e){return e}))},onSave:function(t,n,a){window.scrollTo(0,0),e(function(e,t,n){return Se(qv)({eventId:e,dataEntryId:t,formFoundation:n},{skipLogging:["formFoundation"]})}(t,n,a))},onAddNote:function(t,n,a){e(function(e,t,n){return Se(cO)({itemId:e,dataEntryId:t,note:n})}(t,n,a))},onSetSaveTypes:function(t){e(function(e){return Se(oO)({saveTypes:e})}(t))},onSaveAndAddAnother:function(t,n,a){e(function(e,t,n){return Se(nO)({eventId:e,dataEntryId:t,formFoundation:n},{skipLogging:["formFoundation"]})}(t,n,a))},onCancel:function(){window.scrollTo(0,0),e(EO())},onOpenAddRelationship:function(t,n){e(function(e,t){return Se(lO)({eventId:e,dataEntryId:t})}(t,n))},onScrollToRelationships:function(){e(Se(vO)())}}})(We()(Be()(Fv))),RO=n(405),NO=n.n(RO),kO=n(404),AO=n.n(kO),wO=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).getIconClickHandler=function(e,t){return function(){n.props.disabled||t(e)}},n.getActiveIcons=function(e,t){var a=n.props.disabled,r=n.props.classes,i=e===Pc.ASC?AO.a:NO.a,o=j.createElement(i,{className:a?r.iconBase:Ri()(r.iconBase,r.enabledIcon),onClick:n.getIconClickHandler(e===Pc.DESC?Pc.ASC:Pc.DESC,t)});return n.props.disabled?j.createElement("span",null,o):j.createElement(dn.a,{title:s.a.t("Sort"),placement:"bottom",enterDelay:500},j.createElement("span",null,o))},n.getIcons=function(e,t,a){return e?n.getActiveIcons(t,a):j.createElement("div",{style:{width:14,height:14}})},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this;return j.createElement(Fc,Object.assign({onGetIcons:this.getIcons},this.props),e.props.disabled?j.createElement("span",null,e.props.children):j.createElement(dn.a,{title:s.a.t("Sort"),placement:"bottom",enterDelay:500},j.createElement("span",null,e.props.children)))}}]),t}(j.Component),PO=Object(k.withStyles)(function(){return{iconBase:{width:"14px",height:"14px",color:"#3a796f"},enabledIcon:{cursor:"pointer"}}})(wO),DO=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).getPaginationLabelDisplayedRows=function(e,t){return"".concat(e," of ").concat(t)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"renderHeaderRow",value:function(e){var n=this,a=this.props.sortById,r=this.props.sortByDirection,i=e.map(function(e){return I.a.createElement(Nc,{key:e.id,className:Ri()(n.props.classes.cell,n.props.classes.headerCell)},I.a.createElement(PO,{isActive:e.id===a,initialDirection:t.typesWithAscendingInitialDirection.includes(e.type)?Pc.ASC:Pc.DESC,placement:t.typesWithRightPlacement.includes(e.type)?xc:Dc,direction:r,disabled:!0},e.header))});return I.a.createElement(wc,{className:this.props.classes.row},i)}},{key:"renderRows",value:function(e){var n=this,a=this.props.dataSource,r=this.props.classes;if(!a||0===a.length){var i=e.length;return I.a.createElement(wc,{className:r.row},I.a.createElement(Sc,{colSpan:i,className:Ri()(r.cell,r.bodyCell)},this.props.noItemsText||s.a.t("No items to display")))}return a.map(function(a){var i=e.map(function(e){return I.a.createElement(Sc,{key:e.id,className:Ri()(r.cell,r.bodyCell)},I.a.createElement("div",{style:t.typesWithRightPlacement.includes(e.type)?{textAlign:"right"}:null},a[e.id]))});return I.a.createElement(wc,{key:a[n.props.rowIdKey],className:Ri()(r.row,r.dataRow),onClick:function(){return n.props.onRowClick(a)}},i)})}},{key:"render",value:function(){var e=this.props,t=(e.dataSource,e.columns),n=e.classes,a=t?t.filter(function(e){return e.visible}):[];return I.a.createElement("div",{className:n.container},I.a.createElement("div",{className:n.topBarContainer}),I.a.createElement("div",{className:n.tableContainer},I.a.createElement(Lc,{className:n.table},I.a.createElement(Rc,null,this.renderHeaderRow(a)),I.a.createElement(Oc,null,this.renderRows(a)))))}}]),t}(j.Component);DO.defaultProps={rowIdKey:"id"},DO.typesWithAscendingInitialDirection=[ft.TEXT,ft.LONG_TEXT],DO.typesWithRightPlacement=[ft.NUMBER,ft.INTEGER,ft.INTEGER_POSITIVE,ft.INTEGER_NEGATIVE,ft.INTEGER_ZERO_OR_POSITIVE];var xO=Object(k.withStyles)(function(e){return{loaderContainer:{display:"flex",justifyContent:"center"},container:{borderColor:"light"===e.palette.type?Object(Wc.lighten)(Object(Wc.fade)(e.palette.divider,1),.88):Object(Wc.darken)(Object(Wc.fade)(e.palette.divider,1),.8),borderWidth:"1px",borderStyle:"solid"},topBarContainer:{display:"flex",justifyContent:"space-between"},tableContainer:{overflow:"auto"},optionsIcon:{color:e.palette.primary.main},table:{},row:{},dataRow:{cursor:"pointer"},cell:{padding:"".concat(e.spacing.unit/2,"px ").concat(7*e.spacing.unit,"px ").concat(e.spacing.unit/2,"px ").concat(3*e.spacing.unit,"px"),"&:last-child":{paddingRight:3*e.spacing.unit},borderBottomColor:"light"===e.palette.type?Object(Wc.lighten)(Object(Wc.fade)(e.palette.divider,1),.88):Object(Wc.darken)(Object(Wc.fade)(e.palette.divider,1),.8)},bodyCell:{fontSize:e.typography.pxToRem(13),color:e.palette.text.primary},headerCell:{fontSize:e.typography.pxToRem(12),color:e.palette.text.secondary,fontWeight:e.typography.fontWeightMedium}}})(DO),FO=Object(k.withStyles)(function(e){return{container:{borderColor:"light"===e.palette.type?Object(Wc.lighten)(Object(Wc.fade)(e.palette.divider,1),.88):Object(Wc.darken)(Object(Wc.fade)(e.palette.divider,1),.8),borderWidth:"1px",borderStyle:"solid",padding:10,display:"flex",alignItems:"center",justifyContent:"center"}}})(function(e){return I.a.createElement("div",{className:e.classes.container},e.emptyListText||s.a.t("Data for offline list not present"))});function LO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Object.keys(e).reduce(function(a,r){var i=n(r,e[r]);return a[t[r]||r]=i,a},{})}function UO(e){return LO(e,{},function(e,t){var n;switch(e){case"eventDate":case"dueDate":case"completedDate":n=ya(t,ft.DATE);break;case"assignee":n="".concat(t.name," (").concat(t.username,")");break;case"status":n="ACTIVE"===t?s.a.t("Active"):"COMPLETED"===t?s.a.t("Completed"):t;break;default:n=t}return n})}function MO(e){return LO(e,{eventId:"event",programId:"program",programStageId:"programStage",orgUnitId:"orgUnit",trackedEntityInstanceId:"trackedEntityInstance",enrollmentId:"enrollment",assignee:"assignedUser"},function(e,t){var n;switch(e){case"eventDate":case"dueDate":case"completedDate":n=Na(t,ft.DATE);break;case"assignee":n=xn()?t&&t.id:t;break;default:n=t}return n})}var VO="eventDate",BO="status",GO="assignee",WO=function(e,t){return e.workingListsContext[t.listId].programId},HO=function(e,t){return e.workingListsColumnsOrder[t.listId]},zO=function(e,t){return t.events},YO=function(e,t){return t.eventsValues},KO=function(e,t){return e.workingLists[t.listId].order},qO=function(e,t,n){return n.map(function(n){return{event:e[n],eventValues:t[n]}})},XO=Object(fi.createSelectorCreator)(fi.defaultMemoize,function(e,t){return t.every(function(t,n){return t.event===(e[n]&&e[n].event)&&t.eventValues===(e[n]&&e[n].eventValues)})&&e.every(function(e,n){return e.event===(t[n]&&t[n].event)&&e.eventValues===(t[n]&&t[n].eventValues)})}),ZO=function(e){return e},JO=function(e){if(0===e.length)return[];var t=Dt(e[0].event),n=t.stage;return t.error||!n?null:e.map(function(e){var t=n.stageForm.convertValues(e.eventValues,ya),a=UO(e.event);return Object(Ie.a)({},a,t)})},QO=Object(Y.c)(function(){var e=Object(fi.createSelector)(WO,HO,function(e,t){var n=St(e);if(n.error)return t;var a=n.stage.stageForm;return t.map(function(e){if(e.isMainProperty)return e.id===VO?Object(Ie.a)({},e,{header:a.getLabel(VO),type:ft.DATE}):t;var n=a.getElement(e.id);return Object(Ie.a)({},e,{header:n.formName,type:n.type})})}),t=Object(fi.createSelector)(zO,YO,KO,qO),n=XO(ZO,JO);return function(a,r){var i=e(a,r),o=t(a,r),s=a.workingListsMeta[r.listId].sortById,c=a.workingListsMeta[r.listId].sortByDirection;return{columns:i,rowIdKey:"eventId",dataSource:n(o),sortById:s,sortByDirection:c}}},{}),$O=function e(t,n){return Object.keys(t).filter(function(e){return"complete"!==e&&null!=t[e]}).every(function(a){var r=t[a],i=n[a];return"categories"===a?e(t.categories,n.categories):r===i})},ey=Object(Y.c)(function(e,t){var n=e.workingListsContext[t.listId];return{hasData:!(!n||!$O(n,e.currentSelections))}},{})(function(e){var t=e?e(xO):xO;return function(e){var n=e.hasData,a=Object(ue.a)(e,["hasData"]);return n?I.a.createElement(t,a):I.a.createElement(FO,null)}}(QO)),ty=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.listId,n=e.noItemsText,a=e.emptyListText,r=Object(ue.a)(e,["listId","noItemsText","emptyListText"]);return I.a.createElement(ey,Object.assign({listId:t,noItemsText:n||s.a.t("No events to display"),emptyListText:a||s.a.t("Data for offline list not present")},r))}}]),t}(I.a.Component),ny=Object(k.withStyles)(function(e){return{container:{padding:e.typography.pxToRem(20)},header:{paddingBottom:e.typography.pxToRem(10)}}})(function(e){var t=e.classes,n=Object(ue.a)(e,["classes"]),a=e.events?Object.keys(e.events).length:0;return 0===a?null:j.createElement(Ye.a,{className:t.container},j.createElement("div",{className:t.header},"".concat(a," ").concat(s.a.t("events added"))),j.createElement(ty,Object.assign({listId:"recentlyAddedEvents",noItemsText:s.a.t("No events added"),emptyListText:s.a.t("No events added")},n)))}),ay=Object(Y.c)(function(e){return{events:e.recentlyAddedEvents,eventsValues:e.recentlyAddedEventsValues}},function(e){return{onRowClick:function(){}}})(ny),ry=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleGoBackToAllEvents=function(){n.cancelButtonInstance&&n.cancelButtonInstance.handleCancel()},n.setCancelButtonInstance=function(e){n.cancelButtonInstance=e},n.state={discardWarningOpen:!1},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"renderHeader",value:function(){return j.createElement("div",{className:this.props.classes.headerContainer},j.createElement("div",{className:this.props.classes.header},s.a.t("New event")),j.createElement("div",null,this.renderHeaderButtons()))}},{key:"renderHeaderButtons",value:function(){var e=this,t=this.props.formFoundation;return!t||t.customForm?null:j.createElement(le,{onClick:function(){return e.props.onFormLayoutDirectionChange(!e.props.formHorizontal)},secondary:!0},this.props.formHorizontal?s.a.t("Switch to form view"):s.a.t("Switch to row view"))}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.formFoundation,a=e.formHorizontal,r=e.stage;return j.createElement("div",null,j.createElement(le,{className:t.showAllEvents,onClick:this.handleGoBackToAllEvents},j.createElement(Au.a,null),s.a.t("Show all events")),j.createElement(Pu.a,{className:t.dataEntryPaper},this.renderHeader(),j.createElement(TO,{stage:r,cancelButtonRef:this.setCancelButtonInstance,formFoundation:n,formHorizontal:a})),j.createElement(ay,null))}}]),t}(j.Component),iy=gl()(function(e){return{headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},header:Object(Ie.a)({flexGrow:1},e.typography.title,{fontSize:18,fontWeight:500,paddingLeft:8}),dataEntryPaper:{marginBottom:e.typography.pxToRem(10),padding:e.typography.pxToRem(10)},showAllEvents:{marginBottom:10}}})(ry),oy="SetNewEventFormLayoutDirection",sy=function(e){return e.currentSelections.programId},cy=Object(Y.c)(function(){var e=Object(fi.createSelector)(sy,function(e){var t=at.get(e);if(!t)return R.a.error(Object(Ze.b)("programId not found")({method:"getFormFoundation"})),null;var n=t.stage;return n||(R.a.error(Object(Ze.b)("stage not found for program")({method:"getFormFoundation"})),null)});return function(t){var n=e(t),a=n&&n.stageForm?n.stageForm:null;return{stage:n,formFoundation:a,dataEntryHasChanges:Gg(t),formHorizontal:(!a||!a.customForm)&&!!t.newEventPage.formHorizontal}}},function(e){return{onFormLayoutDirectionChange:function(t){e(function(e){return Se(oy)({formHorizontal:e})}(t))}}})(iy),ly="NewEventCancelNewRelationship",uy="AddNewEventRelationship",dy="RecentlyAddedRelationship",py="AddNewEventRelationshipBatch",fy=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).onSelectRelationshipType=function(e){n.props.onSelectRelationshipType({id:e.id,name:e.name,from:Object(Ie.a)({},e.from),to:Object(Ie.a)({},e.to)})},n.renderRelationshipTypes=function(){var e=n.props,t=e.classes,a=e.relationshipTypes;return a?a.map(function(e){return j.createElement("div",{className:Ri()(t.relationshipType,t.relationshipTypeSelectable),key:e.id,role:"button",tabIndex:"0",onClick:function(){return n.onSelectRelationshipType(e)}},e.name)}):[]},n.renderSelectedRelationshipType=function(e){var t=n.props,a=t.classes,r=t.onDeselectRelationshipType;return j.createElement("div",{className:Ri()(a.relationshipType,a.relationshipTypeSelected)},j.createElement("div",{className:a.relationshipTypeSelectedText},j.createElement("div",null,e.name),j.createElement(it.a,{fontSize:"small",onClick:r})))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectedRelationshipType,n=e.classes;return j.createElement("div",{className:n.container},t?this.renderSelectedRelationshipType(t):this.renderRelationshipTypes())}}]),t}(j.Component),my=gl()(function(e){return{relationshipType:{display:"flex",padding:e.typography.pxToRem(10),border:"1px solid ".concat(e.palette.grey.light),borderRadius:e.typography.pxToRem(4),margin:e.typography.pxToRem(10)},relationshipTypeSelectable:{cursor:"pointer"},relationshipTypeSelected:{backgroundColor:"#f0f9f8"},relationshipTypeSelectedText:{paddingLeft:e.typography.pxToRem(5),display:"flex",alignItems:"center",borderLeft:"2px solid #4ca899"},container:{display:"flex"}}})(fy),hy=n(406),gy=n.n(hy),by="TeiSearchRequestFilterOrgUnits",vy="TeiSearchClearOrgUnitsFilter",Oy="TeiSearchFilteredOrgUnitsRetrieved",yy="TeiSearchFilterOrgUnitsFailed",Ey="TeiSearchSetOrgUnitScope",_y="TeiSearchSetOrgUnit",jy=lo()(Hl()(eu()(su()(Ql()(Nl))))),Iy=eu()(su()(ul)),Sy={labelContainerStyle:{paddingTop:12,flexBasis:200},inputContainerStyle:{flexBasis:150}},Cy={labelContainerStyle:{paddingTop:13,flexBasis:200},inputContainerStyle:{flexBasis:150}},Ty=[{name:"All accessible",value:"ACCESSIBLE"},{name:"Selected",value:"SELECTED"}],Ry="Please select an organisation unit",Ny=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).onSelectOrgUnitScope=function(e){e&&n.props.onSelectOrgUnitScope(n.props.searchId,e)},n.onSetOrgUnit=function(e){n.props.onSetOrgUnit(n.props.searchId,e)},n.renderOrgUnitScopeSelector=function(){var e=n.props.selectedOrgUnitScope;return j.createElement(Iy,{options:Ty,label:"Organisation unit scope",styles:Cy,onSelect:n.onSelectOrgUnitScope,value:e})},n.isValid=function(){return"ACCESSIBLE"===n.props.selectedOrgUnitScope||n.props.selectedOrgUnit},n.getErrorMessage=function(){return!n.isValid()&&n.props.searchAttempted?s.a.t(Ry):null},n.handleFilterOrgUnits=function(e){n.props.onFilterOrgUnits(n.props.searchId,e)},n.renderOrgUnitField=function(){var e=n.props,t=e.selectedOrgUnit,a=e.treeRoots,r=e.treeReady,i=e.treeKey,o=e.treeSearchText;return j.createElement(jy,{label:"Organisation unit",styles:Sy,searchText:o,roots:a,ready:r,treeKey:i,onBlur:n.onSetOrgUnit,value:t,validationAttempted:n.props.searchAttempted,errorMessage:n.getErrorMessage(),onSearch:n.handleFilterOrgUnits})},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"validateAndScrollToIfFailed",value:function(){var e=this.isValid();return e||this.goto(),e}},{key:"goto",value:function(){if(this.gotoInstance){this.gotoInstance.scrollIntoView();var e=window.scrollY;e&&window.scroll(0,e-48)}}},{key:"render",value:function(){var e=this,t=this.props.selectedOrgUnitScope;return j.createElement("div",{ref:function(t){e.gotoInstance=t}},this.renderOrgUnitScopeSelector(),"ACCESSIBLE"!==t&&this.renderOrgUnitField())}}]),t}(j.Component),ky=function(e){var t=e.innerRef,n=Object(ue.a)(e,["innerRef"]);return j.createElement(Ny,Object.assign({ref:t},n))},Ay=Object(Y.c)(function(e,t){var n=t.searchId,a=pu(n)||pu("searchRoots");return{selectedOrgUnit:e.teiSearch[n].selectedOrgUnit,selectedOrgUnitScope:e.teiSearch[n].selectedOrgUnitScope,treeRoots:a,treeSearchText:e.teiSearch[n].orgUnitsSearchText,treeReady:!e.teiSearch[n].orgUnitsLoading,treeKey:e.teiSearch[n].orgUnitsSearchText||"initial"}},function(e){return{onFilterOrgUnits:function(t,n){var a=n?function(e,t){return Se(by)({searchId:e,searchText:t})}(t,n):function(e){return Se(vy)({searchId:e})}(t);e(a)},onSetOrgUnit:function(t,n){e(function(e,t){return Se(_y)({searchId:e,orgUnit:t})}(t,n))},onSelectOrgUnitScope:function(t,n){e(function(e,t){return Se(Ey)({searchId:e,orgUnitScope:t})}(t,n))}}})(ky),wy=au()(Ay),Py=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).validNumberOfAttributes=function(){return n.props.attributesWithValuesCount>=n.props.searchGroup.minAttributesRequiredToSearch},n.handleSearchAttempt=function(){var e=n.validateForm(),t=e.error,a=e.isValid;!t&&a?n.props.onSearch(n.props.id,n.props.searchGroupId):n.props.onSearchValidationFailed(n.props.id,n.props.searchGroupId)},n.getUniqueSearchButtonText=function(e){var t=e.getElements()[0].formName;return"Search ".concat(t)},n.renderOrgUnitSelector=function(){return j.createElement(wy,{innerRef:function(e){n.orgUnitSelectorInstance=e},searchId:n.props.searchId,searchAttempted:n.props.searchAttempted})},n.renderMinAttributesRequired=function(){var e=n.props,t=e.classes,a=e.searchAttempted,r=e.searchGroup,i=a&&!n.validNumberOfAttributes(),o=Ri()(t.minAttributesRequired,Object(Wt.a)({},t.minAttribtuesRequiredInvalid,i));return j.createElement("div",{className:o},s.a.t("Fill in at least {{minAttributesRequired}} attributes to search",{minAttributesRequired:r.minAttributesRequiredToSearch}))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"validateForm",value:function(){if(!this.formInstance)return R.a.error(Object(Ze.b)(t.errorMessages.SEARCH_FORM_MISSING)({Search:this})),{error:!0,isValid:!1};var e=this.formInstance.validateFormScrollToFirstFailedField({});return e&&!this.props.searchGroup.unique&&(e=this.orgUnitSelectorInstance.validateAndScrollToIfFailed()),e&&!this.props.searchGroup.unique&&(e=this.validNumberOfAttributes()),{isValid:e,error:!1}}},{key:"render",value:function(){var e=this,n=this.props,a=n.searchGroup,r=n.classes,i=(n.searchGroupId,n.onSearch,n.searchId,n.onSearchValidationFailed,n.searchAttempted,n.attributesWithValuesCount,Object(ue.a)(n,["searchGroup","classes","searchGroupId","onSearch","searchId","onSearchValidationFailed","searchAttempted","attributesWithValuesCount"])),o=a&&a.searchForm;if(!o)return j.createElement("div",null,t.errorMessages.SEARCH_FORM_MISSING);var c=a.unique?this.getUniqueSearchButtonText(o):s.a.t("Search by attributes");return j.createElement("div",{className:r.container},j.createElement(xh,Object.assign({formRef:function(t){e.formInstance=t},formFoundation:a.searchForm},i)),!a.unique&&this.renderOrgUnitSelector(),j.createElement("div",{className:r.searchButtonContainer},j.createElement(le,{onClick:this.handleSearchAttempt},c),!a.unique&&this.renderMinAttributesRequired()))}}]),t}(j.Component);Py.errorMessages={NO_ITEM_SELECTED:"No item selected",SEARCH_FORM_MISSING:"search form is missing. see log for details"};var Dy=Object(k.withStyles)(function(e){return{orgUnitSection:{backgroundColor:"white",padding:e.typography.pxToRem(8),maxWidth:e.typography.pxToRem(892)},searchButtonContainer:{padding:e.typography.pxToRem(10),display:"flex",alignItems:"center"},minAttributesRequired:{flexGrow:1,textAlign:"right",fontSize:e.typography.pxToRem(14)},minAttribtuesRequiredInvalid:{color:e.palette.error.main}}})(Py),xy=function(e,t){var n=e.formsValues[t]||{};return Object.keys(n).filter(function(e){return n[e]}).length},Fy=Object(Y.c)(function(e,t){var n=t.searchId,a=t.id;return{searchAttempted:(e.teiSearch[n]&&e.teiSearch[n][a]?e.teiSearch[n][a]:{}).validationFailed,attributesWithValuesCount:xy(e,a)}},function(){return{}})(Dy),Ly=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderDefaultResultsView=function(){return j.createElement("div",null,n.props.resultsLoading&&j.createElement(D,null))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.getResultsView,n=Object(ue.a)(e,["getResultsView"]);return j.createElement("div",null,j.createElement("div",null,t?t(n):this.renderDefaultResultsView()))}}]),t}(j.Component),Uy=Object(Y.c)(function(e,t){var n=e.teiSearch[t.id]||{},a=n.searchResults||{},r=e.formsValues[a.formId],i=t.searchGroups[parseInt(a.searchGroupId)];return{resultsLoading:a.resultsLoading,teis:a.teis||[],paging:a.paging,searchValues:r,searchProgramId:n.selectedProgramId,searchGroup:i}},function(){return{}})(Ly),My=eu()(su()(hn)),Vy={labelContainerStyle:{paddingTop:12,flexBasis:200},inputContainerStyle:{flexBasis:150}},By=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).onSelectProgram=function(e){n.props.onSetProgram(n.props.searchId,e)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return j.createElement(My,{styles:Vy,options:this.props.programOptions,onSelect:this.onSelectProgram,label:s.a.t("Selected program"),value:this.props.selectedProgramId})}}]),t}(j.Component),Gy="TeiSearchStartSetProgram",Wy=function(e,t){return e.teiSearch[t.searchId].selectedTrackedEntityTypeId},Hy=Object(Y.c)(function(){var e=Object(fi.createSelector)(Wy,function(e){return Array.from(at.values()).filter(function(t){return t instanceof en&&t.trackedEntityType.id===e&&t.access.data.read}).map(function(e){return{value:e.id,label:e.name}})});return function(t,n){return{selectedProgramId:t.teiSearch[n.searchId].selectedProgramId,programOptions:e(t,n)}}},function(e){return{onSetProgram:function(t,n){e(function(e,t){return Se(Gy)({searchId:e,programId:t})}(t,n))}}})(By),zy=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).getFormId=function(e){var t=n.props.selectedProgramId||n.props.selectedTrackedEntityTypeId||"";return"".concat(n.props.id,"-").concat(t,"-").concat(e)},n.handleSearch=function(e,t){var a=n.props.id;n.props.onSearch(e,t,a)},n.handleSearchResultsChangePage=function(e){n.props.onSearchResultsChangePage(n.props.id,e)},n.handleNewSearch=function(){n.props.onNewSearch(n.props.id)},n.handleEditSearch=function(){n.props.onEditSearch(n.props.id)},n.handleSearchValidationFailed=function(){for(var e,t=n.props.id,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];(e=n.props).onSearchValidationFailed.apply(e,r.concat([t]))},n.renderSearchForms=function(e){return j.createElement("div",null,n.renderProgramSection(),n.renderSearchGroups(e))},n.renderProgramSection=function(){var e=!n.state.programSectionOpen;return j.createElement(Mu,{className:n.props.classes.programSection,isCollapsed:e,header:j.createElement(Bu,{containerStyle:{borderBottom:"1px solid #ECEFF1"},isCollapsed:e,onChangeCollapseState:function(){n.setState({programSectionOpen:!!e})},title:s.a.t("Program")})},j.createElement(Hy,{searchId:n.props.id}))},n.onChangeSectionCollapseState=function(e){n.props.openSearchGroupSection!==e?n.props.onSetOpenSearchGroupSection(n.props.id,e):n.props.onSetOpenSearchGroupSection(n.props.id,null)},n.renderSearchGroups=function(e){return e.map(function(e,t){var a=t.toString(),r=n.getFormId(a),i=e.unique?s.a.t("Search {{uniqueAttrName}}",{uniqueAttrName:e.searchForm.getElements()[0].formName}):s.a.t("Search by attributes"),o=n.props.openSearchGroupSection!==a;return j.createElement(Mu,{key:r,isCollapsed:o,className:n.props.classes.formContainerSection,header:j.createElement(Bu,{containerStyle:{borderBottom:"1px solid #ECEFF1"},onChangeCollapseState:function(){n.onChangeSectionCollapseState(a)},isCollapsed:o,title:i})},j.createElement(Fy,{id:r,searchId:n.props.id,searchGroupId:a,searchGroup:e,onSearch:n.handleSearch,onSearchValidationFailed:n.handleSearchValidationFailed}))})},n.renderSearchResult=function(){var e=n.props,t=(e.onSearch,e.showResults,e.onNewSearch,e.onEditSearch,e.onSearchResultsChangePage,e.classes,Object(ue.a)(e,["onSearch","showResults","onNewSearch","onEditSearch","onSearchResultsChangePage","classes"]));return j.createElement(Uy,Object.assign({onChangePage:n.handleSearchResultsChangePage,onNewSearch:n.handleNewSearch,onEditSearch:n.handleEditSearch},t))},n.state={programSectionOpen:!0},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.searchGroups;return this.props.showResults?this.renderSearchResult():e?this.renderSearchForms(e):j.createElement("div",null)}}]),t}(j.Component),Yy=gl()(function(e){return{programSection:{backgroundColor:"white",maxWidth:e.typography.pxToRem(900),marginBottom:e.typography.pxToRem(20)},formContainerSection:{maxWidth:e.typography.pxToRem(900),marginBottom:e.typography.pxToRem(20)}}})(zy),Ky="BatchSetTeiSearchProgramAndTet",qy="ResetSearchForms",Xy="InitializeTeiSearch",Zy="RequestSearchTei",Jy="SearchFormValidationFailed",Qy="SearchTeiFailed",$y="SearchTeiResultRetrieved",eE="SetTeiSearchProgramAndTet",tE="TeiNewSearch",nE="TeiEditSearch",aE="TeiSearchResultsChangePage",rE="TeiSearchSetOpenSearchGroupSection",iE=function(e,t,n){return Se(Xy)({searchId:e,programId:t,trackedEntityTypeId:n})},oE=function(e,t,n){return Se(eE)({searchId:e,programId:t,trackedEntityTypeId:n})};function sE(e,t){return t?kt(t).searchGroups:Gt(e).searchGroups}var cE=function(e,t){return e.teiSearch[t.id].selectedTrackedEntityTypeId},lE=function(e,t){return e.teiSearch[t.id].selectedProgramId},uE=Object(Y.c)(function(){var e=Object(fi.createSelector)(cE,lE,function(e,t){return sE(e,t).sort(function(e,t){return e.unique===t.unique?0:e.unique?-1:1})});return function(t,n){var a=e(t,n),r=t.teiSearch[n.id];return{searchGroups:a,showResults:!!r.searchResults,selectedProgramId:r.selectedProgramId,selectedTrackedEntityTypeId:r.selectedTrackedEntityTypeId,openSearchGroupSection:r.openSearchGroupSection}}},function(e){return{onSearch:function(t,n,a){e(function(e,t,n){return Se(Zy)({formId:e,searchGroupId:t,searchId:n})}(t,n,a))},onSearchResultsChangePage:function(t,n){e(function(e,t){return Se(aE)({searchId:e,pageNumber:t})}(t,n))},onSearchValidationFailed:function(t,n,a){e(function(e,t,n){return Se(Jy)({formId:e,searchGroupId:t,searchId:n})}(t,n,a))},onNewSearch:function(t){e(function(e){return Se(tE)({searchId:e})}(t))},onEditSearch:function(t){e(function(e){return Se(nE)({searchId:e})}(t))},onSetOpenSearchGroupSection:function(t,n){e(function(e,t){return Se(rE)({searchId:e,searchGroupId:t})}(t,n))}}})(Yy),dE=n(311),pE=n.n(dE),fE=n(313),mE=n.n(fE),hE=n(312),gE=n.n(hE),bE=n(310),vE=n.n(bE),OE=function(e){return{root:{flexShrink:0,color:e.palette.text.secondary}}},yE=function(){return function(e){return Object(k.withStyles)(OE,{withTheme:!0})(function(e){return function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).handleFirstPageButtonClick=function(){t.props.onChangePage(1)},t.handleBackButtonClick=function(){t.props.onChangePage(t.props.currentPage-1)},t.handleNextButtonClick=function(){t.props.onChangePage(t.props.currentPage+1)},t.handleLastPageButtonClick=function(){t.props.onChangePage(Math.max(1,Math.ceil(t.props.rowsCount/t.props.rowsPerPage)))},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"renderNavigationElement",value:function(){var e=this.props,t=e.rowsPerPage,n=e.currentPage,a=e.rowsCount,r=e.classes,i=e.theme;return j.createElement("div",{className:r.root},j.createElement(be.a,{onClick:this.handleFirstPageButtonClick,disabled:n<=1,"aria-label":"First Page"},"rtl"===i.direction?j.createElement(vE.a,null):j.createElement(pE.a,null)),j.createElement(be.a,{onClick:this.handleBackButtonClick,disabled:n<=1,"aria-label":"Previous Page"},"rtl"===i.direction?j.createElement(gE.a,null):j.createElement(mE.a,null)),j.createElement(be.a,{onClick:this.handleNextButtonClick,disabled:n>=Math.ceil(a/t),"aria-label":"Next Page"},"rtl"===i.direction?j.createElement(mE.a,null):j.createElement(gE.a,null)),j.createElement(be.a,{onClick:this.handleLastPageButtonClick,disabled:n>=Math.ceil(a/t),"aria-label":"Last Page"},"rtl"===i.direction?j.createElement(pE.a,null):j.createElement(vE.a,null)))}},{key:"render",value:function(){var t=this.props,n=(t.classes,t.theme,Object(ue.a)(t,["classes","theme"]));return j.createElement(e,Object.assign({navigationElements:this.renderNavigationElement()},n))}}]),n}(j.Component)}(e))}},EE=function(e){return e.selectedTrackedEntityTypeId},_E=function(e){return e.selectedProgramId},jE=function(){return Object(fi.createSelector)(_E,EE,function(e,t){return e?kt(e).attributes.filter(function(e){return e.displayInReports}):Gt(t).attributes.filter(function(e){return e.displayInReports})})},IE=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderImageDataElement=function(e){var t=n.props,a=t.item,r=t.classes,i=a.values[e.id];return j.createElement("div",{className:r.imageContainer},i&&j.createElement(Ol.a,{src:i.url,alt:i.name,className:r.image}))},n.renderChunks=function(e){return e.map(function(e,t){return j.createElement(Ol.g,{item:!0,xs:12,md:6,lg:3,key:t.toString()},n.renderChunkValues(e))})},n.renderChunkValues=function(e){var t=n.props,a=t.item,r=t.classes;return e.map(function(e){return j.createElement("div",{key:e.id,className:r.value},j.createElement("span",{className:r.elementName},e.name,":"),j.createElement("span",null,e.convertValue(a.values[e.id],ya)))})},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.classes,a=e.imageDataElement,r=e.dataElementChunks,i=e.getCustomTopElements,o=e.getCustomBottomElements;return j.createElement("div",{key:t.id,className:n.itemContainer},i&&i(this.props),j.createElement("div",{className:n.itemDataContainer},a&&this.renderImageDataElement(a),j.createElement("div",{className:n.itemValuesContainer},this.renderChunks(r))),o&&o(this.props))}}]),t}(j.Component),SE=Object(k.withStyles)(function(e){return{itemContainer:{display:"flex",margin:e.typography.pxToRem(10),padding:e.typography.pxToRem(10),borderRadius:e.typography.pxToRem(4),border:"2px solid ".concat(e.palette.grey.light),backgroundColor:e.palette.grey.lighter,flexDirection:"column"},itemDataContainer:{display:"flex",flexWrap:"wrap"},itemValuesContainer:{display:"flex",flexWrap:"wrap",flexGrow:1},value:{padding:e.typography.pxToRem(2)},elementName:{paddingRight:e.typography.pxToRem(10),fontWeight:500},image:{width:e.typography.pxToRem(60),height:e.typography.pxToRem(60)},imageContainer:{margin:e.typography.pxToRem(6),minWidth:e.typography.pxToRem(70)}}})(IE),CE=function(e){return e.dataElements},TE=function(){return Object(fi.createSelector)(CE,function(e){var t=Object(Xe.a)(e),n=e.find(function(e){return e.type===ft.IMAGE});return n&&t.splice(t.indexOf(n),1),{dataElementChunks:Object(Ze.a)(e,5),imageDataElement:n}})},RE=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).renderLoading=function(){return j.createElement("div",{className:n.props.classes.loadingContainer},j.createElement(Ge,null))},n.renderItems=function(){var e=n.props,t=e.items,a=e.getCustomItemBottomElements,r=e.getCustomItemTopElements;if(!t||0===t.length)return n.renderNoItems();var i=n.getDataElementsContainer(n.props);return t.map(function(e,t){return j.createElement(SE,Object.assign({key:t,item:e,getCustomTopElements:r,getCustomBottomElements:a},i))})},n.renderNoItems=function(){var e=n.props,t=e.classes,a=e.noItemsText;return j.createElement("div",{className:t.noItemsContainer},a)},n.getDataElementsContainer=TE(),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.itemsLoading;return j.createElement("div",null,e?this.renderLoading():this.renderItems())}}]),t}(j.Component);RE.defaultProps={itemTypeName:"item"};var NE,kE=Object(k.withStyles)(function(e){return{noItemsContainer:{fontStyle:"italic",padding:e.typography.pxToRem(10)}}})(RE),AE=Object(Ze.d)(Ua,ya),wE=yE()(kc),PE=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).onAddRelationship=function(e){n.props.onAddRelationship(e.id,e.values)},n.getItemActions=function(e){var t=n.props.classes;return j.createElement("div",{className:t.itemActionsContainer},j.createElement(le,{color:"primary",onClick:function(){return n.onAddRelationship(e.item)}},s.a.t("Link")))},n.renderResults=function(){var e=n.getAttributes(n.props),t=n.props,a=t.teis,r=t.trackedEntityTypeName;return j.createElement(j.Fragment,null,n.renderTopSection(),j.createElement(kE,{items:a,dataElements:e,noItemsText:s.a.t("No {{trackedEntityTypeName}} found.",{trackedEntityTypeName:r}),getCustomItemBottomElements:function(e){return n.getItemActions(e)}}),n.renderPager())},n.getSearchValues=function(){var e=n.props,t=e.searchValues,a=e.searchGroup,r=e.teis,i=e.classes,o=a.searchForm,c=Object.keys(t).filter(function(e){return null!==t[e]}).map(function(e){var n=o.getElement(e),a=t[e],r=n.convertValue(a,AE);return j.createElement("span",{key:e},n.formName,": ",r)}).reduce(function(e,t){return e.length>0?[].concat(Object(Xe.a)(e),[", ",t]):[" ",t]},[]),l=s.a.t("{{teiCount}} results found for",{teiCount:r.length});return j.createElement("div",{className:i.topSectionValuesContainer},l,c)},n.renderTopSection=function(){var e=n.props,t=e.onNewSearch,a=e.onEditSearch,r=e.classes;return j.createElement("div",{className:r.topSection},n.getSearchValues(),j.createElement("div",{className:r.topSectionActionsContainer},j.createElement(le,{className:r.actionButton,onClick:t},s.a.t("New search")),j.createElement(le,{className:r.actionButton,onClick:a},s.a.t("Edit search"))))},n.renderPager=function(){var e=n.props,t=e.onChangePage,a=e.paging,r=e.classes;return j.createElement("div",{className:r.pagination},j.createElement(wE,Object.assign({onChangePage:t,onGetLabelDisplayedRows:function(e,t){return"".concat(e," of ").concat(t)}},a)))},n.getAttributes=jE(),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return j.createElement("div",null,this.props.resultsLoading?j.createElement(D,null):this.renderResults())}}]),t}(j.Component),DE=Object(k.withStyles)(function(e){return{itemActionsContainer:{padding:e.typography.pxToRem(10)},pagination:{display:"flex",justifyContent:"flex-end"},topSection:{display:"flex",flexDirection:"column",margin:e.typography.pxToRem(10),backgroundColor:e.palette.grey.lighter},topSectionValuesContainer:{padding:e.typography.pxToRem(10)},topSectionActionsContainer:{},actionButton:{margin:e.typography.pxToRem(10),color:e.palette.primary.dark,borderRadius:0,border:"1px solid ".concat(e.palette.primary.dark)}}})(PE),xE=function(e){return e.selectedRelationshipType.to.trackedEntityTypeId},FE=function(){return Object(fi.createSelector)(xE,function(e){return Gt(e)})},LE={TEI_SEARCH:"TEI_SEARCH",TEI_REGISTER:"TEI_REGISTER"},UE=(NE={},Object(Wt.a)(NE,LE.TEI_SEARCH,s.a.t("Search")),Object(Wt.a)(NE,LE.TEI_REGISTER,s.a.t("Register")),NE),ME=s.a.t("tracked entity instance");function VE(e,t,n){var a=Object.keys(e),r=t.filter(function(e){return a.some(function(t){return t===e.id})&&e.displayInReports});return 0===r.length?n||ME:r.slice(0,2).map(function(t){return t.convertValue(e[t.id],Sa)}).join(" ")}var BE=function(e){return e.newRelationshipRegisterTei.programId},GE=new(function(){function e(){Object(B.a)(this,e)}return Object(G.a)(e,[{key:"convertText",value:function(e){return e||""}},{key:"convertLongText",value:function(e){return e||""}},{key:"convertLetter",value:function(e){return e||""}},{key:"convertPhoneNumber",value:function(e){return e||""}},{key:"convertEmail",value:function(e){return e||""}},{key:"convertBoolean",value:function(e){return e||!1===e?e:""}},{key:"convertTrueOnly",value:function(e){return e||!1===e?e:""}},{key:"convertDate",value:function(e){if(!e)return"";var t=De(e);return t.locale("en"),t.format("YYYY-MM-DD")}},{key:"convertDateTime",value:function(e){return e||""}},{key:"convertTime",value:function(e){return e||""}},{key:"convertNumber",value:function(e){return e||0===e?e:""}},{key:"convertInteger",value:function(e){return e||0===e?e:""}},{key:"convertIntegerPositive",value:function(e){return e||0===e?e:""}},{key:"convertIntegerNegative",value:function(e){return e||0===e?e:""}},{key:"convertIntegerZeroOrPositive",value:function(e){return e||0===e?e:""}},{key:"convertPercentage",value:function(e){return e||0===e?e:""}},{key:"convertUrl",value:function(e){return e||""}},{key:"convertAge",value:function(e){return this.convertDate(e)}}]),e}()),WE=new(function(){function e(){Object(B.a)(this,e)}return Object(G.a)(e,[{key:"convertText",value:function(e){return e}},{key:"convertLongText",value:function(e){return e}},{key:"convertLetter",value:function(e){return e}},{key:"convertPhoneNumber",value:function(e){return e}},{key:"convertEmail",value:function(e){return e}},{key:"convertBoolean",value:function(e){return e}},{key:"convertTrueOnly",value:function(e){return e}},{key:"convertDate",value:function(e){return e?da(l()(e,"YYYY-MM-DD")):e}},{key:"convertDateTime",value:function(e){if(!e)return null;var t=l()(e);return{date:da(t),time:t.format("HH:mm")}}},{key:"convertTime",value:function(e){return e}},{key:"convertNumber",value:function(e){return e.toString()}},{key:"convertInteger",value:function(e){return e.toString()}},{key:"convertIntegerPositive",value:function(e){return e.toString()}},{key:"convertIntegerNegative",value:function(e){return e.toString()}},{key:"convertIntegerZeroOrPositive",value:function(e){return e.toString()}},{key:"convertPercentage",value:function(e){return e.toString()}},{key:"convertUrl",value:function(e){return e}},{key:"convertAge",value:function(e){if(!e)return null;var t=l()(),n=l()(e,"YYYY-MM-DD"),a=t.diff(n,"years");n.add(a,"years");var r=t.diff(n,"months");n.add(r,"months");var i=t.diff(n,"days");return{date:da(l()(e,"YYYY-MM-DD")),years:a.toString(),months:r.toString(),days:i.toString()}}}]),e}()),HE=new(function(){function e(){Object(B.a)(this,e)}return Object(G.a)(e,[{key:"rulesDateToMoment",value:function(e){return l()(e,"YYYY-MM-DD")}},{key:"momentToRulesDate",value:function(e){return e.format("YYYY-MM-DD")}}]),e}()),zE={PROGRAM_NOT_FOUND:"Program not found in loadAndExecuteRulesForEvent",PROGRAMSTAGE_NOT_FOUND:"ProgramStage not found",PROGRAM_OR_FOUNDATION_MISSING:"Program or foundation missing"};function YE(e){var t,n,a=[];return e instanceof en&&(t=e,a=Array.from(t.stages.values()).reduce(function(e,t){var n=Array.from(t.stageForm.sections.values()).reduce(function(e,t){return[].concat(Object(Xe.a)(e),Object(Xe.a)(Array.from(t.elements.values())))},[]);return[].concat(Object(Xe.a)(e),Object(Xe.a)(n))},[])),e instanceof Zt&&(a=(n=e).stage?Array.from(n.stage.stageForm.sections.values()).reduce(function(e,t){return[].concat(Object(Xe.a)(e),Object(Xe.a)(Array.from(t.elements.values())))},[]):[]),function(e){return e.reduce(function(e,t){return e[t.id]={id:t.id,valueType:t.type,optionSetId:t.optionSet&&t.optionSet.id},e},{})}(a)}function KE(e,t,n,a,r,i,o){if(!t||!n)return R.a.error(Object(Ze.b)(zE.PROGRAM_OR_FOUNDATION_MISSING)({program:t,foundation:n,method:"getRulesActionsForEvent"})),null;var s=function(e,t){var n=e.programRuleVariables,a=e.programRules,r=t.programRules;return{programRulesVariables:n,programRules:[].concat(Object(Xe.a)(a),Object(Xe.a)(r)),constants:rn.get()}}(t,n);return s.programRules&&0!==s.programRules.length?function(e,t,n,a,r,i,o){return e.executeRules(t,i,o,n,null,null,null,a,r,Gm.EVENT)}(e,s,YE(t),r,an.get(),i,o):null}var qE={PROGRAM_MISSING_OR_INVALID:"Program is missing or is invalid",FOUNDATION_MISSING:"Foundation missing"};function XE(e,t,n,a,r,i,o){var s=function(e,t){return e?t&&t instanceof en?null:qE.PROGRAM_MISSING_OR_INVALID:qE.FOUNDATION_MISSING}(n,t);if(s)return R.a.error(Object(Ze.b)(s)({program:t,method:"getRulesActionsForTEI"})),null;var c=function(e){return{programRulesVariables:e.programRuleVariables.filter(function(e){return"TEI_ATTRIBUTE"===e.programRuleVariableSourceType}),programRules:e.programRules,constants:rn.get()}}(t);return c.programRules&&0!==c.programRules.length?function(e,t,n,a,r,i,o){return e.executeRules(t,null,null,null,i,o,n,a,r,Gm.TEI)}(e,c,function(e){var t=e.enrollment.enrollmentForm;return(t?Array.from(t.sections.values()).reduce(function(e,t){return[].concat(Object(Xe.a)(e),Object(Xe.a)(Array.from(t.elements.values())))},[]):[]).reduce(function(e,t){return e[t.id]={id:t.id,valueType:t.type,optionSetId:t.optionSet&&t.optionSet.id},e},{})}(t),r,an.get(),i,o):null}function ZE(e,t,n,a){var r=function(e){return e?Object.keys(e).map(function(t){var n=e[t],a=n[n.length-1];return{id:a.id,value:a.value}}):[]}(e),i=function(e){return e?Object.keys(e).map(function(e){return{id:e,value:null}}):[]}(t),o=function(e,t){return e?Object.keys(e).map(function(e){var n=t.getSection(e);return n?Array.from(n.elements.entries()).map(function(e){return e[1]}).map(function(e){return{id:e.id,value:null}}):null}).filter(function(e){return e}).reduce(function(e,t){return[].concat(Object(Xe.a)(e),Object(Xe.a)(t))},[]):[]}(n,a);return[].concat(Object(Xe.a)(r),Object(Xe.a)(i),Object(Xe.a)(o)).reduce(function(e,t){return e[t.id]=t.value,e},{})}function JE(e,t){if(!e||!t)return null;var n=e.reduce(function(e,t){var n=t.type;e[n]=e[n]||{};var a=t.id;return e[n][a]=e[n][a]||[],e[n][a].push(t),e},{});return n[Wm.HIDE_FIELD]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return e?Object.keys(e).filter(function(e){var a=n.getElement(e),r=a&&a.compulsory,i=t[e];return!(r||i)}).reduce(function(t,n){return t[n]=e[n],t},{}):e}(n[Wm.HIDE_FIELD],n[Wm.MAKE_COMPULSORY],t),n[Wm.HIDE_SECTION]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return e?Object.keys(e).filter(function(e){var a=n.getSection(e);return!!a&&!Array.from(a.elements.entries()).map(function(e){return e[1]}).some(function(e){var n=e.compulsory,a=t[e.id];return n||a})}).reduce(function(t,n){return t[n]=e[n],t},{}):e}(n[Wm.HIDE_SECTION],n[Wm.MAKE_COMPULSORY],t),n[Wm.ASSIGN_VALUE]=ZE(n[Wm.ASSIGN_VALUE],n[Wm.HIDE_FIELD],n[Wm.HIDE_SECTION],t),n}var QE=new Km(GE,HE,s.a.t,WE);function $E(e,t,n){var a=JE(e,t);return[Jm(a,n)]}function e_(e,t,n,a,r,i){return $E(KE(QE,e,t,0,a,r,i),t,n)}function t_(e,t,n,a,r,i){return $E(XE(QE,e,t,0,a,r,i),t,n)}function n_(e,t){return t.convertValues(e,Ua)}var a_=function(e){return Function("return ".concat(e))()};function r_(e,t,n,a){return e?Object.keys(e).reduce(function(r,i){var o=t[i]&&t[i].type,s=t[i]&&t[i].onConvertOut;if(t[i]&&t[i].clientIgnore)return r;if(o){var c=e[i];r[i]=Ua(c,o)}else if(s){var l=t[i]&&t[i].clientId,u=e[i],d=n[l],p=a_(s);r[l]=p(u,d,a)}else r[i]=e[i];return r},{}):null}function i_(e,t,n,a){var r,i,o=e.formsValues[n]||{},s=a?Object(Ie.a)({},o,Object(Wt.a)({},a.elementId,a.value)):o,c=function(e,t){var n=Object.keys(e).filter(function(e){return e.startsWith(t)}).reduce(function(t,n){return t=Object(Ie.a)({},t,e[n])},{});return Object.keys(n).reduce(function(e,t){return e[t]=n[t].valid,e},{})}(e.formsSectionsFieldsUI,n),l=a?Object(Ie.a)({},c,Object(Wt.a)({},a.elementId,a.valid)):c;return function(e,t){return n_(e,t)}((r=s,i=l,Object.keys(r).reduce(function(e,t){var n=i[t];return e[t]=n?r[t]:null,e},{})),t)}function o_(e,t,n,a,r){var i,o="".concat(n,"-").concat(t),s=e.dataEntriesFieldsUI[o],c=(i=s,Object.keys(i).reduce(function(e,t){return e[t]=i[t].isValid,e},{}));return r_(function(e,t){return Object.keys(e).reduce(function(n,a){return n[a]=t[a]?e[a]:null,n},{})}(e.dataEntriesFieldsValue[o],c),e.dataEntriesFieldsMeta[o],a,r)}var s_="StartRunRulesOnUpdateForNewEnrollment",c_=function(e,t,n,a,r){return Se(s_)({innerPayload:e,searchActions:t,uid:n,programId:a,orgUnit:r},{skipLogging:["searchActions"]})},l_="RulesExecutedPostUpdateFieldForEnrollment",u_="UpdateFieldNewEnrollmentActionBatch",d_="UpdateDataEntryFieldNewEnrollmentActionBatch",p_=function(e,t,n,a,r,i,o,s){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],l=arguments.length>9?arguments[9]:void 0,u=[];return e&&t&&(u=t_(e,t,n,i,o,s)),Object(He.batchActions)([].concat(Object(Xe.a)(u),[lg(a,r,l)],Object(Xe.a)(c)),l_)},f_=n(329),m_=n.n(f_),h_=function(e){return[{validator:Di,message:s.a.t("A value is required")},{validator:function(t){return function(e,t){var n=la(e);if(!n.isValid)return!1;if(t)return!0;var a=n.momentDate,r=De();return{valid:a.isSameOrBefore(r),message:s.a.t("A future date is not allowed")}}(t,e)},message:s.a.t("Please provide a valid date")}]},g_=function(e){return[{validator:Di,message:s.a.t("A value is required")},{validator:function(t){return function(e,t){var n=la(e);if(!n.isValid)return!1;if(t)return!0;var a=n.momentDate,r=De();return{valid:a.isSameOrBefore(r),message:s.a.t("A future date is not allowed")}}(t,e)},message:s.a.t("Please provide a valid date")}]},b_="enrollment",v_={errorMessage:"validationError"},O_={labelContainerStyle:{flexBasis:200},inputContainerStyle:{flexBasis:150}},y_={labelContainerStyle:{width:150},inputContainerStyle:{width:150}};function E_(e){e.formHorizontal,e.fieldOptions,e.validationError,e.modified;return Object(ue.a)(e,["formHorizontal","fieldOptions","validationError","modified"])}var __=function(e,t){return Object(Ie.a)({},function(e){return{fieldOptions:e.fieldOptions,formHorizontal:e.formHorizontal,styles:e.formHorizontal?y_:O_}}(e),t)},j_=function(e){return e?"center":"left"},I_=Hl(v_)(lo()(eu()(tu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldOptions.fieldLabelMediaBasedClass," ").concat(m_.a.coordinateLabel)}})(Ql()(Po()(nu(E_)(vl)))))))),S_=Hl(v_)(lo()(eu()(tu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldOptions.fieldLabelMediaBasedClass," ").concat(m_.a.polygonLabel)}})(Ql()(Po()(nu(E_)(El)))))))),C_=function(e){return e?Ro.VERTICAL:Ro.HORIZONTAL},T_=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentWillUnmount",value:function(){Gd.clear()}},{key:"render",value:function(){var e=this.props,n=e.enrollmentMetadata,a=(e.programId,Object(ue.a)(e,["enrollmentMetadata","programId"]));return I.a.createElement(fg,Object.assign({dataEntrySections:t.dataEntrySectionDefinitions},a,{formFoundation:n.enrollmentForm}))}}]),t}(I.a.Component);T_.dataEntrySectionDefinitions=Object(Wt.a)({},b_,{placement:Fh,name:s.a.t("Enrollment")});var R_=Mb(function(e){return e.enrollmentMetadata.inputSearchGroups},function(e){return Object(Ie.a)({},e.onGetValidationContext(),{trackedEntityType:e.enrollmentMetadata.trackedEntityType.id,program:e.programId})})(T_),N_=Xg({isApplicable:function(e){var t=e.enrollmentMetadata.enrollmentForm.featureType;return["Polygon","Point"].includes(t)},getComponent:function(e){return"Polygon"===e.enrollmentMetadata.enrollmentForm.featureType?S_:I_},getComponentProps:function(e){var t=e.enrollmentMetadata.enrollmentForm.featureType;return __(e,"Polygon"===t?{width:e&&e.formHorizontal?150:350,label:s.a.t("Area"),dialogLabel:s.a.t("Area"),required:!1,orientation:C_(e.formHorizontal)}:{width:e&&e.formHorizontal?150:350,label:s.a.t("Coordinate"),dialogLabel:s.a.t("Coordinate"),required:!1,orientation:C_(e.formHorizontal),shrinkDisabled:e.formHorizontal})},getPropName:function(){return"geometry"},getValidatorContainers:function(){return[]},getMeta:function(){return{placement:Fh,section:b_}}})(R_),k_=Xg(function(){var e=Hl(v_)(lo()(eu()(tu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldOptions.fieldLabelMediaBasedClass," ").concat(m_.a.dateLabel)}})(Ql()(Po()(nu(E_)(pl))))))));return{isApplicable:function(e){return e.enrollmentMetadata.showIncidentDate},getComponent:function(){return e},getComponentProps:function(e){return __(e,{width:e&&e.formHorizontal?150:"100%",label:e.enrollmentMetadata.incidentDateLabel,required:!0,calendarWidth:e.formHorizontal?250:350,popupAnchorPosition:j_(e.formHorizontal),calendarMaxMoment:e.enrollmentMetadata.allowFutureIncidentDate?void 0:De()})},getPropName:function(){return"incidentDate"},getValidatorContainers:function(e){return g_(e.enrollmentMetadata.allowFutureIncidentDate)},getMeta:function(){return{placement:Fh,section:b_}}}}())(N_),A_=Sg(function(){var e=Hl(v_)(lo()(eu()(tu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldOptions.fieldLabelMediaBasedClass," ").concat(m_.a.dateLabel)}})(Ql()(Po()(nu(E_)(pl))))))));return{getComponent:function(){return e},getComponentProps:function(e){return __(e,{width:e&&e.formHorizontal?150:"100%",label:e.enrollmentMetadata.enrollmentDateLabel,required:!0,calendarWidth:e.formHorizontal?250:350,popupAnchorPosition:j_(e.formHorizontal),calendarMaxMoment:e.enrollmentMetadata.allowFutureEnrollmentDate?void 0:De()})},getPropName:function(){return"enrollmentDate"},getValidatorContainers:function(e){return h_(e.enrollmentMetadata.allowFutureEnrollmentDate)},getMeta:function(){return{placement:Fh,section:b_}}}}())(k_),w_=Qg()(A_),P_=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return I.a.createElement(w_,this.props)}}]),t}(I.a.PureComponent),D_=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).getValidationContext=function(){var e=n.props,t=e.orgUnit,a=e.onGetUnsavedAttributeValues;return{orgUnitId:t.id,onGetUnsavedAttributeValues:a}},n.handleUpdateField=function(){for(var e,t=n.props,a=t.programId,r=t.orgUnit,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];(e=n.props).onUpdateField.apply(e,o.concat([a,r]))},n.handleUpdateDataEntryField=function(){for(var e,t=n.props,a=t.programId,r=t.orgUnit,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];(e=n.props).onUpdateDataEntryField.apply(e,o.concat([a,r]))},n.handleStartAsyncUpdateField=function(){for(var e,t=n.props,a=t.programId,r=t.orgUnit,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];(e=n.props).onStartAsyncUpdateField.apply(e,o.concat([a,r]))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.orgUnit,e.onUpdateField,e.onUpdateDataEntryField,e.onStartAsyncUpdateField,e.onGetUnsavedAttributeValues,Object(ue.a)(e,["orgUnit","onUpdateField","onUpdateDataEntryField","onStartAsyncUpdateField","onGetUnsavedAttributeValues"]));return I.a.createElement(P_,Object.assign({onGetValidationContext:this.getValidationContext,onUpdateFormField:this.handleUpdateField,onUpdateDataEntryField:this.handleUpdateDataEntryField,onUpdateFormFieldAsync:this.handleStartAsyncUpdateField},t))}}]),t}(I.a.Component),x_=Object(Y.c)(function(){return{}},function(e){return{onUpdateDataEntryField:function(t,n,a,r){e(function(e,t,n){var a=e.payload,r=a.dataEntryId,i=a.itemId,o=xu()();return Object(He.batchActions)([e,cg(r,i,o),c_(e.payload,null,o,t,n)],d_)}(t,a,r))},onUpdateField:function(t,n,a,r){e(function(e,t,n,a){var r=t.filterActions,i=t.filterActionsToBeExecuted,o=e.payload,s=o.dataEntryId,c=o.itemId,l=xu()();return Object(He.batchActions)([e].concat(Object(Xe.a)(i),[cg(s,c,l),c_(e.payload,r,l,n,a)]),u_)}(t,n,a,r))},onStartAsyncUpdateField:function(t,n,a,r,i,o){e(function(e,t,n){return Ce(e)({onSuccess:t,onError:n})}(t,function(e){return function(e,t,n,a,r,i){var o=t.filterActions,s=t.filterActionsToBeExecuted,c=xu()();return Object(He.batchActions)([e].concat(Object(Xe.a)(s),[cg(n,a,c),c_(Object(Ie.a)({},e.payload,{dataEntryId:n,itemId:a}),o,c,r,i)]),u_)}(e,n,a,r,i,o)},function(e){return e}))}}})(D_),F_="OpenDataEntryForNewEnrollment",L_=function(e,t){return Se(F_)({dataEntryId:e,generatedUniqueValues:t})};function U_(e,t,n){if(!e||!["Polygon","Point"].includes(n.featureType))return null;var a=e;return"Point"===n.featureType&&(a=[e.longitude,e.latitude]),{type:n.featureType,coordinates:a}}function M_(e){return function(t){return t&&e&&t.type===e.featureType?"Point"===e.featureType?{latitude:t.coordinates[1],longitude:t.coordinates[0]}:t.coordinates:null}}function V_(e){return"COMPLETED"===e?"true":null}function B_(e,t){return"true"===e&&"COMPLETED"!==t?"COMPLETED":e||"COMPLETED"!==t?t:"ACTIVE"}function G_(e,t){return Object(Ze.d)(Jn,ha)(e,t)}function W_(e,t){return H_.apply(this,arguments)}function H_(){return(H_=Object(i.a)(r.a.mark(function e(t,n){var a,i,o,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Pn(),e.next=3,a.get("trackedEntityAttributes/".concat(t,"/requiredValues")).then(function(e){return e&&e.REQUIRED}).catch(function(e){return R.a.error(Object(Ze.b)("Could not retrieve required values")({teaId:t,error:e})),null});case 3:return i=e.sent,o=i&&i.includes("ORG_UNIT_CODE")?{ORG_UNIT_CODE:n.orgUnitCode}:null,s=Object(Ie.a)({},o,{expiration:"3"}),e.next=8,a.get("trackedEntityAttributes/".concat(t,"/generate"),s).then(function(e){return e&&e.value}).catch(function(e){return R.a.error(Object(Ze.b)("Could not generate unique id")({teaId:t,error:e})),null});case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z_(e,t){var n=t[e];if(!n)return null;var a=De().add(1,"days").unix();return n.expires>a?n:null}function Y_(e,t,n){if(!e)return Promise.resolve([]);var a=e.getElements().filter(function(e){return e.unique&&e.unique.generatable}).map(function(){var e=Object(i.a)(r.a.mark(function e(a){var i,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.id,!(o=z_(i,t))){e.next=4;break}return e.abrupt("return",{id:i,item:o});case 4:return e.abrupt("return",W_(i,n).then(function(e){return{id:i,item:{value:G_(e,a.type),expires:De().add(3,"days").unix()}}}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());return Promise.all(a)}var K_=[{id:"enrollmentDate",type:"DATE",validatorContainers:h_()},{id:"incidentDate",type:"DATE",validatorContainers:g_()},{clientId:"geometry",dataEntryId:"geometry",onConvertOut:U_}],q_="OpenDataEntryForNewEnrollmentBatch",X_=function(){var e=Object(i.a)(r.a.mark(function e(t,n,a,i){var o,s,c,l,u,d,p,f=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=f.length>4&&void 0!==f[4]?f[4]:[],s=f.length>5&&void 0!==f[5]?f[5]:[],c=f.length>6&&void 0!==f[6]?f[6]:{},l=Uh(i,"newEnrollment"),e.next=6,Y_(n,c,{orgUnitCode:a.code});case 6:return u=e.sent,d=Xb(i,"newEnrollment",[].concat(K_,Object(Xe.a)(s)),null,u.reduce(function(e,t){return e[t.id]=t.item.value,e},{})),p=t&&n?t_(t,n,l,a,{},{}):[],e.abrupt("return",Object(He.batchActions)([L_(i,u.reduce(function(e,t){return e[t.id]=t.item,e},{}))].concat(Object(Xe.a)(d),Object(Xe.a)(p),Object(Xe.a)(o)),q_));case 10:case"end":return e.stop()}},e)}));return function(t,n,a,r){return e.apply(this,arguments)}}();function Z_(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6],function(e,t,n){var a=e.trackedEntityType.id;return{orgUnit:t.orgUnitId,trackedEntityType:a,attributes:Object.keys(n).map(function(e){return{attribute:e,value:n[e]}})}}(n,t,function(e,t){return t.convertValues(e,Object(Ze.d)(Ua,Na))}(a,n.enrollmentForm)));return Object(Ie.a)({},r)}var J_="Program not found",Q_="Program is not a tracker program",$_=function(e,t,n){var a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=e.getState(),o=t.programId,s=t.dataEntryId,c=t.itemId,l=t.orgUnit,u=t.uid,d=Uh(s,c);try{var p=Ft(o);p instanceof en?a=p:R.a.error(Object(Ze.b)(Q_)({method:"openNewEnrollmentInDataEntryEpic",program:p}))}catch(g){R.a.error(Object(Ze.b)(J_)({method:"openNewEnrollmentInDataEntryEpic",error:g,programId:o}))}var f=a&&a.enrollment.enrollmentForm;if(!a||!f)return p_(a,f,d,s,c,l,null,null,r,u);var m=i_(i,f,d,n),h=o_(i,c,s,{},f);return p_(a,f,d,s,c,l,h,m,r,u)},ej="NewTeiFieldUpdateBatch",tj=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentWillUnmount",value:function(){Gd.clear()}},{key:"render",value:function(){var e=this.props,t=e.teiRegistrationMetadata,n=Object(ue.a)(e,["teiRegistrationMetadata"]);return I.a.createElement(fg,Object.assign({},n,{formFoundation:t.form}))}}]),t}(I.a.Component),nj=Mb(function(e){return e.teiRegistrationMetadata.inputSearchGroups},function(e){return Object(Ie.a)({},e.onGetValidationContext(),{trackedEntityType:e.teiRegistrationMetadata.form.id})})(tj),aj=Qg()(nj),rj=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return I.a.createElement(aj,this.props)}}]),t}(I.a.PureComponent),ij=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).getValidationContext=function(){var e=n.props,t=e.orgUnit,a=e.onGetUnsavedAttributeValues;return{orgUnitId:t.id,onGetUnsavedAttributeValues:a}},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.orgUnit,e.onUpdateField),n=e.onStartAsyncUpdateField,a=e.teiRegistrationMetadata,r=(e.onGetUnsavedAttributeValues,Object(ue.a)(e,["orgUnit","onUpdateField","onStartAsyncUpdateField","teiRegistrationMetadata","onGetUnsavedAttributeValues"]));return a?I.a.createElement(rj,Object.assign({onGetValidationContext:this.getValidationContext,onUpdateFormField:t,onUpdateFormFieldAsync:n,teiRegistrationMetadata:a},r)):I.a.createElement("div",null,s.a.t("An error has occured. See log for details"))}}]),t}(I.a.Component),oj=Object(Y.c)(function(){return{}},function(e){return{onUpdateField:function(t,n){e(function(e,t){var n=t.filterActions,a=t.filterActionsToBeExecuted;return Object(He.batchActions)([e].concat(Object(Xe.a)(a),Object(Xe.a)(n)),ej)}(t,n))},onStartAsyncUpdateField:function(t,n){e(function(e,t,n){return Ce(e)({onSuccess:t,onError:n})}(t,function(e){return function(e,t){var n=t.filterActions,a=t.filterActionsToBeExecuted;return Object(He.batchActions)([e].concat(Object(Xe.a)(a),Object(Xe.a)(n)),ej)}(e,n)},function(e){return e}))}}})(ij),sj="OpenDataEntryForNewTEI",cj=function(e,t){return Se(sj)({dataEntryId:e,generatedUniqueValues:t})},lj="NewTeiDataEntryOpenBatch",uj=function(){var e=Object(i.a)(r.a.mark(function e(t,n,a){var i,o,s,c,l=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>3&&void 0!==l[3]?l[3]:[],o=l.length>4&&void 0!==l[4]?l[4]:{},e.next=4,Y_(t,o,{orgUnitCode:n.code});case 4:return s=e.sent,c=Xb(a,"newTei",null,null,s.reduce(function(e,t){return e[t.id]=t.item.value,e},{})),e.abrupt("return",Object(He.batchActions)([cj(a,s.reduce(function(e,t){return e[t.id]=t.item,e},{}))].concat(Object(Xe.a)(c),Object(Xe.a)(i)),lj));case 7:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),dj=function(e,t){var n=t.id,a=Uh(n,e.dataEntries[n].itemId);return{possibleDuplicatesFound:!!(e.dataEntriesSearchGroupsResults[a]&&e.dataEntriesSearchGroupsResults[a].main&&e.dataEntriesSearchGroupsResults[a].main.count)}},pj=function(){return{}},fj=ub({onGetFormFoundation:function(e){return e.enrollmentMetadata.enrollmentForm}})(function(e){return Object(Y.c)(dj,pj)(function(e){return function(t){function n(){return Object(B.a)(this,n),Object(W.a)(this,Object(H.a)(n).apply(this,arguments))}return Object(z.a)(n,t),Object(G.a)(n,[{key:"renderButton",value:function(){var e=this.props,t=e.onSave,a=e.possibleDuplicatesFound,r=e.enrollmentMetadata;return j.createElement(le,{primary:!0,onClick:t},n.getButtonText(a,r.trackedEntityType.name))}},{key:"render",value:function(){var t=this.props,n=(t.onSave,t.possibleDuplicatesFound,Object(ue.a)(t,["onSave","possibleDuplicatesFound"])),a=this.renderButton();return j.createElement(e,Object.assign({mainButton:a},n))}}],[{key:"getButtonText",value:function(e,t){var n=t.toLocaleLowerCase();return e?s.a.t("Review duplicates"):s.a.t("Create {{trackedEntityTypeName}} and link",{trackedEntityTypeName:n})}}]),n}(j.Component)}(e))}(x_)),mj=n(1109),hj=n.n(mj),gj=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleSave=function(e,t,a){n.props.onSave(e,t,a)},n.fieldOptions={theme:e.theme,fieldLabelMediaBasedClass:hj.a.fieldLabelMediaBased},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.classes,e.onSave,e.theme,e.enrollmentMetadata),n=Object(ue.a)(e,["classes","onSave","theme","enrollmentMetadata"]);return I.a.createElement("div",null,I.a.createElement(fj,Object.assign({id:"relationship",onSave:this.handleSave,fieldOptions:this.fieldOptions,enrollmentMetadata:t},n)))}}]),t}(j.Component),bj=Object(k.withTheme)()(gj),vj=Object(Y.c)(function(){var e=Object(fi.createSelector)(BE,function(e){var t;try{t=Ft(e)}catch(n){return null}return t.enrollment});return function(t){return{enrollmentMetadata:e(t),programId:t.newRelationshipRegisterTei.programId,orgUnit:t.newRelationshipRegisterTei.orgUnit}}},function(){return{}})(bj),Oj=function(e){return e.newRelationship.selectedRelationshipType.to.trackedEntityTypeId},yj=function(e,t){var n=t.id,a=Uh(n,e.dataEntries[n].itemId);return{possibleDuplicatesFound:!!(e.dataEntriesSearchGroupsResults[a]&&e.dataEntriesSearchGroupsResults[a].main&&e.dataEntriesSearchGroupsResults[a].main.count)}},Ej=function(){return{}},_j=ub({onGetFormFoundation:function(e){return e.teiRegistrationMetadata.form}})(function(e){return Object(Y.c)(yj,Ej)(function(e){return function(t){function n(){return Object(B.a)(this,n),Object(W.a)(this,Object(H.a)(n).apply(this,arguments))}return Object(z.a)(n,t),Object(G.a)(n,[{key:"renderButton",value:function(){var e=this.props,t=e.onSave,a=e.possibleDuplicatesFound,r=e.teiRegistrationMetadata;return j.createElement(le,{primary:!0,onClick:t},n.getButtonText(a,r.trackedEntityType.name))}},{key:"render",value:function(){var t=this.props,n=(t.onSave,t.possibleDuplicatesFound,Object(ue.a)(t,["onSave","possibleDuplicatesFound"])),a=this.renderButton();return j.createElement(e,Object.assign({mainButton:a},n))}}],[{key:"getButtonText",value:function(e,t){var n=t.toLocaleLowerCase();return e?s.a.t("Review Duplicates"):s.a.t("Create {{trackedEntityTypeName}} and link",{trackedEntityTypeName:n})}}]),n}(j.Component)}(e))}(oj)),jj=n(1110),Ij=n.n(jj),Sj=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleSave=function(e,t,a){n.props.onSave(e,t,a)},n.fieldOptions={theme:e.theme,fieldLabelMediaBasedClass:Ij.a.fieldLabelMediaBased},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.classes,e.onSave,e.theme,Object(ue.a)(e,["classes","onSave","theme"]));return I.a.createElement("div",null,I.a.createElement(_j,Object.assign({id:"relationship",onSave:this.handleSave,fieldOptions:this.fieldOptions},t)))}}]),t}(j.Component),Cj=Object(k.withTheme)()(Sj),Tj=Object(Y.c)(function(){var e=Object(fi.createSelector)(Oj,function(e){var t;try{t=Gt(e)}catch(n){return R.a.error(Object(Ze.b)("Could not get TrackedEntityType for id")({TETypeId:e})),null}return t&&t.teiRegistration});return function(t){return{teiRegistrationMetadata:e(t),orgUnit:t.newRelationshipRegisterTei.orgUnit}}},function(){return{}})(Cj),Rj=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleShowExisting=function(){n.props.onShowExisting()},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"renderDefault",value:function(e,t,n){var a=t.toLowerCase(),r=e.toLowerCase();return I.a.createElement(I.a.Fragment,null,I.a.createElement("div",null,s.a.t("A {{trackedEntityTypeName}} with this {{attributeName}} is already registered",{trackedEntityTypeName:a,attributeName:r})),I.a.createElement("div",null,I.a.createElement(Ni,{onClick:this.handleShowExisting,className:n},s.a.t("Show registered {{trackedEntityTypeName}}",{trackedEntityTypeName:a}))))}},{key:"renderContents",value:function(){var e=this.props,n=e.trackedEntityType,a=e.attributeName,r=e.errorData,i=e.classes;return n&&a?r?r.attributeValueExistsUnsaved?t.renderAttributeValueExistsUnsaved(a):r.tetId!==n.id?t.renderTypeDifference(a,n.name):this.renderDefault(a,n.name,i.linkButton):t.renderNoAccess(a):t.renderPrerequisitesError()}},{key:"render",value:function(){var e=this.props.classes;return I.a.createElement("div",{className:e.container},this.renderContents())}}],[{key:"renderPrerequisitesError",value:function(){return I.a.createElement("div",null,s.a.t("A duplicate exists (but there were some errors, see log for details"))}},{key:"renderNoAccess",value:function(e){var t=e.toLowerCase();return I.a.createElement("div",null,s.a.t("An item with this {{attributeName}} is already registered, but you don't have access to it",{attributeName:t}))}},{key:"renderAttributeValueExistsUnsaved",value:function(e){var t=e.toLowerCase();return I.a.createElement("div",null,s.a.t("You have already registered this {{attributeName}}",{attributeName:t}))}},{key:"renderTypeDifference",value:function(e,t){var n=t.toLowerCase(),a=e.toLowerCase();return I.a.createElement("div",null,s.a.t("A {{trackedEntityTypeName}} with this {{attributeName}} is already registered",{trackedEntityTypeName:n,attributeName:a}))}}]),t}(I.a.Component),Nj=Object(k.withStyles)(function(){return{linkButton:{fontSize:"inherit",paddingLeft:0,paddingRight:3,backgroundColor:"inherit",textDecoration:"underline",cursor:"pointer",outline:"none"},container:{padding:2}}})(Rj),kj=function(e){return e.newRelationship.selectedRelationshipType.to.trackedEntityTypeId},Aj=function(e){return e.newRelationshipRegisterTei.programId},wj=function(e,t){return t.id};var Pj=Object(Y.c)(function(){var e=Object(fi.createSelector)(kj,function(e){var t;try{t=Gt(e)}catch(n){return null}return t}),t=Object(fi.createSelector)(Aj,wj,function(e,t,n){return n},function(e,t,n){if(!e)return n?function(e,t){var n=t.teiRegistration.form.getElement(e);return n?n.name:null}(t,n):null;var a;try{a=kt(e)}catch(r){return null}return function(e,t){var n=t.enrollment.enrollmentForm.getElement(e);return n?n.name:null}(t,a)});return function(n,a){var r=e(n,a);return{trackedEntityType:r,attributeName:t(n,a,r)}}},function(){return{}})(Nj),Dj=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleLink=function(){n.props.onLink(n.props.attributeValues)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.attributeValues,n=e.dataElements,a=e.onCancel,r=[{id:"foundTEI",values:t}];return I.a.createElement(I.a.Fragment,null,I.a.createElement(ie.a,null,I.a.createElement(se.a,null,s.a.t("Registered person")),I.a.createElement(kE,{items:r,dataElements:n})),I.a.createElement(ae.a,null,I.a.createElement(le,{onClick:a,secondary:!0},s.a.t("Cancel")),I.a.createElement(le,{onClick:this.handleLink,primary:!0},s.a.t("Link"))))}}]),t}(I.a.Component),xj=function(e){return e.programId},Fj=function(e){return e.tetAttributesOnly},Lj=function(e){return e.errorData.tetId},Uj=Object(Y.c)(function(){var e=Object(fi.createSelector)(xj,Fj,Lj,function(e,t,n){if(t){var a;try{a=Gt(n)}catch(i){return[]}return a.attributes.filter(function(e){return e.displayInReports})}var r;try{r=kt(e)}catch(i){return[]}return r.attributes.filter(function(e){return e.displayInReports})}),t=Object(fi.createSelector)(function(e,t){return t},function(e){return e.attributeValues},function(e,t){return e.reduce(function(e,n){var a=t[n.id];return(a||0===a||!1===a)&&(e[n.id]=n.convertValue(a,Jn)),e},{})});return function(n,a){var r=e(a);return{dataElements:r,attributeValues:t(a,r)}}},function(){return{}},function(e,t,n){n.programId,n.tetAttributesOnly,n.errorData;var a=Object(ue.a)(n,["programId","tetAttributesOnly","errorData"]);return Object.assign({},a,e,t)})(Dj),Mj=We()(Uj),Vj=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).state={ready:!1,tetAttributesOnly:!1,attributeValues:null},n.requestTei(),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentWillUnmount",value:function(){this.cancelablePromise&&this.cancelablePromise.cancel()}},{key:"requestTeiWithoutProgram",value:function(){var e=this,t=this.props.errorData.id,n=Object(Ze.c)(Pn().get("trackedEntityInstances/".concat(t),{}));n.promise.then(function(t){var n=t&&t.attributes||[];e.setState({ready:!0,tetAttributesOnly:!0,attributeValues:n.reduce(function(e,t){return e[t.attribute]=t.value,e},{})})}).catch(function(t){t&&t.isCanceled||e.setState({ready:!0,tetAttributesOnly:!0,attributeValues:{}})}),this.cancelablePromise=n}},{key:"requestTeiInProgramContext",value:function(){var e=this,t=this.props,n=t.errorData,a=t.programId,r=n.id,i=Object(Ze.c)(Pn().get("trackedEntityInstances/".concat(r),{program:a}));i.promise.then(function(t){t&&t.attributes?e.setState({ready:!0,attributeValues:t.attributes.reduce(function(e,t){return e[t.attribute]=t.value,e},{})}):e.requestTeiWithoutProgram()}).catch(function(t){t&&t.isCanceled||e.requestTeiWithoutProgram()}),this.cancelablePromise=i}},{key:"requestTei",value:function(){this.props.programId?this.requestTeiInProgramContext():this.requestTeiWithoutProgram()}},{key:"render",value:function(){var e=Object(A.a)({},this.props);return I.a.createElement(Mj,Object.assign({},this.state,e))}}]),t}(I.a.Component),Bj=Object(Y.c)(function(e){return{programId:e.newRelationshipRegisterTei.programId}},function(){return{}})(Vj),Gj=function(e){var t=e.open,n=Object(ue.a)(e,["open"]);return I.a.createElement(te.a,{fullWidth:!0,maxWidth:"md",open:t,onClose:e.onCancel},I.a.createElement(Bj,n))},Wj=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleShowExisting=function(){n.setState({existingTeiDialogOpen:!0})},n.handleCancelLink=function(){n.setState({existingTeiDialogOpen:!1})},n.handleLink=function(e){n.setState({existingTeiDialogOpen:!1});var t=n.props.errorData.id;n.props.onLink(t,e)},n.state={existingTeiDialogOpen:!1},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=(e.onLink,Object(ue.a)(e,["id","onLink"])),a=this.state.existingTeiDialogOpen;return j.createElement(j.Fragment,null,j.createElement(Pj,Object.assign({onShowExisting:this.handleShowExisting,id:t},n)),j.createElement(Gj,Object.assign({open:a,onCancel:this.handleCancelLink,onLink:this.handleLink},n)))}}]),t}(j.Component),Hj=function(e){return function(t){function n(e){var t;return Object(B.a)(this,n),(t=Object(W.a)(this,Object(H.a)(n).call(this,e))).postProcessErrorMessage=function(e,n,a,r,i){if("unique"!==n)return e;var o=t.cache[r]||{};if(e===o.errorMessage&&a===o.errorData)return o.outputElement;var s=j.createElement(Wj,{errorData:a,id:i,onLink:t.props.onLink});return t.cache[r]={errorMessage:e,errorData:a,outputElement:s},s},t.cache={},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,n=(t.onLink,Object(ue.a)(t,["onLink"]));return j.createElement(e,Object.assign({onPostProcessErrorMessage:this.postProcessErrorMessage},n))}}]),n}(j.Component)}(function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showDataEntry,n=e.programId,a=Object(ue.a)(e,["showDataEntry","programId"]);return t?n?j.createElement(vj,a):j.createElement(Tj,a):null}}]),t}(j.Component)),zj=Object(Y.c)(function(e){return{showDataEntry:e.newRelationshipRegisterTei.orgUnit,ready:!e.newRelationshipRegisterTei.dataEntryIsLoading,error:e.newRelationshipRegisterTei.dataEntryError,programId:e.newRelationshipRegisterTei.programId}},function(){return{}})(We()(Be()(Hj))),Yj=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).filterPrograms=function(e){var t=n.props.orgUnitIds;return e.filter(function(e){return!t||t.some(function(t){return e.organisationUnits[t]})})},n.programs=Array.from(at.values()),n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"isBeingFiltered",value:function(e,t){return e.length!==t.length}}]),Object(G.a)(t,[{key:"getBaselinePrograms",value:function(e){var t=this.props.baselineFilter;return e.filter(function(e){return t(e)})}},{key:"getPrograms",value:function(e){return Object(Ze.d)(this.filterPrograms)(e)}},{key:"render",value:function(){var e=this.props,n=(e.orgUnitIds,e.baselineFilter,e.children),a=Object(ue.a)(e,["orgUnitIds","baselineFilter","children"]),r=this.getBaselinePrograms(this.programs),i=this.getPrograms(r);return n(i,t.isBeingFiltered(r,i),a)}}]),t}(j.Component),Kj=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).baseLineFilter=function(e){var t=n.props.trackedEntityTypeId;return e instanceof en&&e.trackedEntityType.id===t&&e.access.data.write},n.getOptionsFromPrograms=function(e){return e.map(function(e){return{label:e.name,value:e.id,iconLeft:n.getProgramIcon(e)}})},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getProgramIcon",value:function(e){var t=this.props.classes;return e.icon.data?j.createElement("div",{className:t.iconContainer},j.createElement("img",{style:{backgroundColor:e.icon.color},className:t.icon,src:e.icon.data,alt:e.name})):null}},{key:"renderIsFilteredText",value:function(){var e=this.props,t=e.classes,n=e.onClearFilter;return j.createElement("div",{className:t.isFilteredContainer},s.a.t("Some programs are being filtered."),j.createElement(Ni,{className:t.isFilteredLink,onClick:n},s.a.t("Show all")))}},{key:"render",value:function(){var e=this,t=this.props,n=(t.classes,t.orgUnitIds),a=t.onUpdateSelectedProgram,r=(t.onClearFilter,Object(ue.a)(t,["classes","orgUnitIds","onUpdateSelectedProgram","onClearFilter"]));return j.createElement(Yj,{orgUnitIds:n,baselineFilter:this.baseLineFilter},function(t,n){return j.createElement("div",null,j.createElement(sl,Object.assign({options:e.getOptionsFromPrograms(t),required:!1,onSelect:a},r)),n?e.renderIsFilteredText():null)})}}]),t}(j.Component),qj=lo()(eu()(su({onGetCustomFieldLabeClass:function(e){return e.programLabelClass}})(nu(function(e){e.programLabelClass;return Object(ue.a)(e,["programLabelClass"])})(cl()(Object(k.withStyles)(function(e){return{iconContainer:{display:"flex",alignItems:"center",paddingRight:5},icon:{width:22,height:22,borderRadius:2},isFilteredContainer:{fontSize:12,color:e.palette.grey.dark,paddingTop:5},isFilteredLink:{paddingLeft:2,backgroundColor:"inherit"}}})(Kj)))))),Xj=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,n=e.classes,a=Object(ue.a)(e,["classes"]);return j.createElement(qj,Object.assign({styles:t.baseComponentStyles,programLabelClass:n.programLabel,label:s.a.t("Program")},a))}}]),t}(j.Component);Xj.baseComponentStyles={labelContainerStyle:{flexBasis:200},inputContainerStyle:{flexBasis:150}};var Zj=Object(k.withStyles)(function(e){return{programLabel:Object(Wt.a)({paddingTop:"10px"},e.breakpoints.down(523),{paddingTop:"0px !important"})}})(Xj),Jj="NewRelationshipSingleEventRegisterTeiProgramChange",Qj="NewRelationshipSingleEventRegisterTeiOrgUnitChange",$j="NewRelationshipSingleEventRegisterTeiOrgUnitSearchFailed",eI="NewRelationshipSingleEventRegisterTeiProgramFilterClear",tI=Object(Y.c)(function(e){return{orgUnitIds:e.newRelationshipRegisterTei.orgUnit?[e.newRelationshipRegisterTei.orgUnit.id]:null,trackedEntityTypeId:e.newRelationship.selectedRelationshipType.to.trackedEntityTypeId,value:e.newRelationshipRegisterTei.programId}},function(e){return{onUpdateSelectedProgram:function(t){e(function(e){return Se(Jj)({programId:e})}(t))},onClearFilter:function(){e(Se(eI)())}}})(Zj),nI=function(e){var t,n=function(e){var t,n;return n=t=function(t){function n(e){var t;return Object(B.a)(this,n),(t=Object(W.a)(this,Object(H.a)(n).call(this,e))).handleFilterChange=function(e){e?t.filterOrgUnits(e):t.resetOrgUnits()},t.state={filteredRoots:null,filterText:null,inProgress:!1,treeKey:n.INITIAL_TREE_KEY},t.cancelablePromise=null,t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"componentWillUnmount",value:function(){this.cancelablePromise&&this.cancelablePromise.cancel()}},{key:"filterOrgUnits",value:function(e){var t=this,n=this.props,a=n.scope,r=n.onSearchError,i=a===cu?{withinUserHierarchy:!0}:{withinUserSearchHierarchy:!0};this.setState({inProgress:!0}),this.cancelablePromise&&this.cancelablePromise.cancel();var o=Object(Ze.c)(Fn().models.organisationUnits.list(Object(Ie.a)({fields:["id,displayName,path,publicAccess,access,lastUpdated","children[id,displayName,publicAccess,access,path,children::isNotEmpty]"].join(","),paging:!1,query:e},i)));o.promise.then(function(n){t.setState({filteredRoots:n.toArray(),filterText:e,inProgress:!1,treeKey:e}),t.cancelablePromise=null}).catch(function(e){R.a.error(Object(Ze.b)("There was an error retrieving organisation unit roots")({error:e})),r&&r(e)}),this.cancelablePromise=o}},{key:"resetOrgUnits",value:function(){this.setState({filteredRoots:null,filterText:null,treeKey:n.INITIAL_TREE_KEY})}},{key:"render",value:function(){var t=this.props,n=t.defaultRoots,a=(t.onSearchError,t.onSelect),r=(t.scope,Object(ue.a)(t,["defaultRoots","onSearchError","onSelect","scope"])),i=this.state,o=i.filteredRoots,s=i.filterText,c=i.treeKey,l=i.inProgress;return j.createElement(e,Object.assign({roots:o||n,treeKey:c,searchText:s,ready:!l,onSearch:this.handleFilterChange,onBlur:a},r))}}]),n}(j.Component),t.INITIAL_TREE_KEY="initial",n}(e),a=function(e){function t(e){var n;Object(B.a)(this,t);var a=(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).props.scope;return n.defaultRoots=pu(t.DEFAULT_ROOTS_DATA[a])||[],n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=Object(A.a)({},this.props);return j.createElement(n,Object.assign({defaultRoots:this.defaultRoots},e))}}]),t}(j.Component);return a.DEFAULT_ROOTS_DATA=(t={},Object(Wt.a)(t,cu,"captureRoots"),Object(Wt.a)(t,lu,"search"),t),a}(Nl),aI=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onUpdateSelectedOrgUnit,n=Object(ue.a)(e,["onUpdateSelectedOrgUnit"]);return j.createElement(nI,Object.assign({onSelect:t,scope:cu,maxTreeHeight:200},n))}}]),t}(j.Component),rI=tu()(eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return e.labelClass}})(nu(function(e){e.labelClass;return Object(ue.a)(e,["labelClass"])})(Po()(aI))))),iI=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleUpdateSelectedOrgUnit=function(e){var t=n.props,a=t.programId,r=t.onUpdateSelectedOrgUnit;if(a&&e){var i;try{i=Ft(a)}catch(o){return void r(e,!0)}r(e,!!i.organisationUnits&&!i.organisationUnits[e.id])}else r(e,!1)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,n=e.classes,a=(e.onUpdateSelectedOrgUnit,e.programId,Object(ue.a)(e,["classes","onUpdateSelectedOrgUnit","programId"]));return j.createElement(rI,Object.assign({labelClass:n.label,label:s.a.t("Organisation Unit"),styles:t.baseComponentStyles,onUpdateSelectedOrgUnit:this.handleUpdateSelectedOrgUnit},a))}}]),t}(j.Component);iI.baseComponentStyles={labelContainerStyle:{flexBasis:200},inputContainerStyle:{flexBasis:150}};var oI=Object(k.withStyles)(function(e){return{label:Object(Wt.a)({paddingTop:"10px"},e.breakpoints.down(523),{paddingTop:"0px !important"})}})(iI),sI=Object(Y.c)(function(e){return{value:e.newRelationshipRegisterTei.orgUnit,programId:e.newRelationshipRegisterTei.programId}},function(e){return{onUpdateSelectedOrgUnit:function(t,n){e(function(e,t){return Se(Qj)({orgUnit:e,resetProgramSelection:t})}(t,n))},onSearchError:function(){e(Se($j)())}}})(oI),cI=Object(k.withStyles)(function(e){return{sectionFieldsInSection:{margin:e.spacing.unit}}})(function(e){var t=e.classes;return j.createElement("div",{className:t.sectionFieldsInSection},j.createElement(sI,null),j.createElement(tI,null))}),lI=function(){var e=s.a.t("Registration");return j.createElement(Bu,{title:e})},uI=Object(k.withStyles)(function(e){return{section:{backgroundColor:"white",maxWidth:e.typography.pxToRem(892)}}})(function(e){var t=e.classes;return j.createElement(Mu,{header:lI(),elevation:2,className:t.section},j.createElement(cI,null))}),dI=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).toggleCollapse=function(){n.setState({collapsed:!n.state.collapsed})},n.renderCollapsable=function(){var e=n.props.classes;return j.createElement(Ol.h,{className:e.toggleCollapseButton,onClick:n.toggleCollapse},n.state.collapsed?j.createElement(Tl.b,null):j.createElement(Tl.c,null))},n.renderContent=function(){var e=n.props,t=e.children,a=e.classes;return j.createElement("div",{className:a.contentContainer},t)},n.state={collapsed:n.props.collapsed||!1},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.collapsed!==this.props.collapsed&&this.setState({collapsed:e.collapsed})}},{key:"render",value:function(){var e=this.props,t=e.header,n=e.collapsable,a=e.classes;return j.createElement(Ol.m,{className:a.container},j.createElement("div",{className:a.headerContainer},t,n&&this.renderCollapsable()),!this.state.collapsed&&this.renderContent())}}]),t}(j.Component),pI=Object(k.withStyles)(function(e){return{container:{margin:e.typography.pxToRem(10)},headerContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.typography.pxToRem(5),minHeight:e.typography.pxToRem(42)},toggleCollapseButton:{padding:4},contentContainer:{padding:e.typography.pxToRem(10),borderTop:"1px solid ".concat(e.palette.grey.blueGrey)}}})(dI),fI=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.text,a=e.badgeCount,r=e.classes,i=e.badgeClass,o=!!a||0===a;return j.createElement("div",{className:r.headerContainer},j.createElement("div",{className:r.headerItemContainer},j.createElement(t,null)),j.createElement("div",{className:r.headerItemContainer},n),o&&j.createElement("div",{className:r.headerItemContainer},j.createElement(Ol.b,{className:Ri()(r.badge,i),label:a})))}}]),t}(j.Component),mI=Object(k.withStyles)(function(e){return{headerContainer:{display:"flex",alignItems:"center"},headerItemContainer:{display:"inline-flex",paddingRight:e.typography.pxToRem(5),paddingLeft:e.typography.pxToRem(5)},badge:{height:e.typography.pxToRem(20),width:e.typography.pxToRem(20),fontWeight:700}}})(fI),hI=s.a.t("Errors"),gI=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderHeader=function(){var e=n.props,t=e.classes,a=e.errors,r=a?a.length:0;return j.createElement(mI,{icon:Tl.i,text:hI,badgeClass:t.badge,badgeCount:r})},n.renderItems=function(e){return e.map(function(e){return j.createElement("div",{className:n.props.classes.error,key:e.id},e.message)})},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.errors;return e&&e.length>0?j.createElement(pI,{collapsable:!0,header:this.renderHeader()},this.renderItems(e)):null}}]),t}(j.Component),bI=Object(k.withStyles)(function(e){return{badge:{backgroundColor:e.palette.error.main,color:"white"},error:{marginTop:e.typography.pxToRem(5),marginBottom:e.typography.pxToRem(5),padding:e.typography.pxToRem(10),borderRadius:e.typography.pxToRem(4),backgroundColor:e.palette.error.lighter}}})(gI),vI=function(e){return e.messagesContainer},OI=function(e){return e.containerPropNameMain},yI=function(e){return e.containerPropNameOnComplete},EI=function(e){return e.showOnComplete},_I=function(){return Object(fi.createSelector)(vI,EI,OI,yI,function(e,t,n,a){if(e=e||{},!t)return e[n];var r=e[n]||[],i=e[a]||[];return[].concat(Object(Xe.a)(r),Object(Xe.a)(i))})},jI=Object(Y.c)(function(){var e=_I();return function(t,n){var a=n.dataEntryKey,r=t.rulesEffectsGeneralErrors[a],i=t.dataEntriesUI&&t.dataEntriesUI[a]&&t.dataEntriesUI[a].saveAttempted;return{errors:e({messagesContainer:r,containerPropNameMain:"error",containerPropNameOnComplete:"errorOnComplete",showOnComplete:i})}}},function(){return{}})(bI),II=s.a.t("Warnings"),SI=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderHeader=function(){var e=n.props,t=e.classes,a=e.warnings,r=a?a.length:0;return j.createElement(mI,{icon:Tl.p,text:II,badgeClass:t.badge,badgeCount:r})},n.renderItems=function(e){return e.map(function(e){return j.createElement("div",{className:n.props.classes.warning,key:e.id},e.message)})},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.warnings;return e&&e.length>0?j.createElement(pI,{collapsable:!0,header:this.renderHeader()},this.renderItems(e)):null}}]),t}(j.Component),CI=Object(k.withStyles)(function(e){return{badge:{backgroundColor:e.palette.warning.light},warning:{marginTop:e.typography.pxToRem(5),marginBottom:e.typography.pxToRem(5),padding:e.typography.pxToRem(10),borderRadius:e.typography.pxToRem(4),backgroundColor:e.palette.warning.lighter}}})(SI),TI=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleDuplicatesClick=function(){var e=n.props;(0,e.onReviewDuplicates)(e.onOpenReviewDialog)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.classes;return I.a.createElement("div",null,I.a.createElement(Ni,{onClick:this.handleDuplicatesClick,className:e.linkButton},s.a.t("Possible duplicates found")))}}]),t}(I.a.Component),RI=Object(k.withStyles)(function(){return{linkButton:{fontSize:"inherit",paddingLeft:0,paddingRight:3,backgroundColor:"inherit",textDecoration:"underline",cursor:"pointer",outline:"none"}}})(TI),NI="RelationshipTeiRegistrationDuplicatesReview",kI="RelationshipTeiRegistrationDuplicatesReviewRetrievalSuccess",AI="RelationshipTeiRegistrationDuplicatesReviewRetrievalFailed",wI="RelationshipTeiRegistrationDuplicatesChangePage",PI=function(){return Se(NI)()},DI=function(){return Se(AI)()},xI=Object(Y.c)(function(e,t){return{}},function(e){return{onReviewDuplicates:function(t){e(PI()),t()}}})(RI),FI=yE()(kc),LI=Object(k.withStyles)(function(){return{container:{display:"flex",justifyContent:"flex-end"}}})(function(e){var t=e.onChangePage,n=e.paginationData,a=e.classes;return I.a.createElement("div",{className:a.container},I.a.createElement(FI,Object.assign({onChangePage:t,onGetLabelDisplayedRows:function(e,t){return"".concat(e," of ").concat(t)}},n)))}),UI=Object(Y.c)(function(e){return{paginationData:e.newRelationshipRegisterTeiDuplicatesReview.paginationData}},function(e){return{onChangePage:function(t){e(function(e){return Se(wI)({page:e})}(t))}}})(LI),MI=We(null,null,function(e){return!e.isUpdating})(kE),VI=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).getLinkButton=function(e){var t=n.props,a=t.onLink,r=t.classes,i=e.item,o=i.id,c=i.values;return I.a.createElement("div",{className:r.linkButtonCotainer},I.a.createElement(le,{onClick:function(){a(o,c)},primary:!0},s.a.t("Link")))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentDidMount",value:function(){!this.props.isUpdating&&this.contentListInstance&&(this.height=this.contentListInstance.clientHeight)}},{key:"render",value:function(){var e=this,t=this.props,n=t.dataElements,a=t.teis,r=t.isUpdating,i=this.height?{height:this.height}:null;return I.a.createElement(I.a.Fragment,null,I.a.createElement(ie.a,null,I.a.createElement(se.a,null,s.a.t("Possible duplicates found")),I.a.createElement("div",{ref:function(t){e.contentListInstance=t},style:i},I.a.createElement(MI,{isUpdating:r,items:a,dataElements:n,getCustomItemBottomElements:this.getLinkButton}))),I.a.createElement(UI,null))}}]),t}(I.a.Component),BI=Object(k.withStyles)(function(e){return{linkButtonCotainer:{padding:e.typography.pxToRem(10)}}})(VI),GI=function(e){return e.newRelationshipRegisterTei.programId},WI=function(e){return e.newRelationship.selectedRelationshipType.to.trackedEntityTypeId},HI=Object(Y.c)(function(){var e=Object(fi.createSelector)(GI,WI,function(e,t){if(!e){var n;try{n=Gt(t)}catch(r){return[]}return n.attributes.filter(function(e){return e.displayInReports})}var a;try{a=kt(e)}catch(r){return[]}return a.attributes.filter(function(e){return e.displayInReports})});return function(t,n){return{ready:!t.newRelationshipRegisterTeiDuplicatesReview.isLoading,isUpdating:t.newRelationshipRegisterTeiDuplicatesReview.isUpdating,error:t.newRelationshipRegisterTeiDuplicatesReview.loadError?s.a.t("An error occured loading possible duplicates"):null,teis:t.newRelationshipRegisterTeiDuplicatesReview.teis,dataElements:e(t,n)}}},function(e){return{}})(We(function(){return{padding:5}})(Be()(BI))),zI=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,n=e.open,a=e.onCancel,r=e.onLink,i=e.extraActions;return j.createElement(te.a,{open:n,fullWidth:!0,maxWidth:"md",onClose:a,PaperProps:t.paperProps},j.createElement(HI,{onLink:r}),j.createElement(ae.a,null,i))}}]),t}(j.Component);zI.paperProps={style:{maxHeight:"calc(100% - 100px)"}};var YI=zI,KI=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleOpenReviewDialog=function(){n.setState({duplicatesReviewDialogOpen:!0})},n.handleCloseReviewDialog=function(){n.setState({duplicatesReviewDialogOpen:!1})},n.state={duplicatesReviewDialogOpen:!1},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getHideButton",value:function(){return I.a.createElement(le,{onClick:this.handleCloseReviewDialog,primary:!0},s.a.t("Hide"))}},{key:"render",value:function(){var e=this.props.onLink,t=this.state.duplicatesReviewDialogOpen;return I.a.createElement(I.a.Fragment,null,I.a.createElement(xI,{onOpenReviewDialog:this.handleOpenReviewDialog}),I.a.createElement(YI,{open:t,onCancel:this.handleCloseReviewDialog,onLink:e,extraActions:this.getHideButton()}))}}]),t}(I.a.Component),qI=function(e,t){return e.dataEntriesSearchGroupsResults[t.dataEntryKey]&&e.dataEntriesSearchGroupsResults[t.dataEntryKey].main&&e.dataEntriesSearchGroupsResults[t.dataEntryKey].main.count},XI=function(e,t){return t.onLink},ZI=function(e,t){return t},JI=Object(Y.c)(function(){var e=Object(fi.createSelector)(qI,XI,function(e,t){return e?{id:"duplicateWarning",message:I.a.createElement(KI,{onLink:t})}:null}),t=Object(fi.createSelector)(ZI,function(e){return e},function(e,t){return e=e||[],t?[].concat(Object(Xe.a)(e),[t]):e}),n=_I();return function(a,r){var i=r.dataEntryKey,o=a.rulesEffectsGeneralWarnings[i],s=a.dataEntriesUI&&a.dataEntriesUI[i]&&a.dataEntriesUI[i].saveAttempted,c=n({messagesContainer:o,containerPropNameMain:"warning",containerPropNameOnComplete:"warningOnComplete",showOnComplete:s}),l=e(a,r);return{warnings:t(l,c)}}},function(){return{}})(CI),QI=s.a.t("Feedbacks"),$I=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderHeader=function(e){var t=n.props.classes;return j.createElement(mI,{icon:Tl.a,text:QI,badgeClass:t.badge,badgeCount:e})},n.renderTextItems=function(e,t){return e.map(function(e){return j.createElement("div",{className:Ri()(t.feedback,t.textFeedback),key:e.id},e.message)})},n.renderKeyValueItems=function(e,t){return e.map(function(e){return j.createElement("div",{className:Ri()(t.feedback,t.keyValueFeedback),key:e.id},j.createElement("div",{className:t.keyValueFeedbackItem},e.key),j.createElement("div",{className:t.keyValueFeedbackItem},e.value))})},n.getFeedbacks=function(){return n.props.feedbacks||{}},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.getFeedbacks(),n=t.displayTexts||[],a=t.displayKeyValuePairs||[],r=n.length+a.length;return r>0?j.createElement(pI,{collapsable:!0,header:this.renderHeader(r)},this.renderTextItems(n,e),this.renderKeyValueItems(a,e)):null}}]),t}(j.Component),eS=Object(k.withStyles)(function(e){return{badge:{backgroundColor:e.palette.grey.light},feedback:{marginTop:e.typography.pxToRem(5),marginBottom:e.typography.pxToRem(5),borderRadius:e.typography.pxToRem(4),backgroundColor:e.palette.grey.lighter,display:"flex"},textFeedback:{padding:e.typography.pxToRem(10)},keyValueFeedbackItem:{padding:e.typography.pxToRem(10)},keyValueFeedback:{alignItems:"center",justifyContent:"space-between"}}})($I),tS=Object(Y.c)(function(e,t){return{feedbacks:e.rulesEffectsFeedback[t.dataEntryKey]}},function(){return{}})(eS),nS=s.a.t("Indicators"),aS=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderHeader=function(e){var t=n.props.classes;return j.createElement(mI,{icon:Tl.j,text:nS,badgeClass:t.badge,badgeCount:e})},n.renderTextItems=function(e,t){return e.map(function(e){return j.createElement("div",{className:Ri()(t.indicator,t.textIndicator),key:e.id},e.message)})},n.renderKeyValueItems=function(e,t){return e.map(function(e){return j.createElement("div",{className:Ri()(t.indicator,t.keyValueIndicator),key:e.id},j.createElement("div",{className:t.keyValueIndicatorItem},e.key),j.createElement("div",{className:t.keyValueIndicatorItem},e.value))})},n.getIndicators=function(){return n.props.indicators||{}},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.getIndicators(),n=t.displayTexts||[],a=t.displayKeyValuePairs||[],r=n.length+a.length;return r>0?j.createElement(pI,{collapsable:!0,header:this.renderHeader(r)},this.renderTextItems(n,e),this.renderKeyValueItems(a,e)):null}}]),t}(j.Component),rS=Object(k.withStyles)(function(e){return{badge:{backgroundColor:e.palette.grey.light},indicator:{marginTop:e.typography.pxToRem(5),marginBottom:e.typography.pxToRem(5),borderRadius:e.typography.pxToRem(4),backgroundColor:e.palette.grey.lighter,display:"flex"},textIndicator:{padding:e.typography.pxToRem(10)},keyValueIndicatorItem:{padding:e.typography.pxToRem(10)},keyValueIndicator:{alignItems:"center",justifyContent:"space-between"}}})(aS),iS=Object(Y.c)(function(e,t){return{indicators:e.rulesEffectsIndicators[t.dataEntryKey]}},function(){return{}})(rS),oS=[{id:"ErrorsSection",Component:jI},{id:"WarningsSection",Component:JI},{id:"FeedbacksSection",Component:tS},{id:"IndicatorsSection",Component:iS}],sS=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderComponent=function(e,t){t.onLink;var n=Object(ue.a)(t,["onLink"]),a="WarningsSection"===e.id?t:n;return j.createElement(e.Component,Object.assign({key:e.id},a))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=Object(ue.a)(t,["classes"]);return j.createElement(Vh,{offsetTop:50,containerClass:n.stickyOnScroll},j.createElement("div",null,oS.map(function(t){return e.renderComponent(t,a)})))}}]),t}(j.Component),cS=Object(k.withStyles)(function(e){return{stickyOnScroll:{position:"relative",flexGrow:1,width:e.typography.pxToRem(300),margin:e.typography.pxToRem(10),marginTop:0}}})(sS),lS=Object(Y.c)(function(e,t){var n=e.newRelationshipRegisterTei,a=!n.loading&&!n.dataEntryIsLoading;return{ready:a,dataEntryKey:a?Uh("relationship",e.dataEntries.relationship.itemId):null}},function(){return{}})(function(e){return e.ready?I.a.createElement(cS,e):null}),uS=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleSaveAttempt=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r;n.props.possibleDuplicates?(n.args=t,n.props.onReviewDuplicates(function(){n.setState({duplicatesOpen:!0})})):(r=n.props).onSave.apply(r,t)},n.handleSaveFromDialog=function(){var e;(e=n.props).onSave.apply(e,Object(Xe.a)(n.args))},n.handleDialogCancel=function(){n.setState({duplicatesOpen:!1})},n.state={duplicatesOpen:!1},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getSaveButton",value:function(){return j.createElement(le,{onClick:this.handleSaveFromDialog,primary:!0},s.a.t("Save as new {{tetName}}",{tetName:this.props.tetName}))}},{key:"getCancelButton",value:function(){return j.createElement(le,{onClick:this.handleDialogCancel,secondary:!0},s.a.t("Cancel"))}},{key:"getActions",value:function(){return j.createElement(j.Fragment,null,this.getCancelButton(),this.getSaveButton())}},{key:"render",value:function(){var e=this.props,t=e.onLink,n=e.classes,a=e.onGetUnsavedAttributeValues,r=this.state.duplicatesOpen;return j.createElement("div",{className:n.container},j.createElement("div",{className:n.leftContainer},j.createElement(uI,null),j.createElement(zj,{onLink:t,onSave:this.handleSaveAttempt,onGetUnsavedAttributeValues:a})),j.createElement(lS,{onLink:t}),j.createElement(YI,{open:r,onLink:t,onCancel:this.handleDialogCancel,extraActions:this.getActions()}))}}]),t}(j.Component),dS=Object(k.withStyles)(function(){return{container:{display:"flex",flexWrap:"wrap"},leftContainer:{flexGrow:10,flexBasis:0,marginTop:10}}})(uS),pS=function(e){return e.newRelationship.selectedRelationshipType.to.trackedEntityTypeId},fS=Object(Y.c)(function(){var e=Object(fi.createSelector)(pS,function(e){var t;try{t=Gt(e)}catch(n){return null}return t.name});return function(t){var n=!t.newRelationshipRegisterTei.loading,a=n?Uh("relationship",t.dataEntries.relationship.itemId):null;return{tetName:e(t),ready:n,error:t.newRelationshipRegisterTei.error,possibleDuplicates:!!(t.dataEntriesSearchGroupsResults[a]&&t.dataEntriesSearchGroupsResults[a].main&&t.dataEntriesSearchGroupsResults[a].main.count)}}},function(e){return{onReviewDuplicates:function(t){e(PI()),t()}}})(We()(Be()(dS))),mS="InitializeNewRelationship",hS="SelectRelationshipType",gS="DeselectRelationshipType",bS="SelectFindMode",vS="SetSearching",OS="UnsetSearching",yS=function(){return Se(mS)({})},ES="InitializeRegisterTei",_S="InitializeRegisterTeiFailed",jS=function(e,t){return Se(ES)({programId:e,orgUnit:t})},IS=function(e){return Se(_S)({errorMessage:e})};var SS="NewRelationshipRegisterTeiDataEntryOpen",CS="NewRelationshopRegisterTeiDataEntryOpenCancelled",TS="NewRelationshopRegisterTeiDataEntryOpenFailed",RS=function(){return Se(SS)()},NS=function(e){return Se(TS)({errorMessage:e})},kS=function(e,t){return e?function(e){return kt(e).enrollment.inputSearchGroups[0]}(e):function(e){return Gt(e).teiRegistration.inputSearchGroups[0]}(t)},AS=function(e,t){return e?function(e){return kt(e).enrollment.enrollmentForm}(e):function(e){return Gt(e).teiRegistration.form}(t)},wS=n(126);function PS(e,t){return e?function(e){var t=kt(e);return{form:t.enrollment.enrollmentForm,attributes:t.trackedEntityType.attributes,tetName:t.trackedEntityType.name}}(e):function(e){var t=Gt(e);return{form:t.teiRegistration.form,attributes:t.attributes,tetName:t.name}}(t)}function DS(e,t,n){var a,r,i=Uh(e,t),o=n.formsValues[i],s=n.newRelationshipRegisterTei,c=s.programId,l=s.orgUnit,u=n.newRelationship.selectedRelationshipType.to.trackedEntityTypeId,d=PS(c,u),p=d.attributes,f=d.form,m=d.tetName,h=function(e,t){return t.convertValues(e,Ua)}(o,f),g=VE(h,p,m),b=f.convertValues(h,Na),v=function(e,t,n){var a=r_(e,t,{},n)||{};return Object.keys(a).reduce(function(e,n){var r=a[n],i=t[n].type;return e[n]=Na(r,i),e},{})}(n.dataEntriesFieldsValue[i],n.dataEntriesFieldsMeta[i],f),O=c?Object(Ie.a)({program:c,status:"ACTIVE",orgUnit:l.id,incidentDate:De().format("YYYY-MM-DD")},v):null,y=(a=b,Object.keys(a).find(function(e){return e.startsWith("FEATURETYPE_")}));return y&&(r=function(e,t){if(t[e])return{type:ca(e.replace("FEATURETYPE_","").toLocaleLowerCase()),coordinates:t[e]}}(y,b),delete b[y]),{data:{attributes:Object.keys(b).map(function(e){return{attribute:e,value:b[e]}}),orgUnit:l.id,trackedEntityType:u,geometry:r,enrollments:O?[O]:[]},name:g,id:Object(wS.a)()}}var xS,FS,LS=function(e){return function(e){return function(t){return j.createElement(e,Object.assign({},t,t.paging))}}(e)}(yE()(DE)),US="Tracked entity instance",MS=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).getTrackedEntityTypeName=function(){var e=n.trackedEntityTypeSelector(n.props);return e?e.name:US},n.handleAddRelationship=function(e,t){var a=n.trackedEntityTypeSelector(n.props);n.props.onAddRelationship({id:e,name:VE(t,a.attributes,a.name)})},n.handleAddRelationshipWithNewTei=function(e,t){n.props.onAddRelationship({itemId:e,dataEntryId:t})},n.renderModeSelections=function(){var e=n.props.classes,t=n.getTrackedEntityTypeName();return j.createElement("div",{className:e.modeSelectionsContainer},j.createElement("div",{className:e.button},j.createElement(gy.a,{fontSize:"large",className:e.buttonIcon}),j.createElement(le,{color:"primary",onClick:function(){return n.props.onSelectFindMode(LE.TEI_SEARCH)}},s.a.t("Link to an existing {{trackedEntityType}}",{trackedEntityType:t}))),j.createElement("div",{className:e.button},j.createElement(Iu.a,{className:e.buttonIcon}),j.createElement(le,{color:"primary",onClick:function(){return n.props.onSelectFindMode(LE.TEI_REGISTER)}},s.a.t("Create new {{trackedEntityType}}",{trackedEntityType:t}))))},n.renderSearch=function(e){e.selectedRelationshipType,e.onAddRelationship;var t=Object(ue.a)(e,["selectedRelationshipType","onAddRelationship"]),a=n.getTrackedEntityTypeName();return j.createElement(uE,Object.assign({id:"relationshipTeiSearch",getResultsView:function(e){return j.createElement(LS,Object.assign({onAddRelationship:n.handleAddRelationship,trackedEntityTypeName:a},e))}},t))},n.renderRegister=function(){return j.createElement(fS,{onLink:n.handleAddRelationship,onSave:n.handleAddRelationshipWithNewTei,onGetUnsavedAttributeValues:n.props.onGetUnsavedAttributeValues})},n.renderByMode=function(e,t){return e===LE.TEI_SEARCH?n.renderSearch(t):e===LE.TEI_REGISTER?n.renderRegister():null},n.trackedEntityTypeSelector=FE(),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.findMode,a=(e.onOpenSearch,e.onSelectFindMode,Object(ue.a)(e,["classes","findMode","onOpenSearch","onSelectFindMode"]));return j.createElement("div",{className:t.container},n?this.renderByMode(n,a):this.renderModeSelections())}}]),t}(j.Component),VS=gl()(function(e){return{modeSelectionsContainer:{display:"flex"},button:{height:e.typography.pxToRem(150),width:e.typography.pxToRem(250),margin:e.typography.pxToRem(10),padding:e.typography.pxToRem(10),display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",backgroundColor:e.palette.grey.lighter},buttonIcon:{flexGrow:1,fontSize:e.typography.pxToRem(80)}}})(MS),BS=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderForRelationshipType=function(e){var t=n.props,a=t.onSelectRelationshipType,r=t.findMode,i=e.name;return j.createElement(j.Fragment,null,n.renderSlash(),r?j.createElement(j.Fragment,null,j.createElement(Ni,{onClick:function(){return a(e)}},i),n.renderForFindMode(r)):i)},n.renderSlash=function(){return j.createElement("span",{style:{padding:5}},"/")},n.renderForFindMode=function(e){var t=n.props,a=t.onSelectFindMode,r=t.searching,i=UE[e];return j.createElement(j.Fragment,null,n.renderSlash(),r?j.createElement(j.Fragment,null,j.createElement(Ni,{onClick:function(){return a(e)}},i),n.renderForSearching()):i)},n.renderForSearching=function(){return j.createElement(j.Fragment,null,n.renderSlash(),s.a.t("Search results"))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectedRelationshipType,n=e.onInitializeNewRelationship,a=e.header;return j.createElement("div",{style:{padding:10}},t?j.createElement(j.Fragment,null,j.createElement(Ni,{onClick:n},a),this.renderForRelationshipType(t)):a)}}]),t}(j.Component),GS=Object(Y.c)(function(e){return{searching:e.newRelationship.searching}},function(e){return{}})(BS),WS={TRACKED_ENTITY_INSTANCE:VS},HS=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderRelationship=function(e,t){var a=WS[e.to.entity];return j.createElement(a,Object.assign({onAddRelationship:n.handleAddRelationship},t))},n.handleAddRelationship=function(e){var t=n.props.selectedRelationshipType;t&&n.props.onAddRelationship({id:t.id,name:t.name},e,t.to.entity)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.classes,e.onAddRelationship,Object(ue.a)(e,["classes","onAddRelationship"])),n=this.props.selectedRelationshipType;return j.createElement("div",{className:this.props.classes.container},j.createElement(GS,t),!n&&j.createElement(my,t),n&&this.renderRelationship(n,t))}}]),t}(j.Component),zS=gl()(function(e){return{container:{}}})(HS),YS=Object(Y.c)(function(e){return{selectedRelationshipType:e.newRelationship.selectedRelationshipType,findMode:e.newRelationship.findMode}},function(e){return{onInitializeNewRelationship:function(){e(yS())},onSelectRelationshipType:function(t){e(function(e){return Se(hS)({selectedRelationshipType:e})}(t))},onDeselectRelationshipType:function(){e(Se(gS)({}))},onSelectFindMode:function(t){e(function(e){return Se(bS)({findMode:e})}(t))}}})(zS),KS=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleDiscard=function(){n.setState({discardDialogOpen:!0})},n.handleCancelDiscard=function(){n.setState({discardDialogOpen:!1})},n.renderHeader=function(){return j.createElement("div",{className:n.props.classes.headerContainer},j.createElement("div",{className:n.props.classes.header},s.a.t("New event relationship")))},n.onGetUnsavedAttributeValues=function(e){return n.props.unsavedRelationships.map(function(t){if(!t.to.data||!t.to.data.attributes)return null;var n=t.to.data.attributes.find(function(t){return t.attribute===e});return n&&n.value}).filter(function(e){return e})},n.state={discardDialogOpen:!1},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=(e.onCancel,Object(ue.a)(e,["classes","onCancel"]));return j.createElement("div",null,j.createElement("div",{className:t.backToEventContainer},j.createElement("span",null,s.a.t("Adding relationship to event.")),j.createElement(Ni,{className:t.backToEventButton,onClick:this.handleDiscard},s.a.t("Go back to event without saving relationship"))),j.createElement(Ye.a,{className:t.newRelationshipPaper},j.createElement(YS,Object.assign({header:s.a.t("New event relationship"),onGetUnsavedAttributeValues:this.onGetUnsavedAttributeValues},n))),j.createElement(mg,{header:s.a.t("Unsaved changes"),text:s.a.t("Leaving this page will discard the selections you made for a new relationship"),confirmText:s.a.t("Yes, discard"),cancelText:s.a.t("No, stay here"),onConfirm:this.props.onCancel,open:!!this.state.discardDialogOpen,onCancel:this.handleCancelDiscard}))}}]),t}(j.Component),qS=gl()(function(e){return{headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},header:Object(Ie.a)({flexGrow:1},e.typography.title,{fontSize:18,fontWeight:500,paddingLeft:8}),newRelationshipPaper:{marginBottom:e.typography.pxToRem(10),padding:e.typography.pxToRem(10)},backToEventContainer:{padding:8,borderRadius:4,display:"inline-block",marginBottom:10,backgroundColor:"#E9EEF4",color:"#494949",fontSize:14},backToEventButton:{backgroundColor:"inherit",fontSize:"inherit",color:"inherit"}}})(KS),XS=function(e){return e.currentSelections.programId},ZS=Object(Y.c)(function(){var e=Object(fi.createSelector)(XS,function(e){return Tt(e).stage.relationshipTypesWhereStageIsFrom.filter(function(e){return"TRACKED_ENTITY_INSTANCE"===e.to.entity})});return function(t){var n=e(t),a=Uh("singleEvent",t.dataEntries.singleEvent.itemId);return{relationshipTypes:n,unsavedRelationships:t.dataEntriesRelationships[a]}}},function(e){return{onCancel:function(t){e(Se(ly)({}))},onAddRelationship:function(t,n,a){e(function(e,t,n){return Se(uy)({relationshipType:e,entity:t,entityType:n})}(t,n,a))}}})(qS),JS=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"renderHeader",value:function(){return I.a.createElement("div",{className:this.props.classes.headerContainer},I.a.createElement("div",{className:this.props.classes.header},s.a.t("New event")))}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.onCancel;return I.a.createElement("div",{className:t.container},this.renderHeader(),I.a.createElement(Ye.a,{elevation:0},I.a.createElement("div",{className:t.contents},s.a.t("You dont have access to create an event in the current selections"))),I.a.createElement("div",{className:t.buttonRow},I.a.createElement("div",{className:t.buttonContainer},I.a.createElement(le,{variant:"raised",color:"primary",disabled:!0},s.a.t("Save"))),I.a.createElement("div",{className:t.buttonContainer},I.a.createElement(le,{variant:"text",color:"primary",onClick:n},s.a.t("Cancel")))))}}]),t}(j.Component),QS=Object(k.withStyles)(function(e){return{container:{padding:24},contents:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:50,paddingBottom:50},buttonRow:{display:"flex",flexWrap:"wrap",paddingTop:10,marginLeft:"-8px"},buttonContainer:{paddingRight:2*e.spacing.unit},headerContainer:{paddingTop:9,paddingBottom:20},header:Object(Ie.a)({flexGrow:1},e.typography.title,{fontSize:16,fontWeight:500})}})(JS),$S=Object(Y.c)(function(e){return{}},function(e){return{onCancel:function(){e(EO())}}})(QS),eC=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).state={discardWarningOpen:!1},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.showAddRelationship;return e.eventAccess.write?I.a.createElement("div",{className:t.container},n?I.a.createElement(ZS,null):I.a.createElement(cy,null)):I.a.createElement($S,null)}}]),t}(j.Component),tC=Object(k.withStyles)(function(e){return{container:{padding:"10px 24px 24px 24px"}}})(eC),nC=function(){return{}},aC=function(e){return e.currentSelections.programId},rC=function(e){return e.currentSelections.categoriesMeta},iC={header:s.a.t("Unsaved changes"),text:s.a.t("Leaving this page will discard the changes you made to this event."),confirmText:s.a.t("Yes, discard"),cancelText:s.a.t("No, stay here")},oC=Object(Y.c)(function(){var e=Object(fi.createSelector)(aC,rC,function(e,t){return Rt(e,t)});return function(t){return{showAddRelationship:!!t.newEventPage.showAddRelationship,eventAccess:e(t)}}},function(){return{}})((xS=iC,FS=function(e){return gg(e,"singleEvent-newEvent")||e.newEventPage.showAddRelationship},function(e){return Object(Y.c)((t=FS,function(e,n){return{inEffect:t(e,n)}}),nC)(Object(Z.e)(function(e,t){return function(n){function a(e){var t;return Object(B.a)(this,a),(t=Object(W.a)(this,Object(H.a)(a).call(this,e))).handleDialogConfirm=function(){t.setState({dialogOpen:!1}),t.unblock(),t.props.history.goBack()},t.handleDialogCancel=function(){t.setState({dialogOpen:!1})},t.state={dialogOpen:!1},t}return Object(z.a)(a,n),Object(G.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.history;this.historyLength=window.history.length,this.unblock=t.block(function(t,n){var a=e.props.inEffect,r=window.history.length===e.historyLength;return"POP"!==n||!a||!r||(e.setState({dialogOpen:!0}),!1)})}},{key:"componentWillUnmount",value:function(){this.unblock&&this.unblock()}},{key:"render",value:function(){var n=this.props,a=(n.inEffect,n.history,n.location,n.match,n.staticContext,Object(ue.a)(n,["inEffect","history","location","match","staticContext"]));return j.createElement(j.Fragment,null,j.createElement(e,a),j.createElement(mg,Object.assign({},t,{onConfirm:this.handleDialogConfirm,open:this.state.dialogOpen,onCancel:this.handleDialogCancel})))}}]),a}(j.Component)}(e,xS)));var t})(tC)),sC=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"renderHeader",value:function(){return I.a.createElement("div",{className:this.props.classes.headerContainer},I.a.createElement("div",{className:this.props.classes.header},s.a.t("New event")))}},{key:"getText",value:function(){var e=this.props,t=e.isProgramSelected,n=e.isOrgUnitSelected;return t||n?t?n?s.a.t("Select a category option to start reporting"):s.a.t("Select a registering unit to start reporting"):s.a.t("Select a program to start reporting"):s.a.t("Select a registering unit and program above to get started")}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.onCancel;return I.a.createElement("div",{className:t.container},this.renderHeader(),I.a.createElement(Ye.a,{elevation:0},I.a.createElement("div",{className:t.contents},this.getText())),I.a.createElement("div",{className:t.buttonRow},I.a.createElement("div",{className:t.buttonContainer},I.a.createElement(le,{variant:"raised",color:"primary",disabled:!0},s.a.t("Save"))),I.a.createElement("div",{className:t.buttonContainer},I.a.createElement(le,{variant:"text",color:"primary",onClick:n},s.a.t("Cancel")))))}}]),t}(j.Component),cC=Object(k.withStyles)(function(e){return{container:{padding:24},contents:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:50,paddingBottom:50},buttonRow:{display:"flex",flexWrap:"wrap",paddingTop:10,marginLeft:"-8px"},buttonContainer:{paddingRight:2*e.spacing.unit},headerContainer:{paddingTop:9,paddingBottom:20},header:Object(Ie.a)({flexGrow:1},e.typography.title,{fontSize:16,fontWeight:500})}})(sC),lC="CancelNewEventFromIncompleteSelectionAndReturnToMainPage",uC=Object(Y.c)(function(e){return{isProgramSelected:!!e.currentSelections.programId,isOrgUnitSelected:!!e.currentSelections.orgUnitId}},function(e){return{onCancel:function(){e(Se(lC)())}}})(cC),dC=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getUrl",value:function(){var e=this.props,t=e.programId,n=e.orgUnitId;return"".concat("../dhis-web-tracker-capture".replace(/\/$/,""),"/#/?")+"program=".concat(t,"&ou=").concat(n)}},{key:"render",value:function(){var e=this.props,t=e.programId,n=e.children,a=e.classes;return Ft(t)instanceof en?j.createElement("div",{className:a.container},j.createElement(Ye.a,{elevation:0},j.createElement("div",{className:a.contents},s.a.t("To work with the selected program,"),j.createElement("span",{className:a.linkContainer},j.createElement("a",{href:this.getUrl(),target:"_blank",rel:"noopener noreferrer"},s.a.t("open the Tracker Capture app")))))):n}}]),t}(j.Component),pC=Object(k.withStyles)(function(){return{container:{padding:24},contents:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:50,paddingBottom:50},linkContainer:{paddingLeft:5}}})(dC),fC=Object(Y.c)(function(e){return{programId:e.currentSelections.programId,orgUnitId:e.currentSelections.orgUnitId}},function(){return{}})(pC),mC=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"renderContents",value:function(){return this.props.isSelectionsComplete?I.a.createElement(fC,null,I.a.createElement(oC,null)):I.a.createElement(uC,null)}},{key:"render",value:function(){return I.a.createElement("div",null,this.renderContents())}}]),t}(I.a.Component),hC=Object(k.withStyles)(function(){return{}})(mC),gC=Object(Y.c)(function(e){return{isSelectionsComplete:!!e.currentSelections.complete}},function(){return{}})(hC),bC={header:s.a.t("Unsaved changes"),text:s.a.t("Leaving this page will discard the changes you made to this event."),confirmText:s.a.t("Yes, discard"),cancelText:s.a.t("No, stay here")},vC=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).dontShowWarning=function(){return!n.props.formInputInProgess&&!n.props.inAddRelationship},n.state={openStartAgainWarning:!1,openOrgUnitWarning:!1,openProgramWarning:null,openCatComboWarning:!1,categoryIdToReset:"",openNewEventWarning:!1},n.handleOpenStartAgainWarning=n.handleOpenStartAgainWarning.bind(Object(J.a)(n)),n.handleOpenOrgUnitWarning=n.handleOpenOrgUnitWarning.bind(Object(J.a)(n)),n.handleOpenProgramWarning=n.handleOpenProgramWarning.bind(Object(J.a)(n)),n.handleOpenCatComboWarning=n.handleOpenCatComboWarning.bind(Object(J.a)(n)),n.handleClose=n.handleClose.bind(Object(J.a)(n)),n.handleAcceptStartAgain=n.handleAcceptStartAgain.bind(Object(J.a)(n)),n.handleAcceptOrgUnit=n.handleAcceptOrgUnit.bind(Object(J.a)(n)),n.handleAcceptProgram=n.handleAcceptProgram.bind(Object(J.a)(n)),n.handleAcceptCatCombo=n.handleAcceptCatCombo.bind(Object(J.a)(n)),n.handleClickNew=n.handleClickNew.bind(Object(J.a)(n)),n.handleAcceptNew=n.handleAcceptNew.bind(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"handleOpenStartAgainWarning",value:function(){this.dontShowWarning()?this.props.onStartAgain():this.setState({openStartAgainWarning:!0})}},{key:"handleOpenOrgUnitWarning",value:function(){this.dontShowWarning()?this.props.onResetOrgUnitId():this.setState({openOrgUnitWarning:!0})}},{key:"handleOpenProgramWarning",value:function(e){this.dontShowWarning()?this.props.onResetProgramId(e):this.setState({openProgramWarning:e})}},{key:"handleOpenCatComboWarning",value:function(e){this.dontShowWarning()?this.props.onResetCategoryOption(e):this.setState({openCatComboWarning:!0,categoryIdToReset:e})}},{key:"handleClose",value:function(){this.setState({openStartAgainWarning:!1,openOrgUnitWarning:!1,openProgramWarning:null,openCatComboWarning:!1,openNewEventWarning:!1})}},{key:"handleAcceptStartAgain",value:function(){this.props.onStartAgain(),this.handleClose()}},{key:"handleAcceptOrgUnit",value:function(){this.props.onResetOrgUnitId(),this.handleClose()}},{key:"handleAcceptProgram",value:function(){this.props.onResetProgramId(this.state.openProgramWarning),this.handleClose()}},{key:"handleAcceptCatCombo",value:function(){this.props.onResetCategoryOption(this.state.categoryIdToReset),this.handleClose()}},{key:"handleClickNew",value:function(){this.dontShowWarning()||this.setState({openNewEventWarning:!0})}},{key:"handleAcceptNew",value:function(){this.props.onResetDataEntry(),this.handleClose()}},{key:"render",value:function(){return I.a.createElement("div",null,I.a.createElement(Nu,{onSetOrgUnit:this.props.onSetOrgUnit,onResetOrgUnitId:this.handleOpenOrgUnitWarning,onSetProgramId:this.props.onSetProgramId,onResetProgramId:this.handleOpenProgramWarning,onSetCategoryOption:this.props.onSetCategoryOption,onResetCategoryOption:this.handleOpenCatComboWarning,onResetAllCategoryOptions:this.props.onResetAllCategoryOptions,onStartAgain:this.handleOpenStartAgainWarning,onClickNew:this.handleClickNew}),I.a.createElement(gC,null),I.a.createElement(mg,Object.assign({onConfirm:this.handleAcceptStartAgain,open:this.state.openStartAgainWarning,onCancel:this.handleClose},bC)),I.a.createElement(mg,Object.assign({onConfirm:this.handleAcceptOrgUnit,open:this.state.openOrgUnitWarning,onCancel:this.handleClose},bC)),I.a.createElement(mg,Object.assign({onConfirm:this.handleAcceptProgram,open:!!this.state.openProgramWarning,onCancel:this.handleClose},bC)),I.a.createElement(mg,Object.assign({onConfirm:this.handleAcceptCatCombo,open:this.state.openCatComboWarning,onCancel:this.handleClose},bC)),I.a.createElement(mg,Object.assign({onConfirm:this.handleAcceptNew,open:this.state.openNewEventWarning,onCancel:this.handleClose},bC)))}}]),t}(j.Component),OC={SET_ORG_UNIT:"setOrgUnitFromNewEventPage",RESET_ORG_UNIT_ID:"resetOrgUnitIdFromNewEventPage",SET_PROGRAM_ID:"setProgramIdFromNewEventPage",RESET_PROGRAM_ID:"resetProgramIdFromNewEventPage",SET_CATEGORY_OPTION:"setCategoryOptionFromNewEventPage",RESET_CATEGORY_OPTION:"resetCategoryOptionFromNewEventPage",RESET_ALL_CATEGORY_OPTIONS:"resetAllCategoryOptionsFromNewEventPage",OPEN_NEW_EVENT_FROM_NEW_EVENT_PAGE:"OpenNewEventFromNewEventPage"},yC="startAgainFromNewEventPageBatch",EC="resetProgramAndCategoryOptionFromNewEventPageBatch",_C=function(){return Se(OC.RESET_ORG_UNIT_ID)()},jC=function(){return Se(OC.RESET_PROGRAM_ID)()},IC=function(){return Se(OC.RESET_ALL_CATEGORY_OPTIONS)()},SC=Object(Y.c)(function(e){return{formInputInProgess:e.currentSelections.complete&&gg(e,"singleEvent-newEvent"),inAddRelationship:e.newEventPage.showAddRelationship}},function(e){return{onSetOrgUnit:function(t,n){e(function(e,t){return Se(OC.SET_ORG_UNIT)({id:e,orgUnit:t})}(t,n))},onResetOrgUnitId:function(){e(_C())},onSetProgramId:function(t){e(function(e){return Se(OC.SET_PROGRAM_ID)(e)}(t))},onSetCategoryOption:function(t,n){e(function(e,t){return Se(OC.SET_CATEGORY_OPTION)({categoryId:e,categoryOption:t})}(t,n))},onResetCategoryOption:function(t){e(function(e){return Se(OC.RESET_CATEGORY_OPTION)({categoryId:e})}(t))},onResetAllCategoryOptions:function(){e(IC())},onStartAgain:function(){e(Object(He.batchActions)([_C(),jC(),IC(),Ci()],yC))},onResetProgramId:function(t){e(Object(He.batchActions)([jC(),IC(),t],EC))},onResetDataEntry:function(){e(Se(OC.OPEN_NEW_EVENT_FROM_NEW_EVENT_PAGE)())}}})(vC),CC=Object(Y.c)(function(e){return{error:e.newEventPage.selectionsError,ready:!e.newEventPage.isLoading}},function(){return{}})(We()(Be()(SC))),TC="UpdateSelectionsFromUrlForNewEvent",RC="SetOrgUnitBasedOnUrlForNewEvent",NC="InvalidOrgUnitFromUrlForNewEvent",kC="ErrorRetrievingOrgUnitBasedOnUrlForNewEvent",AC="SetEmptyOrgUnitBasedOnUrlForNewEvent",wC="InvalidSelectionsFromUrlForNewEvent",PC="ValidSelectionsFromUrlForNewEvent",DC=function(e){return Se(wC)(e)},xC="newRecentlyAddedEvent",FC=n(109),LC="setOrgUnitFromEditEventPage",UC="resetOrgUnitIdFromEditEventPage",MC="setProgramIdFromEditEventPage",VC="resetProgramIdFromEditEventPage",BC="setCategoryOptionFromEditEventPage",GC="resetCategoryOptionFromEditEventPage",WC="resetAllCategoryOptionsFromEditEventPage",HC="openNewEventPageFromEditEventPage",zC="startAgainFromEditEventPageBatch",YC="resetProgramAndCategoryOptionFromEditEventPageBatch",KC="setOrgUnitFromViewEventPage",qC="resetOrgUnitIdFromViewEventPage",XC="setProgramIdFromViewEventPage",ZC="resetProgramIdFromViewEventPage",JC="setCategoryOptionFromViewEventPage",QC="resetCategoryOptionFromViewEventPage",$C="resetAllCategoryOptionsFromViewEventPage",eT="openNewEventPageFromViewEventPage",tT="startAgainFromViewEventPageBatch",nT="resetProgramAndCategoryOptionFromViewEventPageBatch",aT=function(){return Se(qC)()},rT=function(){return Se(ZC)()},iT=function(){return Se($C)()},oT={SET_ORG_UNIT:"setOrgUnitFromMainPage",RESET_ORG_UNIT_ID:"resetOrgUnitIdFromMainPage",SET_PROGRAM_ID:"setProgramIdFromMainPage",RESET_PROGRAM_ID:"resetProgramIdFromMainPage",SET_CATEGORY_OPTION:"setCategoryOptionFromMainPage",RESET_CATEGORY_OPTION:"resetCategoryOptionFromMainPage",RESET_ALL_CATEGORY_OPTIONS:"resetAllCategoryOptionsFromMainPage",OPEN_NEW_EVENT:"openNewEventPageFromMainPage"},sT="startAgainFromMainPageBatch",cT="resetProgramAndCategoryOptionFromMainPageBatch",lT=function(){return Se(oT.RESET_ORG_UNIT_ID)()},uT=function(){return Se(oT.RESET_PROGRAM_ID)()},dT=function(){return Se(oT.RESET_ALL_CATEGORY_OPTIONS)()},pT=Uh("singleEvent","newEvent"),fT=[{id:"eventDate",type:"DATE",validatorContainers:Vg()},{clientId:"geometry",dataEntryId:"geometry",onConvertOut:U_},{id:"note",type:"TEXT",validatorContainers:qg(),clientIgnore:!0},{id:"relationship",type:"TEXT",clientIgnore:!0},{clientId:"status",dataEntryId:"complete",onConvertIn:V_,onConvertOut:B_},{id:"assignee"}],mT=function(e){var t=[{id:VO,visible:!0,isMainProperty:!0,type:ft.DATE},{id:BO,header:"Status",visible:!0,isMainProperty:!0,type:ft.TEXT,singleSelect:!0,options:[{text:s.a.t("Active"),value:"ACTIVE"},{text:s.a.t("Completed"),value:"COMPLETED"}]}],n=[];if(e.enableUserAssignment&&xn()){var a={id:GO,type:"ASSIGNEE",apiName:"assignedUser",header:"Assigned to",visible:!0,isMainProperty:!0};n.push(a)}return[].concat(t,n)},hT=function(e){return e.getElements().map(function(e){return{id:e.id,visible:e.displayInReports}})},gT="AppendListItem",bT="PrependListItem",vT="removeListItem",OT="resetList",yT="SelectionsCompletenessCalculated",ET="AfterSettingOrgUnitSkipCategoriesReset",_T="AfterSettingOrgUnitDoCategoriesReset",jT=function(e){return Se(ET)({triggeringActionType:e})},IT="Program or stage not found",ST=function(e,t,n,a,r){var i,o=e.getState(),s=Uh(t,n),c=jt(o.currentSelections.programId),l=o.currentSelections.orgUnitId,u=o.organisationUnits[l];if(c.error){var d=c.stage?c.stage.stageForm:null;i=e_(c.program,d,s,u)}else{var p=c.stage.stageForm,f=i_(o,p,s,r),m=o_(o,n,t,{},p),h=Object(Ie.a)({},f,m);i=e_(c.program,p,s,u,h,[h])}return Object(He.batchActions)([].concat(Object(Xe.a)(i),[lg(t,n,a)]),Hv)};function CT(e,t,n,a,r){return{formClientValues:e.convertValues(t,Ua),dataEntryClientValues:r_(n,a,r,e)}}var TT=function(e,t,n,a){var r,i=t.convertValues(n,Na),o=MO(a);return"COMPLETED"===o.status&&(o.completedDate=De().format("YYYY-MM-DD")),Object(Ie.a)({},o,{program:e.currentSelections.programId,programStage:t.id,orgUnit:e.currentSelections.orgUnitId},(r=e.currentSelections.categories)?{attributeCategoryOptions:Object.keys(r).map(function(e){return r[e]}).join(";")}:null,{dataValues:Object.keys(i).map(function(e){return{dataElement:e,value:i[e]}})})};function RT(e,t){var n=e.dataEntriesNotes&&e.dataEntriesNotes[t];return n?n.map(function(e){return{value:e.value}}):[]}var NT=function(e,t,n){var a={},r=CT(n,e.formsValues[t],e.dataEntriesFieldsValue[t],e.dataEntriesFieldsMeta[t],a),i=r.formClientValues,o=r.dataEntryClientValues;return{formClientValues:i,mainDataClientValues:Object(Ie.a)({},a,o,{notes:RT(e,t)})}},kT=function(e,t){var n=[];return e&&n.push("programId=".concat(e)),t&&n.push("orgUnitId=".concat(t)),n.join("&")},AT={TRACKED_ENTITY_INSTANCE:function(e){return{trackedEntityInstance:{trackedEntityInstance:e}}},PROGRAM_STAGE_INSTANCE:function(e){return{event:{event:e}}}};function wT(e){return{relationshipType:e.relationshipType.id,from:AT[e.from.type](e.from.id),to:AT[e.to.type](e.to.id)}}var PT,DT=Uh("singleEvent","newEvent"),xT=function(e,t,n){var a=e.find(function(e){return e.to.data});return a?function(e,t,n,a,r){return Se(hO)({selections:t},{offline:{effect:{url:"trackedEntityInstances",method:Lv,data:e},commit:{type:gO,meta:{selections:t,triggerAction:n,relationshipData:a,relationshipClientId:r}},rollback:{type:bO,meta:{selections:t,triggerAction:n}}}})}(a.to.data,t,n,e,a.clientId):function(e,t,n){return Se(dO)({selections:t},{offline:{effect:{url:"relationships",method:Lv,data:e},commit:{type:pO,meta:{selections:t,triggerAction:n}},rollback:{type:fO,meta:{selections:t,triggerAction:n}}}})}({relationships:e.map(wT)},t,n)},FT={SAVEANDADDANOTHER:"SAVEANDADDANOTHER",SAVEANDEXIT:"SAVEANDEXIT",FINISH:"FINISH"},LT=n(407),UT=n.n(LT),MT=n(398),VT=n.n(MT),BT=n(399),GT=n.n(BT),WT=Object(k.withStyles)(function(){return{button:{},contents:{display:"flex",alignItems:"center",justifyContent:"center"}}})(function(e){var t=e.classes,n=e.children,a=e.muiClasses,r=e.muiButtonRef,i=Object(ue.a)(e,["classes","children","muiClasses","muiButtonRef"]),o=r?{buttonRef:r}:null;return j.createElement(ps.a,Object.assign({},o,{className:t.button,classes:a},i),j.createElement("div",{className:t.contents},n))}),HT=n(1111),zT=n.n(HT),YT=function(e){return I.a.createElement(D,Object.assign({size:24},e))},KT=Object(k.withStyles)(function(){return{wrapper:{position:"relative"},progress:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50% ,-50%)",color:zT.a[600]}}})(function(e){var t=e.inProgress,n=e.children,a=e.classes,r=Object(ue.a)(e,["inProgress","children","classes"]);return t?j.createElement("div",{className:a.wrapper},j.createElement(WT,Object.assign({disabled:!0},r),n),j.createElement(YT,{className:a.progress})):j.createElement(WT,r,n)}),qT=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).onMenuItemClick=function(e){n.toggleMenu(),e.onClick()},n.toggleMenu=function(){n.setState({menuOpen:!n.state.menuOpen,anchorElement:n.buttonInstance})},n.renderMenuItems=function(){return n.props.dropDownItems.map(function(e){return j.createElement(Tp.a,{key:e.key,onClick:function(){return n.onMenuItemClick(e)}},e.text)})},n.state={menuOpen:!1,anchorElement:null},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.color,r=t.variant,i=Object(Ie.a)({color:a,variant:r},this.props.arrowProps),o=Object(Ie.a)({color:a,variant:r},this.props.buttonProps);return j.createElement("div",null,j.createElement("div",{className:n.buttonsContainer,ref:function(t){e.buttonInstance=t}},j.createElement("div",null,"progress"===this.props.buttonType?j.createElement(KT,Object.assign({className:n.button},o),this.props.buttonText):j.createElement(WT,Object.assign({className:n.button},o),this.props.buttonText)),j.createElement("div",{ref:function(t){e.arrowInstance=t}},j.createElement(WT,Object.assign({onClick:this.toggleMenu,className:n.arrowButton,variant:r,color:a},i),this.state.menuOpen?j.createElement(GT.a,null):j.createElement(VT.a,null)))),j.createElement(UT.a,{id:"simple-menu",anchorEl:this.state.anchorElement,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},elevation:10,open:this.state.menuOpen,onClose:this.toggleMenu,MenuListProps:{className:n.menuList}},this.renderMenuItems()))}}]),t}(j.Component),XT=Object(k.withStyles)(function(){return{buttonsContainer:{display:"flex",flexDirection:"row"},arrowButton:{paddingTop:6,paddingBottom:6,paddingLeft:6,paddingRight:6,minWidth:0,borderBottomLeftRadius:0,borderTopLeftRadius:0},button:{borderBottomRightRadius:0,borderTopRightRadius:0},menuList:{paddingTop:0,paddingBottom:0}}})(qT),ZT=Object(Ie.a)({},FT,{FINISH:"FINISH"}),JT=(PT={},Object(Wt.a)(PT,ZT.SAVEANDADDANOTHER,function(e){return{key:ZT.SAVEANDADDANOTHER,text:s.a.t("Save and add another"),onClick:function(){e.onSave(FT.SAVEANDADDANOTHER)}}}),Object(Wt.a)(PT,ZT.SAVEANDEXIT,function(e){return{key:ZT.SAVEANDEXIT,text:s.a.t("Save and exit"),onClick:function(){e.onSave(FT.SAVEANDEXIT)}}}),Object(Wt.a)(PT,ZT.FINISH,function(e){return{key:ZT.FINISH,text:s.a.t("Finish"),onClick:function(){e.onCancel()}}}),PT),QT=function(e,t){var n=e.dataEntries&&e.dataEntries[t.id]&&e.dataEntries[t.id].itemId,a=Uh(t.id,n),r=e.recentlyAddedEvents&&Object.keys(e.recentlyAddedEvents).length>0;return{saveTypes:e.newEventPage.saveTypes,finalInProgress:e.dataEntriesUI[a]&&e.dataEntriesUI[a].finalInProgress,dataEntryHasChanges:!1,hasRecentlyAddedEvents:r}},$T=function(){return{}},eR=vg(function(){return{color:"primary"}})(x_),tR=ub({onGetFormFoundation:function(e){return e.enrollmentMetadata.enrollmentForm}})(function(e){return Object(Y.c)(QT,$T)(function(e){return function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).getButtonDefinition=function(e){return JT[e](t.props)},t.getFormHorizontalButtons=function(e,n){var a=[t.getButtonDefinition(ZT.SAVEANDADDANOTHER),t.getButtonDefinition(ZT.SAVEANDEXIT)];return e||!n?a:[t.getButtonDefinition(ZT.FINISH)].concat(a)},t.getFormVerticalButtons=function(e,n,a){var r=a?a.map(function(e){return t.getButtonDefinition(e)}):[t.getButtonDefinition(ZT.SAVEANDEXIT),t.getButtonDefinition(ZT.SAVEANDADDANOTHER)];return e||!n?r:[t.getButtonDefinition(ZT.FINISH)].concat(Object(Xe.a)(r))},t.renderMultiButton=function(e,t,n){var a=e[0],r=e.slice(1);return j.createElement(dn.a,{title:t?"":s.a.t("No write access")},j.createElement(XT,{variant:"raised",color:"primary",buttonType:"progress",buttonText:a.text,disabled:!t,buttonProps:{onClick:a.onClick,color:"primary",inProgress:n},dropDownItems:r}))},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"getWrappedInstance",value:function(){return this.innerInstance}},{key:"render",value:function(){var t=this,n=this.props,a=n.saveTypes,r=n.dataEntryHasChanges,i=n.hasRecentlyAddedEvents,o=(n.onSave,n.finalInProgress),s=Object(ue.a)(n,["saveTypes","dataEntryHasChanges","hasRecentlyAddedEvents","onSave","finalInProgress"]),c=this.props.formHorizontal?this.getFormHorizontalButtons(r,i):this.getFormVerticalButtons(r,i,a),l=this.renderMultiButton(c,!0,o);return j.createElement(e,Object.assign({ref:function(e){t.innerInstance=e},mainButton:l},s))}}]),n}(j.Component)}(e))}(eR)),nR=Object(Wt.a)({},b_,{placement:Fh,name:s.a.t("Enrollment")}),aR=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleSave=function(e,t,a,r){r===FT.SAVEANDADDANOTHER?(n.props.formHorizontal||n.props.onSetSaveTypes([FT.SAVEANDADDANOTHER,FT.SAVEANDEXIT]),n.props.onSaveAndAddAnother(e,t,a)):r===FT.SAVEANDEXIT&&n.props.onSave(e,t,a)},n.renderHorizontal=function(){var e=n.props.classes;return I.a.createElement("div",{className:e.horizontal},n.renderContent())},n.renderVertical=function(){return I.a.createElement("div",{className:n.props.classes.dataEntryVerticalContainer},n.renderContent())},n.renderContent=function(){var e=n.props,t=e.onUpdateField,a=e.onStartAsyncUpdateField,r=(e.programName,e.orgUnitName,e.classes),i=(e.onSave,e.onSetSaveTypes,e.onSaveAndAddAnother,e.theme,e.enrollmentMetadata),o=Object(ue.a)(e,["onUpdateField","onStartAsyncUpdateField","programName","orgUnitName","classes","onSave","onSetSaveTypes","onSaveAndAddAnother","theme","enrollmentMetadata"]);return I.a.createElement("div",null,I.a.createElement("div",null,I.a.createElement(tR,Object.assign({id:"enrollment",onUpdateFormField:t,onUpdateFormFieldAsync:a,onSave:n.handleSave,fieldOptions:n.fieldOptions,dataEntrySections:n.dataEntrySections,enrollmentMetadata:i},o))),I.a.createElement("div",{className:r.savingContextContainer},I.a.createElement(Lu.a,null),I.a.createElement("div",{className:r.savingContextText},n.getSavingText())))},n.fieldOptions={theme:e.theme,fieldLabelMediaBasedClass:e.classes.fieldLabelMediaBased},n.dataEntrySections=nR,n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){Gd.clear()}},{key:"getSavingText",value:function(){var e=this.props,t=e.orgUnitName,n=e.programName,a=e.enrollmentMetadata;return s.a.t("Creating a new {{TET}} in {{program}} in {{orgUnit}}",{TET:a.trackedEntityType.name,program:n,orgUnit:t})}},{key:"render",value:function(){return I.a.createElement("div",null,this.props.formHorizontal?this.renderHorizontal():this.renderVertical())}}]),t}(j.Component),rR=Object(k.withStyles)(function(e){return{savingContextContainer:{paddingTop:e.typography.pxToRem(10),display:"flex",alignItems:"center",color:e.palette.grey.dark,fontSize:e.typography.pxToRem(13)},savingContextText:{paddingLeft:e.typography.pxToRem(10)},topButtonsContainer:{display:"flex",flexFlow:"row-reverse"},horizontal:{padding:e.typography.pxToRem(10),paddingTop:e.typography.pxToRem(20),paddingBottom:e.typography.pxToRem(15)},fieldLabelMediaBased:Object(Wt.a)({},e.breakpoints.down(523),{paddingTop:"0px !important"}),dataEntryVerticalContainer:{padding:e.typography.pxToRem(8)}}})(Object(k.withTheme)()(aR)),iR=function(e){return e.currentSelections.programId},oR="StartSaveAfterReturnedToMainPageForNewEnrollment",sR="RequestSaveAndReturnToMainPageForNewEnrollment",cR="EnrollmentSaved",lR="EnrollmentSaveFailed",uR=Object(Y.c)(function(){var e=Object(fi.createSelector)(iR,function(e){var t=Ft(e);return t&&t.name||""});return function(t,n){return{ready:!t.newEnrollmentPage.dataEntryIsLoading,error:t.newEnrollmentPage.dataEntryError,programName:e(t),orgUnitName:t.organisationUnits[t.currentSelections.orgUnitId]&&t.organisationUnits[t.currentSelections.orgUnitId].name}}},function(e){return{onSave:function(t,n,a){window.scrollTo(0,0),e(function(e,t,n){return Se(sR)({dataEntryId:e,itemId:t,formFoundation:n},{skipLogging:["formFoundation"]})}(n,t,a))}}})(We(function(){return{margin:4}})(Be()(rR))),dR=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"handleBackToMainPage",value:function(){}},{key:"renderHeaderButtons",value:function(){var e=this.props.enrollmentMetadata.enrollmentForm;return!e||e.customForm?null:j.createElement(hs,{color:"primary"},this.props.formHorizontal?s.a.t("Switch to form view"):s.a.t("Switch to row view"))}},{key:"renderHeader",value:function(){var e=this.props,t=e.classes,n=e.enrollmentMetadata;return j.createElement("div",{className:t.headerContainer},j.createElement("div",{className:t.header},s.a.t("New {{TET}}",{TET:n.trackedEntityType.name})),j.createElement("div",null,this.renderHeaderButtons()))}},{key:"render",value:function(){var e=this.props,t=e.classes,n=Object(ue.a)(e,["classes"]);return j.createElement("div",null,j.createElement(hs,{className:t.backButton,variant:"raised",onClick:this.handleBackToMainPage},j.createElement(Au.a,null),s.a.t("Working Lists")),j.createElement(Ye.a,{className:t.dataEntryPaper},this.renderHeader(),j.createElement(uR,n)))}}]),t}(j.Component),pR=gl()(function(e){return{headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},header:Object(Ie.a)({flexGrow:1},e.typography.title,{fontSize:18,fontWeight:500,paddingLeft:8}),dataEntryPaper:{marginBottom:e.typography.pxToRem(10),padding:e.typography.pxToRem(10)},backButton:{paddingLeft:8,marginBottom:10,textTransform:"none",backgroundColor:"#E9EEF4",boxShadow:"none",color:"#494949",fontSize:14,fontWeight:"normal"}}})(dR),fR=function(e){return e.currentSelections.programId},mR=Object(Y.c)(function(){var e=Object(fi.createSelector)(fR,function(e){var t;try{t=Ft(e)}catch(n){return null}return t.enrollment?t.enrollment:(R.a.error(Object(Ze.b)("could not find enrollment specification for ".concat(e))({program:t})),null)});return function(t){return{enrollmentMetadata:e(t)}}},function(e){return{}})(pR),hR=Object(Y.c)(function(e){return{error:e.newEnrollmentPage.selectionsError,ready:!e.newEnrollmentPage.isLoading}},function(e){return{}})(We(function(){return{margin:4}})(Be()(mR))),gR="UpdateSelectionsFromUrlForNewEnrollment",bR="SetOrgUnitBasedOnUrlForNewEnrollment",vR="ErrorRetrievingOrgUnitBasedOnUrlForNewEnrollment",OR="SetEmptyOrgUnitBasedOnUrlForNewEnrollment",yR="ValidSelectionsFromUrlForNewEnrollment",ER="InvalidSelectionsFromUrlForNewEnrollment",_R=function(e){return Se(ER)({error:e})},jR="SelectionsNotCompleteOpeningNewEnrollment",IR="OpenDataEntryForNewEnrollment",SR="Program not found",CR="Program is not a tracker program",TR="WorkingListUpdateDataRetrieved",RR="WorkingListUpdateDataRetrievalFailed",NR="SortWorkingList",kR="OpenEditEventPage",AR="OpenViewEventPage",wR="RequestDeleteEvent",PR="StartDeleteEvent",DR="DeleteEventFailed",xR="EventDeleted",FR="WorkingListUpdating",LR="WorkingListUpdatingWithDialog",UR="SetCurrentWorkingListConfig",MR="WorkingListConfigsRetrieved",VR="WorkingListConfigsRetrievalFailed",BR="WorkingListConfigsRetrievedBatch",GR="StartDeleteEventUpdateWorkingList",WR=function(e){return Se(FR)({listId:e})},HR=function(e){return Se(LR)({listId:e})},zR=function(e){return Se(AR)(e)},YR=function(e){return Se(PR)({},{offline:{effect:{url:"events/".concat(e),method:Mv},commit:{type:xR},rollback:{type:DR}}})},KR=function(e){return Se(MR)({workingListConfigs:e})},qR=function(e,t,n){return Se(UR)(Object(Ie.a)({},n,{configId:e,listId:t}))},XR=Object(Y.c)(function(e){return{events:e.events,eventsValues:e.eventsValues}},function(e){return{onRowClick:function(t){var n;window.scrollTo(0,0),e((n=t.eventId,Se(kR)(n)))}}})(ty),ZR=n(306),JR=n.n(ZR),QR=n(221),$R=n.n(QR),eN=n(222),tN=n.n(eN),nN=n(55),aN=n.n(nN)()(j.createElement(j.Fragment,null,j.createElement("path",{d:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"})),"CloseCircle"),rN=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).setIsHovered=function(){n.setState({isHovered:!0})},n.clearIsHovered=function(){n.setState({isHovered:!1})},n.handleClearClick=function(e){e.stopPropagation(),n.props.onClear()},n.state={isHovered:!1},n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"stopClearPropagation",value:function(e){e.stopPropagation()}},{key:"getCappedValue",value:function(e){var t=e.substring(0,7).trimRight();return"".concat(t,"...")}},{key:"getViewValueForFilter",value:function(e){var n=e.length>10?t.getCappedValue(e):e;return": ".concat(n)}}]),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,n=e.onChange,a=(e.onClear,e.classes),r=e.iconClass,i=e.title,o=e.arrowIconElement,c=e.filterValue,l=this.state.isHovered,u=Ri()(a.button,Object(Wt.a)({},a.hovered,l));return j.createElement("div",{onMouseEnter:this.setIsHovered,onMouseLeave:this.clearIsHovered},j.createElement(le,{className:u,onClick:n},i,t.getViewValueForFilter(c),o,j.createElement(dn.a,{title:s.a.t("Clear"),placement:"bottom",enterDelay:300},j.createElement(aN,{onMouseEnter:this.clearIsHovered,onMouseLeave:this.setIsHovered,className:Ri()(r,a.clearIcon),onClick:this.handleClearClick,onMouseDown:t.stopClearPropagation,onMouseUp:t.stopClearPropagation,onTouchStart:t.stopClearPropagation,onTouchEnd:t.stopClearPropagation,onTouchMove:t.stopClearPropagation,onKeyDown:t.stopClearPropagation,onKeyUp:t.stopClearPropagation}))))}}]),t}(j.Component),iN=Object(k.withStyles)(function(e){return{button:{backgroundColor:Object(Wc.lighten)(e.palette.primary.light,.7)+"!important"},hovered:{backgroundColor:"".concat(Object(Wc.lighten)(e.palette.primary.light,.4)," !important")},clearIcon:{color:e.palette.text.secondary,"&:hover":{color:e.palette.text.primary}}}})(rN),oN=[ft.TEXT,ft.NUMBER,ft.INTEGER,ft.INTEGER_POSITIVE,ft.INTEGER_NEGATIVE,ft.INTEGER_ZERO_OR_POSITIVE,ft.DATE,ft.BOOLEAN,ft.TRUE_ONLY,"ASSIGNEE"],sN=oN.reduce(function(e,t){return e[t]=t,e},{}),cN=function(e){return{buttonsContainer:{paddingTop:e.typography.pxToRem(8)},firstButtonContainer:{paddingRight:e.typography.pxToRem(8),display:"inline-block"}}},lN=function(){return function(e){return Object(k.withStyles)(cN)(function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).update=function(e){var n=t.filterTypeInstance.onGetUpdateData(e);t.props.onUpdate(n,e)},t.handleUpdateClick=function(){t.isValid()&&t.update()},t.focusUpdateButton=function(){t.updateButtonInstance&&t.updateButtonInstance.focus()},t.focusCloseButton=function(){t.closeButtonInstance&&t.closeButtonInstance.focus()},t.setFilterTypeInstance=function(e){t.filterTypeInstance=e},t.setUpdateButtonInstance=function(e){t.updateButtonInstance=e},t.setCloseButtonInstance=function(e){t.closeButtonInstance=e},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"isValid",value:function(){return!this.filterTypeInstance.onIsValid||this.filterTypeInstance.onIsValid()}},{key:"render",value:function(){var t=this.props,n=(t.onUpdate,t.onClose),a=t.classes,r=Object(ue.a)(t,["onUpdate","onClose","classes"]);return j.createElement(j.Fragment,null,j.createElement(e,Object.assign({filterTypeRef:this.setFilterTypeInstance,onUpdate:this.update,onFocusUpdateButton:this.focusUpdateButton,onFocusCloseButton:this.focusCloseButton},r)),j.createElement("div",{className:a.buttonsContainer},j.createElement("div",{className:a.firstButtonContainer},j.createElement(le,{muiButtonRef:this.setUpdateButtonInstance,primary:!0,onClick:this.handleUpdateClick},s.a.t("Update"))),j.createElement(le,{muiButtonRef:this.setCloseButtonInstance,secondary:!0,onClick:n},s.a.t("Close"))))}}]),n}(j.Component))}},uN=function(e,t){var n=t.listId;return{value:e.workingListFiltersEdit[n]&&e.workingListFiltersEdit[n].next&&Ee()(e.workingListFiltersEdit[n].next[t.id])?e.workingListFiltersEdit[n].next[t.id]:e.workingListFiltersEdit[n]&&e.workingListFiltersEdit[n][t.id]}},dN=function(e){return{}},pN=function(){return function(e){return Object(Y.c)(uN,dN)(e)}},fN=function(){return function(e){return function(t){return j.createElement(e,Object.assign({innerRef:t.filterTypeRef},t))}}},mN=n(408),hN=n.n(mN),gN=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleChange=function(e){n.props.onChange&&n.props.onChange(e.currentTarget.value,e)},n.handleBlur=function(e){n.props.onBlur&&n.props.onBlur(e.currentTarget.value,e)},n.handleChange=n.handleChange.bind(Object(J.a)(n)),n.handleBlur=n.handleBlur.bind(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"focus",value:function(){this.materialUIInstance&&this.materialUIInstance.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=(t.onChange,t.onBlur,t.value),a=Object(ue.a)(t,["onChange","onBlur","value"]);return I.a.createElement("div",{ref:function(t){e.materialUIContainerInstance=t}},I.a.createElement(hN.a,Object.assign({inputRef:function(t){e.materialUIInstance=t},value:n||"",onChange:this.handleChange,onBlur:this.handleBlur},a)))}}]),t}(j.Component);gN.defaultProps={value:""};var bN,vN,ON=gN,yN=function(){return function(e){return function(t){function n(e){var t;Object(B.a)(this,n),(t=Object(W.a)(this,Object(H.a)(n).call(this,e))).handleChange=t.handleChange.bind(Object(J.a)(t));var a=t.props.value;return t.state={value:a},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.setState({value:e.value})}},{key:"handleChange",value:function(e){this.setState({value:e})}},{key:"render",value:function(){var t=this.props,n=(t.onChange,t.value,Object(ue.a)(t,["onChange","value"])),a=this.state.value;return j.createElement(e,Object.assign({onChange:this.handleChange,value:a},n))}}]),n}(j.Component)}},EN=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleKeyPress=function(e){"Enter"===e.key&&n.props.onEnterKey(n.props.value)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onEnterKey,Object(ue.a)(e,["onEnterKey"]));return I.a.createElement(ON,Object.assign({onKeyPress:this.handleKeyPress,fullWidth:!0,placeholder:s.a.t("Contains text")},t))}}]),t}(I.a.Component),_N=yN()(EN),jN=function(e){return{requestData:"like:".concat(e),appliedText:e}},IN=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleEnterKey=function(e){n.props.onUpdate(e||null)},n.handleBlur=function(e){n.props.onCommitValue(e)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"onGetUpdateData",value:function(e){var t="undefined"!==typeof e?e:this.props.value;return t?jN(t):null}},{key:"render",value:function(){var e=this.props.value;return I.a.createElement(_N,{onBlur:this.handleBlur,onEnterKey:this.handleEnterKey,value:e})}}]),t}(j.Component),SN=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleBlur=function(e){n.props.onBlur(t.getValueObject(e))},n.handleKeyPress=function(e){"Enter"===e.key&&n.props.onEnterKey()},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.errorClass,a=(e.onBlur,e.onEnterKey,Object(ue.a)(e,["error","errorClass","onBlur","onEnterKey"]));return I.a.createElement("div",null,I.a.createElement(ON,Object.assign({onKeyPress:this.handleKeyPress,onBlur:this.handleBlur,placeholder:s.a.t("Min"),fullWidth:!0},a)),I.a.createElement("div",{className:n},t))}}],[{key:"getValueObject",value:function(e){return{min:e.trim()}}}]),t}(j.Component),CN=yN()(SN),TN=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleBlur=function(e){n.props.onBlur(t.getValueObject(e))},n.handleKeyPress=function(e){"Enter"===e.key&&n.props.onEnterKey(t.getValueObject(n.props.value||""))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error,n=(e.onBlur,e.onEnterKey,e.textFieldRef),a=e.errorClass,r=Object(ue.a)(e,["error","onBlur","onEnterKey","textFieldRef","errorClass"]);return I.a.createElement("div",null,I.a.createElement(ON,Object.assign({ref:n,onKeyPress:this.handleKeyPress,onBlur:this.handleBlur,placeholder:s.a.t("Max"),fullWidth:!0},r)),I.a.createElement("div",{className:a},t))}}],[{key:"getValueObject",value:function(e){return{max:e.trim()}}}]),t}(j.Component),RN=yN()(TN),NN=function(e){var t=[];return e.min&&t.push("ge:".concat(e.min)),e.max&&t.push("le:".concat(e.max)),2===t.length?t.join(":"):t[0]},kN=function(e){return e.min&&e.max?Number(e.min)===Number(e.max)?e.min:"".concat(e.min," ").concat(s.a.t("to")," ").concat(e.max):e.min?"".concat(s.a.t("greater than or equal to")," ").concat(e.min):"".concat(s.a.t("less than or equal to")," ").concat(e.max)},AN=function(e){return{requestData:NN(e),appliedText:kN(e)}},wN=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleEnterKeyInMin=function(){n.maxD2TextFieldInstance.focus()},n.handleEnterKeyInMax=function(e){var a=n.getUpdatedValue(e);a&&!t.isFilterValid(a.min,a.max,n.props.type)?n.props.onCommitValue(a):n.props.onUpdate(a||null)},n.handleFieldBlur=function(e){n.props.onCommitValue(n.getUpdatedValue(e))},n.setMaxD2TextFieldInstance=function(e){n.maxD2TextFieldInstance=e},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"onGetUpdateData",value:function(e){var t="undefined"!==typeof e?e:this.props.value;return t?AN(t):null}},{key:"onIsValid",value:function(){var e=this.props.value;return!e||t.isFilterValid(e.min,e.max,this.props.type)}},{key:"getUpdatedValue",value:function(e){var t=Object(Ie.a)({},this.props.value,e);return Object.keys(t).filter(function(e){return t[e]}).length>0?t:null}},{key:"getErrors",value:function(){var e=this.props.value,n=e&&e.min,a=e&&e.max,r=this.props.type,i=t.validateField(n,r),o=i.isValid,c=i.error,l=t.validateField(a,r),u=l.isValid,d=l.error,p=null;return o&&u&&n&&a&&Number(n)>Number(a)&&(p=s.a.t(t.errorMessages.MIN_GREATER_THAN_MAX)),{minValueError:c,maxValueError:d,logicError:p}}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.classes,a=this.getErrors(),r=a.minValueError,i=a.maxValueError,o=a.logicError;return I.a.createElement("div",null,I.a.createElement("div",{className:n.container},I.a.createElement("div",{className:n.inputContainer},I.a.createElement(CN,{value:t&&t.min,error:r,errorClass:n.error,onBlur:this.handleFieldBlur,onEnterKey:this.handleEnterKeyInMin})),I.a.createElement("div",{className:n.toLabelContainer},s.a.t("to")),I.a.createElement("div",{className:n.inputContainer},I.a.createElement(RN,{value:t&&t.max,error:i,errorClass:n.error,onBlur:this.handleFieldBlur,onEnterKey:this.handleEnterKeyInMax,textFieldRef:this.setMaxD2TextFieldInstance}))),I.a.createElement("div",{className:Ri()(n.error,n.logicErrorContainer)},o))}}],[{key:"validateField",value:function(e,n){if(!e)return{isValid:!0,error:null};var a=(0,t.validatorForTypes[n])(e);return{isValid:a,error:a?null:s.a.t(t.errorMessages[n])}}},{key:"isFilterValid",value:function(e,n,a){return!(!t.validateField(e,a).isValid||!t.validateField(e,a).isValid)&&!(e&&n&&Number(e)>Number(n))}}]),t}(j.Component);wN.errorMessages=(bN={MIN_GREATER_THAN_MAX:"Minimum value cannot be greater than maximum value"},Object(Wt.a)(bN,ft.NUMBER,"Please provide a valid number"),Object(Wt.a)(bN,ft.INTEGER,"Please provide a valid integer"),Object(Wt.a)(bN,ft.INTEGER_POSITIVE,"Please provide a positive integer"),Object(Wt.a)(bN,ft.INTEGER_NEGATIVE,"Please provide a negative integer"),Object(Wt.a)(bN,ft.INTEGER_ZERO_OR_POSITIVE,"Please provide zero or a positive integer"),bN),wN.validatorForTypes=(vN={},Object(Wt.a)(vN,ft.NUMBER,Wi),Object(Wt.a)(vN,ft.INTEGER,Mi),Object(Wt.a)(vN,ft.INTEGER_POSITIVE,Vi),Object(Wt.a)(vN,ft.INTEGER_NEGATIVE,Bi),Object(Wt.a)(vN,ft.INTEGER_ZERO_OR_POSITIVE,Gi),vN);var PN=Object(k.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},inputContainer:{width:e.typography.pxToRem(100)},toLabelContainer:{paddingTop:e.typography.pxToRem(6),paddingLeft:e.typography.pxToRem(10),paddingRight:e.typography.pxToRem(10),fontSize:e.typography.body1.fontSize},error:Object(Ie.a)({},e.typography.caption,{color:e.palette.error.main}),logicErrorContainer:{paddingTop:e.typography.pxToRem(10)}}})(wN),DN=n(146),xN=n.n(DN),FN=n(179),LN=n.n(FN),UN=n(178),MN=n.n(UN),VN=n(163),BN=n.n(VN),GN=n(202),WN=n.n(GN),HN=n(409),zN=n.n(HN),YN=n(410),KN=n.n(YN),qN="horizontal",XN="vertical",ZN=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleOptionChange=n.handleOptionChange.bind(Object(J.a)(n)),n.labelClasses=n.buildLabelClasses(),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"buildLabelClasses",value:function(){return{root:this.props.classes.label}}},{key:"getBoxes",value:function(e){var t=this,n=this.props.optionSet;return n?n.options.map(function(n,a){return I.a.createElement(WN.a,{control:I.a.createElement(xN.a,Object.assign({onChange:function(e,a){t.handleOptionChange(e,a,n.value)},checked:t.isChecked(n.value),icon:I.a.createElement(zN.a,null),checkedIcon:I.a.createElement(KN.a,null)},e)),label:n.text,key:a})}):null}},{key:"handleOptionChange",value:function(e,t,n){this.handleSingleSelectUpdate(t,n)}},{key:"handleSingleSelectUpdate",value:function(e,t){(!1!==e||this.props.nullable)&&this.props.onBlur(e?t:null)}},{key:"setCheckedStatusForBoxes",value:function(){var e=this.props.value;this.checkedValues=e||!1===e||0===e?(new Set).add(e):null}},{key:"isChecked",value:function(e){return!(!this.checkedValues||!this.checkedValues.has(e))}},{key:"renderHorizontal",value:function(e){return I.a.createElement(BN.a,{row:!0},this.getBoxes(e))}},{key:"renderVertical",value:function(e){return I.a.createElement(BN.a,null,this.getBoxes(e))}},{key:"renderBoxes",value:function(e){return this.props.orientation===XN?this.renderVertical(e):this.renderHorizontal(e)}},{key:"render",value:function(){var e=this,t=this.props,n=(t.onBlur,t.optionSet,t.label),a=(t.nullable,t.value,t.orientation,t.required),r=(t.classes,t.style,Object(ue.a)(t,["onBlur","optionSet","label","nullable","value","orientation","required","classes","style"]));return this.setCheckedStatusForBoxes(),I.a.createElement("div",{ref:function(t){e.materialUIContainerInstance=t}},I.a.createElement(LN.a,{component:"fieldset"},n?I.a.createElement(MN.a,{component:"label",required:!!a,classes:e.labelClasses,focused:!1},n):null,this.renderBoxes(r)))}}]),t}(j.Component),JN=Object(k.withStyles)(function(e){return{label:e.typography.formFieldTitle}})(ZN),QN="right",$N="up",ek="absolute",tk="inline",nk=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getAbsoluteBottom",value:function(){return this.props.inputUsesFloatingLabel?60:40}},{key:"getAbsoluteVerticalPosition",value:function(){return this.props.absoluteDirection===$N?{bottom:this.getAbsoluteBottom()}:{top:0}}},{key:"calculateMarginLeftInline",value:function(){var e=this.props,t=e.inputWidth;return e.calendarWidth-t}},{key:"getPopupStyle",value:function(){var e=this.props,t=e.anchorPosition,n=e.mode;return t===QN?n===tk?{marginLeft:"-".concat(this.calculateMarginLeftInline(),"px")}:Object(Ie.a)({},this.getAbsoluteVerticalPosition(),{right:0}):n===tk?{}:Object(Ie.a)({},this.getAbsoluteVerticalPosition(),{left:0})}},{key:"render",value:function(){var e=this.props,t=e.open,n=e.mode,a=(e.anchorPosition,e.absoluteDirection,e.classes),r=e.children;if(!t)return null;var i=n===tk?a.containerInline:a.containerAbsolute,o=n===tk?a.calendarInline:a.calendarAbsolute,s=this.getPopupStyle();return j.createElement("div",{className:i},j.createElement("div",{className:o,style:s},r))}}]),t}(j.Component),ak=Object(k.withStyles)(function(){return{containerAbsolute:{position:"relative"},containerInline:{},calendarAbsolute:{position:"absolute",zIndex:201},calendarInline:{}}})(nk),rk=(n(7011),function(e){return{accentColor:e.palette.secondary.main,floatingNav:{background:Object(Wc.fade)(Object(Wc.darken)(e.palette.primary.dark,.6),.8),chevron:Object(Wc.lighten)(e.palette.secondary.light,.4),color:"white"},headerColor:e.palette.primary.main,todayColor:e.palette.secondary.main,selectionColor:e.palette.primary.main,weekdayColor:e.palette.primary.main}}),ik=function(e){function t(e){var n;Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(J.a)(n));var a=Qc.get(),r=n.props.currentWidth;return n.calendarLocaleData={locale:a.dateFnsLocale,headerFormat:r>=400?a.calendarFormatHeaderLong:a.calendarFormatHeaderShort,weekdays:a.weekDaysShort.map(function(e){return ca(e)}),blank:a.selectDatesText,todayLabel:{long:a.todayLabelLong,short:a.todayLabelShort},weekStartsOn:a.weekStartsOn},n.theme=rk(n.props.theme),n.displayOptions=Object(Ie.a)({},t.displayOptions,n.props.displayOptions),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"shouldComponentUpdate",value:function(e){if(e.currentWidth!==this.props.currentWidth){var t=Qc.get();return e.currentWidth<400?this.calendarLocaleData.headerFormat=t.calendarFormatHeaderShort:this.calendarLocaleData.headerFormat=t.calendarFormatHeaderLong,!0}return!1}},{key:"handleChange",value:function(e){var t=ua(e);this.props.onDateSelected(t)}},{key:"getValue",value:function(e){if(!e)return null;var t=la(e);return t.isValid?t.momentDate.toDate():null}},{key:"getMinMaxProps",value:function(){var e={},t=this.props.minMoment,n=this.props.maxMoment;if(t){var a=t.toDate();e.min=a,e.minDate=a}if(n){var r=n.toDate();e.max=r,e.maxDate=r}return e}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.classes,a=e.currentWidth,r=e.height,i=(e.minMoment,e.maxMoment,e.onDateSelected,e.theme,e.displayOptions,Object(ue.a)(e,["value","classes","currentWidth","height","minMoment","maxMoment","onDateSelected","theme","displayOptions"]));return I.a.createElement("div",{className:n.container},I.a.createElement(Eo.a,Object.assign({},this.getMinMaxProps(),{selected:this.getValue(t),onSelect:this.handleChange,locale:this.calendarLocaleData,width:a,height:r,autoFocus:!1,theme:this.theme,displayOptions:this.displayOptions},i)))}}]),t}(j.Component);ik.displayOptions={showHeader:!1};var ok=Object(k.withTheme)()(Object(k.withStyles)(function(){return{container:{}}})(ik)),sk=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).state={popoverOpen:!1},n.handleTextFieldFocus=n.handleTextFieldFocus.bind(Object(J.a)(n)),n.handleDateSelected=n.handleDateSelected.bind(Object(J.a)(n)),n.handleTextFieldBlur=n.handleTextFieldBlur.bind(Object(J.a)(n)),n.hidePopover=n.hidePopover.bind(Object(J.a)(n)),n.handleDocumentClick=n.handleDocumentClick.bind(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"splitPassOnProps",value:function(e){var n={input:{},popup:{},calendar:{}};return e?Object.keys(e).reduce(function(n,a){var r;r=a.startsWith(t.propContainers.CALENDAR)?t.propContainers.CALENDAR:a.startsWith(t.propContainers.POPUP)?t.propContainers.POPUP:t.propContainers.INPUT;var i,o=(i=a.replace(r,"")).charAt(0).toLocaleLowerCase()+i.slice(1);return n[r][o]=e[a],n},n):n}}]),Object(G.a)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleDocumentClick)}},{key:"handleTextFieldFocus",value:function(){document.removeEventListener("click",this.handleDocumentClick),this.setState({popoverOpen:!0}),this.props.onFocus&&this.props.onFocus()}},{key:"handleDateSelected",value:function(e){this.props.onBlur(e),this.hidePopover(),this.props.onDateSelectedFromCalendar&&this.props.onDateSelectedFromCalendar(),document.removeEventListener("click",this.handleDocumentClick)}},{key:"handleDocumentClick",value:function(e){e.target&&e.target.className&&e.target.className.startsWith&&e.target.className.startsWith("Cal__")||e.target&&e.target.className&&e.target.className.baseVal&&e.target.className.baseVal.startsWith("Cal__")||(this.hidePopover(),document.removeEventListener("click",this.handleDocumentClick))}},{key:"handleTextFieldBlur",value:function(e,t){this.props.onBlur(e),t.relatedTarget&&"Cal__Container__root"===t.relatedTarget.className?document.addEventListener("click",this.handleDocumentClick):this.hidePopover()}},{key:"hidePopover",value:function(){this.setState({popoverOpen:!1})}},{key:"render",value:function(){var e=this,n=this.props,a=n.width,r=n.calendarWidth,i=n.calendarHeight,o=n.inputWidth,s=n.classes,c=(n.onBlur,n.onFocus,n.onDateSelectedFromCalendar,n.textFieldRef),l=Object(ue.a)(n,["width","calendarWidth","calendarHeight","inputWidth","classes","onBlur","onFocus","onDateSelectedFromCalendar","textFieldRef"]),u=this.state.popoverOpen,d=c?{ref:c}:null,p=o||a,f=r||a,m=t.splitPassOnProps(l),h=i||350;return j.createElement("div",{ref:function(t){e.containerInstance=t},style:{width:a}},j.createElement(ON,Object.assign({},d,{onFocus:this.handleTextFieldFocus,onBlur:this.handleTextFieldBlur,className:s.textField,width:p},m.input)),j.createElement(ak,Object.assign({open:u,onClose:this.hidePopover,width:f,height:h,inputWidth:p,inputUsesFloatingLabel:!!m.input.label},m.popup),j.createElement(ok,Object.assign({onDateSelected:this.handleDateSelected,value:this.props.value,currentWidth:f,height:h},m.calendar))))}}]),t}(j.Component);sk.propContainers={CALENDAR:"calendar",POPUP:"popup",INPUT:"input"};var ck,lk,uk,dk=Object(k.withStyles)(function(){return{textField:{width:"100%"}}})(sk),pk=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleBlur=function(e){n.props.onBlur(t.getValueObject(e))},n.handleKeyPress=function(e){"Enter"===e.key&&n.props.onEnterKey()},n.displayOptions={showWeekdays:!0,showHeader:!1},n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"getValueObject",value:function(e){return{from:e.trim()}}}]),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.errorClass,a=(e.onBlur,e.onEnterKey,Object(ue.a)(e,["error","errorClass","onBlur","onEnterKey"]));return I.a.createElement("div",null,I.a.createElement(dk,Object.assign({onKeyPress:this.handleKeyPress,onBlur:this.handleBlur,placeholder:s.a.t("From"),popupMode:ek,popupAbsoluteDirection:$N,width:150,calendarWidth:330,calendarHeight:170,calendarRowHeight:45,calendarDisplayOptions:this.displayOptions},a)),I.a.createElement("div",{className:n},t))}}]),t}(j.Component),fk=yN()(pk),mk=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleBlur=function(e){n.props.onBlur(t.getValueObject(e))},n.handleKeyPress=function(e){"Enter"===e.key&&n.props.onEnterKey(t.getValueObject(n.props.value||""))},n.handleDateSelectedFromCalendar=function(){n.props.onFocusUpdateButton()},n.displayOptions={showWeekdays:!0,showHeader:!1},n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"getValueObject",value:function(e){return{to:e.trim()}}}]),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error,n=(e.onBlur,e.onEnterKey,e.errorClass),a=(e.onFocusUpdateButton,Object(ue.a)(e,["error","onBlur","onEnterKey","errorClass","onFocusUpdateButton"]));return I.a.createElement("div",null,I.a.createElement(dk,Object.assign({onKeyPress:this.handleKeyPress,onBlur:this.handleBlur,onDateSelectedFromCalendar:this.handleDateSelectedFromCalendar,placeholder:s.a.t("To"),popupAnchorPosition:QN,popupMode:ek,popupAbsoluteDirection:$N,width:150,calendarWidth:330,calendarHeight:170,calendarRowHeight:45,calendarDisplayOptions:this.displayOptions},a)),I.a.createElement("div",{className:n},t))}}]),t}(j.Component),hk=yN()(mk),gk=(n(7012),"TODAY"),bk="THIS_WEEK",vk="THIS_MONTH",Ok="THIS_YEAR",yk="LAST_WEEK",Ek="LAST_MONTH",_k="LAST_THREE_MONTHS",jk="CUSTOM_RANGE",Ik=(ck={},Object(Wt.a)(ck,gk,s.a.t("Today")),Object(Wt.a)(ck,bk,s.a.t("This week")),Object(Wt.a)(ck,vk,s.a.t("This month")),Object(Wt.a)(ck,Ok,s.a.t("This Year")),Object(Wt.a)(ck,yk,s.a.t("Last week")),Object(Wt.a)(ck,Ek,s.a.t("Last month")),Object(Wt.a)(ck,_k,s.a.t("Last 3 months")),Object(Wt.a)(ck,jk,s.a.t("Custom range")),ck),Sk=function(e){return e.format("YYYY-MM-DD")},Ck=function(e){return Ua(e,ft.DATE)},Tk=function(e){return ha(e,ft.DATE)},Rk=(lk={},Object(Wt.a)(lk,gk,function(){return Ik[gk]}),Object(Wt.a)(lk,bk,function(){return Ik[bk]}),Object(Wt.a)(lk,vk,function(){return Ik[vk]}),Object(Wt.a)(lk,Ok,function(){return Ik[Ok]}),Object(Wt.a)(lk,yk,function(){return Ik[yk]}),Object(Wt.a)(lk,Ek,function(){return Ik[Ek]}),Object(Wt.a)(lk,_k,function(){return Ik[_k]}),Object(Wt.a)(lk,jk,function(e,t){var n="";if(e&&t){var a=Ck(e),r=Ck(t),i=De(a),o=De(r);if(i.isSame(o))n=Tk(a);else{var c=Tk(a),l=Tk(r);n="".concat(c," ").concat(s.a.t("to")," ").concat(l)}}else if(e){var u=Ck(e),d=Tk(u);n="".concat(s.a.t("after or equal to")," ").concat(d)}else{var p=Ck(t),f=Tk(p);n="".concat(s.a.t("before or equal to")," ").concat(f)}return n}),lk),Nk=(uk={},Object(Wt.a)(uk,gk,function(){var e=De(),t=e;return["ge:".concat(Sk(e)),"le:".concat(Sk(t))]}),Object(Wt.a)(uk,bk,function(){var e=De().startOf("week"),t=De().endOf("week");return["ge:".concat(Sk(e)),"le:".concat(Sk(t))]}),Object(Wt.a)(uk,vk,function(){var e=De().startOf("month"),t=De().endOf("month");return["ge:".concat(Sk(e)),"le:".concat(Sk(t))]}),Object(Wt.a)(uk,Ok,function(){var e=De().startOf("year"),t=De().endOf("year");return["ge:".concat(Sk(e)),"le:".concat(Sk(t))]}),Object(Wt.a)(uk,yk,function(){var e=De().subtract(1,"weeks").startOf("week"),t=De().subtract(1,"weeks").endOf("week");return["ge:".concat(Sk(e)),"le:".concat(Sk(t))]}),Object(Wt.a)(uk,Ek,function(){var e=De().subtract(1,"months").startOf("month"),t=De().subtract(1,"months").endOf("month");return["ge:".concat(Sk(e)),"le:".concat(Sk(t))]}),Object(Wt.a)(uk,_k,function(){var e=De().subtract(3,"months").startOf("month"),t=De().subtract(1,"months").endOf("month");return["ge:".concat(Sk(e)),"le:".concat(Sk(t))]}),Object(Wt.a)(uk,jk,function(e,t){var n=[];if(e){var a=Ck(e),r=Sk(De(a));n.push("ge:".concat(r))}if(t){var i=Ck(t),o=Sk(De(i));n.push("le:".concat(o))}return n}),uk),kk=function(e){return Nk[e.main](e.from,e.to)},Ak=function(e){return Rk[e.main](e.from,e.to)},wk=function(e){return{requestData:kk(e),appliedText:Ak(e)}},Pk=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleEnterKeyInFrom=function(){n.toD2DateTextFieldInstance.focus()},n.handleDateSelectedFromCalendarInFrom=function(){n.toD2DateTextFieldInstance.focus()},n.handleEnterKeyInTo=function(e){var a=n.getUpdatedValue(e);n.setState({submitAttempted:!0}),a&&!t.isFilterValid(a.main,a.from,a.to,n.props.type)?n.props.onCommitValue(a):n.props.onUpdate(a||null)},n.handleFieldBlur=function(e){n.props.onCommitValue(n.getUpdatedValue(e))},n.handleMainSelect=function(e){var t=e?{main:e}:null;n.props.onCommitValue(t)},n.setToD2DateTextFieldInstance=function(e){n.toD2DateTextFieldInstance=e},n.state={submitAttempted:!1},n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"convertDateFilterValueToClientValue",value:function(e){return Ua(e,ft.DATE)}},{key:"validateField",value:function(e,n){if(!e)return{isValid:!0,error:null};var a=(0,t.validatorForTypes[n])(e);return{isValid:a,error:a?null:s.a.t(t.errorMessages[n])}}},{key:"isFilterValid",value:function(e,n,a,r){return!(e===jk&&!n&&!a)&&(!(!t.validateField(n,r).isValid||!t.validateField(n,r).isValid)&&!(n&&a&&this.isFromAfterTo(n,a)))}},{key:"isFromAfterTo",value:function(e,n){var a=t.convertDateFilterValueToClientValue(e),r=t.convertDateFilterValueToClientValue(n),i=De(a),o=De(r);return i.isAfter(o)}}]),Object(G.a)(t,[{key:"onGetUpdateData",value:function(e){var t="undefined"!==typeof e?e:this.props.value;return t?wk(t):null}},{key:"onIsValid",value:function(){this.setState({submitAttempted:!0});var e=this.props.value;return!e||t.isFilterValid(e.main,e.from,e.to,this.props.type)}},{key:"getUpdatedValue",value:function(e){var t=Object(Ie.a)({},this.props.value,e);return t.from||t.to?t.main=jk:t.main===jk&&(t.main=null),Object.keys(t).filter(function(e){return t[e]}).length>0?t:null}},{key:"getErrors",value:function(){var e=this.props.value,n=this.state.submitAttempted,a=e&&e.main,r=e&&e.from,i=e&&e.to,o=this.props.type;if(a===jk&&!r&&!i)return{minValueError:null,maxValueError:null,logicError:n?s.a.t(t.errorMessages.CUSTOM_RANGE_WITHOUT_VALUES):null};var c=t.validateField(r,o),l=c.isValid,u=c.error,d=t.validateField(i,o),p=d.isValid,f=d.error,m=null;return l&&p&&r&&i&&t.isFromAfterTo(r,i)&&(m=s.a.t(t.errorMessages.FROM_GREATER_THAN_TO)),{minValueError:u,maxValueError:f,logicError:m}}},{key:"render",value:function(){var e=this.props,n=e.value,a=e.classes,r=e.onFocusUpdateButton,i=this.getErrors(),o=i.minValueError,c=i.maxValueError,l=i.logicError;return I.a.createElement("div",{id:"dateFilter"},I.a.createElement("div",null,I.a.createElement(JN,{optionSet:t.mainOptionSet,orientation:XN,value:n&&n.main,onBlur:this.handleMainSelect,color:"secondary",nullable:!0})),I.a.createElement("div",{className:a.fromToContainer},I.a.createElement("div",{className:a.inputContainer},I.a.createElement(fk,{value:n&&n.from,error:o,errorClass:a.error,onBlur:this.handleFieldBlur,onEnterKey:this.handleEnterKeyInFrom,onDateSelectedFromCalendar:this.handleDateSelectedFromCalendarInFrom})),I.a.createElement("div",{className:a.toLabelContainer},s.a.t("to")),I.a.createElement("div",{className:a.inputContainer},I.a.createElement(hk,{value:n&&n.to,error:c,errorClass:a.error,onBlur:this.handleFieldBlur,onEnterKey:this.handleEnterKeyInTo,textFieldRef:this.setToD2DateTextFieldInstance,onFocusUpdateButton:r}))),I.a.createElement("div",{className:Ri()(a.error,a.logicErrorContainer)},l))}}]),t}(j.Component);Pk.errorMessages=Object(Wt.a)({CUSTOM_RANGE_WITHOUT_VALUES:"Please specify a range",FROM_GREATER_THAN_TO:"The From date can't be after the To date"},ft.DATE,"Please provide a valid date"),Pk.validatorForTypes=Object(Wt.a)({},ft.DATE,Ju),Pk.mainOptionSet=new pt("mainOptions",[new st(function(e){e.text=Ik[gk],e.value=gk}),new st(function(e){e.text=Ik[bk],e.value=bk}),new st(function(e){e.text=Ik[vk],e.value=vk}),new st(function(e){e.text=Ik[Ok],e.value=Ok}),new st(function(e){e.text=Ik[yk],e.value=yk}),new st(function(e){e.text=Ik[Ek],e.value=Ek}),new st(function(e){e.text=Ik[_k],e.value=_k}),new st(function(e){e.text=Ik[jk],e.value=jk})]);var Dk=Object(k.withStyles)(function(e){return{fromToContainer:{display:"flex",flexWrap:"wrap"},inputContainer:{},toLabelContainer:{width:30,display:"flex",justifyContent:"center",alignItems:"center",paddingTop:e.typography.pxToRem(6),fontSize:e.typography.body1.fontSize},error:Object(Ie.a)({},e.typography.caption,{color:e.palette.error.main}),logicErrorContainer:{paddingTop:e.typography.pxToRem(10)}}})(Pk),xk="horizontal",Fk="vertical",Lk=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleOptionChange=n.handleOptionChange.bind(Object(J.a)(n)),n.labelClasses=n.buildLabelClasses(),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"buildLabelClasses",value:function(){return{root:this.props.classes.label}}},{key:"getBoxes",value:function(e){var t=this,n=this.props.optionSet;return n?n.options.map(function(n,a){return I.a.createElement(WN.a,{control:I.a.createElement(xN.a,Object.assign({onChange:function(e,a){t.handleOptionChange(e,a,n.value)},checked:t.isChecked(n.value)},e)),label:n.text,key:a})}):null}},{key:"handleOptionChange",value:function(e,t,n){this.handleSelectUpdate(t,n)}},{key:"handleSelectUpdate",value:function(e,t){var n=null;e?this.checkedValues?(this.checkedValues.add(t),n=Array.from(this.checkedValues)):n=[t]:this.checkedValues&&(this.checkedValues.delete(t),n=this.checkedValues.size>0?Array.from(this.checkedValues):null),this.props.onBlur(n)}},{key:"setCheckedStatusForBoxes",value:function(){var e=this.props.value;this.checkedValues=e||!1===e||0===e?new Set(e):null}},{key:"isChecked",value:function(e){return!(!this.checkedValues||!this.checkedValues.has(e))}},{key:"renderHorizontal",value:function(e){return I.a.createElement(BN.a,{row:!0},this.getBoxes(e))}},{key:"renderVertical",value:function(e){return I.a.createElement(BN.a,null,this.getBoxes(e))}},{key:"renderCheckboxes",value:function(e){return this.props.orientation===Fk?this.renderVertical(e):this.renderHorizontal(e)}},{key:"render",value:function(){var e=this,t=this.props,n=(t.onBlur,t.optionSet,t.label),a=(t.value,t.orientation,t.required),r=(t.classes,t.style,t.passOnClasses),i=Object(ue.a)(t,["onBlur","optionSet","label","value","orientation","required","classes","style","passOnClasses"]);return this.setCheckedStatusForBoxes(),I.a.createElement("div",{ref:function(t){e.materialUIContainerInstance=t}},I.a.createElement(LN.a,{component:"fieldset"},n?I.a.createElement(MN.a,{component:"label",required:!!a,classes:e.labelClasses,focused:!1},n):null,this.renderCheckboxes(Object(Ie.a)({},i,{classes:r}))))}}]),t}(j.Component),Uk=Object(k.withStyles)(function(e){return{label:e.typography.formFieldTitle}})(Lk),Mk=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).optionSet=t.getOptions(),n}return Object(z.a)(t,e),Object(G.a)(t,null,[{key:"getOptions",value:function(){var e=s.a.t("Yes"),t=s.a.t("No"),n=new pt;return n.addOption(new st(function(t){t.text=e,t.value="true"})),n.addOption(new st(function(e){e.text=t,e.value="false"})),n}}]),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.allowMultiple,n=Object(ue.a)(e,["allowMultiple"]),a=t?Uk:JN;return I.a.createElement("div",null,I.a.createElement(a,Object.assign({},n,{optionSet:this.optionSet})))}}]),t}(j.Component),Vk=function(e,t){var n=e.map(function(e){return Na(Ua(e,t),t)}).join(";");return"in:".concat(n)},Bk=function(e,t){return e.map(function(e){return t?t.getOptionText(e):e}).join(", ")},Gk=function(e,t,n){return{requestData:Vk(e,t),appliedText:Bk(e,n)}},Wk=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).setBooleanFieldInstance=function(e){n.booleanFieldInstance=e},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"onGetUpdateData",value:function(){var e=this.props.value;if(!e)return null;var t=this.booleanFieldInstance&&this.booleanFieldInstance.optionSet;return Gk(e,this.props.type,t)}},{key:"onIsValid",value:function(){return!0}},{key:"render",value:function(){var e=this.props,t=e.onCommitValue,n=e.value,a=e.classes;return I.a.createElement("div",{className:a.selectBoxesContainer},I.a.createElement(Mk,{ref:this.setBooleanFieldInstance,allowMultiple:!0,value:n,onBlur:t,orientation:Fk}))}}]),t}(j.Component),Hk=Object(k.withStyles)(function(e){return{selectBoxesContainer:{marginRight:e.typography.pxToRem(-24)}}})(Wk),zk=n(411),Yk=n.n(zk),Kk=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(J.a)(n)),n.labelClasses=n.buildLabelClasses(),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"buildLabelClasses",value:function(){return{root:this.props.classes.label}}},{key:"handleChange",value:function(e,t){var n;n=t?"true":null,this.props.onBlur(n)}},{key:"render",value:function(){var e=this,t=this.props,n=(t.onBlur,t.value),a=t.label,r=t.required,i=(t.classes,t.style),o=t.useSwitch,s=t.useValueLabel,c=Object(ue.a)(t,["onBlur","value","label","required","classes","style","useSwitch","useValueLabel"]),l=o?Yk.a:xN.a;return I.a.createElement("div",{ref:function(t){e.materialUIContainerInstance=t},style:i},I.a.createElement(LN.a,{component:"fieldset"},!a||s?null:I.a.createElement(MN.a,{component:"label",required:!!r,classes:e.labelClasses,focused:!1},a),I.a.createElement(BN.a,null,I.a.createElement(WN.a,{label:s?a:"",control:I.a.createElement(l,Object.assign({},c,{onChange:this.handleChange,checked:!!n}))}))))}}]),t}(j.Component),qk=Object(k.withStyles)(function(e){return{label:e.typography.formFieldTitle}})(Kk),Xk=function(e,t){var n=e.map(function(e){return Na(Ua(e,t),t)}).join(";");return"in:".concat(n)},Zk=function(e,t){return{requestData:Xk(e,t),appliedText:(n=e,n.map(function(){return s.a.t("Yes")}).join(", "))};var n},Jk=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleTrueOnlyBlur=function(e){n.props.onCommitValue(e?[e]:null)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"onGetUpdateData",value:function(){var e=this.props.value;return e?Zk(e,this.props.type):null}},{key:"onIsValid",value:function(){return!0}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.classes;return I.a.createElement("div",{className:n.selectBoxesContainer},I.a.createElement(qk,{label:s.a.t("Yes"),useValueLabel:!0,value:t,onBlur:this.handleTrueOnlyBlur,orientation:Fk}))}}]),t}(j.Component),Qk=Object(k.withStyles)(function(e){return{selectBoxesContainer:{marginRight:e.typography.pxToRem(-24)}}})(Jk),$k=function(e){var t=e.multiSelect,n=Object(ue.a)(e,["multiSelect"]);return t?I.a.createElement(Uk,Object.assign({orientation:xk},n)):I.a.createElement(JN,Object.assign({orientation:qN},n))};$k.defaultProps={multiSelect:!1};var eA=function(e,t){var n=e.map(function(e){return Na(Ua(e,t),t)}).join(";");return"in:".concat(n)},tA=function(e,t){return e.map(function(e){return t.getOptionText(e)}).join(", ")},nA=function(e,t,n){return{requestData:eA(e,t),appliedText:tA(e,n)}},aA=function(e,t){return{requestData:"eq:".concat(e),appliedText:t.getOptionText(e)}},rA=function(e){var t,n;return n=t=function(t){function n(e){var t;return Object(B.a)(this,n),(t=Object(W.a)(this,Object(H.a)(n).call(this,e))).formOptionSet=t.buildFormOptionSet(),t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"buildFormOptionSet",value:function(){var e=this.props.optionSet;return e.dataElement?e.dataElement.getConvertedOptionSet(ha):(R.a.error(Object(Ze.b)(n.errorMessages.DATAELEMENT_MISSING)({OptionSetConverter:this})),null)}},{key:"render",value:function(){return j.createElement(e,Object.assign({},this.props,{optionSet:this.formOptionSet}))}}]),n}(j.Component),t.errorMessages={DATAELEMENT_MISSING:"DataElement missing"},n}($k),iA=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"onGetUpdateData",value:function(){var e=this.props,t=e.value,n=e.singleSelect,a=e.optionSet,r=e.type;return t?n?aA(t,a):nA(t,r,a):null}},{key:"onIsValid",value:function(){return!0}},{key:"render",value:function(){var e=this.props,t=e.onCommitValue,n=e.optionSet,a=e.value,r=e.classes,i=e.singleSelect;return I.a.createElement("div",{className:r.selectBoxesContainer},I.a.createElement(rA,{optionSet:n,value:a,onBlur:t,orientation:Fk,multiSelect:!i}))}}]),t}(j.Component),oA=Object(k.withStyles)(function(e){return{selectBoxesContainer:{maxHeight:e.typography.pxToRem(250),overflowY:"auto",marginRight:e.typography.pxToRem(-24)}}})(iA),sA={CURRENT:"CURRENT",ANY:"ANY",NONE:"NONE",PROVIDED:"PROVIDED"};function cA(){return[{name:s.a.t("Me"),value:sA.CURRENT},{name:s.a.t("Anyone"),value:sA.ANY},{name:s.a.t("None"),value:sA.NONE},{name:s.a.t("Select user"),value:sA.PROVIDED}]}function lA(e){return{requestData:{assignedUserMode:e.mode,assignedUser:e.provided&&e.provided.id},appliedText:e.provided?e.provided.name:cA().find(function(t){return t.value===e.mode}).name}}var uA,dA=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleModeSelect=function(e){n.setState({error:""}),e?n.props.onCommitValue({mode:e}):n.props.onCommitValue(null)},n.handleUserSelect=function(e){n.setState({error:""}),n.props.onCommitValue({mode:sA.PROVIDED,provided:e})},n.modeOptions=cA(),n.state={error:""},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"onGetUpdateData",value:function(){var e=this.props.value;return e&&lA(e)}},{key:"onIsValid",value:function(){var e=this.props.value;return!(e&&e.mode===sA.PROVIDED&&!e.provided)||(this.setState({error:s.a.t("Please select the user")}),!1)}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.classes,a=t||{},r=a.mode,i=a.provided;return I.a.createElement("div",null,I.a.createElement("div",{className:n.selectBoxesContainer},I.a.createElement(ul,{options:this.modeOptions,value:r,orientation:Ro.VERTICAL,multiSelect:!1,onSelect:this.handleModeSelect})),r===sA.PROVIDED?I.a.createElement("div",null,I.a.createElement(Up,{value:i,onSet:this.handleUserSelect,inputPlaceholderText:s.a.t("Search for user"),focusOnMount:!0,useUpwardSuggestions:!0})):null,I.a.createElement("div",{className:n.error},this.state.error))}}]),t}(j.Component),pA=Object(k.withStyles)(function(e){return{selectBoxesContainer:{maxHeight:e.typography.pxToRem(250),overflowY:"auto",marginRight:e.typography.pxToRem(-24)},error:{color:e.palette.error.main}}})(dA),fA=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getContentsComponent",value:function(){var e=this.props,n=e.type,a=e.optionSet;if(a&&a.options&&a.options.length<=25)return t.getOptionSetComponent();var r,i=t.selectorContentsForTypes[n];return t.hasStylesHOC.includes(n)?lN()(pN()(fN()(i))):lN()(pN()((r=i,function(e){var t=e.filterTypeRef,n=Object(ue.a)(e,["filterTypeRef"]);return j.createElement(r,Object.assign({ref:t},n))})))}},{key:"render",value:function(){var e=this.props,t=e.classes,n=Object(ue.a)(e,["classes"]),a=this.getContentsComponent();return I.a.createElement("div",{className:t.container},I.a.createElement(a,n))}}],[{key:"getOptionSetComponent",value:function(){return lN()(pN()(fN()(oA)))}}]),t}(I.a.PureComponent);fA.selectorContentsForTypes=(uA={},Object(Wt.a)(uA,sN.TEXT,IN),Object(Wt.a)(uA,sN.NUMBER,PN),Object(Wt.a)(uA,sN.INTEGER,PN),Object(Wt.a)(uA,sN.INTEGER_POSITIVE,PN),Object(Wt.a)(uA,sN.INTEGER_NEGATIVE,PN),Object(Wt.a)(uA,sN.INTEGER_ZERO_OR_POSITIVE,PN),Object(Wt.a)(uA,sN.DATE,Dk),Object(Wt.a)(uA,sN.BOOLEAN,Hk),Object(Wt.a)(uA,sN.TRUE_ONLY,Qk),Object(Wt.a)(uA,sN.ASSIGNEE,pA),uA),fA.hasStylesHOC=[sN.NUMBER,sN.INTEGER,sN.INTEGER_POSITIVE,sN.INTEGER_NEGATIVE,sN.INTEGER_ZERO_OR_POSITIVE,sN.DATE,sN.BOOLEAN,sN.TRUE_ONLY,sN.ASSIGNEE];var mA=Object(k.withStyles)(function(e){return{container:{padding:e.typography.pxToRem(24)}}})(fA),hA={vertical:"bottom",horizontal:"left"},gA={vertical:"top",horizontal:"left"},bA=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).openFilterSelector=function(e){n.setState({filterSelectorOpen:{anchorElement:e.currentTarget}}),n.props.filterValue&&n.activeFilterButtonInstance&&n.activeFilterButtonInstance.clearIsHovered()},n.closeFilterSelector=function(){n.setState({filterSelectorOpen:null})},n.handleCloseFilterSelector=function(){n.closeFilterSelector();var e=n.props;(0,e.onRevertFilter)(e.listId)},n.handleEditFilterContents=function(e){var t=n.props,a=t.onEditFilterContents,r=t.itemId;a(t.listId,e,r)},n.handleFilterUpdate=function(e,t){var a=n.props,r=a.itemId;(0,a.onFilterUpdate)(a.listId,e,r,t),n.closeFilterSelector()},n.handleClearFilter=function(){var e=n.props,t=e.listId,a=e.itemId;(0,e.onClearFilter)(t,a)},n.refActiveFilterInstance=function(e){n.activeFilterButtonInstance=e},n.state={filterSelectorOpen:null},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"renderSelectorContents",value:function(){var e=this.props,t=e.itemId,n=e.type,a=e.optionSet,r=e.singleSelect,i=e.listId;return I.a.createElement(mA,{listId:i,type:n,optionSet:a,singleSelect:r,id:t,onCommitValue:this.handleEditFilterContents,onUpdate:this.handleFilterUpdate,onClose:this.handleCloseFilterSelector})}},{key:"renderWithAppliedFilter",value:function(){var e=this.props,t=e.classes,n=e.title,a=e.filterValue,r=e.listId,i=this.state.filterSelectorOpen?I.a.createElement(tN.a,{className:t.icon}):I.a.createElement($R.a,{className:t.icon});return I.a.createElement(iN,{listId:r,innerRef:this.refActiveFilterInstance,onChange:this.openFilterSelector,onClear:this.handleClearFilter,iconClass:t.icon,title:n,arrowIconElement:i,filterValue:a})}},{key:"renderWithoutAppliedFilter",value:function(){var e=this.props,t=e.classes,n=e.title;return I.a.createElement(le,{onClick:this.openFilterSelector},n,this.state.filterSelectorOpen?I.a.createElement(tN.a,{className:t.icon}):I.a.createElement($R.a,{className:t.icon}))}},{key:"render",value:function(){var e=this,t=this.props.filterValue,n=this.state.filterSelectorOpen,a=t?this.renderWithAppliedFilter():this.renderWithoutAppliedFilter();return I.a.createElement(I.a.Fragment,null,a,I.a.createElement(JR.a,{open:!!n,anchorEl:n&&n.anchorElement,onClose:this.handleCloseFilterSelector,anchorOrigin:hA,transformOrigin:gA},n?e.renderSelectorContents():null))}}]),t}(j.Component),vA=Object(k.withStyles)(function(e){return{icon:{fontSize:e.typography.pxToRem(20),paddingLeft:e.typography.pxToRem(5)},inactiveFilterButton:{backgroundColor:e.palette.grey[100]},inactiveFilterButtonLabel:{textTransform:"none"}}})(bA),OA="EditFilterSelectorContentsForWorkingList",yA="SetWorkingListFilter",EA="ClearWorkingListFilter",_A="RevertWorkingListFilter",jA="RestMenuItemSelected",IA="UpdateIncludedFiltersAfterColumnSortingForWorkingList",SA="SetFilterBatch",CA=function(e,t,n){return Se(OA)({listId:e,value:t,itemId:n})},TA=function(e,t){return Se(EA)({listId:e,itemId:t})},RA=function(e,t){return Se(jA)({id:e,listId:t})},NA=function(e,t){return e.workingListsAppliedFilters[t.listId]&&e.workingListsAppliedFilters[t.listId][t.itemId]},kA=function(e,t){return e.workingListsAppliedFilters[t.listId]&&e.workingListsAppliedFilters[t.listId].next&&e.workingListsAppliedFilters[t.listId].next[t.itemId]},AA=Object(Y.c)(function(){var e=Object(fi.createSelector)(NA,kA,function(e,t){return t||e});return function(t,n){return{filterValue:e(t,n)}}},function(e){return{onEditFilterContents:function(t,n,a){e(CA(t,n,a))},onFilterUpdate:function(t,n,a,r){var i=Ee()(r)?[CA(t,r,a)]:[];i.push(null==n?TA(t,a):function(e,t,n){return Se(yA)(Object(Ie.a)({},t,{itemId:n,listId:e}))}(t,n,a)),i.push(WR(t)),e(Object(He.batchActions)(i,SA))},onClearFilter:function(t,n){e(Object(He.batchActions)([TA(t,n),WR(t)],SA))},onRevertFilter:function(t){e(function(e){return Se(_A)({listId:e})}(t))}}})(vA),wA=n(139),PA=n(175),DA=n.n(PA),xA=n(220),FA=n.n(xA),LA=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleMenuButtonClick=function(){n.toggleMenu()},n.handleClickAway=function(e){n.menuReferenceInstance&&n.menuReferenceInstance.contains(e.target)||n.closeMenu()},n.handleItemSelected=function(e){n.closeMenu(),n.props.onItemSelected(e)},n.handleReferenceInstanceRetrieved=function(e){n.managerRef(e),n.menuReferenceInstance=e},n.state={filterSelectorOpen:!1},n.setClassesOnMount(),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"setClassesOnMount",value:function(){var e=this.props.classes;this.menuClasses={paper:e.menuPaper},this.menuItemClasses={root:e.menuItemRoot}}},{key:"closeMenu",value:function(){this.setState({filterSelectorOpen:!1})}},{key:"toggleMenu",value:function(){this.setState({filterSelectorOpen:!this.state.filterSelectorOpen})}},{key:"renderMenuItems",value:function(){var e=this;return this.props.columns.map(function(t){return I.a.createElement(Tp.a,{key:t.id,onClick:function(){e.handleItemSelected(t.id)},classes:e.menuItemClasses},t.header)})}},{key:"render",value:function(){var e=this,t=this.props.classes;return I.a.createElement(wA.a,null,I.a.createElement(wA.c,null,function(n){var a=n.ref;return e.managerRef=a,I.a.createElement("div",{ref:e.handleReferenceInstanceRetrieved},I.a.createElement(le,{variant:"outlined",color:"default",size:"small",classes:{button:t.restMenuButton},muiClasses:{label:t.restMenuButtonLabel},onClick:e.handleMenuButtonClick},s.a.t("More filters"),e.state.filterSelectorOpen?I.a.createElement(tN.a,{className:t.icon}):I.a.createElement($R.a,{className:t.icon})))}),this.state.filterSelectorOpen&&I.a.createElement(wA.b,{placement:"bottom-start"},function(t){var n=t.ref,a=t.style,r=t.placement;return I.a.createElement("div",{ref:n,style:Object(Ie.a)({},a,{zIndex:1}),"data-placement":r},I.a.createElement(DA.a,{onClickAway:e.handleClickAway},I.a.createElement(Pe.a,{in:!!e.state.filterSelectorOpen,id:"menu-list-grow",style:{transformOrigin:"0 0 0"},timeout:{exit:0,enter:200}},I.a.createElement(Ye.a,null,I.a.createElement(FA.a,{role:"menu"},e.renderMenuItems())))))}))}}]),t}(I.a.Component),UA=Object(k.withStyles)(function(e){return{icon:{fontSize:e.typography.pxToRem(20),paddingLeft:e.typography.pxToRem(5)},restMenuButton:{backgroundColor:e.palette.grey[100]},restMenuButtonLabel:{textTransform:"none"},menuPaper:{maxHeight:30},menuItemRoot:{padding:6,paddingLeft:24,paddingRight:24,fontSize:e.typography.pxToRem(14)},popperContainerHidden:{display:"none"},popper:{zIndex:1}}})(LA),MA=function(e){return{filterButtonContainer:{paddingRight:e.typography.pxToRem(e.spacing.unit),paddingBottom:e.typography.pxToRem(e.spacing.unit/2),paddingTop:e.typography.pxToRem(e.spacing.unit/2)}}},VA=function(e,t){return{userSelectedFilters:e.workingListsUserSelectedFilters[t.listId]}},BA=function(){var e=Object(fi.createSelector)(function(e){return e.dispatch},function(e){return e.listId},function(e){return e.onItemSelected},function(e,t,n){return function(a){return e(n(a,t))}});return function(t,n){return{onRestMenuItemSelected:e({dispatch:t,listId:n.listId,onItemSelected:RA})}}},GA=function(e){return Object(Y.c)(VA,BA)(function(e){return Object(k.withStyles)(MA)(function(t){function n(){return Object(B.a)(this,n),Object(W.a)(this,Object(H.a)(n).apply(this,arguments))}return Object(z.a)(n,t),Object(G.a)(n,[{key:"getUserSelectedColumns",value:function(e,t){var n=this.props.userSelectedFilters||{};return e.filter(function(e){return t.every(function(t){return t!==e})}).filter(function(e){return n[e.id]})}},{key:"renderConcatenatedSelectorButton",value:function(e){return e&&0!==e.length?j.createElement(UA,{key:"restMenu",listId:this.props.listId,columns:e,onItemSelected:this.props.onRestMenuItemSelected}):null}},{key:"renderIndividualFilterSelectorButtons",value:function(e){var t=this,n=this.props.classes;return e.map(function(e){return j.createElement("div",{key:e.id,className:n.filterButtonContainer},j.createElement(AA,{listId:t.props.listId,itemId:e.id,type:e.type,title:e.header,optionSet:e.optionSet,singleSelect:e.singleSelect}))})}},{key:"renderFilterSelectorButtons",value:function(){var e=this.props.columns;if(!e)return null;var t=e.filter(function(e){return oN.includes(e.type)||e.optionSet&&e.optionSet.options.length<=25}),a=n.getCalculatedIndividiualColumns(t),r=[].concat(Object(Xe.a)(a),Object(Xe.a)(this.getUserSelectedColumns(t,a))),i=n.getRestColumns(t,r),o=this.renderIndividualFilterSelectorButtons(r),s=this.renderConcatenatedSelectorButton(i);return s?[].concat(Object(Xe.a)(o),[s]):o}},{key:"render",value:function(){var t=this.props,n=(t.classes,t.userSelectedFilters,Object(ue.a)(t,["classes","userSelectedFilters"])),a=this.renderFilterSelectorButtons();return j.createElement(j.Fragment,null,j.createElement(e,Object.assign({filterButtons:a},n)))}}],[{key:"getCalculatedIndividiualColumns",value:function(e){var t=e.filter(function(e){return e.visible});if(t.length<4){var n=e.filter(function(e){return!e.visible}),a=[].concat(Object(Xe.a)(t),Object(Xe.a)(n));return a.slice(0,a.length>=4?4:a.length)}return t.slice(0,4)}},{key:"getRestColumns",value:function(e,t){return e.filter(function(e){return t.every(function(t){return t!==e})})}}]),n}(j.Component))}(e))},WA="ChangePage",HA="ChangeRowsPerPage",zA=function(e,t){return{rowsPerPage:e.workingListsMeta[t.listId].rowsPerPage,currentPage:e.workingListsMeta[t.listId].currentPage,rowsCount:e.workingListsMeta[t.listId].rowsCount}},YA=function(e){return{onChangeRowsPerPage:function(t,n){e(function(e,t){return Se(HA)({listId:e,rowsPerPage:t})}(t,n))},onChangePage:function(t,n){e(function(e,t){return Se(WA)({listId:e,pageNumber:t})}(t,n))}}};n(7020);var KA=function(e){return function(t){function n(e){var t;return Object(B.a)(this,n),(t=Object(W.a)(this,Object(H.a)(n).call(this,e))).translations={clearText:s.a.t("Clear"),noResults:s.a.t("No results")},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=Object(A.a)({},this.props);return j.createElement(e,Object.assign({translations:this.translations},t))}}]),n}(j.Component)}(hn),qA=function(e){return function(e){return function(t){function n(t){var a;return Object(B.a)(this,n),(a=Object(W.a)(this,Object(H.a)(n).call(this,t))).handleRowsSelect=function(e){a.props.onChangeRowsPerPage(e)},a.renderSelectorElement=function(){var e=a.props.rowsPerPage;return j.createElement("div",{id:"rows-per-page-selector"},j.createElement(KA,{onSelect:a.handleRowsSelect,options:a.options,value:e,nullable:!1,withoutUnderline:!0,searchable:!1}))},a.render=function(){var t=Object(A.a)({},a.props);return j.createElement(e,Object.assign({rowsCountSelector:a.renderSelectorElement()},t))},a.options=n.getOptions(),a}return Object(z.a)(n,t),Object(G.a)(n,null,[{key:"getOptions",value:function(){return[10,15,25,50,100].map(function(e){return{label:e.toString(),value:e}})}}]),n}(j.Component)}(e)}(yE()(kc)),XA=function(e){return Object(Y.c)(zA,YA)(e)}(function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).getPaginationLabelDisplayedRows=function(e,t){return"".concat(e," of ").concat(t)},n.handleChangePage=function(e){n.props.onChangePage(n.props.listId,e)},n.handleChangeRowsPerPage=function(e){n.props.onChangeRowsPerPage(n.props.listId,e)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=Object(A.a)({},this.props);return j.createElement(qA,Object.assign({},e,{onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,rowsCountSelectorLabel:s.a.t("Rows per page"),onGetLabelDisplayedRows:this.getPaginationLabelDisplayedRows}))}}]),t}(j.Component)),ZA=n(322),JA=n(1165),QA=n(1115),$A=n.n(QA),ew=n(413),tw=n.n(ew),nw=n(416),aw=n.n(nw),rw=n(223),iw=n.n(rw),ow=n(414),sw=n.n(ow),cw=n(415),lw=n.n(cw),uw=n(412),dw=n.n(uw),pw={cursor:"move",outline:"none"},fw="listItem",mw=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.isDragging,a=e.connectDragSource,r=n?0:1;return(0,e.connectDropTarget)(a(I.a.createElement("tr",{key:this.props.id,tabIndex:-1,style:Object(Ie.a)({},pw,{opacity:r})},I.a.createElement(iw.a,{component:"th",scope:"row"},I.a.createElement(xN.a,{color:"primary",checked:this.props.visible,tabIndex:-1,disableRipple:!0,onClick:this.props.handleToggle(this.props.id)}),t),I.a.createElement(iw.a,null,I.a.createElement(dw.a,{style:{float:"right"}})))))}}]),t}(j.Component),hw=Object(ZA.c)(fw,{beginDrag:function(e){return{id:e.id,index:e.index}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(Object(ZA.d)(fw,{hover:function(e,t){var n=t.getItem().index,a=e.index;n!==a&&(e.moveListItem(n,a),t.getItem().index=a)}},function(e){return{connectDropTarget:e.dropTarget()}})(mw)),gw=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).moveListItem=n.moveListItem.bind(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"moveListItem",value:function(e,t){var n,a=this.props.listItems,r=a[e];n=$A()(a,{$splice:[[e,1],[t,0,r]]}),this.props.handleUpdateListOrder(n)}},{key:"render",value:function(){var e=this,t=this.props.listItems;return I.a.createElement(tw.a,null,I.a.createElement(sw.a,null,I.a.createElement(lw.a,null,I.a.createElement(iw.a,{colSpan:12},s.a.t("Column")))),I.a.createElement(aw.a,null,t.map(function(t,n){return I.a.createElement(hw,{key:t.id,index:n,id:t.id,text:t.header,moveListItem:e.moveListItem,handleToggle:e.props.handleToggle,visible:t.visible})})))}}]),t}(j.Component),bw=Object(ZA.b)(JA.a)(gw),vw=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleSave=function(){(0,n.props.onSave)(n.state.columnList)},n.handleToggle=function(e){return function(){var t=n.state.columnList.findIndex(function(t){return t.id===e}),a=n.state.columnList;a[t]=Object(Ie.a)({},a[t],{visible:!a[t].visible}),n.setState({columnList:a})}},n.handleUpdateListOrder=function(e){n.setState({columnList:e})},n.state={columnList:Object(Xe.a)(n.props.columns)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.open,n=e.onClose;return I.a.createElement("span",null,I.a.createElement(te.a,{open:!!t,onClose:n,fullWidth:!0},I.a.createElement(se.a,null,s.a.t("Columns to show in table")),I.a.createElement(ie.a,null,I.a.createElement(bw,{listItems:this.state.columnList,handleUpdateListOrder:this.handleUpdateListOrder,handleToggle:this.handleToggle})),I.a.createElement(ae.a,null,I.a.createElement(ps.a,{onClick:this.handleSave,color:"primary",autoFocus:!0},"Save"))))}}]),t}(j.Component),Ow=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).openDialog=function(){n.setState({dialogOpen:!0})},n.closeDialog=function(){n.setState({dialogOpen:!1})},n.handleSaveColumnOrder=function(e){n.props.onSave(e),n.closeDialog()},n.state={dialogOpen:!1},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.columns;return j.createElement(j.Fragment,null,j.createElement(Ol.n,{disableFocusListener:!0,disableTouchListener:!0,enterDelay:500,title:s.a.t("Select columns")},j.createElement(Ol.h,{onClick:this.openDialog},j.createElement(Tl.o,null))),j.createElement(vw,{open:this.state.dialogOpen,onClose:this.closeDialog,onSave:this.handleSaveColumnOrder,columns:e}))}}]),t}(j.Component),yw=n(401),Ew=n.n(yw),_w=n(417),jw=n.n(_w),Iw=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleDelete=function(e){n.closeMenu(),n.props.onDelete(n.props.row.eventId),e.stopPropagation()},n.handleView=function(e){n.closeMenu(),n.props.onView(n.props.row.eventId),e.stopPropagation()},n.handleReferenceInstanceRetrieved=function(e){n.managerRef(e),n.menuReferenceInstance=e},n.toggleMenu=function(e){n.setState({menuOpen:!n.state.menuOpen}),e.stopPropagation()},n.closeMenu=function(){n.setState({menuOpen:!1})},n.handleClickAway=function(e){n.menuReferenceInstance&&n.menuReferenceInstance.contains(e.target)||n.closeMenu()},n.renderMenuItems=function(){var e=n.props.classes;return j.createElement(FA.a,{role:"menu",className:e.menuList},j.createElement(Tp.a,{onClick:n.handleView},s.a.t("View event info")),j.createElement(Tp.a,{onClick:n.handleDelete},j.createElement(jw.a,{className:e.deleteIcon}),s.a.t("Delete event")))},n.state={menuOpen:!1},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return j.createElement(wA.a,null,j.createElement(wA.c,null,function(t){var n=t.ref;return e.managerRef=n,j.createElement("div",{ref:e.handleReferenceInstanceRetrieved},j.createElement(be.a,{onClick:e.toggleMenu},j.createElement(Ew.a,null)))}),this.state.menuOpen&&j.createElement(wA.b,{placement:"bottom-end"},function(n){var a=n.ref,r=n.style,i=n.placement;return j.createElement("div",{ref:a,style:r,className:t.popperContainer,"data-placement":i},j.createElement(DA.a,{onClickAway:e.handleClickAway},j.createElement(Pe.a,{in:!!e.state.menuOpen,id:"menu-list-grow",style:{transformOrigin:"0 0 0"},timeout:{exit:0,enter:200}},j.createElement(Ye.a,null,e.renderMenuItems()))))}))}}]),t}(j.Component),Sw=gl()(function(e){return{deleteIcon:{fill:e.palette.error.main},menuList:{padding:0},popperContainer:{zIndex:100}}})(Iw),Cw=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return I.a.createElement(te.a,{open:!0},I.a.createElement(ie.a,null,I.a.createElement(D,null)))}}]),t}(j.Component),Tw=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).getSortHandler=function(e){return function(t){n.props.onSort(n.props.listId,e,t)}},n.getCustomEndCellHeader=function(){var e=n.props,t=e.getCustomEndCellHeader,a=e.getCustomEndCellBody,r=e.customEndCellHeaderStyle,i=e.classes;return a?j.createElement(Nc,{className:Ri()(i.cell,i.headerCell),style:r},t&&t(n.props)):null},n.getCustomEndCellBody=function(e,t){var a=n.props,r=a.getCustomEndCellBody,i=a.customEndCellBodyStyle,o=a.classes;return r?j.createElement(Nc,{className:Ri()(o.cell,o.bodyCell),style:i},r(e,t)):null},n.columnHeaderInstances=[],n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"setColumnWidth",value:function(e,t){e&&!this.props.isUpdating&&(this.columnHeaderInstances[t]=e)}},{key:"renderHeaderRow",value:function(e){var n=this,a=this.props.sortById,r=this.props.sortByDirection,i=e.map(function(e,i){return j.createElement(Nc,{innerRef:function(e){n.setColumnWidth(e,i)},key:e.id,className:Ri()(n.props.classes.cell,n.props.classes.headerCell),style:{width:n.props.isUpdating&&n.columnHeaderInstances.length-1>=i?n.columnHeaderInstances[i].clientWidth:"auto"}},j.createElement(PO,{isActive:e.id===a,initialDirection:t.typesWithAscendingInitialDirection.includes(e.type)?Pc.ASC:Pc.DESC,placement:t.typesWithRightPlacement.includes(e.type)?xc:Dc,direction:r,onSort:n.getSortHandler(e.id),childrenClass:n.props.classes.sortLabelChilden},e.header))});return j.createElement(wc,{className:this.props.classes.row},i,this.getCustomEndCellHeader())}},{key:"renderBody",value:function(e){var t=this.props,n=t.classes,a=t.getCustomEndCellBody,r=t.isUpdating,i=e.length+(a?1:0);return r?j.createElement(wc,{className:n.loadingRow},j.createElement(Sc,{colSpan:i,className:Ri()(n.cell,n.bodyCell,n.loadingCell)},j.createElement(D,null))):this.renderRows(e,i)}},{key:"renderRows",value:function(e,n){var a=this,r=this.props,i=r.dataSource,o=r.classes,c=r.rowIdKey,l=Object(ue.a)(r,["dataSource","classes","rowIdKey"]);return i&&0!==i.length?j.createElement(j.Fragment,null,i.map(function(n){var r=e.map(function(e){return j.createElement(Sc,{key:e.id,className:Ri()(o.cell,o.bodyCell)},j.createElement("div",{style:t.typesWithRightPlacement.includes(e.type)?{textAlign:"right"}:null},n[e.id]))});return j.createElement(wc,{key:n[c],className:Ri()(o.row,o.dataRow),onClick:function(){return a.props.onRowClick(n)}},r,a.getCustomEndCellBody(n,l))})):j.createElement(wc,{className:o.row},j.createElement(Sc,{colSpan:n,className:Ri()(o.cell,o.bodyCell)},s.a.t("No items to display")))}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.columns,a=n?n.filter(function(e){return e.visible}):[];return j.createElement("div",{className:t.tableContainer},j.createElement(Lc,{className:t.table},j.createElement(Rc,null,this.renderHeaderRow(a)),j.createElement(Oc,null,this.renderBody(a))))}}]),t}(j.Component);Tw.typesWithAscendingInitialDirection=[ft.TEXT,ft.LONG_TEXT,ft.USERNAME,"ASSIGNEE"],Tw.typesWithRightPlacement=[ft.NUMBER,ft.INTEGER,ft.INTEGER_POSITIVE,ft.INTEGER_NEGATIVE,ft.INTEGER_ZERO_OR_POSITIVE];var Rw=Object(k.withStyles)(function(e){return{tableContainer:{overflowX:"auto"},table:{},row:{},loadingRow:{height:100},dataRow:{cursor:"pointer","&:hover":{backgroundColor:"#F1FBFF"}},cell:{padding:"".concat(e.spacing.unit/2,"px ").concat(7*e.spacing.unit,"px ").concat(e.spacing.unit/2,"px ").concat(3*e.spacing.unit,"px"),"&:last-child":{paddingRight:3*e.spacing.unit},borderBottomColor:"light"===e.palette.type?Object(Wc.lighten)(Object(Wc.fade)(e.palette.divider,1),.88):Object(Wc.darken)(Object(Wc.fade)(e.palette.divider,1),.8)},bodyCell:{fontSize:e.typography.pxToRem(13),color:e.palette.text.primary},staticHeaderCell:{width:1},headerCell:{fontSize:e.typography.pxToRem(12),color:e.palette.text.secondary,fontWeight:e.typography.fontWeightMedium},loadingCell:{textAlign:"center"}}})(Tw),Nw=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleReferenceInstanceRetrieved=function(e){n.managerRef(e),n.menuReferenceInstance=e},n.toggleMenu=function(e){n.setState({popperOpen:!n.state.popperOpen}),e&&e.stopPropagation()},n.closeMenu=function(){n.setState({popperOpen:!1})},n.handleClickAway=function(e){n.menuReferenceInstance&&n.menuReferenceInstance.contains(e.target)||n.closeMenu()},n.state={popperOpen:!1},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.getPopperAction,r=t.getPopperContent;return j.createElement(wA.a,null,j.createElement(wA.c,null,function(t){var n=t.ref;return e.managerRef=n,j.createElement("div",{ref:e.handleReferenceInstanceRetrieved},a(e.toggleMenu))}),this.state.popperOpen&&j.createElement(wA.b,{placement:this.props.placement},function(t){var a=t.ref,i=t.style,o=t.placement;return j.createElement("div",{ref:a,style:Object(Ie.a)({},i,{zIndex:1}),className:n?n.popperContainer:"","data-placement":o},j.createElement(DA.a,{onClickAway:e.handleClickAway},j.createElement(Pe.a,{in:!!e.state.popperOpen,id:"menu-list-grow",style:{transformOrigin:"0 0 0"},timeout:{exit:0,enter:200}},j.createElement(j.Fragment,null,r(e.toggleMenu)))))}))}}]),t}(j.Component);Nw.defaultProps={placement:"bottom-end"};var kw,Aw=Nw,ww=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"renderButtons",value:function(){var e=this.props,n=e.request,a=e.programStageId,r=e.classes,i=t.getUrl(),o=n.queryParams||{},c=(o.pageSize,o.page,o.totalPages,Object(ue.a)(o,["pageSize","page","totalPages"])),l=Object(Ie.a)({},c,{programStage:a,skipPaging:"true"}),u=t.getUrlEncodedParamsString(l);return j.createElement("div",{className:r.downloadContainer},j.createElement("div",{className:r.downloadLinkContainer},j.createElement("a",{download:"events.json",href:"".concat(i,".json?").concat(u),className:r.downloadLink},j.createElement(le,null,s.a.t("Download as JSON")))),j.createElement("div",{className:r.downloadLinkContainer},j.createElement("a",{download:"events.xml",href:"".concat(i,".xml?").concat(u),className:r.downloadLink},j.createElement(le,null,s.a.t("Download as XML")))),j.createElement("div",null,j.createElement("a",{download:"events.csv",href:"".concat(i,".csv?").concat(u),className:r.downloadLink},j.createElement(le,null,s.a.t("Download as CSV")))))}},{key:"render",value:function(){var e=this.props,t=e.open,n=e.onClose;return j.createElement("span",null,j.createElement(Ol.c,{open:!!t,onClose:n,fullWidth:!0},j.createElement(Ol.f,null,s.a.t("Download with current filters")),j.createElement(Ol.e,null,this.renderButtons()),j.createElement(Ol.d,null,j.createElement(le,{onClick:n,color:"primary"},s.a.t("Close")))))}}],[{key:"getUrlEncodedParamsString",value:function(e){var t=e.filter,n=Object(ue.a)(e,["filter"]),a=new URLSearchParams(n);return t&&t.forEach(function(e){a.append("filter",e)}),a.toString()}},{key:"getUrl",value:function(){return Pn().baseUrl+"/events/query"}}]),t}(j.Component),Pw=Object(k.withStyles)(function(){return{downloadLink:{textDecoration:"none",outline:"none"},downloadLinkContainer:{paddingRight:5,paddingBottom:5},downloadContainer:{display:"flex",flexWrap:"wrap"}}})(ww),Dw=function(e){return e.currentSelections.programId},xw=Object(Y.c)(function(){var e=Object(fi.createSelector)(Dw,function(e){return Tt(e).stage.id});return function(t,n){return{request:t.workingLists[n.listId]&&t.workingLists[n.listId].currentRequest,programStageId:e(t)}}})(Pw),Fw={COLUMN_SELECTOR:"columnSelector",DOWNLOAD_TABLE:"downloadTable"},Lw=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).renderPopperAction=function(e){return j.createElement(Ol.h,{onClick:e},j.createElement(Tl.n,null))},n.openDialog=function(e,t){t(),n.setState({dialogOpen:Object(Ie.a)({},n.state.dialogOpen,Object(Wt.a)({},e,!0))})},n.closeDialog=function(e){n.setState({dialogOpen:Object(Ie.a)({},n.state.dialogOpen,Object(Wt.a)({},e,!1))})},n.renderMenuItems=function(e){return j.createElement(Ol.k,{onClick:function(){n.openDialog(Fw.DOWNLOAD_TABLE,e)}},s.a.t("Download as..."))},n.renderPopperContent=function(e){return j.createElement(Ol.m,null,j.createElement(Ol.l,{role:"menu"},n.renderMenuItems(e)))},n.state={dialogOpen:{}},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this;return j.createElement("div",null,j.createElement(Aw,{getPopperAction:this.renderPopperAction,getPopperContent:this.renderPopperContent}),j.createElement(xw,{open:this.state.dialogOpen[Fw.DOWNLOAD_TABLE],onClose:function(){e.closeDialog(Fw.DOWNLOAD_TABLE)},listId:this.props.listId}))}}]),t}(j.Component),Uw=(kw=function(){return{getCellBody:function(e,t){return j.createElement(Sw,Object.assign({row:e},t))},headerCellStyle:{width:96}}},function(e){return function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).getCustomEndCellBody=function(e,t){return kw().getCellBody(e,t)},t.getCustomEndCellHeader=function(e,t){var n=kw();return n.getCellHeader&&n.getCellHeader(t)},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=kw();return j.createElement(e,Object.assign({getCustomEndCellHeader:this.getCustomEndCellHeader,getCustomEndCellBody:this.getCustomEndCellBody,customEndCellHeaderStyle:t.headerCellStyle,customEndCellBodyStyle:t.bodyCellStyle},this.props))}}]),n}(j.Component)})(Rw),Mw=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleSaveColumnOrder=function(e){n.props.onSaveColumnOrder(n.props.listId,e)},n.renderTopBar=function(){var e=n.props,t=e.classes,a=e.filterButtons,r=e.columns,i=e.listId;return j.createElement("div",{className:t.topBarContainer},j.createElement("div",{className:t.topBarLeftContainer},a),j.createElement("div",{className:t.topBarButtonContainer},j.createElement(Ow,{onSave:n.handleSaveColumnOrder,columns:r}),j.createElement(Lw,{listId:i})))},n.renderPager=function(){var e=n.props.classes;return j.createElement("div",{className:e.paginationContainer},j.createElement(XA,{listId:n.props.listId}))},n.renderList=function(){var e=n.props,t=(e.classes,e.filterButtons,e.isUpdatingWithDialog,Object(ue.a)(e,["classes","filterButtons","isUpdatingWithDialog"]));return j.createElement(Uw,Object.assign({rowIdKey:"eventId"},t))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes;e.isUpdatingWithDialog;return j.createElement("div",{className:t.container},this.renderTopBar(),this.renderList(),this.renderPager(),this.props.isUpdatingWithDialog&&j.createElement(Cw,null))}}]),t}(j.Component),Vw=function(e){return GA(e)}(Object(k.withStyles)(function(e){return{container:{},topBarContainer:{display:"flex",justifyContent:"space-between",padding:e.typography.pxToRem(8)},topBarLeftContainer:{display:"flex",alignItems:"center",flexWrap:"wrap"},topBarButtonContainer:{display:"flex",alignItems:"center"},paginationContainer:{fontSize:e.typography.pxToRem(12),color:e.palette.text.secondary,fontWeight:e.typography.fontWeightMedium,display:"flex",justifyContent:"flex-end"}}})(Mw)),Bw=function(e){return e.currentSelections.programId},Gw=function(e,t){return e.workingListsColumnsOrder[t.listId]},Ww=function(e){var t=new gt(function(t){t.id=e.id,t.type=e.type}),n=e.options.map(function(e){return new st(function(t){t.text=e.text,t.value=e.value})}),a=new pt(e.id,n,null,t);return t.optionSet=a,a},Hw=function(e){return e.events},zw=function(e){return e.eventsValues},Yw=function(e,t){return e.workingLists[t.listId].order},Kw=function(e,t,n){return n.map(function(n){return{event:e[n],eventValues:t[n]}})},qw=Object(fi.createSelectorCreator)(fi.defaultMemoize,function(e,t){return t.every(function(t,n){return t.event===(e[n]&&e[n].event)&&t.eventValues===(e[n]&&e[n].eventValues)})&&e.every(function(e,n){return e.event===(t[n]&&t[n].event)&&e.eventValues===(t[n]&&t[n].eventValues)})}),Xw=function(e){return e},Zw=function(){return qw(Xw,function(e){return function(e){if(0===e.length)return[];var t=Dt(e[0].event),n=t.stage;return t.error||!n?null:e.map(function(e){var t=n.stageForm.convertValues(e.eventValues,ya),a=UO(e.event);return Object(Ie.a)({},a,t)})}(e)})},Jw="updateWorkinglistOrder",Qw=Object(Y.c)(function(){var e=Object(fi.createSelector)(Bw,Gw,function(e,t){var n=St(e);if(n.error)return t;var a=n.stage.stageForm;return t.map(function(e){if(e.isMainProperty)return Object(Ie.a)({},e,{header:e.header||a.getLabel(e.id),optionSet:e.options&&Ww(e)});var t=a.getElement(e.id);return Object(Ie.a)({},e,{header:t.formName,type:t.type,optionSet:t.optionSet})})}),t=Object(fi.createSelector)(Hw,zw,Yw,Kw),n=Zw();return function(a,r){var i=r.listId,o=!!a.workingListsUI[i].isLoading,s=o?null:e(a,r),c=o?[]:t(a,r),l=o?null:a.workingListsMeta[i].sortById,u=o?null:a.workingListsMeta[i].sortByDirection;return{isUpdating:!!a.workingListsUI[i].isUpdating,isUpdatingWithDialog:!!a.workingListsUI[i].isUpdatingWithDialog,columns:s,dataSource:n(c),sortById:l,sortByDirection:u}}},function(e){return{onSort:function(t,n,a){e(function(e,t,n){return Se(NR)({listId:e,id:t,direction:n})}(t,n,a))},onRowClick:function(t){window.scrollTo(0,0),e(zR(t.eventId))},onView:function(t){window.scrollTo(0,0),e(zR(t))},onDelete:function(t){e(function(e){return Se(wR)({eventId:e})}(t))},onSaveColumnOrder:function(t,n){e(function(e,t){return Se(Jw)({listId:e,columnOrder:t},{skipLogging:["columnOrder"]})}(t,n))}}})(Vw),$w=Object(Y.c)(function(e,t){var n=t.listId;return{ready:n&&e.workingListsUI[n]&&!e.workingListsUI[n].isLoading,error:n&&e.workingListsUI[n]&&e.workingListsUI[n].dataLoadingError}},{})(We(function(){return{padding:10}})(Be()(Qw))),eP=function(e){var t="light"===e.palette.type?Object(Wc.lighten)(Object(Wc.fade)(e.palette.divider,1),.88):Object(Wc.darken)(Object(Wc.fade)(e.palette.divider,1),.8);return"".concat(e.typography.pxToRem(1)," solid ").concat(t)},tP=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleWorkingListConfigClick=function(e,a){e===n.props.configId?n.handleSetDefaultWorkingListConfig():n.props.onSetWorkingListConfig(e,t.listId,a)},n.handleSetDefaultWorkingListConfig=function(){var e=n.props.defaultWorkingListConfig,a=e.id,r=(e.name,Object(ue.a)(e,["id","name"]));n.props.onSetWorkingListConfig(a,t.listId,r)},n.renderWorkingListConfigs=function(){var e=n.props,t=e.workingListConfigs,a=e.configId,r=e.classes,i=t.filter(function(e){return!e.isDefault});if(i.length<=0)return null;var o=i.map(function(e){var t=e.id,i=e.name,o=Object(ue.a)(e,["id","name"]);return j.createElement("div",{className:r.chipContainer,key:t},j.createElement(Ol.b,{label:i,key:t,className:Ri()(r.chip,Object(Wt.a)({},r.chipSelected,a===e.id)),onClick:function(){return n.handleWorkingListConfigClick(t,o)}}))});return j.createElement("div",{className:r.workingListConfigsContainer},o)},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,n=(e.workingListConfigs,e.classes),a=Object(ue.a)(e,["workingListConfigs","classes"]);return j.createElement("div",{className:n.container},this.renderWorkingListConfigs(),j.createElement($w,Object.assign({listId:t.listId},a)))}}]),t}(j.Component);tP.listId="eventList";var nP,aP=Object(k.withStyles)(function(e){return{container:{border:eP(e)},workingListConfigsContainer:{borderBottom:eP(e),display:"flex",flexWrap:"wrap",padding:"".concat(e.typography.pxToRem(3)," 0rem")},chipContainer:{padding:"".concat(e.typography.pxToRem(5)," ").concat(e.typography.pxToRem(8))},chip:{},chipSelected:{color:"white",backgroundColor:e.palette.secondary.main,"&:focus":{backgroundColor:e.palette.secondary.main}}}})(tP),rP=Object(Y.c)(function(e){var t=e.workingListConfigSelector.eventMainPage||{},n=t.currentConfigId,a=t.workingListConfigs||[],r=a.find(function(e){return e.isDefault});return{workingListConfigs:a,defaultWorkingListConfig:r,configId:n,ready:t&&!t.isLoading,error:t&&t.loadError}},function(e){return{onSetWorkingListConfig:function(t,n,a){e(qR(t,n,a))}}})(We()(Be()(aP))),iP=function(e){return{headerContainer:{padding:e.typography.pxToRem(24),borderColor:"light"===e.palette.type?Object(Wc.lighten)(Object(Wc.fade)(e.palette.divider,1),.88):Object(Wc.darken)(Object(Wc.fade)(e.palette.divider,1),.8),borderWidth:"0 0 1px 0",borderStyle:"solid"},listContainer:{padding:e.typography.pxToRem(24)}}},oP=function(e){return{container:{backgroundColor:"#fff"},title:Object(Ie.a)({},e.typography.title)}},sP=function(e){return Object(k.withStyles)(oP)(function(t){var n=t.classes,a=Object(ue.a)(t,["classes"]);return j.createElement("div",{className:n.container},j.createElement(e,Object.assign({},a,{header:j.createElement("span",{className:n.title},"Registered events")})))})}(function(e){return Object(k.withStyles)(iP)(function(t){function n(){return Object(B.a)(this,n),Object(W.a)(this,Object(H.a)(n).apply(this,arguments))}return Object(z.a)(n,t),Object(G.a)(n,[{key:"render",value:function(){var t=this.props,n=t.header,a=t.classes,r=Object(ue.a)(t,["header","classes"]);return j.createElement(Ye.a,null,j.createElement("div",{className:a.headerContainer},n),j.createElement("div",{className:a.listContainer},j.createElement(e,r)))}}]),n}(j.Component))}(rP)),cP=function(e){var t=e.isOnline,n=Object(ue.a)(e,["isOnline"]);return I.a.createElement("div",null,t?I.a.createElement(sP,n):I.a.createElement(XR,n))},lP=Object(Y.c)(function(e){return{isOnline:!!e.offline.online&&!e.app.goingOnlineInProgress}},{})(cP),uP=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currentSelectionsComplete,n=e.classes;return I.a.createElement("div",null,t?I.a.createElement(fC,null,I.a.createElement("div",{className:n.listContainer},I.a.createElement(lP,null))):null)}}]),t}(j.Component),dP=Object(k.withStyles)(function(){return{listContainer:{padding:24}}})(uP),pP=Object(Y.c)(function(e){return{currentSelectionsComplete:!!e.currentSelections.complete}})(dP),fP=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleStartAgain=n.handleStartAgain.bind(Object(J.a)(n)),n.handleClickNew=n.handleClickNew.bind(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"handleStartAgain",value:function(){this.props.onStartAgain()}},{key:"handleClickNew",value:function(){this.props.onOpenNewEventPage(this.props.selectedProgramId,this.props.selectedOrgUnitId)}},{key:"render",value:function(){var e=this.props,t=e.onSetOrgUnit,n=e.onResetOrgUnitId,a=e.onSetProgramId,r=e.onResetProgramId,i=e.onSetCategoryOption,o=e.onResetCategoryOption,s=e.onResetAllCategoryOptions;return I.a.createElement("div",null,I.a.createElement(Nu,{onSetOrgUnit:t,onResetOrgUnitId:n,onSetProgramId:a,onResetProgramId:r,onSetCategoryOption:i,onResetCategoryOption:o,onResetAllCategoryOptions:s,onStartAgain:this.handleStartAgain,onClickNew:this.handleClickNew}),I.a.createElement(pP,null))}}]),t}(j.Component),mP=Object(Y.c)(function(e){return{selectedProgramId:e.currentSelections.programId,selectedOrgUnitId:e.currentSelections.orgUnitId}},function(e){return{onSetOrgUnit:function(t,n){e(function(e,t){return Se(oT.SET_ORG_UNIT)({id:e,orgUnit:t})}(t,n))},onResetOrgUnitId:function(){e(lT())},onSetProgramId:function(t){e(function(e){return Se(oT.SET_PROGRAM_ID)(e)}(t))},onSetCategoryOption:function(t,n){e(function(e,t){return Se(oT.SET_CATEGORY_OPTION)({categoryId:e,categoryOption:t})}(t,n))},onResetCategoryOption:function(t){e(function(e){return Se(oT.RESET_CATEGORY_OPTION)({categoryId:e})}(t))},onResetAllCategoryOptions:function(){e(dT())},onOpenNewEventPage:function(t,n){e(function(e,t){return Se(oT.OPEN_NEW_EVENT)({programId:e,orgUnitId:t})}(t,n))},onStartAgain:function(){e(Object(He.batchActions)([lT(),uT(),dT(),Ci()],sT))},onResetProgramId:function(t){e(Object(He.batchActions)([uT(),dT(),t],cT))}}})(fP),hP=Object(Y.c)(function(e){return{error:e.mainPage.selectionsError,ready:!e.mainPage.isLoading}},function(){return{}})(We()(Be()(mP))),gP="ViewEventFromUrl",bP="EventFromUrlRetrievedForViewEvent",vP="EventFromUrlCouldNotBeRetrievedForViewEvent",OP="OrgUnitRetrievedForViewEventOnUrlUpdate",yP="OrgUnitRetrievalFailedForViewEventOnUrlUpdate",EP="StartOpenEventForView",_P="AddEventNoteForViewEvent",jP="RemoveEventNoteForViewEvent",IP="UpdateWorkingListOnBackToMainPageForViewEvent",SP="NoWorkingListUpdateNeededOnBackToMainPageForViewEvent",CP="StartGoBackToMainPageForViewEvent",TP="ViewEventOpenAddRelationship",RP="UpdateEventContainerForViewEvent",NP="UpdateWorkingListPendingOnBackToMainPageForViewEvent",kP="OpenViewEventPageFailed",AP="InitializeWorkingListsOnBackToMainPage",wP=function(e){return Se(vP)(e)},PP=function(){return Se(SP)()},DP=function(){return Se(AP)()},xP=function(e,t){return Se(RP)({eventContainer:e,orgUnit:t})},FP=function(e){return Se(kP)({error:e})},LP=function(e){return!e||Ju(e)},UP=function(){return[{validator:Di,message:s.a.t("A value is required")},{validator:LP,message:s.a.t("Please provide a valid date")}]},MP=function(e,t){return{}},VP=function(){return{}},BP=n(330),GP=n.n(BP),WP="BASICINFO",HP="STATUS",zP={errorMessage:"validationError"},YP={labelContainerStyle:{flexBasis:200},inputContainerStyle:{flexBasis:150}},KP={labelContainerStyle:{width:150},inputContainerStyle:{width:150}};function qP(e){e.formHorizontal,e.fieldOptions,e.validationError,e.modified;return Object(ue.a)(e,["formHorizontal","fieldOptions","validationError","modified"])}var XP=function(e,t){return Object(Ie.a)({},function(e){return{fieldOptions:e.fieldOptions,formHorizontal:e.formHorizontal,styles:e.formHorizontal?KP:YP}}(e),t)},ZP=Hl(zP)(lo()(eu()(tu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldOptions.fieldLabelMediaBasedClass," ").concat(GP.a.coordinateLabel)}})(Ql()(Po()(nu(qP)(vl)))))))),JP=Hl(zP)(lo()(eu()(tu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldOptions.fieldLabelMediaBasedClass," ").concat(GP.a.polygonLabel)}})(Ql()(Po()(nu(qP)(El)))))))),QP={onIsCompleting:function(e){return e.completeDataEntryFieldValue},onFilterProps:function(e){e.completeDataEntryFieldValue;return Object(ue.a)(e,["completeDataEntryFieldValue"])}},$P=Vb()(fg),eD=Xg({isApplicable:function(e){var t=e.formFoundation.featureType;return["Polygon","Point"].includes(t)},getComponent:function(e){return"Polygon"===e.formFoundation.featureType?JP:ZP},getComponentProps:function(e){var t=e.formFoundation.featureType;return XP(e,"Polygon"===t?{width:e&&e.formHorizontal?150:350,label:s.a.t("Area"),dialogLabel:s.a.t("Area"),required:!1}:{width:e&&e.formHorizontal?150:"100%",label:s.a.t("Coordinate"),dialogLabel:s.a.t("Coordinate"),required:!1})},getPropName:function(){return"geometry"},getValidatorContainers:function(){return[]},getMeta:function(){return{placement:Fh,section:WP}}})($P),tD=Sg(function(){var e=Hl(zP)(lo()(eu()(tu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldOptions.fieldLabelMediaBasedClass," ").concat(GP.a.dateLabel)}})(Ql()(Po()(nu(qP)(pl))))))));return{getComponent:function(){return e},getComponentProps:function(e){return XP(e,{width:"100%",calendarWidth:350,label:e.formFoundation.getLabel("eventDate"),required:!0})},getPropName:function(){return"eventDate"},getValidatorContainers:function(){return UP()},getMeta:function(){return{placement:Fh,section:WP}}}}())(eD),nD=ub(QP)(function(e){return Object(Y.c)(MP,VP)(function(e){return function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).renderMainButton=function(e){return j.createElement(dn.a,{title:t.props.formFoundation.access.data.write?"":s.a.t("No write access")},j.createElement(le,{onClick:function(){t.props.onSave()},disabled:!t.props.formFoundation.access.data.write,primary:!0},s.a.t("Save")))},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"getWrappedInstance",value:function(){return this.innerInstance}},{key:"render",value:function(){var t=this,n=this.props,a=(n.onSave,Object(ue.a)(n,["onSave"])),r=this.props.formFoundation.access.data.write;return j.createElement(e,Object.assign({ref:function(e){t.innerInstance=e},mainButton:this.renderMainButton(r)},a))}}]),n}(j.Component)}(e))}(tD)),aD=vg(function(){return{color:"primary"}})(nD),rD=Sg(function(){var e=Hl(zP)(lo()(eu()(tu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldOptions.fieldLabelMediaBasedClass," ").concat(GP.a.trueOnlyLabel)}})(Ql()(Po()(nl)))))));return{getComponent:function(){return e},getComponentProps:function(e){return XP(e,{label:"Complete event",id:"complete"})},getPropName:function(){return"complete"},getValidatorContainers:function(){return[]},getMeta:function(){return{placement:Lh,section:HP}},getPassOnFieldData:function(){return!0}}}())(aD),iD=Qg()(rD),oD=(nP={},Object(Wt.a)(nP,WP,{placement:Fh,name:s.a.t("Basic info")}),Object(Wt.a)(nP,HP,{placement:Lh,name:s.a.t("Status")}),nP),sD=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).fieldOptions={theme:e.theme,fieldLabelMediaBasedClass:e.classes.fieldLabelMediaBased},n.dataEntrySections=oD,n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"componentWillUnmount",value:function(){Gd.clear()}},{key:"render",value:function(){var e=this.props,t=e.onUpdateField,n=e.onStartAsyncUpdateField,a=(e.classes,Object(ue.a)(e,["onUpdateField","onStartAsyncUpdateField","classes"]));return I.a.createElement(iD,Object.assign({id:"singleEvent",onUpdateFormField:t,onUpdateFormFieldAsync:n,fieldOptions:this.fieldOptions,dataEntrySections:this.dataEntrySections},a))}}]),t}(j.Component),cD=Object(k.withStyles)(function(e){return{dataEntryContainer:{},fieldLabelMediaBased:Object(Wt.a)({},e.breakpoints.down(523),{paddingTop:"0px !important"})}})(sD),lD="UpdateDataEntryFieldForEditSingleEventActionsBatch",uD="UpdateFieldForEditSingleEventActionsBatch",dD="RulesEffectsForEditSingleEventActionsBatch",pD="AddNoteForEditSingleEventBatch",fD="RemoveNoteForEditSingleEventBatch",mD="OpenSingleEventForEditInDataEntry",hD="PrerequisitesErrorOpeningSingleEventForEditInDataEntry",gD="StartRunRulesOnUpdateForEditSingleEvent",bD="RequestSaveReturnToMainPageForEditSingleEvent",vD="StartSaveAfterReturnedToMainPageForEditEvent",OD="SingleEventUpdatedAfterReturnToMainPage",yD="SingleEventUpdateFailedAfterReturnToMainPage",ED="CancelUpdateForSingleEventReturnToMainPage",_D="NoWorkingListUpdateNeededAfterEventUpdateCancelled",jD="UpdateWorkingListAfterEventUpdateCancelled",ID="RequestAddNoteForEditSingleEvent",SD="StartAddNoteForEditSingleEvent",CD="NoteAddedForEditSingleEvent",TD="AddNoteFailedForEditSingleEvent",RD="singleEvent",ND="editEvent";var kD,AD=function(e,t,n,a){var r=RD,i=ND,o=[{id:"eventDate",type:"DATE",validatorContainers:UP()},{clientId:"geometry",dataEntryId:"geometry",onConvertIn:M_(n),onConvertOut:U_},{clientId:"status",dataEntryId:"complete",onConvertIn:V_,onConvertOut:B_}],s=Uh(r,i),c=e.eventContainer,l=function(e,t,n,a,r,i,o){var s=Uh(e,t),c=Wb(r),l=Kb(n,r);return[pg({key:s,itemId:t,dataEntryId:e,dataEntryMeta:c,dataEntryValues:n,extraProps:o,dataEntryUI:l}),Gb(s,a)]}(r,i,e.dataEntryValues,e.formValues,o,0,{eventId:c.event.eventId}),u=Object(Ie.a)({},c.event,c.values);return[].concat(Object(Xe.a)(l),Object(Xe.a)(e_(a,n,s,t,u,[u])),[Se(mD)()])},wD=function(e){return Se(gD)(e)},PD=function(){return Se(_D)()},DD=function(){return Se(jD)()},xD=function(e,t,n,a){return Se(SD)({selections:n,context:a},{offline:{effect:{url:"events/".concat(e,"/note"),method:Lv,data:t},commit:{type:CD,meta:{selections:n,context:a}},rollback:{type:TD,meta:{selections:n,context:a}}}})},FD="StartSaveEditEventDataEntryBatchForViewSingleEvent",LD="CancelEditEventDataEntryForViewSingleEvent",UD="RequestSaveEditEventDataEntryForViewSingleEvent",MD="StartSaveEditEventDataEntryForViewSingleEvent",VD="EditEventDataEntrySavedForViewSingleEvent",BD="SaveEditEventDataEntryFailedForViewSingleEvent",GD="PrerequisitesErrorLoadingEditEventDataEntryForViewSingleEvent",WD=function(e,t,n){return Se(MD)({selections:n},{offline:{effect:{url:"events/".concat(e),method:Uv,data:t},commit:{type:VD,meta:{selections:n,eventId:e}},rollback:{type:BD,meta:{selections:n,eventId:e}}}})},HD="StartShowEditEventDataEntryForViewSingleEvent",zD="ShowEditEventDataEntryForViewSingleEvent",YD="singleEvent",KD="viewEvent",qD=Object(Y.c)(function(e){var t=e.viewEventPage.eventDetailsSection||{};return{ready:!e.viewEventPage.dataEntryIsLoading&&!t.loading}},function(e){return{onUpdateDataEntryField:function(t){var n=t.payload,a=n.dataEntryId,r=n.itemId,i=xu()();e(Object(He.batchActions)([t,cg(a,r,i),wD(Object(Ie.a)({},t.payload,{uid:i}))],lD))},onUpdateField:function(t){var n=t.payload,a=n.dataEntryId,r=n.itemId,i=xu()();e(Object(He.batchActions)([t,cg(a,r,i),wD(Object(Ie.a)({},t.payload,{uid:i}))],uD))},onAddNote:function(t,n,a){e(function(e,t,n){return Se(ID)({itemId:e,dataEntryId:t,note:n})}(t,n,a))},onStartAsyncUpdateField:function(t,n,a){e(function(e,t,n){return Ce(e)({onSuccess:t,onError:n})}(t,function(e){var t=xu()();return Object(He.batchActions)([e,cg(n,a,t),wD(Object(Ie.a)({},e.payload,{dataEntryId:n,itemId:a,uid:t}))],uD)},function(e){return e}))},onSave:function(t,n,a){window.scrollTo(0,0),e(function(e,t,n){return Se(UD)({itemId:e,dataEntryId:t,formFoundation:n},{skipLogging:["formFoundation"]})}(t,n,a))},onCancel:function(){var t,n,a;window.scrollTo(0,0),e(Object(He.batchActions)([Se(LD)(),(t=YD,n=KD,Se(tg)({dataEntryId:t,itemId:n,extraProps:a}))]))}}})(We()(cD)),XD=n(1116),ZD=n.n(XD),JD=Object(Ze.d)(Ua,Sa),QD="BASICINFO",$D="STATUS",ex="COMMENTS",tx={labelContainerStyle:{flexBasis:200},inputContainerStyle:{flexBasis:150}},nx={labelContainerStyle:{width:150},inputContainerStyle:{width:150}};var ax,rx,ix=function(e,t){return Object(Ie.a)({},function(e){return{fieldOptions:e.fieldOptions,formHorizontal:e.formHorizontal,styles:e.formHorizontal?nx:tx}}(e),t)},ox=eu()(su({onGetUseVerticalOrientation:function(e){return e.formHorizontal},onGetCustomFieldLabeClass:function(e){return"".concat(e.fieldOptions.fieldLabelMediaBasedClass," ").concat(ZD.a.defaultViewLabel)}})(nu(function(e){return e.formHorizontal,e.fieldOptions,e.validationError,e.modified,Object(ue.a)(e,["formHorizontal","fieldOptions","validationError","modified"])})(Pl))),sx=Vb()(fg),cx=Xg({isApplicable:function(e){var t=e.formFoundation.featureType;return["Polygon","Point"].includes(t)},getComponent:function(){return ox},getComponentProps:function(e){if("Polygon"===e.formFoundation.featureType)return ix(e,{label:s.a.t("Area"),valueConverter:function(e){return e?"Polygon captured":"No polygon captured"}});var t=new gt(function(e){e.id="geometry",e.type=ft.COORDINATE});return ix(e,{label:"Coordinate",valueConverter:function(e){return t.convertValue(e,JD)}})},getPropName:function(){return"geometry"},getValidatorContainers:function(){return[]},getMeta:function(){return{placement:Fh,section:QD}}})(sx),lx=Sg(function(){var e=new gt(function(e){e.id="eventDate",e.type=ft.DATE});return{getComponent:function(){return ox},getComponentProps:function(t){return ix(t,{label:t.formFoundation.getLabel(e.id),valueConverter:function(t){return e.convertValue(t,JD)}})},getPropName:function(){return e.id},getMeta:function(){return{placement:Fh,section:QD}}}}())(cx),ux=Sg(function(){var e=new gt(function(e){e.id="complete",e.type=ft.BOOLEAN});return{getComponent:function(){return ox},getComponentProps:function(t){return ix(t,{label:"Event completed",id:e.id,valueConverter:function(t){return e.convertValue(t,JD)}})},getPropName:function(){return e.id},getMeta:function(){return{placement:Lh,section:$D}},passOnFieldData:!0}}())(lx),dx=Qg()(ux),px=(kD={},Object(Wt.a)(kD,QD,{placement:Fh,name:s.a.t("Basic info")}),Object(Wt.a)(kD,$D,{placement:Lh,name:s.a.t("Status")}),Object(Wt.a)(kD,ex,{placement:Lh,name:s.a.t("Comments")}),kD),fx=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).fieldOptions={theme:e.theme,fieldLabelMediaBasedClass:e.classes.fieldLabelMediaBased},n.dataEntrySections=px,n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.classes,Object(ue.a)(e,["classes"]));return I.a.createElement(dx,Object.assign({id:"singleEvent",viewMode:!0,fieldOptions:this.fieldOptions,dataEntrySections:this.dataEntrySections},t))}}]),t}(j.Component),mx=Object(k.withStyles)(function(e){return{header:Object(Ie.a)({},e.typography.title,{fontSize:18,padding:e.typography.pxToRem(10),borderBottom:"1px solid ".concat(e.palette.grey.blueGrey)}),paper:{maxWidth:e.typography.pxToRem(1070)},container:{flexGrow:3},content:{display:"flex"},dataEntryContainer:{flexGrow:1,padding:e.typography.pxToRem(10)},dataEntryActionsContainer:{padding:e.typography.pxToRem(10),paddingTop:e.typography.pxToRem(30)},button:{whiteSpace:"nowrap"},fieldLabelMediaBased:Object(Wt.a)({},e.breakpoints.down(523),{paddingTop:"0px !important"})}})(fx),hx=Object(Y.c)(function(e){var t=e.viewEventPage.eventDetailsSection||{};return{ready:!e.viewEventPage.dataEntryIsLoading&&!t.loading}},function(){return{}})(We()(mx)),gx=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderDataEntryContainer=function(){var e=n.props,t=e.classes,a=(e.onOpenEditEvent,e.showEditEvent),r=e.programStage,i=(e.eventAccess,Object(ue.a)(e,["classes","onOpenEditEvent","showEditEvent","programStage","eventAccess"])),o=r.stageForm;return I.a.createElement("div",{className:t.dataEntryContainer},a?I.a.createElement(qD,Object.assign({formFoundation:o},i)):I.a.createElement(hx,Object.assign({formFoundation:o},i)))},n.renderActionsContainer=function(){var e=n.props,t=e.classes,a=e.onOpenEditEvent,r=e.showEditEvent,i=e.eventAccess.write;return I.a.createElement("div",{className:t.actionsContainer},!r&&I.a.createElement(Ol.n,{title:i?"":s.a.t("You dont have access to edit this event")},I.a.createElement("div",{className:t.editButtonContainer},I.a.createElement(le,{className:t.button,variant:"raised",onClick:a,disabled:!i},s.a.t("Edit event")))))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.classes;return I.a.createElement("div",{className:e.container},I.a.createElement(pI,{header:I.a.createElement(mI,{text:"Event details",icon:Tl.j})},I.a.createElement("div",{className:e.content},this.renderDataEntryContainer(),this.renderActionsContainer())))}}]),t}(j.Component),bx=Object(k.withStyles)(function(e){return{container:{flexGrow:2,flexBasis:0},content:{display:"flex"},dataEntryContainer:{flexGrow:1,padding:e.typography.pxToRem(10)},actionsContainer:{minWidth:e.typography.pxToRem(128),padding:e.typography.pxToRem(10),paddingTop:e.typography.pxToRem(30)},button:{whiteSpace:"nowrap"},editButtonContainer:{display:"inline-block"}}})(gx),vx=Object(Y.c)(function(e){return{showEditEvent:e.viewEventPage.eventDetailsSection&&e.viewEventPage.eventDetailsSection.showEditEvent}},function(e){return{onOpenEditEvent:function(){e(Se(HD)())}}})(bx),Ox=Object(Y.c)(function(){var e=_I();return function(t,n){var a=t.rulesEffectsGeneralErrors[n.dataEntryKey];return{errors:e({messagesContainer:a,containerPropNameMain:"error",containerPropNameOnComplete:"errorOnComplete",showOnComplete:!0})}}},function(){return{}})(bI),yx=Object(Y.c)(function(){var e=_I();return function(t,n){var a=t.rulesEffectsGeneralWarnings[n.dataEntryKey];return{warnings:e({messagesContainer:a,containerPropNameMain:"warning",containerPropNameOnComplete:"warningOnComplete",showOnComplete:!0})}}},function(){return{}})(CI),Ex=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"getUrl",value:function(){var e=this.props,t=e.id,n=e.orgUnitId,a=e.linkProgramId,r="".concat("../dhis-web-tracker-capture".replace(/\/$/,""),"/#/dashboard?"),i="tei=".concat(t,"&ou=").concat(n);return r+(a?"".concat(i,"&program=").concat(a):i)}},{key:"render",value:function(){var e=this.props.name;return j.createElement("a",{href:this.getUrl(),target:"_blank",rel:"noopener noreferrer"},e)}}]),t}(j.Component),_x="TRACKED_ENTITY_INSTANCE",jx=function(e){var t=e.type,n=Object(ue.a)(e,["type"]);return t!==_x?j.createElement(j.Fragment,null,e.name):j.createElement(Ex,n)},Ix=We(null,function(e){return{style:e.loadingIndicatorStyle}})(Ug),Sx={height:36,width:36},Cx=s.a.t("Relationships"),Tx=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderHeader=function(){var e=n.props,t=e.classes,a=e.relationships,r=e.ready,i=a?a.length:0;return i=r?i:null,j.createElement(mI,{icon:Tl.m,text:Cx,badgeClass:t.badge,badgeCount:i})},n.handleOpenAddRelationship=function(){n.props.onOpenAddRelationship()},n.handleRemoveRelationship=function(e){n.props.onDeleteRelationship(e)},n.renderItems=function(e){return e.map(function(e){return j.createElement("div",{className:n.props.classes.relationship},e)})},n.renderConnectedEntity=function(e){var t=n.props.orgUnitId;return j.createElement(jx,Object.assign({orgUnitId:t},e))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.programStage,n=e.eventId,a=e.relationships,r=e.ready,i=e.eventAccess,o=(t.relationshipTypes||[]).length>0,s=t.relationshipTypesWhereStageIsFrom.filter(function(e){return e.access.data.write});return o&&j.createElement(pI,{collapsable:!0,header:this.renderHeader()},j.createElement(Ix,{loadingIndicatorStyle:Sx,ready:r,relationships:a,writableRelationshipTypes:s,onOpenAddRelationship:this.handleOpenAddRelationship,onRemoveRelationship:this.handleRemoveRelationship,currentEntityId:n,entityAccess:i,smallMainButton:!0,onRenderConnectedEntity:this.renderConnectedEntity}))}}]),t}(j.Component),Rx=Object(k.withStyles)(function(e){return{badge:{backgroundColor:e.palette.grey.light},relationship:{marginTop:e.typography.pxToRem(5),marginBottom:e.typography.pxToRem(5),padding:e.typography.pxToRem(10),borderRadius:e.typography.pxToRem(4),backgroundColor:e.palette.grey.lighter}}})(Tx),Nx="LoadEventRelationshipsBatch",kx="SaveEventRelationshipBatch",Ax="DeleteEventRelationshipBatch",wx="EventRelationshipsLoaded",Px="EventCancelNewRelationship",Dx="RequestAddEventRelationship",xx="StartSaveEventRelationship",Fx="EventRelationshipSaved",Lx="SaveFailedForEventRelationship",Ux="EventRelationshipAlreadyExists",Mx="StartDeleteEventRelationship",Vx="EventRelationshipDeleted",Bx="DeleteFailedForEventRelationship",Gx="RequestDeleteEventRelationship",Wx="EventRelationshipNewTeiSave",Hx="EventRelationshipNewTeiSaveSuccess",zx="EventRelationshipNewTeiSaveFailed",Yx=function(e,t,n){return Se(xx)({selections:t},{offline:{effect:{url:"relationships",method:Lv,data:e,clientId:n},commit:{type:Fx,meta:{selections:t,clientId:n}},rollback:{type:Lx,meta:{selections:t,clientId:n}}}})},Kx=function(e,t,n){if("SaveFailedForEventRelationship"===n.type)return null;var a=n.payload.response.importSummaries[0].reference;return e.meta.offline.effect.url="relationships/".concat(a),e},qx=function(e,t,n){return Se(Mx)({selections:n},{offline:{effect:{url:e?"relationships/".concat(e):null,method:Mv,clientId:t,updateOnDequeueCallback:Kx.toString()},commit:{type:Vx,meta:{selections:n,clientId:t}},rollback:{type:Bx,meta:{selections:n,clientId:t}}}})},Xx=Object(Y.c)(function(e,t){var n=e.viewEventPage.relationshipsSection||{};return{eventId:e.viewEventPage.eventId,ready:!n.isLoading,relationships:e.relationships.viewEvent||[],orgUnitId:e.currentSelections.orgUnitId}},function(e){return{onOpenAddRelationship:function(){e(Se(TP)())},onDeleteRelationship:function(t){e(function(e){return Se(Gx)({clientId:e})}(t))}}})(Rx),Zx=We(null,function(e){return{style:e.loadingIndicatorStyle}})(Ag),Jx={height:36,width:36},Qx=s.a.t("Comments"),$x=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderHeader=function(){var e=n.props,t=e.classes,a=e.notes,r=e.ready,i=a?a.length:0;return i=r?i:null,j.createElement(mI,{icon:Tl.f,text:Qx,badgeClass:t.badge,badgeCount:i})},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.notes,n=e.fieldValue,a=e.onAddNote,r=e.ready,i=e.programStage,o=e.eventAccess;return j.createElement(pI,{collapsable:!0,header:this.renderHeader()},j.createElement(Zx,{loadingIndicatorStyle:Jx,ready:r,notes:t,entityAccess:o,addNotAllowed:!i.stageForm.access.data.write,onAddNote:a,onBlur:this.props.onUpdateNoteField,value:n,smallMainButton:!0}))}}]),t}(j.Component),eF=Object(k.withStyles)(function(e){return{badge:{backgroundColor:e.palette.grey.light},note:{marginTop:e.typography.pxToRem(5),marginBottom:e.typography.pxToRem(5),padding:e.typography.pxToRem(10),borderRadius:e.typography.pxToRem(4),backgroundColor:e.palette.grey.lighter}}})($x),tF="LoadEventNotesBatch",nF="SaveEventNoteBatch",aF="EventNotesLoaded",rF="RequestSaveEventNote",iF="StartSaveEventNote",oF="SaveEventNoteFailed",sF="EventNoteSaved",cF="UpdateEventNoteField",lF=function(e,t,n,a){return Se(iF)({selections:n,clientId:a},{offline:{effect:{url:"events/".concat(e,"/note"),method:Lv,data:t},commit:{type:sF,meta:{selections:n,clientId:a}},rollback:{type:oF,meta:{selections:n,clientId:a}}}})},uF=Object(Y.c)(function(e,t){var n=e.viewEventPage.notesSection||{};return{notes:e.notes.viewEvent||[],ready:!n.isLoading,fieldValue:n.fieldValue}},function(e){return{onAddNote:function(t){e(function(e){return Se(rF)({note:e})}(t))},onUpdateNoteField:function(t){e(function(e){return Se(cF)({value:e})}(t))}}})(eF),dF=Object(k.withStyles)(function(){return{container:{display:"flex",alignItems:"center"},nameContainer:{paddingRight:5,overflow:"hidden",textOverflow:"ellipsis"},iconContainer:{width:24},editButton:{color:"inherit"},addIcon:{paddingRight:5}}})(function(e){var t=e.eventAccess,n=e.assignee,a=e.onEdit,r=e.classes;return n?j.createElement("div",{className:r.container},j.createElement("div",{className:r.nameContainer},s.a.t("Event assigned to {{name}}",{name:n.name})),j.createElement("div",{className:r.iconContainer},t.write?j.createElement(Ol.h,{onClick:a,className:r.editButton},j.createElement(Tl.h,null)):null)):t.write?j.createElement("div",null,j.createElement(le,{onClick:a,small:!0},s.a.t("Assign"))):j.createElement("div",null,s.a.t("No one is assigned to this event"))}),pF=Object(k.withStyles)(function(){return{container:{display:"flex",alignItems:"center"},searchContainer:{flexGrow:1,flexShrink:1,paddingRight:5},buttonContainer:{flexGrow:0,flexShrink:0}}})(function(e){var t=e.onCancel,n=e.classes,a=Object(ue.a)(e,["onCancel","classes"]);return j.createElement("div",{className:n.container},j.createElement("div",{className:n.searchContainer},j.createElement(Pp,Object.assign({inputWrapperClasses:{},focusInputOnMount:!0,exitBehaviour:"doNothing",inputPlaceholderText:s.a.t("Search for user")},a))),j.createElement("div",{className:n.buttonContainer},j.createElement(le,{onClick:t,small:!0},s.a.t("Cancel"))))}),fF=function(e){var t=e.onSet,n=Object(ue.a)(e,["onSet"]),a=j.useState(!1),r=Object(jn.a)(a,2),i=r[0],o=r[1],s=j.useCallback(function(e){o(!1),t(e)},[t]),c=j.useCallback(function(){o(!1)},[]);return i?j.createElement(pF,Object.assign({},n,{onSet:s,onCancel:c})):j.createElement(dF,Object.assign({onEdit:function(){o(!0)}},n))},mF=We(null,function(e){return{style:e.loadingIndicatorStyle}})(fF),hF={height:36,width:36},gF=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderHeader=function(){return j.createElement(mI,{icon:Tl.e,text:s.a.t("Assignee")})},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.programStage,n=Object(ue.a)(e,["programStage"]);return t.enableUserAssignment&&xn()?j.createElement(pI,{collapsable:!0,header:this.renderHeader()},j.createElement(mF,Object.assign({loadingIndicatorStyle:hF},n))):null}}]),t}(j.Component),bF="ViewEventAssigneeSet",vF="ViewEventAssigneeSave",OF="ViewEventAssigneeSaveCompleted",yF="ViewEventAssigneeSaveFailed",EF=[{id:"ErrorsSection",Component:Ox},{id:"WarningsSection",Component:yx},{id:"FeedbacksSection",Component:tS},{id:"IndicatorsSection",Component:iS},{id:"AssigneeSection",Component:Object(Y.c)(function(e,t){var n=e.viewEventPage.assigneeSection||{};return{assignee:n.isLoading?void 0:e.viewEventPage.loadedValues.eventContainer.event.assignee,ready:!n.isLoading}},function(e){return{onSet:function(t){var n;e((n=t,Se(bF)({assignee:n})))}}})(gF)},{id:"RelationshipsSection",Component:Xx},{id:"NotesSection",Component:uF}],_F=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).renderComponent=function(e,t){return j.createElement(e.Component,Object.assign({key:e.id},t))},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=(t.classes,Object(ue.a)(t,["classes"]));return j.createElement("div",{className:this.props.classes.container},EF.map(function(t){return e.renderComponent(t,n)}))}}]),t}(j.Component),jF=Object(k.withStyles)(function(e){return{container:{flexBasis:e.typography.pxToRem(0),flexGrow:1,minWidth:e.typography.pxToRem(300)}}})(_F),IF=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleGoBackToAllEvents=function(){n.props.onBackToAllEvents()},n.state={discardWarningOpen:!1},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.programStage,a=e.currentDataEntryKey,r=e.eventAccess;return I.a.createElement("div",{className:t.container},I.a.createElement(le,{className:t.showAllEvents,variant:"raised",onClick:this.handleGoBackToAllEvents},I.a.createElement(Au.a,null),s.a.t("Show all events")),I.a.createElement("div",{className:t.contentContainer},I.a.createElement(vx,{eventAccess:r,programStage:n}),I.a.createElement(jF,{eventAccess:r,programStage:n,dataEntryKey:a})))}}]),t}(j.Component),SF=Object(k.withStyles)(function(e){return{container:{padding:e.typography.pxToRem(24),paddingTop:e.typography.pxToRem(10)},dataEntryPaper:{marginBottom:e.typography.pxToRem(10),padding:e.typography.pxToRem(10)},showAllEvents:{paddingLeft:8,marginBottom:10,textTransform:"none",backgroundColor:"#E9EEF4",boxShadow:"none",color:"#494949",fontSize:14,fontWeight:"normal"},header:Object(Ie.a)({},e.typography.title,{fontSize:18,padding:e.typography.pxToRem(10),borderBottom:"1px solid ".concat(e.palette.grey.blueGrey)}),contentContainer:{display:"flex",flexWrap:"wrap"}}})(IF),CF=function(e){return e.currentSelections.programId},TF=function(e){return e.currentSelections.categoriesMeta},RF=Object(Y.c)(function(){var e=Object(fi.createSelector)(CF,function(e){return Tt(e).stage}),t=Object(fi.createSelector)(CF,TF,function(e,t){return Rt(e,t)});return function(n){var a=n.viewEventPage.eventDetailsSection||{};return{programStage:e(n),eventAccess:t(n),error:n.viewEventPage.loadError,currentDataEntryKey:a.showEditEvent?Uh(RD,ND):Uh(YD,KD)}}},function(e){return{onBackToAllEvents:function(){e(Se(CP)())}}})(Be()(SF)),NF=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).handleDiscard=function(){n.setState({discardDialogOpen:!0})},n.handleCancelDiscard=function(){n.setState({discardDialogOpen:!1})},n.renderHeader=function(){return j.createElement("div",{className:n.props.classes.headerContainer},j.createElement("div",{className:n.props.classes.header},s.a.t("New event relationship")))},n.state={discardDialogOpen:!1},n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=(e.onCancel,Object(ue.a)(e,["classes","onCancel"]));return j.createElement("div",{className:t.container},j.createElement("div",{className:t.backToEventContainer},j.createElement("span",null,s.a.t("Adding relationship to event.")),j.createElement(Ni,{className:t.backToEventButton,onClick:this.handleDiscard},s.a.t("Go back to event without saving relationship"))),j.createElement(Ye.a,{className:t.newRelationshipPaper},j.createElement(YS,Object.assign({header:s.a.t("New event relationship")},n))),j.createElement(mg,{header:s.a.t("Unsaved changes"),text:s.a.t("Leaving this page will discard any selections you made for a new relationship"),confirmText:s.a.t("Yes, discard"),cancelText:s.a.t("No, stay here"),onConfirm:this.props.onCancel,open:!!this.state.discardDialogOpen,onCancel:this.handleCancelDiscard}))}}]),t}(j.Component),kF=gl()(function(e){return{container:{padding:"".concat(e.typography.pxToRem(10)," ").concat(e.typography.pxToRem(24))},headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},header:Object(Ie.a)({flexGrow:1},e.typography.title,{fontSize:18,fontWeight:500,paddingLeft:8}),newRelationshipPaper:{marginBottom:e.typography.pxToRem(10),padding:e.typography.pxToRem(10)},backToEventContainer:{padding:8,borderRadius:4,display:"inline-block",marginBottom:10,backgroundColor:"#E9EEF4",color:"#494949",fontSize:14},backToEventButton:{backgroundColor:"inherit",fontSize:"inherit",color:"inherit"}}})(NF),AF=function(e){return e.currentSelections.programId},wF=Object(Y.c)(function(){var e=Object(fi.createSelector)(AF,function(e){return Tt(e).stage.relationshipTypesWhereStageIsFrom.filter(function(e){return"TRACKED_ENTITY_INSTANCE"===e.to.entity})});return function(t){return{relationshipTypes:e(t)}}},function(e){return{onCancel:function(){e(Se(Px)({}))},onAddRelationship:function(t,n,a){e(function(e,t,n){return Se(Dx)({relationshipType:e,entity:t,entityType:n})}(t,n,a))}}})(kF),PF={header:s.a.t("Unsaved changes"),text:s.a.t("Leaving this page will discard the changes you made to this event."),confirmText:s.a.t("Yes, discard"),cancelText:s.a.t("No, stay here")},DF=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(W.a)(this,Object(H.a)(t).call(this,e))).state={openStartAgainWarning:!1,openOrgUnitWarning:!1,openProgramWarning:null,openCatComboWarning:!1,categoryIdToReset:"",openNewWarning:!1},n.handleOpenStartAgainWarning=n.handleOpenStartAgainWarning.bind(Object(J.a)(n)),n.handleOpenOrgUnitWarning=n.handleOpenOrgUnitWarning.bind(Object(J.a)(n)),n.handleOpenProgramWarning=n.handleOpenProgramWarning.bind(Object(J.a)(n)),n.handleOpenCatComboWarning=n.handleOpenCatComboWarning.bind(Object(J.a)(n)),n.handleClose=n.handleClose.bind(Object(J.a)(n)),n.handleAcceptStartAgain=n.handleAcceptStartAgain.bind(Object(J.a)(n)),n.handleAcceptOrgUnit=n.handleAcceptOrgUnit.bind(Object(J.a)(n)),n.handleAcceptProgram=n.handleAcceptProgram.bind(Object(J.a)(n)),n.handleAcceptCatCombo=n.handleAcceptCatCombo.bind(Object(J.a)(n)),n.handleClickNew=n.handleClickNew.bind(Object(J.a)(n)),n.handleAcceptNew=n.handleAcceptNew.bind(Object(J.a)(n)),n}return Object(z.a)(t,e),Object(G.a)(t,[{key:"handleOpenStartAgainWarning",value:function(){this.props.formInputInProgress?this.setState({openStartAgainWarning:!0}):this.props.onStartAgain()}},{key:"handleOpenOrgUnitWarning",value:function(){this.props.formInputInProgress?this.setState({openOrgUnitWarning:!0}):this.props.onResetOrgUnitId()}},{key:"handleOpenProgramWarning",value:function(e){this.props.formInputInProgress?this.setState({openProgramWarning:e}):this.props.onResetProgramId(e)}},{key:"handleOpenCatComboWarning",value:function(e){this.props.formInputInProgress?this.setState({openCatComboWarning:!0,categoryIdToReset:e}):this.props.onResetCategoryOption(e)}},{key:"handleClose",value:function(){this.setState({openStartAgainWarning:!1,openOrgUnitWarning:!1,openProgramWarning:null,openCatComboWarning:!1,openNewWarning:!1})}},{key:"handleAcceptStartAgain",value:function(){this.props.onStartAgain(),this.handleClose()}},{key:"handleAcceptOrgUnit",value:function(){this.props.onResetOrgUnitId(),this.handleClose()}},{key:"handleAcceptProgram",value:function(){this.props.onResetProgramId(this.state.openProgramWarning),this.handleClose()}},{key:"handleAcceptCatCombo",value:function(){this.props.onResetCategoryOption(this.state.categoryIdToReset),this.handleClose()}},{key:"handleClickNew",value:function(){this.props.formInputInProgress||this.props.onOpenNewEventPage(this.props.selectedProgramId,this.props.selectedOrgUnitId),this.setState({openNewWarning:!0})}},{key:"handleAcceptNew",value:function(){this.props.onOpenNewEventPage(this.props.selectedProgramId,this.props.selectedOrgUnitId),this.handleClose()}},{key:"render",value:function(){return I.a.createElement("div",null,I.a.createElement(Nu,{onSetOrgUnit:this.props.onSetOrgUnit,onResetOrgUnitId:this.handleOpenOrgUnitWarning,onSetProgramId:this.props.onSetProgramId,onResetProgramId:this.handleOpenProgramWarning,onSetCategoryOption:this.props.onSetCategoryOption,onResetCategoryOption:this.handleOpenCatComboWarning,onResetAllCategoryOptions:this.props.onResetAllCategoryOptions,onStartAgain:this.handleOpenStartAgainWarning,onClickNew:this.handleClickNew}),this.props.showAddRelationship?I.a.createElement(wF,null):I.a.createElement(RF,null),I.a.createElement(mg,Object.assign({onConfirm:this.handleAcceptStartAgain,open:this.state.openStartAgainWarning,onCancel:this.handleClose},PF)),I.a.createElement(mg,Object.assign({onConfirm:this.handleAcceptOrgUnit,open:this.state.openOrgUnitWarning,onCancel:this.handleClose},PF)),I.a.createElement(mg,Object.assign({onConfirm:this.handleAcceptProgram,open:!!this.state.openProgramWarning,onCancel:this.handleClose},PF)),I.a.createElement(mg,Object.assign({onConfirm:this.handleAcceptCatCombo,open:this.state.openCatComboWarning,onCancel:this.handleClose},PF)),I.a.createElement(mg,Object.assign({onConfirm:this.handleAcceptNew,open:this.state.openNewWarning,onCancel:this.handleClose},PF)))}}]),t}(j.Component),xF=Object(Y.c)(function(e){var t=e.viewEventPage.eventDetailsSection||{},n=e.currentSelections.complete&&t.showEditEvent&&gg(e,"singleEvent-editEvent");return{selectedProgramId:e.currentSelections.programId,selectedOrgUnitId:e.currentSelections.orgUnitId,formInputInProgress:n,showAddRelationship:e.viewEventPage.showAddRelationship}},function(e){return{onSetOrgUnit:function(t,n){e(function(e,t){return Se(KC)({id:e,orgUnit:t})}(t,n))},onResetOrgUnitId:function(){e(aT())},onSetProgramId:function(t){e(function(e){return Se(XC)(e)}(t))},onSetCategoryOption:function(t,n){e(function(e,t){return Se(JC)({categoryId:e,categoryOption:t})}(t,n))},onResetCategoryOption:function(t){e(function(e){return Se(QC)({categoryId:e})}(t))},onResetAllCategoryOptions:function(){e(iT())},onOpenNewEventPage:function(t,n){e(function(e,t){return Se(eT)({programId:e,orgUnitId:t})}(t,n))},onStartAgain:function(){e(Object(He.batchActions)([aT(),rT(),iT(),Ci()],tT))},onResetProgramId:function(t){e(Object(He.batchActions)([rT(),iT(),t],nT))}}})(DF),FF=Object(Y.c)(function(e){return{ready:!e.viewEventPage.isLoading,error:e.viewEventPage.loadError}},function(){return{}})(We()(Be()(xF))),LF=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.classes;return I.a.createElement("div",{className:e.app},I.a.createElement(Ne.a,{appName:"Capture App",className:e.headerBar},I.a.createElement(Me,null)),I.a.createElement("div",{className:e.pageContainer},I.a.createElement(Z.c,null,I.a.createElement(Z.a,{path:"/newEvent",component:CC}),I.a.createElement(Z.a,{path:"/viewEvent",component:FF}),I.a.createElement(Z.a,{path:"/newEnrollment",component:hR}),I.a.createElement(Z.a,{path:"/:keys",component:hP}),I.a.createElement(Z.a,{path:"/",component:hP}))))}}]),t}(j.Component),UF=Object(k.withStyles)(function(e){return{app:{fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(16)},pageContainer:{paddingTop:48},headerBar:{left:0,position:"fixed",top:0,width:"100%",zIndex:1e3}}})(LF),MF=Object(fi.createSelector)(function(e){return e.currentSelections.programId},function(e){return e.currentSelections.orgUnitId},function(e){return e.editEventPage.eventId},function(e){return e.viewEventPage.eventId},function(e,t,n,a){return{programId:e,orgUnitId:t,eventId:n,viewEventId:a}}),VF={UPDATE_MAIN_SELECTIONS:"UpdateMainSelections",MAIN_SELECTIONS_COMPLETED:"MainSelectionsCompleted",WORKING_LIST_DATA_RETRIEVED:"WorkingListDataRetrieved",WORKING_LIST_DATA_RETRIEVAL_FAILED:"WorkingListDataRetrievalFailed",WORKING_LIST_DATA_RETRIEVAL_CANCELED:"WorkingListDataRetrievalCanceled",ORG_UNIT_DATA_RETRIVED:"OrgUnitDataRetrived",UPDATE_MAIN_SELECTIONS_FROM_URL:"UpdateMainSelectionsFromUrl",SET_ORG_UNIT_BASED_ON_URL:"SetOrgUnitBasedOnUrl",INVALID_ORG_UNIT_FROM_URL:"InvalidOrgUnitFromUrl",ERROR_RETRIEVING_ORG_UNIT_BASED_ON_URL:"ErrorRetrievingOrgUnitBasedOnUrl",SET_EMPTY_ORG_UNIT_BASED_ON_URL:"SetEmptyOrgUnitBasedOnUrl",INVALID_SELECTIONS_FROM_URL:"InvalidSelectionsFromUrl",VALID_SELECTIONS_FROM_URL:"ValidSelectionsFromUrl"},BF=function(e,t){return Se(VF.WORKING_LIST_DATA_RETRIEVED)(Object(Ie.a)({},t,{listId:e}))},GF=function(e,t){return Se(VF.WORKING_LIST_DATA_RETRIEVAL_FAILED)({listId:e,errorMessage:t})},WF=function(e){return Se(VF.INVALID_SELECTIONS_FROM_URL)(e)},HF="ENTIRE_PARAM_STRING",zF={MAIN:"main",NEW_EVENT:"newEvent",VIEW_EVENT:"viewEvent",NEW_ENROLLMENT:"newEnrollment"},YF=(ax={},Object(Wt.a)(ax,zF.MAIN,[{urlKey:"programId",propKey:"programId"},{urlKey:"orgUnitId",propKey:"orgUnitId"}]),Object(Wt.a)(ax,zF.NEW_EVENT,[{urlKey:"programId",propKey:"programId"},{urlKey:"orgUnitId",propKey:"orgUnitId"}]),Object(Wt.a)(ax,zF.VIEW_EVENT,[{urlKey:HF,propKey:"viewEventId"}]),Object(Wt.a)(ax,zF.NEW_ENROLLMENT,[{urlKey:"programId",propKey:"programId"},{urlKey:"orgUnitId",propKey:"orgUnitId"}]),ax),KF=(rx={},Object(Wt.a)(rx,zF.MAIN,function(e){return Se(VF.UPDATE_MAIN_SELECTIONS_FROM_URL)(e)}),Object(Wt.a)(rx,zF.NEW_EVENT,function(e){return Se(TC)(e)}),Object(Wt.a)(rx,zF.VIEW_EVENT,function(e){return Se(gP)({eventId:e.nextProps.viewEventId,page:e.nextPage})}),Object(Wt.a)(rx,zF.NEW_ENROLLMENT,function(e){return Se(gR)(e)}),rx),qF=function(){return function(e){var t=function(t){function n(){var e,t;Object(B.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(W.a)(this,(e=Object(H.a)(n)).call.apply(e,[this].concat(r)))).handleUpdate=function(e){t.props.onUpdateFromUrl(t.page,e)},t}return Object(z.a)(n,t),Object(G.a)(n,[{key:"getSyncSpecification",value:function(){var e=this.page||zF.MAIN;return YF[e]||[]}},{key:"setPageAndParams",value:function(){var e=function(e){var t=e.match(/[\/][^\/]+/g);return null==t?[]:t.map(function(e){return e.substring(1)})}(this.props.location.pathname);if(0===e.length)return this.page=zF.MAIN,void(this.params=null);if(1===e.length){var t=e[0];Object.keys(zF).map(function(e){return zF[e]}).includes(t)?(this.page=t,this.params=null):(this.params=t,this.page=zF.MAIN)}else this.page=e[0],this.params=e[1]}},{key:"render",value:function(){var t=this.props,n=(t.location,t.onUpdateFromUrl,t.locationSwitchInProgress),a=t.params,r=t.page,i=Object(ue.a)(t,["location","onUpdateFromUrl","locationSwitchInProgress","params","page"]);return n?j.createElement(x,null):(this.setPageAndParams(),j.createElement(e,Object.assign({statePage:r||zF.MAIN,urlPage:this.page,urlParams:this.params,onUpdate:this.handleUpdate,syncSpecification:this.getSyncSpecification(),stateParams:a},i)))}}]),n}(j.Component);return Object(Y.c)(function(e){return{params:MF(e),page:e.app.page,locationSwitchInProgress:e.app.locationSwitchInProgress}},function(e){return{onUpdateFromUrl:function(t,n){return e(KF[t](n))}}})(t)}},XF=n(442),ZF=n(1164),JF=function(e,t,n){return function(a){return Object(Y.c)(function(t,n){return{ready:e(t,n)}},null,function(e,t,n){return Object.assign({},n,e,t,{InnerComponent:a})})(function(e,t){return function(n){var a=n.ready,r=n.InnerComponent,i=Object(ue.a)(n,["ready","InnerComponent"]);if(!a){if(t)return j.createElement(x,null);var o=e?e(n):null;return j.createElement(Ge,{containerStyle:o})}return j.createElement(r,i)}}(t,n))}},QF=n(316),$F=n.n(QF),eL=n(332),tL=n.n(eL),nL=n(331),aL=n.n(nL),rL={main:"#1976D2",dark:"#004BA0",light:"#147cd7",lightest:"#EAF4FF"},iL=Object(k.createMuiTheme)({overrides:{MuiButton:{raisedPrimary:{"&:hover":{backgroundColor:rL.main},backgroundColor:rL.dark},flatPrimary:{"&:hover":{backgroundColor:rL.lightest},color:rL.dark}}},typography:{useNextVariants:!0},palette:{primary:rL,secondary:{main:"#00796B",dark:"#004C40",light:"#48A999",lightest:"#B2DFDB"},error:{lighter:"#FBEAE5",light:$F.a[300],main:"#E53935",dark:$F.a[700]},warning:Object(Ie.a)({},aL.a,{lighter:aL.a[100],light:aL.a[300],main:"#F19C02",dark:aL.a[900]}),success:{main:"#3D9305"},info:{main:"#EAF4FF"},grey:{main:"#9E9E9E",light:"#E0E0E0",lighter:"#F6F6F6",lightest:"#FBFBFB",dark:"#494949",blueGrey:"#ECEFF1",snow:"#F4F6F8",black:"#000000"}}});iL.typography.formFieldTitle={fontSize:iL.typography.pxToRem(12)},iL.palette=Object(Ie.a)({},iL.palette,{accent:{lighter:tL.a[50],light:tL.a[100],main:tL.a[300],dark:tL.a[500],contrastText:"#000000"},input:{bottomLine:"rgba(0, 0, 0, 0.42)"},dividerForm:"#f2f4f5",required:$F.a[500]});var oL,sL=iL,cL=JF(function(e){return!e.app.goingOnline},null,!0)(UF),lL=JF(function(e,t){return!t.urlOutOfSync},null,!0)(cL),uL=(oL=function(e){return e.syncSpecification},function(e){return function(e,t){return function(n){function a(){return Object(B.a)(this,a),Object(W.a)(this,Object(H.a)(a).apply(this,arguments))}return Object(z.a)(a,n),Object(G.a)(a,[{key:"componentDidMount",value:function(){this.triggerSyncCallback()}},{key:"componentDidUpdate",value:function(){this.triggerSyncCallback()}},{key:"update",value:function(e){this.props.onUpdate(e)}},{key:"noUpdateRequired",value:function(){this.props.onNoUpdateRequired&&this.props.onNoUpdateRequired()}},{key:"triggerSyncCallback",value:function(){this.queuedUpdate?(this.update({nextProps:this.queuedUpdate.nextProps,prevProps:this.props.stateParams||{},nextPage:this.props.urlPage,prevPage:this.props.statePage}),this.queuedUpdate=null):this.noUpdateRequired()}},{key:"getLocationParams",value:function(e){var t=this.props.urlParams;return e.map(function(e){var n,r=e.urlKey;if(t)if(r===HF)n=t;else{var i=new RegExp("".concat(r,"[^&]+"),"i"),o=t.match(i);n=a.getValueFromParam(o,r)}else n=null;return{key:r,value:n}}).reduce(function(e,t){return e[t.key]=t.value,e},{})}},{key:"paramsNeedsUpdate",value:function(e,t){var n=this;return e.some(function(e){return t[e.urlKey]!==(n.props.stateParams&&n.props.stateParams[e.propKey]||null)})}},{key:"isOutOfSync",value:function(){var e=t(this.props),n=this.getLocationParams(e);if(this.props.urlPage!==this.props.statePage||this.paramsNeedsUpdate(e,n)){var r=a.getNextProps(n,e);return this.queuedUpdate={nextProps:r},!0}return!1}},{key:"render",value:function(){var t=this.props,n=(t.onUpdate,t.urlParams,t.stateParams,t.urlPage,t.statePage,Object(ue.a)(t,["onUpdate","urlParams","stateParams","urlPage","statePage"]));return this.isOutOfSync()?j.createElement(e,Object.assign({urlOutOfSync:!0},n)):j.createElement(e,n)}}],[{key:"getValueFromParam",value:function(e,t){var n=null;if(e&&e.length>0){var a=new RegExp("".concat(t,"="),"i");n=e[e.length-1].replace(a,"").trim()||null}return n}},{key:"getNextProps",value:function(e,t){return Object.keys(e).reduce(function(n,a){return n[(t.find(function(e){return e.urlKey===a})||{}).propKey||a]=e[a],n},{})}}]),a}(j.Component)}(e,oL)})(lL),dL=function(e){var t,n;return n=t=function(t){function n(){return Object(B.a)(this,n),Object(W.a)(this,Object(H.a)(n).apply(this,arguments))}return Object(z.a)(n,t),Object(G.a)(n,[{key:"getChildContext",value:function(){return{d2:Fn()}}},{key:"render",value:function(){return j.createElement(e,this.props)}}]),n}(j.Component),t.childContextTypes={d2:Ec.a.object},n}(qF()(uL)),pL=JF(function(e,t){return e.app.initDone},null,!0)(dL),fL=Object(Z.e)(pL),mL=function(e){function t(){return Object(B.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(G.a)(t,[{key:"renderContents",value:function(){return j.createElement(j.Fragment,null,j.createElement(q.a,null),j.createElement(Y.a,{store:this.props.store},j.createElement(X.a,{history:this.props.history},j.createElement(k.MuiThemeProvider,{theme:sL},j.createElement(ZF.a,null,j.createElement(XF.a,{baseUrl:"..",apiVersion:""},j.createElement(fL,null),j.createElement(Re,null)))))))}},{key:"render",value:function(){var e=this.props;e.store,e.history;return this.renderContents()}}]),t}(j.Component),hL=n(150),gL=n(1158),bL=n(1159),vL=n(1058),OL=n(1160),yL=n(718),EL=n.n(yL),_L=n(1162),jL=n(719),IL=n.n(jL),SL=function(e){var t=e.url,n=e.method,a=e.data;return Pn()[n](t,a)};function CL(e){return e&&e.meta&&e.meta.offline&&e.meta.offline.effect?e.meta.offline.effect:{}}var TL,RL,NL,kL=Object(Ie.a)({},IL.a,{enqueue:function(e,t){var n=CL(t);if(n.clientId){var a=e.filter(function(e){var t=CL(e);return!(t.clientId===n.clientId&&t.method===n.method)});return[].concat(Object(Xe.a)(a),[t])}return[].concat(Object(Xe.a)(e),[t])},dequeue:function(e,t){var n=Object(_L.a)(e),a=n[0],r=n.slice(1),i=CL(a);return i.method===Lv?r.map(function(e){var n,r=CL(e);return r.clientId===i.clientId&&r.updateOnDequeueCallback?(n=r.updateOnDequeueCallback,Function("return ".concat(n))())(e,a,t):e}).filter(function(e){return e}):r}}),AL=function(e){var t=e&&e.httpStatusCode;return!!t&&(![408,429,502,503,504].includes(t)&&t>=400)};function wL(){var e=rr.REDUX_PERSIST,t=vr();return{setItem:function(n,a){return t.set(e,{id:n,value:a})},getItem:function(n,a){t.get(e,n).then(function(e){a(null,e&&e.value)}).catch(function(e){a(e,null)})},removeItem:function(n){return t.remove(e,n)},getAllKeys:function(n){t.getKeys(e).then(function(e){n(null,e)}).catch(function(e){n(e,null)})}}}var PL,DL,xL,FL,LL,UL,ML,VL,BL,GL,WL,HL,zL,YL,KL,qL,XL,ZL,JL,QL,$L,eU,tU,nU,aU=Object(qm.b)((TL={},Object(Wt.a)(TL,Bb.ADD_FORM_DATA,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.formId]=a.formValues,n}),Object(Wt.a)(TL,fh,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return(n[a.formId]=Object(Ie.a)({},n[a.formId]))[a.elementId]=a.value,n}),Object(Wt.a)(TL,Nh,function(e,t){var n=t.payload,a=n.formId,r=n.elementId,i=n.value;return Object(Ie.a)({},e,Object(Wt.a)({},a,Object(Ie.a)({},e[a],Object(Wt.a)({},r,i))))}),Object(Wt.a)(TL,Jh,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return(n[a.formId]=Object(Ie.a)({},n[a.formId]))[a.elementId]=a.value,n}),Object(Wt.a)(TL,Zm,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return(n[a.formId]=Object(Ie.a)({},n[a.formId]))[a.elementId]=a.value,n}),Object(Wt.a)(TL,Xm,function(e,t){var n=t.payload.rulesEffects&&t.payload.rulesEffects[Wm.ASSIGN_VALUE];if(!n)return e;var a=t.payload;return Object(Ie.a)({},e,Object(Wt.a)({},a.formId,Object(Ie.a)({},e[a.formId],n)))}),TL),"formsValues"),rU=Object(qm.b)((RL={},Object(Wt.a)(RL,Bb.ADD_FORM_DATA,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.formId;return Object.keys(n).filter(function(e){return e.startsWith(a)}).forEach(function(e){n[e]={}}),n}),Object(Wt.a)(RL,Sh,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.formBuilderId]=Object.keys(a.fieldsUI).reduce(function(e,t){return e[t]=Object(Ie.a)({},e[t],a.fieldsUI[t],{validatingMessage:null}),e},Object(Ie.a)({},n[a.formBuilderId])),n}),Object(Wt.a)(RL,fh,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;n[a.sectionId]=Object(Ie.a)({},n[a.sectionId]);var r=n[a.sectionId];return r[a.elementId]=Object(Ie.a)({},r[a.elementId],a.uiState,{modified:!0,validatingMessage:null}),n}),Object(Wt.a)(RL,Rh,function(e,t){var n=t.payload,a=n.formBuilderId,r=n.elementId;return Object(Ie.a)({},e,Object(Wt.a)({},a,Object(Ie.a)({},e[a],Object(Wt.a)({},r,Object(Ie.a)({},e[a]&&e[a][r],{loading:!0})))))}),Object(Wt.a)(RL,Nh,function(e,t){var n=t.payload,a=n.uiState,r=n.formBuilderId,i=n.elementId;return Object(Ie.a)({},e,Object(Wt.a)({},r,Object(Ie.a)({},e[r],Object(Wt.a)({},i,Object(Ie.a)({},e[r]&&e[r][i],a,{modified:!0,validatingMessage:null,loading:!1})))))}),Object(Wt.a)(RL,kh,function(e,t){var n=t.payload,a=n.uiState,r=n.formBuilderId,i=n.elementId,o=n.errorMessage;return Object(Ie.a)({},e,Object(Wt.a)({},r,Object(Ie.a)({},e[r],Object(Wt.a)({},i,Object(Ie.a)({},e[r]&&e[r][i],a,{modified:!0,validatingMessage:null,loading:!1,warning:o})))))}),Object(Wt.a)(RL,Jh,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;n[a.formBuilderId]=Object(Ie.a)({},n[a.formBuilderId]);var r=n[a.formBuilderId];return r[a.elementId]=Object(Ie.a)({},r[a.elementId],a.uiState,{modified:!0,validatingMessage:null}),n}),Object(Wt.a)(RL,zu,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;n[a.sectionId]=Object(Ie.a)({},n[a.sectionId]);var r=n[a.sectionId];return r[a.elementId]=Object(Ie.a)({},r[a.elementId],a.uiState),n}),Object(Wt.a)(RL,Ch,function(e,t){var n=t.payload,a=n.fieldId,r=n.formBuilderId,i=n.message,o=n.fieldUIUpdates;return Object(Ie.a)({},e,Object(Wt.a)({},r,Object(Ie.a)({},e[r],Object(Wt.a)({},a,Object(Ie.a)({},e[r]&&e[r][a],o,{validatingMessage:i})))))}),RL),"formsSectionsFieldsUI"),iU=Object(qm.b)(Object(Wt.a)({},Bb.ADD_FORM_DATA,function(e,t){var n,a=t.payload,r=e[a.formId]&&e[a.formId].loadNr;return n=r?999===r?1:r+1:1,Object(Ie.a)({},e,Object(Wt.a)({},a.formId,Object(Ie.a)({},e[a.formId],{loadNr:n})))}),"forms"),oU=Object(qm.b)((NL={},Object(Wt.a)(NL,Bb.ADD_FORM_DATA,function(e,t){return Object(Ie.a)({},e,Object(Wt.a)({},t.payload.formId,{}))}),Object(Wt.a)(NL,rp,function(e,t){var n=t.payload,a=n.formId,r=n.elementId,i=n.searchText;return Object(Ie.a)({},e,Object(Wt.a)({},a,Object(Ie.a)({},e[a],Object(Wt.a)({},r,Object(Ie.a)({},e[a][r],{orgUnitsLoading:!0,orgUnitsSearchText:i})))))}),Object(Wt.a)(NL,ip,function(e,t){var n=t.payload,a=n.formId,r=n.elementId,i=n.roots;return Object(Ie.a)({},e,Object(Wt.a)({},a,Object(Ie.a)({},e[a],Object(Wt.a)({},r,Object(Ie.a)({},e[a][r],{orgUnitsLoading:!1,orgUnitsRoots:i})))))}),Object(Wt.a)(NL,op,function(e,t){var n=t.payload,a=n.formId,r=n.elementId;return Object(Ie.a)({},e,Object(Wt.a)({},a,Object(Ie.a)({},e[a],Object(Wt.a)({},r,Object(Ie.a)({},e[a][r],{orgUnitsLoading:!1})))))}),Object(Wt.a)(NL,sp,function(e,t){var n=t.payload,a=n.formId,r=n.elementId;return du(cp(a,r),null),Object(Ie.a)({},e,Object(Wt.a)({},a,Object(Ie.a)({},e[a],Object(Wt.a)({},r,Object(Ie.a)({},e[a][r],{orgUnitsLoading:!1,orgUnitsRoots:null,orgUnitsSearchText:null})))))}),NL),"formsFieldsMisc"),sU="EnrollmentLoaded",cU="EnrollmentLoadFailed",lU="EditEventFromUrl",uU="EventFromUrlRetrievedForEditEvent",dU="EventFromUrlCouldNotBeRetrievedForEditEvent",pU="OrgUnitRetrievedForEditEventOnUrlUpdate",fU="OrgUnitRetrievalFailedForEditEventOnUrlUpdate",mU="StartOpenEventForEditInDataEntry",hU="AddEventNote",gU="RemoveEventNote",bU=function(e){return Se(dU)(e)},vU=function(e,t){return Se(hU)({eventId:e,note:t})},OU=function(e,t){return Se(gU)({eventId:e,noteClientId:t})},yU=function(e,t){return e&&0!==e.length?e.reduce(function(e,n){return e[n.id]=n[t],e},{}):{}},EU=Object(qm.b)((PL={},Object(Wt.a)(PL,VF.WORKING_LIST_DATA_RETRIEVED,function(e,t){var n=t.payload.eventContainers,a=yU(n,"event");return Object(Ie.a)({},a)}),Object(Wt.a)(PL,TR,function(e,t){var n=t.payload.eventContainers,a=yU(n,"event");return Object(Ie.a)({},a)}),Object(Wt.a)(PL,sU,function(e,t){var n=t.payload;if(!n||0===n.length)return e;var a=n.reduce(function(e,t){return e[t.id]=t.event,e},{});return Object(Ie.a)({},e,a)}),Object(Wt.a)(PL,Kh,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.eventId]=a.event,n}),Object(Wt.a)(PL,zh,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.eventId]=a.event,n}),Object(Wt.a)(PL,uU,function(e,t){var n=t.payload.eventContainer.event;return Object(Ie.a)({},e,Object(Wt.a)({},n.eventId,n))}),Object(Wt.a)(PL,bP,function(e,t){var n=t.payload.eventContainer.event;return Object(Ie.a)({},e,Object(Wt.a)({},n.eventId,n))}),Object(Wt.a)(PL,_P,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n&&n[a.eventId]&&(n[a.eventId].notes=[].concat(Object(Xe.a)(e[a.eventId].notes),[a.note])),n}),Object(Wt.a)(PL,jP,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n&&n[a.eventId]&&(n[a.eventId].notes=e[a.eventId].notes.filter(function(e){return e.clientId!==a.noteClientId})),n}),PL),"events",{}),_U=Object(qm.b)((DL={},Object(Wt.a)(DL,VF.WORKING_LIST_DATA_RETRIEVED,function(e,t){var n=t.payload.eventContainers,a=yU(n,"values");return Object(Ie.a)({},a)}),Object(Wt.a)(DL,TR,function(e,t){var n=t.payload.eventContainers,a=yU(n,"values");return Object(Ie.a)({},a)}),Object(Wt.a)(DL,sU,function(e,t){var n=t.payload;if(!n||0===n.length)return e;var a=n.reduce(function(e,t){return e[t.id]=t.values,e},{});return Object(Ie.a)({},e,a)}),Object(Wt.a)(DL,zh,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.eventId]=t.payload.clientValues,n}),Object(Wt.a)(DL,Kh,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.eventId]=t.payload.clientValues,n}),DL),"eventsValues",{}),jU=Object(qm.b)((xL={},Object(Wt.a)(xL,qb.LOAD_NEW_DATA_ENTRY,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.dataEntryId]=Object(Ie.a)({},n[a.dataEntryId]),n[a.dataEntryId].itemId=a.itemId,n}),Object(Wt.a)(xL,og,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.dataEntryId]=Object(Ie.a)({},n[a.dataEntryId],{itemId:a.itemId},a.extraProps),n}),Object(Wt.a)(xL,tg,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.dataEntryId]=Object(Ie.a)({},n[a.dataEntryId],{itemId:a.itemId},a.extraProps),n}),xL),"dataEntries"),IU=Object(qm.b)((FL={},Object(Wt.a)(FL,qb.LOAD_NEW_DATA_ENTRY,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.key]={loaded:!0},n}),Object(Wt.a)(FL,og,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.key]={loaded:!0},n}),Object(Wt.a)(FL,qh,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=Uh(a.id,a.itemId);return n[r]=Object(Ie.a)({},n[r]),n[r].saveAttempted=!0,n}),Object(Wt.a)(FL,Xh,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=Uh(a.id,a.itemId);return n[r]=Object(Ie.a)({},n[r]),n[r].saveAttempted=!0,n}),Object(Wt.a)(FL,Jh,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=Uh(a.dataEntryId,a.itemId);return n[r]=Object(Ie.a)({},n[r]),n[r].inProgress=n[r].inProgress?n[r].inProgress+1:1,n}),Object(Wt.a)(FL,Qh,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=Uh(a.dataEntryId,a.itemId);return n[r]=Object(Ie.a)({},n[r]),n[r].inProgress=n[r].inProgress?n[r].inProgress-1:0,n}),FL),"dataEntriesUI"),SU=Object(qm.b)((LL={},Object(Wt.a)(LL,qb.LOAD_NEW_DATA_ENTRY,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.dataEntryValues;return n[a.key]=r||{},n}),Object(Wt.a)(LL,og,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.key]=a.dataEntryValues,n}),Object(Wt.a)(LL,Zh,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=Uh(a.dataEntryId,a.itemId);return n[r]=Object(Ie.a)({},n[r]),n[r][a.fieldId]=a.value,n}),LL),"dataEntriesFieldsValue"),CU=Object(qm.b)((UL={},Object(Wt.a)(UL,qb.LOAD_NEW_DATA_ENTRY,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.key]=[],n}),Object(Wt.a)(UL,og,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.key]=a.dataEntryNotes?Object(Xe.a)(a.dataEntryNotes):[],n}),Object(Wt.a)(UL,$h,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=Uh(a.dataEntryId,a.itemId),i=e[r]?e[r].length:0;return n[r]=[].concat(Object(Xe.a)(e[r]),[Object(Ie.a)({},a.note,{key:i})]),n}),Object(Wt.a)(UL,eg,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=Uh(a.dataEntryId,a.itemId);return n[r]=e[r].filter(function(e){return e.clientId!==a.noteClientId}),n}),UL),"dataEntriesNotes",{}),TU=Object(qm.b)((ML={},Object(Wt.a)(ML,qb.LOAD_NEW_DATA_ENTRY,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.key]=a.dataEntryMeta,n}),Object(Wt.a)(ML,og,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.key]=a.dataEntryMeta,n}),ML),"dataEntriesFieldsMeta"),RU=Object(qm.b)((VL={},Object(Wt.a)(VL,qb.LOAD_NEW_DATA_ENTRY,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.key]=Object.keys(a.dataEntryUI).reduce(function(e,t){return e[t]=Object(Ie.a)({},a.dataEntryUI[t],{touched:!1}),e},{}),n}),Object(Wt.a)(VL,og,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.key]=Object.keys(a.dataEntryUI).reduce(function(e,t){return e[t]=Object(Ie.a)({},a.dataEntryUI[t],{touched:!1}),e},{}),n}),Object(Wt.a)(VL,Zh,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=Uh(a.dataEntryId,a.itemId);n[r]=Object(Ie.a)({},n[r]);var i=n[r];return i[a.fieldId]=Object(Ie.a)({},i[a.fieldId],a.valueMeta,{modified:!0}),n}),VL),"dataEntriesFieldsUI"),NU=Object(qm.b)((BL={},Object(Wt.a)(BL,qb.LOAD_NEW_DATA_ENTRY,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.key]=[],n}),Object(Wt.a)(BL,og,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.key]=a.dataEntryRelationships?Object(Xe.a)(a.dataEntryRelationships):[],n}),Object(Wt.a)(BL,rg,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=Uh(a.dataEntryId,a.itemId);return n[r]=e[r]?[].concat(Object(Xe.a)(e[r]),[Object(Ie.a)({},a.relationship)]):[Object(Ie.a)({},a.relationship)],n}),Object(Wt.a)(BL,ag,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=Uh(a.dataEntryId,a.itemId);return n[r]=e[r].filter(function(e){return e.clientId!==a.relationshipClientId}),n}),BL),"dataEntriesRelationships",{}),kU=Object(qm.b)((GL={},Object(Wt.a)(GL,qb.LOAD_NEW_DATA_ENTRY,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.key]=null,n}),Object(Wt.a)(GL,og,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.key]=null,n}),Object(Wt.a)(GL,wb.SEARCH_GROUP_RESULT_COUNT_RETRIVED,function(e,t){var n=t.payload,a=n.count,r=n.dataEntryKey,i=n.groupId;return Object(Ie.a)({},e,Object(Wt.a)({},r,Object(Ie.a)({},e[r],Object(Wt.a)({},i,Object(Ie.a)({},e[r]&&e[r][i],{count:a})))))}),Object(Wt.a)(GL,wb.SEARCH_GROUP_RESULT_COUNT_RETRIEVAL_FAILED,function(e,t){var n=t.payload,a=n.error,r=n.dataEntryKey,i=n.groupId;return Object(Ie.a)({},e,Object(Wt.a)({},r,Object(Ie.a)({},e[r],Object(Wt.a)({},i,Object(Ie.a)({},e[r]&&e[r][i],{countError:a})))))}),Object(Wt.a)(GL,wb.ABORT_SEARCH_GROUP_COUNT_SEARCH,function(e,t){var n=t.payload,a=n.dataEntryKey,r=n.groupId;return Object(Ie.a)({},e,Object(Wt.a)({},a,Object(Ie.a)({},e[a],Object(Wt.a)({},r,null))))}),GL),"dataEntriesSearchGroupsResults"),AU=Object(qm.b)((WL={},Object(Wt.a)(WL,wb.START_SEARCH_GROUP_COUNT_SEARCH,function(e,t){var n=t.payload,a=n.dataEntryKey,r=n.searchGroupId,i=n.values;return Object(Ie.a)({},e,Object(Wt.a)({},a,Object(Ie.a)({},e[a],Object(Wt.a)({},r,Object(Ie.a)({},i)))))}),Object(Wt.a)(WL,wb.ABORT_SEARCH_GROUP_COUNT_SEARCH,function(e,t){var n=t.payload,a=n.dataEntryKey,r=n.groupId;return Object(Ie.a)({},e,Object(Wt.a)({},a,Object(Ie.a)({},e[a],Object(Wt.a)({},r,null))))}),Object(Wt.a)(WL,qb.LOAD_NEW_DATA_ENTRY,function(e,t){var n=t.payload.key;return Object(Ie.a)({},e,Object(Wt.a)({},n,null))}),Object(Wt.a)(WL,og,function(e,t){var n=t.payload.key;return Object(Ie.a)({},e,Object(Wt.a)({},n,null))}),WL),"dataEntriesSearchGroupsPreviousValues"),wU=Object(qm.b)((HL={},Object(Wt.a)(HL,qb.LOAD_NEW_DATA_ENTRY,function(e,t){var n=t.payload.key;return Object(Ie.a)({},e,Object(Wt.a)({},n,null))}),Object(Wt.a)(HL,og,function(e,t){var n=t.payload.key;return Object(Ie.a)({},e,Object(Wt.a)({},n,null))}),Object(Wt.a)(HL,wb.FILTER_SEARCH_GROUP_FOR_COUNT_TO_BE_EXECUTED,function(e,t){var n=t.payload,a=n.uid,r=n.dataEntryKey;return Object(Ie.a)({},e,Object(Wt.a)({},r,[].concat(Object(Xe.a)(e[r]||[]),[a])))}),Object(Wt.a)(HL,wb.SEARCH_GROUP_RESULT_COUNT_RETRIVED,function(e,t){var n=t.payload,a=n.uids,r=n.dataEntryKey,i=Object(Xe.a)((e[r]||[]).filter(function(e){return!a.includes(e)}));return Object(Ie.a)({},e,Object(Wt.a)({},r,i))}),Object(Wt.a)(HL,wb.SEARCH_GROUP_RESULT_COUNT_RETRIEVAL_FAILED,function(e,t){var n=t.payload,a=n.uids,r=n.dataEntryKey,i=Object(Xe.a)((e[r]||[]).filter(function(e){return!a.includes(e)}));return Object(Ie.a)({},e,Object(Wt.a)({},r,i))}),Object(Wt.a)(HL,wb.ABORT_SEARCH_GROUP_COUNT_SEARCH,function(e,t){var n=t.payload,a=n.uids,r=n.dataEntryKey,i=Object(Xe.a)((e[r]||[]).filter(function(e){return!a.includes(e)}));return Object(Ie.a)({},e,Object(Wt.a)({},r,i))}),Object(Wt.a)(HL,wb.CANCEL_SEARCH_GROUP_COUNT_SEARCH,function(e,t){var n=t.payload,a=n.uid,r=n.dataEntryKey,i=Object(Xe.a)((e[r]||[]).filter(function(e){return a!==e}));return Object(Ie.a)({},e,Object(Wt.a)({},r,i))}),Object(Wt.a)(HL,Ch,function(e,t){var n=t.payload,a=n.formId,r=n.validatingUid,i=[].concat(Object(Xe.a)(e[a]||[]),[r]),o=new Set(i);return Object(Ie.a)({},e,Object(Wt.a)({},a,Array.from(o)))}),Object(Wt.a)(HL,Sh,function(e,t){var n=t.payload,a=n.formId,r=n.validatingUids,i=(e[a]||[]).filter(function(e){return!r.includes(e)});return Object(Ie.a)({},e,Object(Wt.a)({},a,i))}),Object(Wt.a)(HL,Jh,function(e,t){var n=t.payload,a=n.formId,r=n.updateCompleteUid,i=(e[a]||[]).filter(function(e){return e!==r});return Object(Ie.a)({},e,Object(Wt.a)({},a,i))}),Object(Wt.a)(HL,Rh,function(e,t){var n=t.payload,a=n.formId,r=n.uid;return Object(Ie.a)({},e,Object(Wt.a)({},a,[].concat(Object(Xe.a)(e[a]||[]),[r])))}),Object(Wt.a)(HL,Nh,function(e,t){var n=t.payload,a=n.formId,r=n.uid,i=(e[a]||[]).filter(function(e){return e!==r});return Object(Ie.a)({},e,Object(Wt.a)({},a,i))}),Object(Wt.a)(HL,kh,function(e,t){var n=t.payload,a=n.formId,r=n.uid,i=(e[a]||[]).filter(function(e){return e!==r});return Object(Ie.a)({},e,Object(Wt.a)({},a,i))}),Object(Wt.a)(HL,ng,function(e,t){var n=t.payload,a=n.dataEntryId,r=n.itemId,i=n.uid,o=Uh(a,r);return Object(Ie.a)({},e,Object(Wt.a)({},o,[].concat(Object(Xe.a)(e[o]||[]),[i])))}),Object(Wt.a)(HL,Qh,function(e,t){var n=t.payload,a=n.dataEntryId,r=n.itemId,i=n.uid,o=Uh(a,r),s=(e[o]||[]).filter(function(e){return e!==i});return Object(Ie.a)({},e,Object(Wt.a)({},o,s))}),HL),"dataEntriesInProgressList"),PU=Object(qm.b)((zL={},Object(Wt.a)(zL,VF.WORKING_LIST_DATA_RETRIEVED,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.listId,i=a.queryData,o=a.pagingData,s=Object(Ie.a)({},i,o,{next:{}});return s.hasOwnProperty("page")&&delete s.page,n[r]=s,n}),Object(Wt.a)(zL,TR,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.listId,i=a.pagingData,o=n[r].next;return n[r]=Object(Ie.a)({},n[r],o,i,{filters:Object(Ie.a)({},n[r].filters,n[r].next.filters),next:{}}),n}),Object(Wt.a)(zL,RR,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.listId;return n[a]=Object(Ie.a)({},n[a],{next:{}}),n}),Object(Wt.a)(zL,WA,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.pageNumber,i=a.listId;return n[i]=Object(Ie.a)({},n[i],{next:Object(Ie.a)({},n[i].next,{currentPage:r})}),n}),Object(Wt.a)(zL,NR,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.listId,i=a.id,o=a.direction;return n[r]=Object(Ie.a)({},n[r],{next:Object(Ie.a)({},n[r].next,{sortById:i,sortByDirection:o,currentPage:1})}),n}),Object(Wt.a)(zL,HA,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.rowsPerPage,i=a.listId;return n[i]=Object(Ie.a)({},n[i],{next:Object(Ie.a)({},n[i].next,{rowsPerPage:r,currentPage:1})}),n}),Object(Wt.a)(zL,yA,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.listId;return n[r]=Object(Ie.a)({},n[r],{next:Object(Ie.a)({},n[r].next,{filters:Object(Ie.a)({},n[r].next?n[r].next.filters:null,Object(Wt.a)({},a.itemId,a.requestData))})}),n}),Object(Wt.a)(zL,EA,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.itemId,i=a.listId,o=Object(Ie.a)({},n[i].next?n[i].next.filters:null,Object(Wt.a)({},r,null));return n[i]=Object(Ie.a)({},n[i],{next:Object(Ie.a)({},n[i].next,{filters:o})}),n}),Object(Wt.a)(zL,OT,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.listId]=t.payload.meta,n}),zL),"workingListsMeta"),DU=Object(qm.b)((YL={},Object(Wt.a)(YL,VF.WORKING_LIST_DATA_RETRIEVED,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.listId,i=a.config,o=i&&i.filters,s=o?o.reduce(function(e,t){return Object(Ie.a)({},e,Object(Wt.a)({},t.id,t.appliedText))},{}):{};return n[r]=s,n}),Object(Wt.a)(YL,TR,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.listId,r=n[a].next;return n[a]=Object(Ie.a)({},n[a],r,{next:{}}),n}),Object(Wt.a)(YL,RR,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.listId;return n[a]=Object(Ie.a)({},n[a],{next:{}}),n}),Object(Wt.a)(YL,yA,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.listId;return n[r]=Object(Ie.a)({},n[r],{next:Object(Ie.a)({},n[r]?n[r].next:null,Object(Wt.a)({},a.itemId,a.appliedText))}),n}),Object(Wt.a)(YL,EA,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.itemId,i=a.listId;return n[i]=Object(Ie.a)({},n[i],{next:Object(Ie.a)({},n[i]?n[i].next:null,Object(Wt.a)({},r,null))}),n}),YL),"workingListsAppliedFilters"),xU=Object(qm.b)((KL={},Object(Wt.a)(KL,VF.WORKING_LIST_DATA_RETRIEVED,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.listId,i=a.config,o=i&&i.filters,s=o?o.reduce(function(e,t){return Object(Ie.a)({},e,Object(Wt.a)({},t.id,t.value))},{}):{};return n[r]=s,n}),Object(Wt.a)(KL,OA,function(e,t){var n=t.payload,a=n.itemId,r=n.listId,i=n.value,o=Object(Ie.a)({},e);return o[r]=Object(Ie.a)({},o[r],{next:Object(Ie.a)({},o[r]?o[r].next:null,Object(Wt.a)({},a,i))}),o}),Object(Wt.a)(KL,EA,function(e,t){var n,a=t.payload,r=a.itemId,i=a.listId,o=Object(Ie.a)({},e);return o[i]=Object(Ie.a)({},o[i],(n={},Object(Wt.a)(n,r,null),Object(Wt.a)(n,"next",{}),n)),o}),Object(Wt.a)(KL,yA,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.listId;return n[a]=Object(Ie.a)({},n[a],n[a]?n[a].next:null,{next:{}}),n}),Object(Wt.a)(KL,_A,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.listId;return n[a]=Object(Ie.a)({},n[a],{next:{}}),n}),Object(Wt.a)(KL,Si,function(e){return Object(Ie.a)({},e,{main:{}})}),Object(Wt.a)(KL,VF.UPDATE_MAIN_SELECTIONS_FROM_URL,function(e,t){var n=t.payload;return n.nextProps.programId!==n.prevProps.programId?Object(Ie.a)({},e,{main:{}}):e}),Object(Wt.a)(KL,uU,function(e,t){var n=t.payload;return n.eventContainer.event.programId!==n.prevProgramId?Object(Ie.a)({},e,{main:{}}):e}),Object(Wt.a)(KL,bP,function(e,t){var n=t.payload;return n.eventContainer.event.programId!==n.prevProgramId?Object(Ie.a)({},e,{main:{}}):e}),KL),"workingListFiltersEdit"),FU="GoingOnlineExecutedBatch",LU="GoingOnlineExecuted",UU="GetEventListOnReconnect",MU=function(e){return Object(Ie.a)({},e,{eventMainPage:Object(Ie.a)({},e.eventMainPage,{isLoading:!0})})},VU=Object(qm.b)((qL={},Object(Wt.a)(qL,UU,MU),Object(Wt.a)(qL,VF.MAIN_SELECTIONS_COMPLETED,MU),Object(Wt.a)(qL,AP,MU),Object(Wt.a)(qL,IP,MU),Object(Wt.a)(qL,mO,MU),Object(Wt.a)(qL,Qv,MU),Object(Wt.a)(qL,qv,MU),Object(Wt.a)(qL,MR,function(e,t){return Object(Ie.a)({},e,{eventMainPage:Object(Ie.a)({},e.eventMainPage,{workingListConfigs:t.payload.workingListConfigs})})}),Object(Wt.a)(qL,VR,function(e,t){return Object(Ie.a)({},e,{eventMainPage:Object(Ie.a)({},e.eventMainPage,{isLoading:!1,loadError:t.payload.error})})}),Object(Wt.a)(qL,UR,function(e,t){return Object(Ie.a)({},e,{eventMainPage:Object(Ie.a)({},e.eventMainPage,{currentConfigId:t.payload.configId,currentListId:t.payload.listId})})}),Object(Wt.a)(qL,VF.WORKING_LIST_DATA_RETRIEVED,function(e){return Object(Ie.a)({},e,{eventMainPage:Object(Ie.a)({},e.eventMainPage,{isLoading:!1,loadError:null})})}),Object(Wt.a)(qL,TR,function(e){return Object(Ie.a)({},e,{eventMainPage:Object(Ie.a)({},e.eventMainPage,{isLoading:!1,loadError:null})})}),Object(Wt.a)(qL,VF.WORKING_LIST_DATA_RETRIEVAL_FAILED,function(e){return Object(Ie.a)({},e,{eventMainPage:Object(Ie.a)({},e.eventMainPage,{isLoading:!1})})}),qL),"workingListConfigSelector"),BU=Object(qm.b)((XL={},Object(Wt.a)(XL,VF.WORKING_LIST_DATA_RETRIEVED,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.listId,i=a.eventContainers,o=a.request;return n[r]={order:i?i.map(function(e){return e.event.eventId}):[],type:"event",currentRequest:o},n}),Object(Wt.a)(XL,TR,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.listId,i=a.eventContainers,o=a.request;return n[r]={order:i?i.map(function(e){return e.event.eventId}):[],type:"event",currentRequest:o},n}),Object(Wt.a)(XL,gT,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.listId,i=a.itemId;return n[r]={order:[].concat(Object(Xe.a)(e[r]?e[r].order:[]),[i])},n}),Object(Wt.a)(XL,bT,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.listId,i=a.itemId;return n[r]={order:[i].concat(Object(Xe.a)(e[r]?e[r].order:[]))},n}),Object(Wt.a)(XL,vT,function(e,t){var n=Object(Ie.a)({},e),a=t.payload,r=a.listId,i=a.itemId;return n[r]={order:e[r]?e[r].order.filter(function(e){return e!==i}):[]},n}),Object(Wt.a)(XL,OT,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.listId]={order:[]},n}),XL),"workingLists"),GU=function(e){return Object(Ie.a)({},e,{isLoading:!0})},WU=function(e,t){return Object(Ie.a)({},e,t,{isLoading:!1,isUpdating:!1,isUpdatingWithDialog:!1})},HU=Object(qm.b)((ZL={},Object(Wt.a)(ZL,UR,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.listId;return n[a]=GU(n[a]),n}),Object(Wt.a)(ZL,WA,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.listId;return n[a]=GU(n[a]),n}),Object(Wt.a)(ZL,HA,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.listId;return n[a]=GU(n[a]),n}),Object(Wt.a)(ZL,NR,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.listId;return n[a]=GU(n[a]),n}),Object(Wt.a)(ZL,FR,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.listId;return n[a]=Object(Ie.a)({},n[a],{isUpdating:!0}),n}),Object(Wt.a)(ZL,LR,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.listId;return n[a]=Object(Ie.a)({},n[a],{isUpdatingWithDialog:!0}),n}),Object(Wt.a)(ZL,VF.WORKING_LIST_DATA_RETRIEVED,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.listId;return n[a]=WU(n[a],{hasBeenLoaded:!0,dataLoadingError:null}),n}),Object(Wt.a)(ZL,TR,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.listId;return n[a]=WU(n[a],{dataLoadingError:null}),n}),Object(Wt.a)(ZL,VF.WORKING_LIST_DATA_RETRIEVAL_FAILED,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.listId]=WU({},{dataLoadingError:a.errorMessage}),n}),Object(Wt.a)(ZL,RR,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.listId]=WU({},{dataLoadingError:null}),n}),ZL),"workingListsUI"),zU=Object(qm.b)((JL={},Object(Wt.a)(JL,VF.WORKING_LIST_DATA_RETRIEVED,function(e,t){var n=t.payload,a=n.listId,r=n.config.columnOrder;return Object(Ie.a)({},e,Object(Wt.a)({},a,r))}),Object(Wt.a)(JL,Jw,function(e,t){var n=t.payload,a=n.columnOrder,r=n.listId,i=e[r],o=a.map(function(e){var t=i.find(function(t){return t.id===e.id});return Object(Ie.a)({},t,{visible:e.visible})});return Object(Ie.a)({},e,Object(Wt.a)({},r,o))}),Object(Wt.a)(JL,OT,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.listId]=Object(Xe.a)(t.payload.columnOrder),n}),JL),"workingListsColumnsOrder"),YU=Object(qm.b)((QL={},Object(Wt.a)(QL,VF.WORKING_LIST_DATA_RETRIEVED,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.listId]=a.selections,n}),Object(Wt.a)(QL,OT,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.listId]=t.payload.selections,n}),Object(Wt.a)(QL,Si,function(e){return Object(Ie.a)({},e,{eventList:null})}),Object(Wt.a)(QL,VF.UPDATE_MAIN_SELECTIONS_FROM_URL,function(e,t){var n=t.payload;return n.nextProps.programId!==n.prevProps.programId?Object(Ie.a)({},e,{eventList:null}):e}),Object(Wt.a)(QL,uU,function(e,t){var n=t.payload;return n.eventContainer.event.programId!==n.prevProgramId?Object(Ie.a)({},e,{eventList:null}):e}),Object(Wt.a)(QL,bP,function(e,t){var n=t.payload;return n.eventContainer.event.programId!==n.prevProgramId?Object(Ie.a)({},e,{eventList:null}):e}),QL),"workingListsContext"),KU=Object(qm.b)(($L={},Object(Wt.a)($L,jA,function(e,t){var n=t.payload,a=n.id,r=n.listId,i=Object(Ie.a)({},e[r],Object(Wt.a)({},a,!0));return Object(Ie.a)({},e,Object(Wt.a)({},r,i))}),Object(Wt.a)($L,VF.WORKING_LIST_DATA_RETRIEVED,function(e,t){var n=t.payload,a=n.listId,r=n.config,i=(void 0===r?{}:r).filters,o=i?i.reduce(function(e,t){return Object(Ie.a)({},e,Object(Wt.a)({},t.id,!0))},{}):{};return Object(Ie.a)({},e,Object(Wt.a)({},a,o))}),Object(Wt.a)($L,IA,function(e,t){var n=t.payload,a=n.listId,r=n.includeFilters;return Object(Ie.a)({},e,Object(Wt.a)({},a,r))}),$L),"workingListsUserSelectedFilters"),qU=Object(qm.b)((eU={},Object(Wt.a)(eU,VF.UPDATE_MAIN_SELECTIONS_FROM_URL,function(e){var t=Object(Ie.a)({},e);return t.isLoading=!0,t}),Object(Wt.a)(eU,VF.ERROR_RETRIEVING_ORG_UNIT_BASED_ON_URL,function(e,t){var n=Object(Ie.a)({},e);return n.isLoading=!1,n.selectionsError=t.payload,n}),Object(Wt.a)(eU,VF.INVALID_ORG_UNIT_FROM_URL,function(e,t){var n=Object(Ie.a)({},e);return n.isLoading=!1,n.selectionsError=t.payload,n}),Object(Wt.a)(eU,VF.INVALID_SELECTIONS_FROM_URL,function(e,t){var n=Object(Ie.a)({},e);return n.isLoading=!1,n.selectionsError=t.payload,n}),Object(Wt.a)(eU,VF.VALID_SELECTIONS_FROM_URL,function(e){var t=Object(Ie.a)({},e);return t.isLoading=!1,t.selectionsError=null,t}),Object(Wt.a)(eU,PC,function(e){return Object(Ie.a)({},e,{selectionsError:null})}),Object(Wt.a)(eU,lU,function(e){return Object(Ie.a)({},e,{selectionsError:null})}),Object(Wt.a)(eU,gP,function(e){return Object(Ie.a)({},e,{selectionsError:null})}),eU),"mainPage"),XU="OpenNewEventPage",ZU=Object(qm.b)((tU={},Object(Wt.a)(tU,TC,function(){return{isLoading:!0}}),Object(Wt.a)(tU,kC,function(e,t){var n=Object(Ie.a)({},e);return n.isLoading=!1,n.selectionsError=t.payload,n}),Object(Wt.a)(tU,NC,function(e,t){var n=Object(Ie.a)({},e);return n.isLoading=!1,n.selectionsError=t.payload,n}),Object(Wt.a)(tU,wC,function(e,t){var n=Object(Ie.a)({},e);return n.isLoading=!1,n.selectionsError=t.payload,n}),Object(Wt.a)(tU,PC,function(e){var t=Object(Ie.a)({},e);return t.isLoading=!1,t.selectionsError=null,t.dataEntryIsLoading=!0,t}),Object(Wt.a)(tU,XU,function(e){var t=Object(Ie.a)({},e);return t.dataEntryIsLoading=!0,t.selectionsError=null,t.showAddRelationship=!1,t}),Object(Wt.a)(tU,HC,function(e){var t=Object(Ie.a)({},e);return t.dataEntryIsLoading=!0,t.showAddRelationship=!1,t}),Object(Wt.a)(tU,eT,function(e){var t=Object(Ie.a)({},e);return t.dataEntryIsLoading=!0,t.showAddRelationship=!1,t}),Object(Wt.a)(tU,oT.OPEN_NEW_EVENT,function(e){var t=Object(Ie.a)({},e);return t.dataEntryIsLoading=!0,t.showAddRelationship=!1,t}),Object(Wt.a)(tU,tO,function(e){var t=Object(Ie.a)({},e);return t.dataEntryIsLoading=!1,t}),Object(Wt.a)(tU,Yv,function(e){var t=Object(Ie.a)({},e);return t.dataEntryIsLoading=!1,t.showAddRelationship=!1,t}),Object(Wt.a)(tU,lO,function(e){return Object(Ie.a)({},e,{showAddRelationship:!0})}),Object(Wt.a)(tU,uy,function(e){return Object(Ie.a)({},e,{showAddRelationship:!1})}),Object(Wt.a)(tU,dy,function(e,t){return Object(Ie.a)({},e,{recentlyAddedRelationshipId:t.payload.relationshipId})}),Object(Wt.a)(tU,vO,function(e){return Object(Ie.a)({},e,{recentlyAddedRelationshipId:null})}),Object(Wt.a)(tU,ly,function(e){var t=Object(Ie.a)({},e);return t.showAddRelationship=!1,t}),Object(Wt.a)(tU,oy,function(e,t){var n=Object(Ie.a)({},e);return n.formHorizontal=t.payload.formHorizontal,n}),Object(Wt.a)(tU,oO,function(e,t){var n=Object(Ie.a)({},e);return n.saveTypes=t.payload.saveTypes,n}),Object(Wt.a)(tU,OC.SET_ORG_UNIT,function(e){return Object(Ie.a)({},e,{dataEntryIsLoading:!0})}),tU),"newEventPage"),JU=Object(qm.b)((nU={},Object(Wt.a)(nU,lU,function(e,t){var n=Object(Ie.a)({},e);return n.eventId=t.payload.eventId,n.isLoading=!0,n.loadError=null,n}),Object(Wt.a)(nU,dU,function(e,t){var n=Object(Ie.a)({},e);return n.isLoading=!1,n.loadError=t.payload,n}),Object(Wt.a)(nU,pU,function(e){var t=Object(Ie.a)({},e);return t.isLoading=!1,t.dataEntryIsLoading=!0,t}),Object(Wt.a)(nU,fU,function(e){var t=Object(Ie.a)({},e);return t.isLoading=!1,t.dataEntryIsLoading=!0,t}),Object(Wt.a)(nU,mD,function(e){var t=Object(Ie.a)({},e);return t.dataEntryIsLoading=!1,t}),Object(Wt.a)(nU,hD,function(e,t){var n=Object(Ie.a)({},e);return n.dataEntryIsLoading=!1,n.dataEntryLoadError=t.payload,n}),Object(Wt.a)(nU,kR,function(e,t){return Object(Ie.a)({},e,{eventId:t.payload,isLoading:!1,dataEntryIsLoading:!0,loadError:null})}),nU),"editEventPage");function QU(e,t,n,a,r,i,o,s){return $U.apply(this,arguments)}function $U(){return($U=Object(i.a)(r.a.mark(function e(t,n,a,i,o,s,c,l){var u,d,p,f,m,h,g,b,v,O,y;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=o?Wb(o):{},d=zb(a),p=o?Hb(o,a):{},f=Yb(i,s),m=Uh(t,n),!l){e.next=14;break}return e.next=8,l(p,f,s);case 8:if(e.t1=e.sent,e.t1){e.next=11;break}e.t1={};case 11:e.t0=e.t1,e.next=15;break;case 14:e.t0={};case 15:return h=e.t0,g=h.dataEntryValues,b=void 0===g?p:g,v=h.formValues,O=void 0===v?f:v,y=o?Kb(b,o):{},e.abrupt("return",{actions:[pg({key:m,itemId:n,dataEntryId:t,dataEntryMeta:u,dataEntryValues:b,dataEntryNotes:d,extraProps:c,dataEntryUI:y}),Gb(m,O)],dataEntryValues:b,formValues:O});case 22:case"end":return e.stop()}},e)}))).apply(this,arguments)}var eM="ViewEventDataEntryLoadedForViewSingleEvent",tM="PrerequisitesErrorLoadingViewEventDataEntryForViewSingleEvent";function nM(e,t,n){return aM.apply(this,arguments)}function aM(){return(aM=Object(i.a)(r.a.mark(function e(t,n,a){var i,o,s,c,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.getElements(),o=i.reduce(function(e,t){return t.type===ft.USERNAME&&n[t.id]&&e.add(n[t.id]),e},new Set),s=function(e){var t=Object(Xe.a)(e);return Pn().get("users",{filter:"userCredentials.username:in:[".concat(t.join(),"]"),fields:"id,displayName,userCredentials[username]",paging:!1}).then(function(e){return e.users.reduce(function(e,t){return e[t.userCredentials.username]={id:t.id,name:t.displayName,username:t.userCredentials.username},e},{})})},0!==o.size){e.next=5;break}return e.abrupt("return",{dataEntryValues:t,formValues:n});case 5:return e.next=7,s(o);case 7:return c=e.sent,l=i.reduce(function(e,t){if(t.type===ft.USERNAME&&e[t.id]){var n=c[e[t.id]];if(!n)return R.a.error(Object(Ze.b)("no user object found for username dataelement of event")({value:e[t.id]})),e[t.id]=void 0,e;e[t.id]=n}return e},n),e.abrupt("return",{dataEntryValues:t,formValues:l});case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var rM,iM,oM,sM,cM,lM,uM,dM,pM,fM,mM,hM,gM,bM,vM,OM=function(){var e=Object(i.a)(r.a.mark(function e(t,n,a,i){var o,s,c,l,u,d,p,f,m;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=YD,s=KD,c=[{id:"eventDate",type:"DATE"},{clientId:"geometry",dataEntryId:"geometry",onConvertIn:M_(a),onConvertOut:U_},{clientId:"status",dataEntryId:"complete",onConvertIn:function(e){return"COMPLETED"===e?"true":"false"},onConvertOut:B_}],l=Uh(o,s),e.next=6,QU(o,s,t.event,t.values,c,a,{eventId:t.event.eventId},nM);case 6:return u=e.sent,d=u.actions,p=u.dataEntryValues,f=u.formValues,m=Object(Ie.a)({},t.event,t.values),e.abrupt("return",[].concat(Object(Xe.a)(d),Object(Xe.a)(e_(i,a,l,n,m,[m])),[Se(eM)({loadedValues:{dataEntryValues:p,formValues:f,eventContainer:t},assignee:(r=t.event.assignee,r?ha(r,ft.USERNAME):r)})]));case 12:case"end":return e.stop()}var r},e)}));return function(t,n,a,r){return e.apply(this,arguments)}}(),yM=Object(qm.b)((rM={},Object(Wt.a)(rM,gP,function(e,t){return{eventDetailsSection:{},notesSection:{isLoading:!0},relationshipsSection:{isLoading:!0},assigneeSection:{isLoading:!0},eventId:t.payload.eventId,dataEntryIsLoading:!0,isLoading:!0}}),Object(Wt.a)(rM,kP,function(e,t){return Object(Ie.a)({},e,{loadError:t.payload.error})}),Object(Wt.a)(rM,vP,function(e,t){var n=Object(Ie.a)({},e);return n.isLoading=!1,n.loadError=t.payload,n}),Object(Wt.a)(rM,OP,function(e){var t=Object(Ie.a)({},e);return t.isLoading=!1,t.dataEntryIsLoading=!0,t}),Object(Wt.a)(rM,yP,function(e){var t=Object(Ie.a)({},e);return t.isLoading=!1,t.dataEntryIsLoading=!0,t}),Object(Wt.a)(rM,eM,function(e,t){var n=Object(Ie.a)({},e);return n.dataEntryIsLoading=!1,n.eventDetailsSection=Object(Ie.a)({},n.eventDetailsSection),n.loadedValues=t.payload.loadedValues,n.assigneeSection={isLoading:!1,assignee:t.payload.assignee},n}),Object(Wt.a)(rM,tM,function(e,t){var n=Object(Ie.a)({},e);return n.dataEntryIsLoading=!1,n.dataEntryLoadError=t.payload,n}),Object(Wt.a)(rM,AR,function(e,t){return{eventDetailsSection:{},notesSection:{isLoading:!0},relationshipsSection:{isLoading:!0},assigneeSection:{isLoading:!0},eventId:t.payload,dataEntryIsLoading:!0}}),Object(Wt.a)(rM,TP,function(e){return Object(Ie.a)({},e,{showAddRelationship:!0})}),Object(Wt.a)(rM,wx,function(e){return Object(Ie.a)({},e,{relationshipsSection:Object(Ie.a)({},e.relationshipsSection,{isLoading:!1})})}),Object(Wt.a)(rM,Dx,function(e){return Object(Ie.a)({},e,{showAddRelationship:!1})}),Object(Wt.a)(rM,Px,function(e){var t=Object(Ie.a)({},e);return t.showAddRelationship=!1,t}),Object(Wt.a)(rM,aF,function(e){return Object(Ie.a)({},e,{notesSection:Object(Ie.a)({},e.notesSection,{isLoading:!1})})}),Object(Wt.a)(rM,cF,function(e,t){return Object(Ie.a)({},e,{notesSection:Object(Ie.a)({},e.notesSection,{fieldValue:t.payload.value})})}),Object(Wt.a)(rM,HD,function(e){return Object(Ie.a)({},e,{eventDetailsSection:Object(Ie.a)({},e.eventDetailsSection)})}),Object(Wt.a)(rM,zD,function(e){return Object(Ie.a)({},e,{eventDetailsSection:Object(Ie.a)({},e.eventDetailsSection,{showEditEvent:!0})})}),Object(Wt.a)(rM,LD,function(e){return Object(Ie.a)({},e,{eventDetailsSection:Object(Ie.a)({},e.eventDetailsSection,{showEditEvent:!1})})}),Object(Wt.a)(rM,UD,function(e){return Object(Ie.a)({},e,{saveInProgress:!0,eventDetailsSection:Object(Ie.a)({},e.eventDetailsSection,{showEditEvent:!1})})}),Object(Wt.a)(rM,BD,function(e,t){return t.meta.eventId!==e.eventId?e:Object(Ie.a)({},e,{saveInProgress:!1})}),Object(Wt.a)(rM,VD,function(e,t){return t.meta.eventId!==e.eventId?e:Object(Ie.a)({},e,{saveInProgress:!1,eventHasChanged:!0})}),Object(Wt.a)(rM,bF,function(e,t){var n=t.payload.assignee;return Object(Ie.a)({},e,{saveInProgress:!0,loadedValues:Object(Ie.a)({},e.loadedValues,{eventContainer:Object(Ie.a)({},e.loadedValues.eventContainer,{event:Object(Ie.a)({},e.loadedValues.eventContainer.event,{assignee:n})})})})}),Object(Wt.a)(rM,OF,function(e,t){return t.meta.eventId!==e.eventId?e:Object(Ie.a)({},e,{saveInProgress:!1,eventHasChanged:!0})}),Object(Wt.a)(rM,yF,function(e,t){return t.meta.eventId!==e.eventId?e:Object(Ie.a)({},e,{saveInProgress:!1})}),rM),"viewEventPage"),EM=Object(qm.b)((iM={},Object(Wt.a)(iM,gR,function(e){var t=Object(Ie.a)({},e);return t.isLoading=!0,t}),Object(Wt.a)(iM,vR,function(e,t){var n=Object(Ie.a)({},e);return n.isLoading=!1,n.selectionsError=t.payload.error,n}),Object(Wt.a)(iM,yR,function(e){var t=Object(Ie.a)({},e);return t.isLoading=!1,t.selectionsError=null,t.dataEntryIsLoading=!0,t}),Object(Wt.a)(iM,ER,function(e,t){var n=Object(Ie.a)({},e);return n.isLoading=!1,n.selectionsError=t.payload.error,n}),Object(Wt.a)(iM,IR,function(e){return Object(Ie.a)({},e,{dataEntryIsLoading:!1})}),iM),"newEnrollmentPage"),_M=Object(qm.b)((oM={},Object(Wt.a)(oM,mS,function(){return{}}),Object(Wt.a)(oM,hS,function(e,t){return Object(Ie.a)({},e,{selectedRelationshipType:t.payload.selectedRelationshipType,findMode:null})}),Object(Wt.a)(oM,bS,function(e,t){return Object(Ie.a)({},e,{findMode:t.payload.findMode,searching:!1})}),Object(Wt.a)(oM,vS,function(e){return Object(Ie.a)({},e,{searching:!0})}),Object(Wt.a)(oM,OS,function(e){return Object(Ie.a)({},e,{searching:!1})}),oM),"newRelationship",{}),jM=Object(qm.b)((sM={},Object(Wt.a)(sM,bS,function(){return{loading:!0}}),Object(Wt.a)(sM,ES,function(e,t){var n=t.payload,a=n.programId,r=n.orgUnit;return Object(Ie.a)({},e,{programId:a,orgUnit:r,dataEntryIsLoading:!1,loading:!1})}),Object(Wt.a)(sM,_S,function(e,t){return Object(Ie.a)({},e,{error:t.payload.errorMessage,loading:!1})}),Object(Wt.a)(sM,Jj,function(e,t){var n=t.payload.programId;return Object(Ie.a)({},e,{programId:n,dataEntryIsLoading:!0})}),Object(Wt.a)(sM,Qj,function(e,t){var n=t.payload,a=n.orgUnit,r=n.resetProgramSelection;return Object(Ie.a)({},e,{orgUnit:a,programId:r?null:e.programId,dataEntryIsLoading:!0})}),Object(Wt.a)(sM,eI,function(e){return Object(Ie.a)({},e,{orgUnit:null,dataEntryIsLoading:!0})}),Object(Wt.a)(sM,SS,function(e){return Object(Ie.a)({},e,{dataEntryIsLoading:!1,dataEntryError:null})}),Object(Wt.a)(sM,TS,function(e,t){return Object(Ie.a)({},e,{dataEntryIsLoading:!1,dataEntryError:t.payload.errorMessage})}),Object(Wt.a)(sM,CS,function(e){return Object(Ie.a)({},e,{dataEntryIsLoading:!1,dataEntryError:null})}),sM),"newRelationshipRegisterTei"),IM=Object(qm.b)((cM={},Object(Wt.a)(cM,NI,function(e){return Object(Ie.a)({},e,{isLoading:!0})}),Object(Wt.a)(cM,kI,function(e,t){return Object(Ie.a)({},e,{isLoading:!1,isUpdating:!1,teis:t.payload.teis,loadError:!1,paginationData:Object(Ie.a)({},e.paginationData,t.payload.paginationData)})}),Object(Wt.a)(cM,AI,function(e){return Object(Ie.a)({},e,{isLoading:!1,isUpdating:!1,loadError:!0})}),Object(Wt.a)(cM,wI,function(e,t){return Object(Ie.a)({},e,{isUpdating:!0,paginationData:Object(Ie.a)({},e.paginationData,{currentPage:t.payload.page})})}),cM),"newRelationshipRegisterTeiDuplicatesReview"),SM="CoreLoad",CM="CoreLoadSucess",TM="CoreLoadFailed",RM="OrgUnitCaptureRootsLoadSuccess",NM="OrgUnitSearchRootsLoadSuccess",kM=function(e){return Se(RM)({roots:e})},AM=function(e){return Se(NM)({roots:e})},wM=Object(qm.b)((lM={},Object(Wt.a)(lM,pU,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.orgUnit;return n[a.id]=a,n}),Object(Wt.a)(lM,OP,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.orgUnit;return n[a.id]=a,n}),Object(Wt.a)(lM,VF.ORG_UNIT_DATA_RETRIVED,function(e,t){return Object(Ie.a)({},e,Object(Wt.a)({},t.payload.id,t.payload))}),Object(Wt.a)(lM,VF.SET_ORG_UNIT_BASED_ON_URL,function(e,t){return Object(Ie.a)({},e,Object(Wt.a)({},t.payload.id,t.payload))}),Object(Wt.a)(lM,RC,function(e,t){return Object(Ie.a)({},e,Object(Wt.a)({},t.payload.id,t.payload))}),Object(Wt.a)(lM,bR,function(e,t){return Object(Ie.a)({},e,Object(Wt.a)({},t.payload.orgUnit.id,t.payload.orgUnit))}),Object(Wt.a)(lM,yi,function(e,t){var n=Object(Ie.a)({},e),a=t.payload;return n[a.id]=a,n}),Object(Wt.a)(lM,oT.SET_ORG_UNIT,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.orgUnit;return n[a.id]=a,n}),Object(Wt.a)(lM,OC.SET_ORG_UNIT,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.orgUnit;return n[a.id]=a,n}),lM),"organisationUnits"),PM=Object(qm.b)((uM={},Object(Wt.a)(uM,NM,function(e,t){return Object(Ie.a)({},e,{searchRoots:{roots:t.payload.roots}})}),Object(Wt.a)(uM,RM,function(e,t){return Object(Ie.a)({},e,{captureRoots:{roots:t.payload.roots}})}),uM),"organisationUnitRoots"),DM=function(e){return du("regUnit",null),Object(Ie.a)({},e,{searchRoots:null,searchText:null,key:"reset_reg_units"})},xM=Object(qm.b)((dM={},Object(Wt.a)(dM,fu,function(e,t){return{searchRoots:null,searchText:null,userRoots:t.payload.roots,key:"user_init"}}),Object(Wt.a)(dM,mu,function(){return{searchRoots:null,searchText:null,userRoots:null,key:"user_init_failed"}}),Object(Wt.a)(dM,hu,function(e,t){return Object(Ie.a)({},e,{searchText:t.payload.searchText})}),Object(Wt.a)(dM,gu,function(e){return du("regUnit",null),Object(Ie.a)({},e,{searchText:null,searchRoots:null,key:"clear"})}),Object(Wt.a)(dM,bu,function(e,t){return Object(Ie.a)({},e,t.payload,{isLoading:!1,key:t.payload.searchText})}),Object(Wt.a)(dM,vu,function(e,t){return Object(Ie.a)({},e,{searchRoots:[],isLoading:!1,key:t.payload.searchText})}),Object(Wt.a)(dM,Ou,function(e){return Object(Ie.a)({},e,{isLoading:!0})}),Object(Wt.a)(dM,oT.RESET_ORG_UNIT_ID,DM),Object(Wt.a)(dM,VF.SET_EMPTY_ORG_UNIT_BASED_ON_URL,DM),Object(Wt.a)(dM,OC.RESET_ORG_UNIT_ID,DM),Object(Wt.a)(dM,AC,DM),Object(Wt.a)(dM,UC,DM),Object(Wt.a)(dM,qC,DM),Object(Wt.a)(dM,OR,DM),dM),"registeringUnitList"),FM="NetworkStatusChange",LM=Object(qm.b)(Object(Wt.a)({},FM,function(e,t){var n=Object(Ie.a)({},e);return t.payload.status?n.offlineSince=0:n.offlineSince=Date.now(),n}),"networkStatus",{}),UM=Object(qm.b)((pM={},Object(Wt.a)(pM,xC,function(e,t){var n=Object(Ie.a)({},e),a=t.payload.event;return n[a.eventId]=a,n}),Object(Wt.a)(pM,OT,function(e,t){if("recentlyAddedEvents"===t.payload.listId){return{}}return e}),pM),"recentlyAddedEvents",{}),MM=Object(qm.b)((fM={},Object(Wt.a)(fM,xC,function(e,t){var n=Object(Ie.a)({},e);return n[t.payload.event.eventId]=t.payload.eventValues,n}),Object(Wt.a)(fM,OT,function(e,t){if("recentlyAddedEvents"===t.payload.listId){return{}}return e}),fM),"recentlyAddedEventsValues",{}),VM=Object(qm.b)((mM={},Object(Wt.a)(mM,Xy,function(e,t){return Object(Ie.a)({},e,Object(Wt.a)({},t.payload.searchId,{selectedOrgUnitScope:"ACCESSIBLE",openSearchGroupSection:"0",selectedProgramId:t.payload.programId,selectedTrackedEntityTypeId:t.payload.trackedEntityTypeId}))}),Object(Wt.a)(mM,Zy,function(e,t){return Object(Ie.a)({},e,Object(Wt.a)({},t.payload.searchId,Object(Ie.a)({},e[t.payload.searchId],{searchResults:{formId:t.payload.formId,searchGroupId:t.payload.searchGroupId,resultsLoading:!0}})))}),Object(Wt.a)(mM,$y,function(e,t){var n=t.payload.data,a=t.payload.searchId,r=n.trackedEntityInstanceContainers?n.trackedEntityInstanceContainers.map(function(e){return{id:e.id,values:e.values}}):[];return Object(Ie.a)({},e,Object(Wt.a)({},a,Object(Ie.a)({},e[a],{searchResults:Object(Ie.a)({},e[a].searchResults,{resultsLoading:!1,teis:r,paging:n.pagingData})})))}),Object(Wt.a)(mM,Qy,function(e,t){var n=t.payload.searchId;return Object(Ie.a)({},e,Object(Wt.a)({},n,Object(Ie.a)({},e[n],{searchResults:Object(Ie.a)({},e[n].searchResults,{resultsLoading:!1,teis:[],paging:null})})))}),Object(Wt.a)(mM,by,function(e,t){var n=t.payload.searchId;return Object(Ie.a)({},e,Object(Wt.a)({},n,Object(Ie.a)({},e[n],{orgUnitsLoading:!0,orgUnitsSearchText:t.payload.searchText})))}),Object(Wt.a)(mM,vy,function(e,t){var n=t.payload.searchId;return du(n,null),Object(Ie.a)({},e,Object(Wt.a)({},n,Object(Ie.a)({},e[n],{orgUnitsLoading:!1,orgUnitsSearchText:null,orgUnitsRoots:null})))}),Object(Wt.a)(mM,Oy,function(e,t){var n=t.payload.searchId;return Object(Ie.a)({},e,Object(Wt.a)({},n,Object(Ie.a)({},e[n],{orgUnitsLoading:!1,orgUnitsSearchText:t.payload.searchText,orgUnitsRoots:t.payload.roots})))}),Object(Wt.a)(mM,yy,function(e,t){var n=t.payload.searchId;return du(n,null),Object(Ie.a)({},e,Object(Wt.a)({},n,Object(Ie.a)({},e[n],{orgUnitsLoading:!1,orgUnitsSearchText:null,orgUnitsRoots:null})))}),Object(Wt.a)(mM,Ey,function(e,t){var n=t.payload.searchId;return Object(Ie.a)({},e,Object(Wt.a)({},n,Object(Ie.a)({},e[n],{selectedOrgUnitScope:t.payload.orgUnitScope})))}),Object(Wt.a)(mM,_y,function(e,t){var n=t.payload.searchId;return Object(Ie.a)({},e,Object(Wt.a)({},n,Object(Ie.a)({},e[n],{selectedOrgUnit:t.payload.orgUnit})))}),Object(Wt.a)(mM,eE,function(e,t){var n=t.payload.searchId;return Object(Ie.a)({},e,Object(Wt.a)({},n,Object(Ie.a)({},e[n],{selectedProgramId:t.payload.programId,selectedTrackedEntityTypeId:t.payload.trackedEntityTypeId,openSearchGroupSection:"0"})))}),Object(Wt.a)(mM,Jy,function(e,t){var n=t.payload.searchId,a=t.payload.formId;return Object(Ie.a)({},e,Object(Wt.a)({},n,Object(Ie.a)({},e[n],Object(Wt.a)({},a,Object(Ie.a)({},e[n]?e[n][a]:{},{validationFailed:!0})))))}),Object(Wt.a)(mM,tE,function(e,t){var n=t.payload.searchId;return Object(Ie.a)({},e,Object(Wt.a)({},n,Object(Ie.a)({},e[n],{searchResults:null})))}),Object(Wt.a)(mM,nE,function(e,t){var n=t.payload.searchId;return Object(Ie.a)({},e,Object(Wt.a)({},n,Object(Ie.a)({},e[n],{searchResults:null})))}),Object(Wt.a)(mM,aE,function(e,t){var n=t.payload.searchId;return Object(Ie.a)({},e,Object(Wt.a)({},n,Object(Ie.a)({},e[n],{searchResults:Object(Ie.a)({},e[n].searchResults,{resultsLoading:!0})})))}),Object(Wt.a)(mM,rE,function(e,t){var n=t.payload.searchId;return Object(Ie.a)({},e,Object(Wt.a)({},n,Object(Ie.a)({},e[n],{openSearchGroupSection:t.payload.searchGroupId})))}),mM),"teiSearch",{}),BM="SetNotes",GM="AddTTNote",WM="RemoveNote",HM=function(e,t){return Se(BM)({key:e,notes:t})},zM=Object(qm.b)((hM={},Object(Wt.a)(hM,BM,function(e,t){return Object(Ie.a)({},e,Object(Wt.a)({},t.payload.key,t.payload.notes))}),Object(Wt.a)(hM,GM,function(e,t){var n=t.payload.key,a=t.payload.note;return Object(Ie.a)({},e,Object(Wt.a)({},n,[].concat(Object(Xe.a)(e[n]),[a])))}),Object(Wt.a)(hM,WM,function(e,t){var n=t.payload.key,a=t.payload.noteClientId;return Object(Ie.a)({},e,Object(Wt.a)({},n,e[n].filter(function(e){return e.clientId!==a})))}),hM),"notes"),YM="SetRelationships",KM="AddRelationship",qM="UpdateRelationship",XM="RemoveRelationship",ZM=function(e,t){return Se(YM)({key:e,relationships:t})},JM=function(e,t){return Se(XM)({key:e,relationshipClientId:t})},QM=Object(qm.b)((gM={},Object(Wt.a)(gM,YM,function(e,t){return Object(Ie.a)({},e,Object(Wt.a)({},t.payload.key,t.payload.relationships))}),Object(Wt.a)(gM,KM,function(e,t){var n=t.payload.key,a=t.payload.relationship;return Object(Ie.a)({},e,Object(Wt.a)({},n,[].concat(Object(Xe.a)(e[n]),[a])))}),Object(Wt.a)(gM,qM,function(e,t){var n=t.payload.key,a=t.payload.updatedRelationship,r=e[n].findIndex(function(e){return e.clientId===a.clientId}),i=Object(Xe.a)(e[n]);return i[r]=a,Object(Ie.a)({},e,Object(Wt.a)({},n,i))}),Object(Wt.a)(gM,XM,function(e,t){var n=t.payload.key,a=t.payload.relationshipClientId;return Object(Ie.a)({},e,Object(Wt.a)({},n,e[n].filter(function(e){return e.clientId!==a})))}),gM),"relationships"),$M=Object(qm.b)((bM={},Object(Wt.a)(bM,F_,function(e,t){var n=t.payload,a=n.dataEntryId,r=n.generatedUniqueValues;return Object(Ie.a)({},e,Object(Wt.a)({},a,Object(Ie.a)({},e[a],r)))}),Object(Wt.a)(bM,sj,function(e,t){var n=t.payload,a=n.dataEntryId,r=n.generatedUniqueValues;return Object(Ie.a)({},e,Object(Wt.a)({},a,Object(Ie.a)({},e[a],r)))}),Object(Wt.a)(bM,rg,function(e,t){var n=t.payload.newToEntity;return n?Object(Ie.a)({},e,Object(Wt.a)({},n.dataEntryId,void 0)):e}),Object(Wt.a)(bM,Dx,function(e,t){var n=t.payload.entity;return n.id?e:Object(Ie.a)({},e,Object(Wt.a)({},n.dataEntryId,void 0))}),bM),"generatedUniqueValuesCache"),eV="AppLoad",tV="AppLoadSuccess",nV="AppLoadFailed",aV=function(){return Se(eV)()},rV=function(e){var t;return Object(qm.b)(Object(Ie.a)({},e,(t={},Object(Wt.a)(t,VF.UPDATE_MAIN_SELECTIONS_FROM_URL,function(e,t){return Object(Ie.a)({},e,{page:t.payload.nextPage})}),Object(Wt.a)(t,TC,function(e,t){return Object(Ie.a)({},e,{page:t.payload.nextPage})}),Object(Wt.a)(t,lU,function(e,t){return Object(Ie.a)({},e,{page:t.payload.page})}),Object(Wt.a)(t,gP,function(e,t){return Object(Ie.a)({},e,{page:t.payload.page})}),Object(Wt.a)(t,gR,function(e,t){return Object(Ie.a)({},e,{page:t.payload.nextPage})}),Object(Wt.a)(t,XU,function(e){var t=Object(Ie.a)({},e);return t.page="newEvent",t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,oT.OPEN_NEW_EVENT,function(e){var t=Object(Ie.a)({},e);return t.page="newEvent",t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,HC,function(e){var t=Object(Ie.a)({},e);return t.page="newEvent",t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,eT,function(e){var t=Object(Ie.a)({},e);return t.page="newEvent",t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,qv,function(e){var t=Object(Ie.a)({},e);return t.page=null,t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,Zv,function(e){var t=Object(Ie.a)({},e);return t.page=null,t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,lC,function(e){var t=Object(Ie.a)({},e);return t.page=null,t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,bD,function(e){var t=Object(Ie.a)({},e);return t.page=null,t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,ED,function(e){var t=Object(Ie.a)({},e);return t.page=null,t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,CP,function(e){var t=Object(Ie.a)({},e);return t.page=null,t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,kR,function(e){return Object(Ie.a)({},e,{page:"editEvent",locationSwitchInProgress:!0})}),Object(Wt.a)(t,AR,function(e){return Object(Ie.a)({},e,{page:"viewEvent",locationSwitchInProgress:!0})}),Object(Wt.a)(t,Oi,function(e){return Object(Ie.a)({},e,{page:null,locationSwitchInProgress:!0})}),Object(Wt.a)(t,Ei,function(e){return Object(Ie.a)({},e,{page:null,locationSwitchInProgress:!0})}),Object(Wt.a)(t,"@@router/LOCATION_CHANGE",function(e){var t=Object(Ie.a)({},e);return t.locationSwitchInProgress=!1,t}),Object(Wt.a)(t,"Offline/STATUS_CHANGED",function(e,t){return t.payload.online?Object(Ie.a)({},e,{goingOnlineInProgress:!0}):e}),Object(Wt.a)(t,LU,function(e){return Object(Ie.a)({},e,{goingOnlineInProgress:!1})}),Object(Wt.a)(t,oT.RESET_ORG_UNIT_ID,function(e){var t=Object(Ie.a)({},e);return t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,oT.SET_ORG_UNIT,function(e){var t=Object(Ie.a)({},e);return t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,oT.SET_PROGRAM_ID,function(e){var t=Object(Ie.a)({},e);return t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,oT.RESET_PROGRAM_ID,function(e){var t=Object(Ie.a)({},e);return t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,UC,function(e){return Object(Ie.a)({},e,{page:null,locationSwitchInProgress:!0})}),Object(Wt.a)(t,qC,function(e){return Object(Ie.a)({},e,{page:null,locationSwitchInProgress:!0})}),Object(Wt.a)(t,LC,function(e){var t=Object(Ie.a)({},e);return t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,MC,function(e){var t=Object(Ie.a)({},e);return t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,VC,function(e){return Object(Ie.a)({},e,{page:null,locationSwitchInProgress:!0})}),Object(Wt.a)(t,GC,function(e){return Object(Ie.a)({},e,{page:null,locationSwitchInProgress:!0})}),Object(Wt.a)(t,ZC,function(e){return Object(Ie.a)({},e,{page:null,locationSwitchInProgress:!0})}),Object(Wt.a)(t,QC,function(e){return Object(Ie.a)({},e,{page:null,locationSwitchInProgress:!0})}),Object(Wt.a)(t,OC.RESET_ORG_UNIT_ID,function(e){var t=Object(Ie.a)({},e);return t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,OC.SET_ORG_UNIT,function(e){var t=Object(Ie.a)({},e);return t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,OC.SET_PROGRAM_ID,function(e){var t=Object(Ie.a)({},e);return t.locationSwitchInProgress=!0,t}),Object(Wt.a)(t,OC.RESET_PROGRAM_ID,function(e){var t=Object(Ie.a)({},e);return t.locationSwitchInProgress=!0,t}),t)),"app")}((vM={},Object(Wt.a)(vM,eV,function(e){return Object(Ie.a)({},e,{initDone:!1})}),Object(Wt.a)(vM,tV,function(e,t){var n=Object(Ie.a)({},e);return n.someRandomData=t.payload,n.initDone=!0,n}),Object(Wt.a)(vM,nV,function(e,t){var n=t.payload.error;return Object(Ie.a)({},e,{initDone:!0,error:n})}),vM)),iV=function(e,t){var n=t.payload.id;return Object(Ie.a)({},e,{orgUnitId:n,complete:!1,categoryCheckInProgress:!0})},oV=function(e,t,n){var a=Object(Ie.a)({},e.categories,Object(Wt.a)({},t,n.id)),r=Object(Ie.a)({},e.categoriesMeta,Object(Wt.a)({},t,{name:n.name,writeAccess:n.writeAccess}));return Object(Ie.a)({},e,{categories:a,categoriesMeta:r,complete:!1})},sV=function(e,t){var n=Object(Ie.a)({},e.categories,Object(Wt.a)({},t,void 0)),a=Object(Ie.a)({},e.categoriesMeta,Object(Wt.a)({},t,void 0));return Object(Ie.a)({},e,{categories:n,categoriesMeta:a,complete:!1})};function cV(e,t,n){var a=Object(Xe.a)(e);return a.push({message:t,action:n,feedbackType:"ERROR"}),a}function lV(e,t){return{message:e,action:t,feedbackType:"ERROR"}}var uV,dV=[rV,function(e){var t;return Object(qm.b)(Object(Ie.a)({},e,(t={},Object(Wt.a)(t,yT,function(e,t){return Object(Ie.a)({},e,{complete:t.payload.isComplete})}),Object(Wt.a)(t,Si,function(e){return Object(Ie.a)({},e,{programId:void 0,categories:void 0,categoriesMeta:void 0,complete:!1})}),Object(Wt.a)(t,VF.UPDATE_MAIN_SELECTIONS,function(e,t){return Object(Ie.a)({},e,t.payload,{complete:!1})}),Object(Wt.a)(t,VF.UPDATE_MAIN_SELECTIONS_FROM_URL,function(e,t){var n=t.payload.nextProps;return Object(Ie.a)({},e,n,{categories:void 0,categoriesMeta:void 0,complete:!1})}),Object(Wt.a)(t,VF.SET_EMPTY_ORG_UNIT_BASED_ON_URL,function(e){return Object(Ie.a)({},e,{orgUnitId:null})}),Object(Wt.a)(t,TC,function(e,t){var n=t.payload.nextProps;return Object(Ie.a)({},e,n,{categories:void 0,categoriesMeta:void 0,complete:!1})}),Object(Wt.a)(t,AC,function(e){return Object(Ie.a)({},e,{orgUnitId:null})}),Object(Wt.a)(t,gR,function(e,t){var n=t.payload.nextProps;return Object(Ie.a)({},e,n,{categories:void 0,categoriesMeta:void 0,complete:!1})}),Object(Wt.a)(t,OR,function(e){return Object(Ie.a)({},e,{orgUnitId:null})}),Object(Wt.a)(t,uU,function(e,t){var n=t.payload,a=n.eventContainer,r=n.categoriesData,i=a.event,o=r?r.reduce(function(e,t){return e[t.categoryId]=t.categoryOption.id,e},{}):void 0,s=r?r.reduce(function(e,t){return e[t.categoryId]={name:t.categoryOption.name,writeAccess:t.categoryOption.writeAccess},e},{}):void 0;return Object(Ie.a)({},e,{programId:i.programId,orgUnitId:i.orgUnitId,categories:o,categoriesMeta:s,complete:!0})}),Object(Wt.a)(t,bP,function(e,t){var n=t.payload,a=n.eventContainer,r=n.categoriesData,i=a.event,o=r?r.reduce(function(e,t){return e[t.categoryId]=t.categoryOption.id,e},{}):void 0,s=r?r.reduce(function(e,t){return e[t.categoryId]={name:t.categoryOption.name,writeAccess:t.categoryOption.writeAccess},e},{}):void 0;return Object(Ie.a)({},e,{programId:i.programId,orgUnitId:i.orgUnitId,categories:o,categoriesMeta:s,complete:!0})}),Object(Wt.a)(t,oT.RESET_ORG_UNIT_ID,function(e){var t=Object(Ie.a)({},e,{orgUnitId:null});return t.complete=!1,t}),Object(Wt.a)(t,oT.SET_ORG_UNIT,function(e,t){var n=t.payload.id;return Object(Ie.a)({},e,{orgUnitId:n,complete:!1,categoryCheckInProgress:!0})}),Object(Wt.a)(t,oT.SET_PROGRAM_ID,function(e,t){var n=t.payload,a=Object(Ie.a)({},e,{programId:n});return a.complete=!1,a}),Object(Wt.a)(t,oT.SET_CATEGORY_OPTION,function(e,t){var n=t.payload,a=n.categoryId,r=n.categoryOption;return oV(e,a,r)}),Object(Wt.a)(t,oT.RESET_CATEGORY_OPTION,function(e,t){var n=t.payload.categoryId;return sV(e,n)}),Object(Wt.a)(t,oT.RESET_ALL_CATEGORY_OPTIONS,function(e){return Object(Ie.a)({},e,{categories:void 0,categoriesMeta:void 0})}),Object(Wt.a)(t,UC,function(e){var t=Object(Ie.a)({},e,{orgUnitId:null});return t.complete=!1,t}),Object(Wt.a)(t,LC,iV),Object(Wt.a)(t,MC,function(e,t){var n=t.payload,a=Object(Ie.a)({},e,{programId:n});return a.complete=!1,a}),Object(Wt.a)(t,BC,function(e,t){var n=t.payload,a=n.categoryId,r=n.categoryOption;return oV(e,a,r)}),Object(Wt.a)(t,GC,function(e,t){var n=t.payload.categoryId;return sV(e,n)}),Object(Wt.a)(t,WC,function(e){return Object(Ie.a)({},e,{categories:void 0,categoriesMeta:void 0})}),Object(Wt.a)(t,qC,function(e){var t=Object(Ie.a)({},e,{orgUnitId:null});return t.complete=!1,t}),Object(Wt.a)(t,QC,function(e,t){var n=t.payload.categoryId;return sV(e,n)}),Object(Wt.a)(t,$C,function(e){return Object(Ie.a)({},e,{categories:void 0,categoriesMeta:void 0})}),Object(Wt.a)(t,OC.RESET_ORG_UNIT_ID,function(e){var t=Object(Ie.a)({},e,{orgUnitId:null});return t.complete=!1,t}),Object(Wt.a)(t,OC.SET_ORG_UNIT,iV),Object(Wt.a)(t,OC.SET_PROGRAM_ID,function(e,t){var n=t.payload,a=Object(Ie.a)({},e,{programId:n});return a.complete=!1,a}),Object(Wt.a)(t,OC.SET_CATEGORY_OPTION,function(e,t){var n=t.payload,a=n.categoryId,r=n.categoryOption;return oV(e,a,r)}),Object(Wt.a)(t,OC.RESET_CATEGORY_OPTION,function(e,t){var n=t.payload.categoryId;return sV(e,n)}),Object(Wt.a)(t,OC.RESET_ALL_CATEGORY_OPTIONS,function(e){return Object(Ie.a)({},e,{categories:void 0,categoriesMeta:void 0})}),Object(Wt.a)(t,_T,function(e,t){var n=t.payload.resetCategories,a=e.categories,r=e.categoriesMeta,i=n.reduce(function(e,t){return e.categories[t]=void 0,e.categoriesMeta[t]=void 0,e},{categories:Object(Ie.a)({},a),categoriesMeta:Object(Ie.a)({},r)});return Object(Ie.a)({},e,{categories:i.categories,categoriesMeta:i.categoriesMeta,categoryCheckInProgress:!1})}),Object(Wt.a)(t,ET,function(e){return Object(Ie.a)({},e,{categoryCheckInProgress:!1})}),t)),"currentSelections")}({}),aU,rU,iU,oU,EU,_U,jU,IU,SU,CU,NU,TU,RU,kU,AU,wU,function(e){var t;return Object(qm.b)(Object(Ie.a)({},e,(t={},Object(Wt.a)(t,Te,function(e){var t=Object(Xe.a)(e);return t.shift(),t}),Object(Wt.a)(t,Yh,function(e,t){return cV(e,t.payload.error,t.payload.action)}),Object(Wt.a)(t,cU,function(e,t){return cV(e,t.payload)}),Object(Wt.a)(t,VF.WORKING_LIST_DATA_RETRIEVAL_FAILED,function(e,t){return cV(e,t.payload.errorMessage)}),Object(Wt.a)(t,eO,function(e,t){var n=t.payload,a=wa()(n)?n:n.message,r=Yl()(n)?n:null;return R.a.error(Object(Ze.b)(a||s.a.t("Error saving event"))(r)),[].concat(Object(Xe.a)(e),[lV(s.a.t("Could not save event. See log for details"))])}),Object(Wt.a)(t,yD,function(e,t){var n=t.payload,a=wa()(n)?n:n.message,r=Yl()(n)?n:null;return R.a.error(Object(Ze.b)(a||s.a.t("Error saving event"))(r)),[].concat(Object(Xe.a)(e),[lV(s.a.t("Could not save event. See log for details"))])}),Object(Wt.a)(t,RR,function(e,t){return[].concat(Object(Xe.a)(e),[lV(t.payload.errorMessage)])}),Object(Wt.a)(t,kh,function(e,t){return cV(e,t.payload.message)}),Object(Wt.a)(t,iO,function(e,t){var n=t.payload,a=wa()(n)?n:n.message,r=Yl()(n)?n:null;return R.a.error(Object(Ze.b)(a||s.a.t("Error saving event"))(r)),[].concat(Object(Xe.a)(e),[lV(s.a.t("Could not save event. See log for details"))])}),Object(Wt.a)(t,mu,function(e,t){return cV(e,s.a.t(t.payload.message))}),Object(Wt.a)(t,vu,function(e,t){return cV(e,s.a.t(t.payload.message))}),Object(Wt.a)(t,ig,function(e,t){return cV(e,t.payload.message)}),Object(Wt.a)(t,Ux,function(e,t){return cV(e,t.payload.message)}),Object(Wt.a)(t,$j,function(e){return cV(e,s.a.t("Organisation unit search failed. See log for details"))}),t)),"feedbacks",[])}(Object(Wt.a)({},tV,function(e){var t=br();return t.Adapters[0]!==t.adapterType?[].concat(Object(Xe.a)(e),[{message:{title:s.a.t("Compatibility mode"),content:s.a.t("This app is currently running in compatibility mode due to browser restrictions. For better performance, use another browser or exit private mode if this is currently in use.")},feedbackType:"ERROR",displayType:"dialog"}]):e})),$m,ah,th,eh,rh,ih,sh,oh,ch,lh,BU,PU,HU,zU,YU,xU,DU,KU,VU,qU,ZU,JU,yM,EM,_M,jM,IM,wM,PM,xM,LM,UM,MM,VM,zM,QM,$M],pV="UpdateEventListAfterSaveOrUpdateForSingleEvent",fV=function(){return Se(pV)()},mV=function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a,i,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pn(),e.next=3,n.get("eventFilters",{filter:"program:eq:".concat(t),fields:"id, displayName,eventQueryCriteria,access"});case 3:return a=e.sent,i=a&&a.eventFilters?a.eventFilters:[],o=i.map(function(e){return Object(Ie.a)({},e,{name:e.displayName})}),e.abrupt("return",o);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),hV=function(e){return{ge:e.min,le:e.max}},gV=function(e){return{period:e.main,ge:e.from,le:e.to}};uV={},Object(Wt.a)(uV,ft.TEXT,function(e){return{like:e}}),Object(Wt.a)(uV,ft.NUMBER,hV),Object(Wt.a)(uV,ft.INTEGER,hV),Object(Wt.a)(uV,ft.INTEGER_POSITIVE,hV),Object(Wt.a)(uV,ft.INTEGER_NEGATIVE,hV),Object(Wt.a)(uV,ft.INTEGER_ZERO_OR_POSITIVE,hV),Object(Wt.a)(uV,ft.DATE,gV),Object(Wt.a)(uV,ft.BOOLEAN,function(e){return{in:e||[]}}),Object(Wt.a)(uV,ft.TRUE_ONLY,function(e){return{in:e||[]}});var bV=new gt(function(e){e.id="status",e.type=ft.TEXT}),vV=new pt("statusOptionSet",[new st(function(e){e.text=s.a.t("Active"),e.value="ACTIVE"}),new st(function(e){e.text=s.a.t("Completed"),e.value="COMPLETED"})],null,bV);bV.optionSet=vV;var OV,yV=bV,EV=function(e,t){var n=function(e,t,n){return e.reduce(function(e,a){var r=t.get(a);return r||(r=n.get(a)),r&&e.set(r.id,Object(Ie.a)({},r,{visible:!0})),e},new Map)}(t,e.reduce(function(e,t){return e.set(t.id,t),e},new Map),e.reduce(function(e,t){return t.apiName&&e.set(t.apiName,t),e},new Map));if(n.size>0){var a=e.filter(function(e){return!n.has(e.id)}).map(function(e){return Object(Ie.a)({},e,{visible:!1})});return[].concat(Object(Xe.a)(n.values()),Object(Xe.a)(a))}return e},_V=function(e,t){var n=[].concat(Object(Xe.a)(mT(e)),Object(Xe.a)(hT(e.stageForm)));return t&&t.length>0?EV(n,t):n},jV=new pt("booleanOptionSet",[new st(function(e){e.text=s.a.t("Yes"),e.value="true"}),new st(function(e){e.text=s.a.t("No"),e.value="false"})]),IV=function(e){var t={min:e.ge,max:e.le};return Object(Ie.a)({},AN(t),{value:t})},SV=function(e,t){var n=e.eq;return Object(Ie.a)({},aA(n,t.optionSet),{value:n})},CV=function(e){var t={main:e.period||"CUSTOM_RANGE",from:e.startDate&&Object(Ze.d)(Jn,ha)(e.startDate,ft.DATE),to:e.endDate&&Object(Ze.d)(Jn,ha)(e.endDate,ft.DATE)};return Object(Ie.a)({},wk(t),{value:t})},TV=function(e){return Pn().get("users/".concat(e),{fields:"id,name,userCredentials[username]"}).then(function(e){return{id:e.id,name:e.name,username:e.userCredentials.username}}).catch(function(t){return R.a.error(Object(Ze.b)("An error occured retrieving assignee user")({error:t,userId:e})),null})},RV=function(){var e=Object(i.a)(r.a.mark(function e(t,n){var a,i,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a={mode:t,provided:void 0},t!==sA.PROVIDED){e.next=11;break}if(i=n&&n.length>0&&n[0]){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.next=7,TV(i);case 7:if(o=e.sent){e.next=10;break}return e.abrupt("return",void 0);case 10:a.provided=o;case 11:return e.abrupt("return",Object(Ie.a)({},lA(a),{value:a}));case 12:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),NV=(OV={},Object(Wt.a)(OV,ft.TEXT,function(e){var t=e.like;return Object(Ie.a)({},jN(t),{value:t})}),Object(Wt.a)(OV,ft.NUMBER,IV),Object(Wt.a)(OV,ft.INTEGER,IV),Object(Wt.a)(OV,ft.INTEGER_POSITIVE,IV),Object(Wt.a)(OV,ft.INTEGER_NEGATIVE,IV),Object(Wt.a)(OV,ft.INTEGER_ZERO_OR_POSITIVE,IV),Object(Wt.a)(OV,ft.DATE,CV),Object(Wt.a)(OV,ft.BOOLEAN,function(e,t){var n=Object(Xe.a)(e.in||[]);return Object(Ie.a)({},Gk(n,t.type,t.optionSet||jV),{value:n})}),Object(Wt.a)(OV,ft.TRUE_ONLY,function(e,t){var n=Object(Xe.a)(e.in||[]);return Object(Ie.a)({},Zk(n,t.type),{value:n})}),OV),kV=function(e){var t=e&&e.split(":");return t&&2===t.length?{sortById:t[0],sortByDirection:t[1]}:null},AV=function(e,t){return e?e.map(function(e){var n=t.getElement(e.dataItem);return n?n.optionSet&&n.optionSet.options.length<=25?Object(Ie.a)({id:e.dataItem},function(e,t){var n=Object(Xe.a)(e.in||[]);return Object(Ie.a)({},nA(n,t.type,t.optionSet),{value:n})}(e,n)):Object(Ie.a)({id:e.dataItem},NV[n.type]?NV[n.type](e,n):null):null}).filter(function(e){return e}):[]},wV=function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a,i,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.eventDate,a=t.status,i=t.assignedUserMode,o=t.assignedUsers,s=[],a&&s.push(Object(Ie.a)({id:"status"},SV({eq:a},yV))),n&&s.push(Object(Ie.a)({id:"eventDate"},CV(n))),!i||!xn()){e.next=13;break}return e.t0=s,e.t1=Ie.a,e.t2={id:"assignee"},e.next=10,RV(i,o);case 10:e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t0.push.call(e.t0,e.t4);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();function PV(e,t){return DV.apply(this,arguments)}function DV(){return(DV=Object(i.a)(r.a.mark(function e(t,n){var a,i,o,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",void 0);case 2:return a=kV(t.order)||{},i=a.sortById,o=a.sortByDirection,e.t0=[],e.t1=Object(Xe.a)(AV(t.dataFilters,n.stageForm)),e.t2=Xe.a,e.next=8,wV(t);case 8:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),s=e.t0.concat.call(e.t0,e.t1,e.t4),c=_V(n,t.displayColumnOrder),e.abrupt("return",{filters:s,columnOrder:c,sortById:i,sortByDirection:o});case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}var xV,FV=function(e){var t=e.currentSelections.programId;return mV(t).then(function(e){var n={id:"".concat(t,"-default"),isDefault:!0,name:"default"};return{workingListConfigs:[n].concat(Object(Xe.a)(e)),default:n}})},LV=(xV={},Object(Wt.a)(xV,ft.FILE_RESOURCE,function(e,t,n){var a=af.config.baseUrl;return Pn().get("fileResources/".concat(e)).then(function(e){return{name:e.name,value:e.id,url:"".concat(a,"/events/files?dataElementUid=").concat(n,"&eventUid=").concat(t)}}).catch(function(a){return R.a.warn(Object(Ze.b)("Could not get subvalue")({value:e,eventId:t,metaElementId:n,error:a})),null})}),Object(Wt.a)(xV,ft.IMAGE,function(e,t,n){var a=af.config.baseUrl;return Pn().get("fileResources/".concat(e)).then(function(e){return{name:e.name,value:e.id,url:"".concat(a,"/events/files?dataElementUid=").concat(n,"&eventUid=").concat(t)}}).catch(function(a){return R.a.warn(Object(Ze.b)("Could not get subvalue")({value:e,eventId:t,metaElementId:n,error:a})),null})}),Object(Wt.a)(xV,ft.ORGANISATION_UNIT,function(e,t,n){var a=e.split("/"),r=a[a.length-1];return Fn().models.organisationUnits.get(r).then(function(e){return{id:e.id,code:e.code,name:e.displayName,path:e.path}}).catch(function(a){return R.a.warn(Object(Ze.b)("Could not get subvalue")({value:e,eventId:t,metaElementId:n,error:a})),null})}),xV);function UV(e,t,n){return MV.apply(this,arguments)}function MV(){return(MV=Object(i.a)(r.a.mark(function e(t,n,a){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",null);case 2:return o=n.getElementsById(),e.abrupt("return",Object.keys(a).reduce(function(){var e=Object(i.a)(r.a.mark(function e(n,i){var s,c,l,u,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:if(s=e.sent,c=a[i],l=o[i],!Object(Ot.a)(c)||null===c||!l){e.next=12;break}if(!(u=LV[l.type])){e.next=12;break}return e.next=10,u(c,t,i);case 10:d=e.sent,s[i]=d;case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve(a)));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function VV(e){var t=Object(Xe.a)(e);return Pn().get("users",{filter:"id:in:[".concat(t.join(),"]"),fields:"id,displayName,userCredentials[username]",paging:!1}).then(function(e){return(e.users||[]).reduce(function(e,t){return e[t.id]={id:t.id,username:t.userCredentials.username,name:t.displayName},e},{})})}function BV(e){return GV.apply(this,arguments)}function GV(){return(GV=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.reduce(function(e,t){var n=t.assignee;return n&&e.assignee.add(n),e},{assignee:new Set})).assignee.size>0)){e.next=7;break}return e.next=4,VV(n.assignee);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0={};case 8:return e.t1=e.t0,e.abrupt("return",{user:e.t1});case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function WV(e,t){return e.map(function(e){if(e.assignee){var n=t.user[e.assignee];return n?Object(Ie.a)({},e,{assignee:n}):(R.a.error(Object(Ze.b)("no user object found for assigned user of event")({id:e.assignee})),e)}return e})}function HV(e){return zV.apply(this,arguments)}function zV(){return(zV=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(xn()){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,BV(t);case 4:return n=e.sent,e.abrupt("return",WV(t,n));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function YV(e){return KV.apply(this,arguments)}function KV(){return(KV=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(function(e){return e.event}),e.next=3,HV(n);case 3:return a=e.sent,e.abrupt("return",t.map(function(e,t){return Object(Ie.a)({},e,{event:a[t]})}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var qV={PROGRAM_NOT_FOUND:"Program not found",STAGE_NOT_FOUND:"Stage not found"};var XV={event:"eventId",program:"programId",programStage:"programStageId",orgUnit:"orgUnitId",trackedEntityInstance:"trackedEntityInstanceId",enrollment:"enrollmentId",assignedUser:"assignee"};function ZV(e){return Object.keys(e).reduce(function(t,n){if("dataValues"!==n&&"assignedUserUsername"!==n){var a=function(e,t){return"eventDate"===t||"dueDate"===t||"completedDate"===t?Jn(e,ft.DATE):e}(e[n],n);t[XV[n]||n]=a}return t},{})}function JV(e){return QV.apply(this,arguments)}function QV(){return(QV=Object(i.a)(r.a.mark(function e(t){var n,a,i,o,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=at.get(t.program)){e.next=4;break}return R.a.error(Object(Ze.b)(qV.PROGRAM_NOT_FOUND)({fn:"convertToClientEvent",event:t})),e.abrupt("return",null);case 4:if(a=n.getStage(t.programStage)){e.next=8;break}return R.a.error(Object(Ze.b)(qV.STAGE_NOT_FOUND)({fn:"convertToClientEvent",event:t})),e.abrupt("return",null);case 8:return i=a.stageForm,r=t.dataValues,o=r?r.reduce(function(e,t){return e[t.dataElement]=t.value,e},{}):r,s=i.convertValues(o,Jn),e.next=13,UV(t.event,i,s);case 13:return c=ZV(t),e.abrupt("return",{id:c.eventId,event:c,values:s||{}});case 15:case"end":return e.stop()}var r},e)}))).apply(this,arguments)}function $V(e){return eB.apply(this,arguments)}function eB(){return(eB=Object(i.a)(r.a.mark(function e(t){var n,a,i,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pn(),e.next=3,n.get("events/".concat(t));case 3:return a=e.sent,e.next=6,JV(a);case 6:if(!(i=e.sent)){e.next=13;break}return e.next=10,YV([i]);case 10:e.t0=e.sent[0],e.next=14;break;case 13:e.t0=i;case 14:return o=e.t0,e.abrupt("return",o);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tB(e){return nB.apply(this,arguments)}function nB(){return(nB=Object(i.a)(r.a.mark(function e(t){var n,a,o,s,c,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pn(),a={url:"events",queryParams:Object(Ie.a)({},t,{totalPages:!0})},e.next=4,n.get(a.url,Object(Ie.a)({},a.queryParams));case 4:if(!(o=e.sent)||!o.events){e.next=11;break}return e.next=8,o.events.reduce(function(){var e=Object(i.a)(r.a.mark(function e(t,n){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return a=e.sent,e.next=5,JV(n);case 5:return(i=e.sent)&&a.push(i),e.abrupt("return",a);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve([]));case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=null;case 12:if(!(s=e.t0)){e.next=19;break}return e.next=16,YV(s);case 16:e.t1=e.sent,e.next=20;break;case 19:e.t1=null;case 20:return c=e.t1,l={rowsCount:o.pager.total,rowsPerPage:o.pager.pageSize,currentPage:o.pager.page},e.abrupt("return",{eventContainers:c,pagingData:l,request:a});case 23:case"end":return e.stop()}},e)}))).apply(this,arguments)}var aB={programId:"program",orgUnitId:"orgUnit",rowsPerPage:"pageSize",currentPage:"page"},rB=function(e){return e},iB=function(e,t){return e?Object.keys(e).filter(function(n){return t[n]&&null!=e[n]}).reduce(function(t,n){var a=rB(e[n]),r={};return"eventDate"===n?r=function(e){var t={};return Array.isArray(e)?t=e.reduce(function(e,t){return t.startsWith("ge")?e.startDate=t.replace("ge:",""):e.endDate=t.replace("le:",""),e},{}):e.startsWith("ge")?t.startDate=e.replace("ge:",""):t.endDate=e.replace("le:",""),t}(a):"status"===n?r=function(e){return{status:e.replace("eq:","")}}(a):"assignee"===n&&(r=a),Object(Ie.a)({},t,r)},{}):null},oB=function(e,t,n){var a=function(e,t){if(t[e]){var n=t[e];if(n.apiName)return n.apiName}return e}(e,n);return"".concat(a,":").concat(t)},sB=function(e,t){var n=Object(Ie.a)({},e,{order:oB(e.sortById,e.sortByDirection,t)},function(e,t){var n=e?Object.keys(e).filter(function(n){return null!=e[n]&&!t[n]}).reduce(function(t,n){var a=rB(e[n]);if(Array.isArray(a)){var r=a.map(function(e){return"".concat(n,":").concat(e)});t=[].concat(Object(Xe.a)(t),Object(Xe.a)(r))}else t.push("".concat(n,":").concat(a));return t},[]):null;return n&&n.length>0?{filter:n}:null}(e.filters,t),iB(e.filters,t),function(e,t){if(!e)return null;var n=at.get(t);if(!n)return null;var a=n.categoryCombination;return a?{attributeCc:a.id,attributeCos:Object.keys(e).map(function(t){return e[t]}).join(";")}:null}(e.categories,e.programId));return n.hasOwnProperty("categories")&&delete n.categories,n.hasOwnProperty("sortById")&&delete n.sortById,n.hasOwnProperty("sortByDirection")&&delete n.sortByDirection,n.hasOwnProperty("filters")&&delete n.filters,n.hasOwnProperty("rowsCount")&&delete n.rowsCount,n=Object.keys(n).reduce(function(e,t){var a=n[t];return void 0!==a&&(e[t]=a),e},{}),Object.keys(n).reduce(function(e,t){return aB[t]?e[aB[t]]=n[t]:e[t]=n[t],e},{})},cB=function(){var e=Object(i.a)(r.a.mark(function e(t,n){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.reduce(function(e,t){return t.isMainProperty&&(e[t.id]=t),e},{}),e.next=3,tB(sB(t,a));case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),lB="Working list could not be loaded",uB={page:1,rowsPerPage:15,sortById:"eventDate",sortByDirection:"desc"};function dB(e){var t=e||{},n=t.filters,a=void 0===n?[]:n,r=t.sortById,i=t.sortByDirection;return{filters:a.reduce(function(e,t){return Object(Ie.a)({},e,Object(Wt.a)({},t.id,t.requestData))},{}),sortById:r,sortByDirection:i}}function pB(e){var t=Object.keys(uB).reduce(function(t,n){return Object(Ie.a)({},t,Object(Wt.a)({},n,e[n]||!1===e[n]?e[n]:uB[n]))},{});return Object(Ie.a)({},e,t)}var fB=function(){var e=Object(i.a)(r.a.mark(function e(t,n,a){var i,o,s,c,l,u,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Tt(n.programId),o=i.stage,e.next=4,PV(t,o);case 4:return s=e.sent,c=dB(s)||{},l=pB(c),u=s&&s.columnOrder,d=u||[].concat(Object(Xe.a)(mT(o)),Object(Xe.a)(hT(o.stageForm))),e.abrupt("return",cB(Object(Ie.a)({},l,n),d).then(function(e){return BF(a,Object(Ie.a)({},e,{config:Object(Ie.a)({},s,{columnOrder:d}),queryData:l,selections:n}))}).catch(function(e){return R.a.error(Object(Ze.b)(lB)({error:e})),GF(a,lB)}));case 10:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),mB="Working list could not be updated",hB=function(e){var t=e.workingListConfigSelector.eventMainPage.currentListId,n=function(e,t){var n=e.workingListsContext[t],a=n.programId,r=n.orgUnitId,i=n.categories,o=e.workingListsMeta[t],s=e.workingListsMeta[t].next,c=Object(Ie.a)({},o,s,{filters:Object(Ie.a)({},o.filters,s.filters)});return c.hasOwnProperty("next")&&delete c.next,Object(Ie.a)({programId:a,orgUnitId:r,categories:i},c)}(e,t),a=e.workingListsColumnsOrder[t];return cB(n,a).then(function(e){return function(e,t){return Se(TR)(Object(Ie.a)({},t,{listId:e}))}(t,e)}).catch(function(e){return R.a.error(Object(Ze.b)(mB)({error:e})),function(e,t){return Se(RR)({listId:e,errorMessage:t})}(t,mB)})},gB=(n(285),{paging:!1}),bB={GET:"get",LIST:"list",LIST_WITH_PAGER:"listWithPager"};function vB(e,t,n,a){return OB.apply(this,arguments)}function OB(){return(OB=Object(i.a)(r.a.mark(function e(t,n,a,i){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.models[n].list(a);case 2:if(o=e.sent,i!==bB.LIST_WITH_PAGER){e.next=5;break}return e.abrupt("return",o);case 5:return e.abrupt("return",Object(Xe.a)(o.values()));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yB(e,t,n,a){return EB.apply(this,arguments)}function EB(){return(EB=Object(i.a)(r.a.mark(function e(t,n,a,i){var o,s,c,l,u,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Fn(),s=Object(Ie.a)({},gB,a),n!==bB.GET){e.next=12;break}if(a&&(a.id||0===a.id)){e.next=6;break}return R.a.warn(Object(Ze.b)("no id supplied to getData")({queryParams:a,d2ModelName:t,getterType:n})),e.abrupt("return",null);case 6:return l=a.id,u=Object(ue.a)(a,["id"]),e.next=9,o.models[t][n](l,u);case 9:c=e.sent,e.next=15;break;case 12:return e.next=14,vB(o,t,s,n);case 14:c=e.sent;case 15:return d=i?i(c):c,e.abrupt("return",d);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _B=function(){function e(t){Object(B.a)(this,e),t&&t(this)}return Object(G.a)(e,[{key:"updateQueryParams",value:function(e){this.queryParams=Object(Ie.a)({},this.queryParams,e)}},{key:"setFilter",value:function(e){var t=this.queryParams&&this.queryParams.filter?this.queryParams.filter:[];wa()(t)&&(t=[t]),this.queryParams=Object(Ie.a)({},this.queryParams,{filter:[].concat(Object(Xe.a)(t),[e])})}},{key:"get",value:function(){return yB(this.modelName,this.modelGetterType,this.queryParams,this.converter)}}]),e}(),jB=function(e){return new _B(function(t){t.modelName="organisationUnits",t.modelGetterType=bB.GET,t.queryParams={id:e,fields:"id,displayName"},t.converter=function(e){return{id:e.id,name:e.displayName}}})},IB="Could not get event from state",SB=function(e,t,n,a,r){var i,o=e.getState(),s=Uh(t,n),c=o.dataEntries[t].eventId,l=o.events[c],u=wt(l),d=o.currentSelections.orgUnitId,p=o.organisationUnits[d];if(u.error){var f=u.stage?u.stage.stageForm:null;R.a.error(Object(Ze.b)(IB)({method:"runRulesForEditSingleEventEpic"})),i=e_(u.program,f,s,p)}else{var m=u.stage.stageForm,h=i_(o,m,s,r),g=o_(o,n,t,l,m);g=Object(Ie.a)({},o.events[c],g);var b=Object(Ie.a)({},h,g);i=e_(u.program,m,s,p,b,[b])}return Object(He.batchActions)([].concat(Object(Xe.a)(i),[lg(t,n,a)]),dD)};function CB(){return(CB=Object(i.a)(r.a.mark(function e(t){var n,a,i,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.attributeCategoryOptions){e.next=3;break}return e.abrupt("return",null);case 3:if(a=Ft(t.programId),i=a.categoryCombination){e.next=7;break}return e.abrupt("return",null);case 7:return o=Object(Xe.a)(i.categories.values()),e.next=10,r=n,Pn().get("categoryOptions",{fields:"id,displayName,categories~pluck,access",filter:"id:in:[".concat(r,"]")}).then(function(e){return e&&e.categoryOptions});case 10:if(s=e.sent){e.next=13;break}return e.abrupt("return",null);case 13:return e.abrupt("return",o.map(function(e){var t=s.find(function(t){return t.categories.includes(e.id)});return t?(s=s.filter(function(e){return e!==t}),{categoryId:e.id,categoryOption:{id:t.id,name:t.displayName,writeAccess:t.access.data.write}}):(R.a.error(Object(Ze.b)("option not found for category")({category:e})),{categoryId:e.id,categoryOption:{id:void 0,name:void 0,writeAccess:void 0}})}));case 14:case"end":return e.stop()}var r},e)}))).apply(this,arguments)}var TB=function(e,t){if(!e.currentSelections.complete)return!1;var n=t.meta.selections,a=e.currentSelections;return $O(n,a)},RB=(n(886),n(196)),NB=function(e,t){var n=[];return e&&n.push("programId=".concat(e)),t&&n.push("orgUnitId=".concat(t)),n.join("&")};function kB(){return(kB=Object(i.a)(r.a.mark(function e(t,n){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vr().get(rr.CATEGORY_OPTIONS,t);case 2:if((a=e.sent).organisationUnits){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!!a.organisationUnits[n]);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var AB="BatchOpenTeiSearch";function wB(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)}var PB,DB=function(e,t){return"".concat(t,":eq:").concat(e)};function xB(e,t){return"".concat(t,":ge:").concat(e.from,":le:").concat(e.to)}var FB=(PB={},Object(Wt.a)(PB,ft.TEXT,function(e,t){return"".concat(t,":like:").concat(e)}),Object(Wt.a)(PB,ft.NUMBER_RANGE,xB),Object(Wt.a)(PB,ft.DATE_RANGE,xB),Object(Wt.a)(PB,ft.DATETIME_RANGE,xB),Object(Wt.a)(PB,ft.TIME_RANGE,xB),PB);function LB(e,t,n){return e||0===e||!1===e?FB[t]?FB[t](e,n.id):DB(e,n.id):e}function UB(e,t,n){return e||0===e||!1===e?DB(e,n.id):e}var MB=Object(Wt.a)({},ft.IMAGE,function(e,t,n){var a=af.config.baseUrl;return Pn().get("fileResources/".concat(e)).then(function(e){return{name:e.name,value:e.id,url:"".concat(a,"/trackedEntityInstances/").concat(t,"/").concat(n,"/image")}}).catch(function(a){return R.a.warn(Object(Ze.b)("Could not get subvalue")({value:e,teiId:t,attributeId:n,error:a})),null})});function VB(e,t,n){return BB.apply(this,arguments)}function BB(){return(BB=Object(i.a)(r.a.mark(function e(t,n,a){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",null);case 2:return o=n.toHashMap("id"),e.abrupt("return",Object.keys(a).reduce(function(){var e=Object(i.a)(r.a.mark(function e(n,i){var s,c,l,u,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:if(s=e.sent,c=a[i],l=o[i],!Object(Ot.a)(c)||!l){e.next=12;break}if(!(u=MB[l.type])){e.next=12;break}return e.next=10,u(c,t,i);case 10:d=e.sent,s[i]=d;case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve(a)));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function GB(e,t){return WB.apply(this,arguments)}function WB(){return(WB=Object(i.a)(r.a.mark(function e(t,n){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.attributes,a=r?r.reduce(function(e,t){return e[t.attribute]=t.value,e},{}):r,i=Yt(a,n,Jn),e.next=4,VB(t.trackedEntityInstance,n,i);case 4:return e.abrupt("return",{id:t.trackedEntityInstance,tei:t,values:i});case 5:case"end":return e.stop()}var r},e)}))).apply(this,arguments)}function HB(){return(HB=Object(i.a)(r.a.mark(function e(t,n){var a,o,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Pn(),e.next=3,a.get("trackedEntityInstances",Object(Ie.a)({},t,{totalPages:!0}));case 3:if(!(o=e.sent)||!o.trackedEntityInstances){e.next=10;break}return e.next=7,o.trackedEntityInstances.reduce(function(){var e=Object(i.a)(r.a.mark(function e(t,a){var i,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return i=e.sent,e.next=5,GB(a,n);case 5:return(o=e.sent)&&i.push(o),e.abrupt("return",i);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve([]));case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=null;case 11:return s=e.t0,c={rowsCount:o.pager.total,rowsPerPage:o.pager.pageSize,currentPage:o.pager.page},e.abrupt("return",{trackedEntityInstanceContainers:s,pagingData:c});case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var zB=function(e,t,n,a,r){var i,o,s,c,l=e.teiSearch[t],u=e.formsValues[n],d=l.selectedProgramId,p=l.selectedTrackedEntityTypeId,f=l.selectedOrgUnit,m=l.selectedOrgUnitScope,h=sE(p,d)[a],g=h.unique?UB:LB,b=h.searchForm.convertValues(u,function(e,t,n){return g(Na(Ua(e,t),t),t,n)}),v=Object.keys(b).reduce(function(e,t){var n=b[t];return Object(ot.a)(n)?[].concat(Object(Xe.a)(e),Object(Xe.a)(n)):[].concat(Object(Xe.a)(e),[n])},[]).filter(function(e){return null!==e&&void 0!==e});return function(e,t){return HB.apply(this,arguments)}(Object(Ie.a)({filter:v},(s=f,"ACCESSIBLE"!==(c=m)?{ou:s&&s.id,ouMode:c}:{ouMode:c}),(o=p,(i=d)?{program:i}:{trackedEntityType:o}),function(e){return e?{page:e,pageSize:5}:{pageSize:5}}(r)),d?kt(d).attributes:Gt(p).attributes).then(function(e){return function(e,t,n,a){return Se($y)({data:e,formId:t,searchGroupId:n,searchId:a})}(e,n,a,t)}).catch(function(e){return function(e,t,n){return Se(Qy)({formId:e,searchGroupId:t,searchId:n})}(n,a,t)})},YB=function(e,t){return e.type===Bb.ADD_FORM_DATA&&e.payload.formId===t},KB=function(e,t,n){return Sn()(e.payload)?e.payload.some(function(e){return YB(e,t)}):YB(e,t)||function(e,t,n){return e.type===rp&&e.payload.formId===t&&e.payload.elementId===n}(e,t,n)},qB=function(e,t){return e.type===Xy&&e.payload.searchId===t},XB=function(e,t){return Sn()(e.payload)?e.payload.some(function(e){return qB(e,t)}):qB(e,t)||function(e,t){return e.type===by&&e.payload.searchId===t}(e,t)},ZB={TRACKED_ENTITY_INSTANCE:function(e,t){var n=e.trackedEntityInstance,a=Gt(n.trackedEntityType),r=n.attributes.reduce(function(e,t){return e[t.attribute]=t.value,e},{});return{id:n.trackedEntityInstance,name:VE(r,a.attributes,a.name),type:"TRACKED_ENTITY_INSTANCE",linkProgramId:t.programId}},PROGRAM_STAGE_INSTANCE:function(e){var t=e.event,n=at.get(t.program);if(!n)return null;var a=n.getStage(t.programStage);return a?{id:t.event,name:"".concat(a.name," event"),type:"PROGRAM_STAGE_INSTANCE"}:null}};function JB(e,t){var n=t.find(function(t){return t.id===e.relationshipType});return n?{id:e.relationship,clientId:e.relationship,relationshipType:{id:n.id,name:n.name},from:ZB[n.from.entity](e.from,n.from),to:ZB[n.to.entity](e.to,n.to)}:null}function QB(){return(QB=Object(i.a)(r.a.mark(function e(t,n){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Pn(),e.next=3,a.get("relationships",Object(Ie.a)({},t));case 3:return i=e.sent,e.abrupt("return",i&&Sn()(i)?i.map(function(e){return JB(e,n)}):null);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $B(e,t){return function(e,t){return QB.apply(this,arguments)}({event:e},Tt(t).stage.relationshipTypes)}var eG="CoreLoadSuccessBatch",tG="id,displayName,path,publicAccess,access,lastUpdated,children[id,displayName,publicAccess,access,path,children::isNotEmpty]";function nG(){var e=Dn();if(!e.teiSearchOrganisationUnits||0===e.teiSearchOrganisationUnits.length)return Promise.resolve(pu("captureRoots"));var t=e.teiSearchOrganisationUnits.map(function(e){return e.id}).join(",");return Fn().models.organisationUnits.list({fields:tG,filter:"id:in:[".concat(t,"]"),paging:!1}).then(function(e){return e.toArray()})}function aG(){return rG.apply(this,arguments)}function rG(){return(rG=Object(i.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dn().getOrganisationUnits({defaultFields:tG,paging:!1}).then(function(e){return e.toArray()});case 2:return du("captureRoots",t=e.sent),n=t.map(function(e){return{id:e.id,path:e.path,displayName:e.displayName}}),e.abrupt("return",kM(n));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function iG(){return oG.apply(this,arguments)}function oG(){return(oG=Object(i.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nG();case 2:return du("searchRoots",t=e.sent),n=t.map(function(e){return{id:e.id,path:e.path,displayName:e.displayName}}),e.abrupt("return",AM(n));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function sG(){return(sG=Object(i.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aG();case 2:return t=e.sent,e.next=5,iG();case 5:return n=e.sent,e.abrupt("return",[t,n]);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var cG=$b.a.apply(void 0,[function(e,t){return e.ofType(oT.SET_ORG_UNIT,LC,KC,OC.SET_ORG_UNIT).filter(function(e){return function(e,t){if(!t)return!1;var n=at.get(t);return!n||!n.organisationUnits||!n.organisationUnits[e]}(e.payload.id,t.getState().currentSelections.programId)}).map(function(){return Ci()})},function(e,t){return e.ofType(oT.SET_ORG_UNIT,LC,KC,OC.SET_ORG_UNIT).switchMap(function(e){var n=e.payload.id,a=t.getState().currentSelections.categories;if(!a)return Promise.resolve(jT(e.type));var r=Object.keys(a).reduce(function(e,t){return a[t]&&(e[t]=a[t]),e},{}),i=Object.keys(r).map(function(e){return function(e,t){return kB.apply(this,arguments)}(r[e],n).then(function(t){return{id:e,isAssociated:t}})});return Promise.all(i).then(function(t){var n,a,r=t.filter(function(e){return!e.isAssociated}).map(function(e){return e.id});return r.length<=0?Promise.resolve(jT(e.type)):(n=r,a=e.type,Se(_T)({resetCategories:n,triggeringActionType:a}))})})},function(e,t){return e.ofType(VF.UPDATE_MAIN_SELECTIONS,VF.VALID_SELECTIONS_FROM_URL,PC,oT.SET_PROGRAM_ID,oT.SET_CATEGORY_OPTION,MC,BC,XC,JC,OC.SET_PROGRAM_ID,OC.SET_CATEGORY_OPTION,yR,ET,_T).map(function(e){return function(e,t){return Se(yT)({isComplete:e,triggeringActionType:t})}(function(e){if(!e.orgUnitId||!e.programId||e.categoryCheckInProgress)return!1;var t=e.programId&&at.get(e.programId);return!(t&&t.categoryCombination&&Array.from(t.categoryCombination.categories.values()).some(function(t){return!e.categories||!e.categories[t.id]}))}(t.getState().currentSelections),e.payload&&e.payload.triggeringActionType||e.type)})},function(e){return e.ofType(eV).map(function(){return Se(SM)()})},function(e,t){return e.ofType(SM).concatMap(function(){return function(){return sG.apply(this,arguments)}().then(function(e){return t=e,Object(He.batchActions)([].concat(Object(Xe.a)(t),[Se(CM)()]),eG);var t}).catch(function(e){return function(e){return Se(TM)({error:e})}(e)})})},function(e){return e.ofType(eG).map(function(){return e={headerBarHeight:48},Se(tV)(e);var e})},function(e){return e.ofType(TM).map(function(e){var t,n=e.payload.error;return R.a.error(Object(Ze.b)("load core failed")({error:n})),t="APP FAILED TO LOAD. SEE LOG FOR DETAILS",Se(nV)({message:t})})},function(e,t){return e.ofType(yT).filter(function(e){var t=e.payload.triggeringActionType;return[VF.UPDATE_MAIN_SELECTIONS,VF.VALID_SELECTIONS_FROM_URL,oT.SET_PROGRAM_ID,oT.SET_CATEGORY_OPTION,oT.SET_ORG_UNIT].includes(t)}).filter(function(){return!!t.getState().currentSelections.complete}).map(function(){return Se(VF.MAIN_SELECTIONS_COMPLETED)()})},function(e){return e.ofType(VF.UPDATE_MAIN_SELECTIONS).filter(function(e){return e.payload.orgUnitId}).switchMap(function(e){return Pn().get("organisationUnits/".concat(e.payload.orgUnitId)).then(function(e){return t={id:e.id,name:e.displayName},Se(VF.ORG_UNIT_DATA_RETRIVED)(t);var t})})},function(e,t){return e.ofType(VF.MAIN_SELECTIONS_COMPLETED,AP,mO).filter(function(){var e=t.getState();if(!e.offline.online)return!1;var n=e.currentSelections.programId,a=n&&Ft(n);return a&&a instanceof Zt}).switchMap(function(){var e=FV(t.getState()).then(function(e){return Object(He.batchActions)([qR(e.default.id,"eventList",e.default),KR(e.workingListConfigs)],BR)});return Object(Zb.fromPromise)(e)})},function(e,t){return e.ofType(UR,BR).map(function(e){return e.type===BR?e.payload.find(function(e){return e.type===UR}):e}).switchMap(function(n){var a=t.getState().currentSelections,r=a.programId,i=a.orgUnitId,o=a.categories,s=n.payload,c=s.eventQueryCriteria,l=s.listId,u=fB(c,{programId:r,orgUnitId:i,categories:o},l);return Object(Zb.fromPromise)(u).takeUntil(e.ofType(pV,Qv,jD,IP,WA,HA,NR,EA,SA)).takeUntil(e.ofType(FU).filter(function(e){return e.payload.some(function(e){return e.type===UU})}))})},function(e,t){return e.ofType(Qv,jD,IP).switchMap(function(){var n=hB(t.getState());return Object(Zb.fromPromise)(n).takeUntil(e.ofType(VF.MAIN_SELECTIONS_COMPLETED,pV,WA,HA,NR,EA,SA)).takeUntil(e.ofType(FU).filter(function(e){return e.payload.some(function(e){return e.type===UU})}))})},function(e,t){return e.ofType(pV).switchMap(function(){var n=t.getState(),a=n.workingListConfigSelector.eventMainPage.currentListId,r=n.workingListsContext[a],i=[VF.MAIN_SELECTIONS_COMPLETED,Qv,jD,IP,WA,HA,NR,EA,SA];if(r&&$O(r,n.currentSelections)){var o=hB(n);return Object(Zb.fromPromise)(o).takeUntil(e.ofType.apply(e,i)).takeUntil(e.ofType(FU).filter(function(e){return e.payload.some(function(e){return e.type===UU})}))}var s=FV(n).then(function(e){return Object(He.batchActions)([qR(e.default.id,"eventList",e.default),KR(e.workingListConfigs)],BR)});return Object(Zb.fromPromise)(s).takeUntil(e.ofType.apply(e,i)).takeUntil(e.ofType(FU).filter(function(e){return e.payload.some(function(e){return e.type===UU})}))})},function(e,t){return e.ofType(WA,HA,NR,EA,SA,xR).switchMap(function(){var n=t.getState(),a=hB(n);return Object(Zb.fromPromise)(a).takeUntil(e.ofType(VF.MAIN_SELECTIONS_COMPLETED,Qv,jD,IP,pV)).takeUntil(e.ofType(FU).filter(function(e){return e.payload.some(function(e){return e.type===UU})}))})},function(e,t){return e.ofType(FU).filter(function(e){return e.payload.some(function(e){return e.type===UU})}).switchMap(function(){var n=t.getState(),a={programId:n.currentSelections.programId,orgUnitId:n.currentSelections.orgUnitId,categories:n.currentSelections.categories},r=n.workingListConfigSelector.eventMainPage.currentListId,i=n.workingListsContext[r],o=[VF.MAIN_SELECTIONS_COMPLETED,Qv,jD,IP,pV,WA,HA,NR,EA,SA];if(i&&$O(i,a)){var s=hB(n);return Object(Zb.fromPromise)(s).takeUntil(e.ofType.apply(e,o))}var c=FV(n).then(function(e){return Object(He.batchActions)([qR(e.default.id,"eventList",e.default),KR(e.workingListConfigs)],BR)});return Object(Zb.fromPromise)(c).takeUntil(e.ofType.apply(e,o))})},function(e){return e.ofType(VF.UPDATE_MAIN_SELECTIONS_FROM_URL).filter(function(e){return e.payload.nextProps.orgUnitId}).switchMap(function(e){return Pn().get("organisationUnits/".concat(e.payload.nextProps.orgUnitId)).then(function(e){return t={id:e.id,name:e.displayName},Se(VF.SET_ORG_UNIT_BASED_ON_URL)(t);var t}).catch(function(){return e=s.a.t("Could not get organisation unit"),Se(VF.ERROR_RETRIEVING_ORG_UNIT_BASED_ON_URL)(e);var e})})},function(e){return e.ofType(VF.UPDATE_MAIN_SELECTIONS_FROM_URL).filter(function(e){return!e.payload.nextProps.orgUnitId}).map(function(){return Se(VF.SET_EMPTY_ORG_UNIT_BASED_ON_URL)()})},function(e,t){return e.ofType(VF.SET_EMPTY_ORG_UNIT_BASED_ON_URL,VF.SET_ORG_UNIT_BASED_ON_URL).map(function(){var e=t.getState().currentSelections,n=e.programId,a=e.orgUnitId;if(n){var r=at.get(n);if(!r)return WF(s.a.t("Program doesn't exist"));if(a&&!r.organisationUnits[a])return WF(s.a.t("Selected program is invalid for registering unit"))}return Se(VF.VALID_SELECTIONS_FROM_URL)()})},function(e){return e.ofType(TC).filter(function(e){return e.payload.nextProps.orgUnitId}).switchMap(function(e){return Pn().get("organisationUnits/".concat(e.payload.nextProps.orgUnitId)).then(function(e){return t={id:e.id,name:e.displayName},Se(RC)(t);var t}).catch(function(){return e=s.a.t("Could not get organisation unit"),Se(kC)(e);var e})})},function(e){return e.ofType(TC).filter(function(e){return!e.payload.nextProps.orgUnitId}).map(function(){return Se(AC)()})},function(e,t){return e.ofType(RC,AC).map(function(){var e=t.getState().currentSelections,n=e.programId,a=e.orgUnitId;if(n){var r=at.get(n);if(!r)return DC(s.a.t("Program doesn't exist"));if(a&&!r.organisationUnits[a])return DC(s.a.t("Selected program is invalid for registering unit"))}return Se(PC)()})},function(e,t){return e.ofType(HC,eT,oT.OPEN_NEW_EVENT).map(function(){var e=t.getState().currentSelections,n=function(e,t){var n=[];return e&&n.push("programId=".concat(e)),t&&n.push("orgUnitId=".concat(t)),n.join("&")}(e.programId,e.orgUnitId);return Object(FC.d)("/newEvent/".concat(n))})},function(e,t){return e.ofType(HC,eT,oT.OPEN_NEW_EVENT,PC,OC.SET_PROGRAM_ID,OC.SET_CATEGORY_OPTION,yT).filter(function(e){var t=e.type,n=e.payload&&e.payload.triggeringActionType;return t!==yT||!!n&&[OC.SET_ORG_UNIT].includes(n)}).map(function(){var e=t.getState();if(!e.currentSelections.complete)return IO();var n=e.currentSelections.programId;if(Ft(n)instanceof en)return IO();var a=e.currentSelections.orgUnitId,r=e.organisationUnits[a],i=jt(n);i.error&&R.a.error(Object(Ze.b)(IT)({method:"openNewEventInDataEntryEpic"}));var o=i.stage&&i.stage.stageForm;return Object(He.batchActions)(Object(Xe.a)(function(e,t,n){var a=Xb("singleEvent","newEvent",fT),r=e_(e,t,pT,n);return[].concat(Object(Xe.a)(a),Object(Xe.a)(r),[Se(Yv)()])}(i.program,o,r)),Gv)})},function(e,t){return e.ofType(OC.OPEN_NEW_EVENT_FROM_NEW_EVENT_PAGE,zv).map(function(){var e=t.getState(),n=e.currentSelections.programId;if(Ft(n)instanceof en)return IO();var a=e.currentSelections.orgUnitId,r=e.organisationUnits[a],i=jt(n);i.error&&R.a.error(Object(Ze.b)(IT)({method:"resetDataEntryForNewEventEpic"}));var o=i.stage&&i.stage.stageForm;return Object(He.batchActions)(Object(Xe.a)(function(e,t,n){var a=Xb("singleEvent","newEvent",fT),r=e_(e,t,pT,n);return[].concat(Object(Xe.a)(a),Object(Xe.a)(r),[Se(sO)()])}(i.program,o,r)),Wv)})},function(e,t){return e.ofType(HC,eT,oT.OPEN_NEW_EVENT,PC,OC.SET_CATEGORY_OPTION,OC.SET_ORG_UNIT,OC.SET_PROGRAM_ID).filter(function(){return t.getState().currentSelections.complete}).map(function(){var e,n,a,r,i=t.getState(),o=St(i.currentSelections.programId),s=[].concat(Object(Xe.a)(mT(o.stage)),Object(Xe.a)(hT(o.stage.stageForm)));return e="recentlyAddedEvents",n=s,a={sortById:"created",sortByDirection:"desc"},r=i.currentSelections,Se(OT)({listId:e,columnOrder:n,meta:a,selections:r})})},function(e,t){return e.ofType(Vv).map(function(e){return e.payload.find(function(e){return e.type===Kv})}).map(function(e){var n=e.payload,a=n.dataEntryId,r=n.itemId,i=n.uid;return ST(t,a,r,i)})},function(e,t){return e.ofType(Bv).map(function(e){return e.payload.find(function(e){return e.type===Kv})}).map(function(e){var n=e.payload,a=n.dataEntryId,r=n.itemId,i=n.uid,o={elementId:n.elementId,value:n.value,valid:n.uiState.valid};return ST(t,a,r,i,o)})},function(e,t){return e.ofType(qv).map(function(){var e=t.getState(),n=e.currentSelections.programId,a=e.currentSelections.orgUnitId;return Object(FC.d)("/programId=".concat(n,"&orgUnitId=").concat(a))})},function(e,t){return e.ofType(qv).map(function(e){var n=t.getState(),a=e.payload,r=Uh(a.dataEntryId,a.eventId),i=a.formFoundation,o=NT(n,r,i),s=o.formClientValues,c=o.mainDataClientValues;return function(e,t,n){var a=Xv;return Se(a)({selections:n},{offline:{effect:{url:"events",method:Lv,data:e},commit:{type:uO,meta:{selections:n,relationshipData:t,triggerAction:a}},rollback:{type:eO,meta:{selections:n}}}})}(TT(n,i,s,c),n.dataEntriesRelationships[r],n.currentSelections)})},function(e,t){return e.ofType(Zv).map(function(){var e=t.getState(),n=e.currentSelections.programId,a=e.currentSelections.orgUnitId;return Object(FC.d)("/programId=".concat(n,"&orgUnitId=").concat(a))})},function(e,t){return e.ofType(Zv).map(function(){var e=t.getState();if(!e.offline.online)return _O();var n=e.workingListConfigSelector.eventMainPage&&e.workingListConfigSelector.eventMainPage.currentListId,a=n&&e.workingListsContext[n];if(!a)return jO();var r=e.currentSelections;return r.complete&&!$O(a,r)?jO():Object.keys(e.recentlyAddedEvents).length>0?Se(Qv)():_O()})},function(e,t){return e.ofType(lC).map(function(){var e=t.getState().currentSelections,n=function(e,t){var n=[];return e&&n.push("programId=".concat(e)),t&&n.push("orgUnitId=".concat(t)),n.join("&")}(e.programId,e.orgUnitId);return Object(FC.d)("/".concat(n))})},function(e,t){return e.ofType(lU).switchMap(function(e){var n=e.payload.eventId,a=t.getState().currentSelections.programId;return $V(n).then(function(e){return e?function(e,t){return Se(uU)({eventContainer:e,prevProgramId:t})}(e,a):bU(s.a.t("Event could not be loaded. Are you sure it exists?"))}).catch(function(e){var t=Ph(e),n=t.message,a=t.details;return R.a.error(Object(Ze.b)(n||s.a.t("Event could not be loaded"))(a)),bU(s.a.t("Event could not be loaded. Are you sure it exists?"))})})},function(e){return e.ofType(uU).switchMap(function(e){var t=e.payload.eventContainer;return jB(t.event.orgUnitId).get().then(function(e){return function(e,t){return Se(pU)({orgUnit:e,eventContainer:t})}(e,t)}).catch(function(e){var n=Ph(e),a=n.message,r=n.details;return R.a.error(Object(Ze.b)(a||s.a.t("Organisation unit could not be loaded"))(r)),function(e){return Se(fU)({eventContainer:e})}(t)})})},function(e){return e.ofType(pU,fU,mU).map(function(e){var t,n=e.payload.eventContainer,a=e.payload.orgUnit,r=wt(n.event);if(r.error)return t=r.error,Se(hD)(t);var i=r.stage.stageForm,o=r.program;return Object(He.batchActions)(AD(n,a,i,o))})},function(e,t){return e.ofType(lD).map(function(e){return e.payload.find(function(e){return e.type===gD})}).map(function(e){var n=e.payload,a=n.dataEntryId,r=n.itemId,i=n.uid;return SB(t,a,r,i)})},function(e,t){return e.ofType(uD).map(function(e){return e.payload.find(function(e){return e.type===gD})}).map(function(e){var n=e.payload,a=n.elementId,r=n.value,i=n.uiState,o=n.dataEntryId,s=n.itemId,c=n.uid,l={elementId:a,value:r,valid:i.valid};return SB(t,o,s,c,l)})},function(e,t){return e.ofType(bD).map(function(){var e=t.getState(),n=e.currentSelections.programId,a=e.currentSelections.orgUnitId;return Object(FC.d)("/programId=".concat(n,"&orgUnitId=").concat(a))})},function(e,t){return e.ofType(bD).map(function(e){var n=t.getState(),a=e.payload,r=Uh(a.dataEntryId,a.itemId),i=n.dataEntries[a.dataEntryId].eventId,o=n.formsValues[r],s=n.dataEntriesFieldsValue[r],c=n.dataEntriesFieldsMeta[r],l=n.events[i],u=a.formFoundation,d=CT(u,o,s,c,l),p=d.formClientValues,f=d.dataEntryClientValues,m=Object(Ie.a)({},l,f,{notes:[]}),h=u.convertValues(p,Na),g=MO(m);return"COMPLETED"!==g.status||l.completedDate||(g.completedDate=De().format("YYYY-MM-DD")),function(e,t,n){return Se(vD)({selections:n},{offline:{effect:{url:"events/".concat(e),method:Uv,data:t},commit:{type:OD,meta:{selections:n}},rollback:{type:yD,meta:{selections:n}}}})}(i,Object(Ie.a)({},g,{dataValues:Object.keys(h).map(function(e){return{dataElement:e,value:h[e]}})}),n.currentSelections)})},function(e,t){return e.ofType(ED).map(function(){var e=t.getState(),n=e.currentSelections.programId,a=e.currentSelections.orgUnitId;return Object(FC.d)("/programId=".concat(n,"&orgUnitId=").concat(a))})},function(e,t){return e.ofType(ED).map(function(){var e=t.getState();if(!e.offline.online)return PD();var n=e.workingListConfigSelector.eventMainPage.currentListId,a=n&&e.workingListsContext[n];if(!a)return DD();var r=e.currentSelections;return r.complete&&!$O(a,r)?DD():PD()})},function(e,t){return e.ofType(ID).map(function(e){var n=t.getState(),a=e.payload,r=n.dataEntries[a.dataEntryId].eventId,i=Dn().username,o={event:r,notes:[{value:a.note}]},s={value:a.note,storedBy:i,storedDate:De().toISOString(),clientId:Object(wS.a)()},c=Object(Ie.a)({},s,{storedDate:ya(s.storedDate,ft.DATETIME)}),l={dataEntryId:a.dataEntryId,itemId:a.itemId,eventId:r,noteClientId:s.clientId};return Object(He.batchActions)([xD(r,o,n.currentSelections,l),ug(a.dataEntryId,a.itemId,c),vU(r,s)],pD)})},function(e){return e.ofType(cO).map(function(e){var t=e.payload,n=Dn().username,a=De().toISOString(),r={value:t.note,storedBy:n,storedDate:ya(a,ft.DATETIME),clientId:Object(wS.a)()};return ug(t.dataEntryId,t.itemId,r)})},function(e){return e.ofType(TD).map(function(e){var t,n,a,r=e.meta.context;return Object(He.batchActions)([(t=r.dataEntryId,n=r.itemId,a=r.noteClientId,Se(eg)({dataEntryId:t,itemId:n,noteClientId:a})),OU(r.eventId,r.noteClientId)],fD)})},function(e){return e.ofType(kR).map(function(e){return Object(FC.d)("/editEvent/".concat(e.payload))})},function(e,t){return e.ofType(kR).map(function(e){var n=e.payload,a=t.getState(),r=a.events[n];return function(e,t){return Se(mU)({eventContainer:e,orgUnit:t})}({event:r,values:a.eventsValues[n],id:r.eventId},a.organisationUnits[r.orgUnitId])})},function(e){return e.ofType(RB.OFFLINE_STATUS_CHANGED).map(function(e){return t=e.payload.online,Se(FM)({status:t});var t})},function(e,t){return e.ofType("Offline/STATUS_CHANGED").filter(function(e){return!!e.payload.online}).map(function(){var e=[Se(LU)()];return!!t.getState().currentSelections.complete&&(e=[].concat(Object(Xe.a)(e),[Se(UU)()])),Object(He.batchActions)(e,FU)})},function(e,t){return e.ofType($v,OD).filter(function(e){var n=t.getState();return TB(n,e)}).map(function(){return fV()})},function(e,t){return e.ofType(Oi).map(function(){var e=t.getState().currentSelections,n=e.programId,a=e.orgUnitId,r=NB(n,a);return Object(FC.d)("/".concat(r))})},function(e,t){return e.ofType(Ei).map(function(){var e=t.getState().currentSelections,n=e.programId,a=e.orgUnitId,r=NB(n,a);return Object(FC.d)("/".concat(r))})},function(e,t){return e.ofType(Ii).map(function(){var e=t.getState().currentSelections,n=e.programId,a=e.orgUnitId,r=NB(n,a);return Object(FC.d)("/".concat(r))})},function(e,t){return e.ofType(oT.RESET_ORG_UNIT_ID,oT.SET_ORG_UNIT,oT.SET_PROGRAM_ID,oT.RESET_PROGRAM_ID,sT,cT).map(function(){var e=t.getState().currentSelections,n=function(e,t){var n=[];return e&&n.push("programId=".concat(e)),t&&n.push("orgUnitId=".concat(t)),n.join("&")}(e.programId,e.orgUnitId);return Object(FC.d)("/".concat(n))})},function(e,t){return e.ofType(UC,LC,MC,VC,GC,zC,YC).map(function(){var e=t.getState().currentSelections,n=function(e,t){var n=[];return e&&n.push("programId=".concat(e)),t&&n.push("orgUnitId=".concat(t)),n.join("&")}(e.programId,e.orgUnitId);return Object(FC.d)("/".concat(n))})},function(e,t){return e.ofType(OC.RESET_ORG_UNIT_ID,OC.SET_ORG_UNIT,OC.SET_PROGRAM_ID,OC.RESET_PROGRAM_ID,EC).map(function(){var e=t.getState().currentSelections,n=e.programId,a=e.orgUnitId,r=kT(n,a);return Object(FC.d)("/newEvent/".concat(r))})},function(e,t){return e.ofType(yC).map(function(){var e=t.getState().currentSelections,n=e.programId,a=e.orgUnitId,r=kT(n,a);return Object(FC.d)("/".concat(r))})},function(e,t){return e.ofType(Jw).map(function(){var e=t.getState(),n=e.workingListConfigSelector.eventMainPage.currentListId,a=e.workingListsAppliedFilters&&e.workingListsAppliedFilters[n]||{},r=e.workingListsAppliedFilters&&e.workingListsAppliedFilters[n]&&e.workingListsAppliedFilters[n].next||{},i=Object.keys(a).reduce(function(e,t){return a[t]&&"next"!==t&&(e[t]=!0),e},{}),o=Object.keys(r).reduce(function(e,t){return r[t]&&(e[t]=!0),e},{});return function(e,t){return Se(IA)({includeFilters:e,listId:t})}(Object(Ie.a)({},i,o),n)})},function(e,t){return e.ofType(nO).map(function(e){var n,a,r,i,o=t.getState(),s=e.payload,c=s.formFoundation,l=Uh(s.dataEntryId,s.eventId),u=NT(o,l,c),d=u.formClientValues,p=u.mainDataClientValues,f=TT(o,c,d,p),m=Object(Ie.a)({},p,{eventId:Object(wS.a)(),programId:o.currentSelections.programId,programStageId:c.id,orgUnitId:o.currentSelections.orgUnitId}),h=Object(Ie.a)({},d,{created:De().toISOString()}),g=o.dataEntriesRelationships[l];return Object(He.batchActions)([SO(f,g,o.currentSelections,m.eventId),(r=m,i=h,Se(xC)({event:r,eventValues:i})),(n="recentlyAddedEvents",a=m.eventId,Se(bT)({listId:n,itemId:a}))],zv)})},function(e){return e.ofType(iO).map(function(e){var t,n,a=e.meta.clientId;return t="recentlyAddedEvents",n=a,Se(vT)({listId:t,itemId:n})})},function(e,t){return e.ofType(wR).map(function(e){var n=t.getState(),a=e.payload.eventId,r=n.workingListConfigSelector.eventMainPage.currentListId;return Object(He.batchActions)([YR(a),HR(r)],GR)})},function(e){return e.ofType(hu).switchMap(function(e){var t=e.payload.searchText;return Fn().models.organisationUnits.list({fields:["id,displayName,path,publicAccess,access,lastUpdated","children[id,displayName,publicAccess,access,path,children::isNotEmpty]"].join(","),paging:!0,withinUserHierarchy:!0,query:t,pageSize:15}).then(function(e){return{regUnitArray:e.toArray(),searchText:t}}).catch(function(e){return{error:e}})}).map(function(e){if(e.error)return R.a.error(Object(Ze.b)("Could not retrieve registering unit list")({error:e.error,method:"searchRegisteringUnitListEpic"})),t="Could not retrieve registering unit list",Se(vu)({message:t});var t;du("regUnit",e.regUnitArray);var n,a,r=e.regUnitArray.map(function(e){return{id:e.id,path:e.path,displayName:e.displayName}});return n=r,a=e.searchText,Se(bu)({roots:n,searchText:a})})},function(e){return e.ofType(hu).switchMap(function(){return Object(Zb.fromPromise)(new Promise(function(e){setTimeout(function(){return e()},500)})).takeUntil(e.ofType(bu,vu))}).map(function(){return Se(Ou)()})},function(e,t){return e.ofType(bS).filter(function(e){return e.payload.findMode&&"TEI_SEARCH"===e.payload.findMode}).map(function(e){var n=t.getState().newRelationship.selectedRelationshipType.to,a=n.programId,r=n.trackedEntityTypeId,i=a||r,o=sE(r,a),s=o?o.map(function(e,t){return Gb(wB("relationshipTeiSearch",i,t.toString()),{})}):[];return Object(He.batchActions)([].concat(Object(Xe.a)(s),[iE("relationshipTeiSearch",a,r)]),AB)})},function(e){return e.ofType(Zy).filter(function(e){return e.payload.searchId&&"relationshipTeiSearch"===e.payload.searchId}).map(function(){return Se(vS)({})})},function(e){return e.ofType(tE,nE).filter(function(e){return e.payload.searchId&&"relationshipTeiSearch"===e.payload.searchId}).map(function(){return Se(OS)({})})},function(e,t){return e.ofType(Zy).switchMap(function(n){var a=t.getState(),r=n.payload,i=r.formId,o=r.searchGroupId,s=r.searchId,c=zB(a,s,i,o);return Object(Zb.fromPromise)(c).takeUntil(e.ofType(Zy,aE)).takeUntil(e.filter(function(e){return Object(ot.a)(e.payload)&&e.payload.some(function(e){return e.type===Xy})}))})},function(e,t){return e.ofType(aE).switchMap(function(n){var a=t.getState(),r=n.payload,i=r.pageNumber,o=r.searchId,s=a.teiSearch[o],c=zB(a,o,s.searchResults.formId,s.searchResults.searchGroupId,i);return Object(Zb.fromPromise)(c).takeUntil(e.ofType(Zy,aE)).takeUntil(e.filter(function(e){return Object(ot.a)(e.payload)&&e.payload.some(function(e){return e.type===Xy})}))})},function(e,t){return e.ofType(Gy).map(function(e){var n=t.getState(),a=e.payload.searchId,r=e.payload.programId,i=n.teiSearch[a].selectedTrackedEntityTypeId,o=r||i;r&&(i=kt(r).trackedEntityType.id);var s=[];i&&(s=sE(i,r));var c=s?s.map(function(e,t){return Gb(wB(a,o,t.toString()),{})}):[];return Object(He.batchActions)([].concat(Object(Xe.a)(c),[oE(a,r,i)]),Ky)})},function(e,t){return e.ofType(tE).map(function(e){var n=t.getState(),a=e.payload.searchId,r=n.teiSearch[a],i=r.selectedProgramId||r.selectedTrackedEntityTypeId,o=sE(r.selectedTrackedEntityTypeId,r.selectedProgramId),s=o?o.map(function(e,t){return Gb(wB(a,i,t.toString()),{})}):[];return Object(He.batchActions)(Object(Xe.a)(s),qy)})},function(e){return e.ofType(lO).map(function(){return yS()})},function(e,t){return e.ofType(uy).map(function(e){var n,a=t.getState(),r=a.dataEntriesRelationships[DT]||[],i=e.payload,o=i.entity,c=o.id?o:DS(o.dataEntryId,o.itemId,a),l=o.id?null:{dataEntryId:o.dataEntryId},u={clientId:Object(wS.a)(),from:{id:"newEvent",name:s.a.t("This event"),type:"PROGRAM_STAGE_INSTANCE"},to:Object(Ie.a)({},c,{type:i.entityType}),relationshipType:Object(Ie.a)({},i.relationshipType)};return r.some(function(e){return e.relationshipType.id===u.relationshipType.id&&e.to.id&&e.to.id===u.to.id})?function(e,t,n){return Se(ig)({dataEntryId:e,itemId:t,message:n})}("singleEvent","newEvent",s.a.t("Relationship of type {{relationshipTypeName}} to {{entityName}} already exists",{entityName:u.to.name,relationshipTypeName:u.relationshipType.name})):Object(He.batchActions)([(n=u.clientId,Se(dy)({relationshipId:n})),dg("singleEvent","newEvent",u,l)],py)})},function(e,t){return e.ofType(uO).map(function(e){var t=e.meta;if(t.relationshipData){var n=e.payload.response.importSummaries[0].reference,a=e.meta.relationshipData.map(function(e){return Object(Ie.a)({},e,{from:Object(Ie.a)({},e.from,{id:n})})});return xT(a,e.meta.selections,e.meta.triggerAction)}return t.triggerAction===Xv?yO(t.selections):t.triggerAction===aO?CO(t.selections):null})},function(e,t){return e.ofType(pO,fO,bO).map(function(e){var t=e.meta;return t.triggerAction===Xv?yO(t.selections):t.triggerAction===aO?CO(t.selections):null})},function(e){return e.ofType(gR).filter(function(e){return e.payload.nextProps.orgUnitId}).switchMap(function(e){return Pn().get("organisationUnits/".concat(e.payload.nextProps.orgUnitId)).then(function(e){return t={id:e.id,name:e.displayName},Se(bR)({orgUnit:t});var t}).catch(function(){return e=s.a.t("Could not get organisation unit"),Se(vR)({error:e});var e})})},function(e){return e.ofType(gR).filter(function(e){return!e.payload.nextProps.orgUnitId}).map(function(){return Se(OR)()})},function(e,t){return e.ofType(bR,OR).map(function(){var e=t.getState().currentSelections,n=e.programId,a=e.orgUnitId;if(n){var r=at.get(n);if(!r)return _R(s.a.t("Program doesn't exist"));if(!(r instanceof en))return _R(s.a.t("Program with programid {{programId}} isn't a tracker program. Enrollments can only be done in tracker programs.",{programId:n}));if(a&&!r.organisationUnits[a])return _R(s.a.t("Selected program is invalid for selected registering unit"))}return Se(yR)()})},function(e,t){return e.ofType(yR).switchMap(function(){var e=t.getState();if(!e.currentSelections.complete)return Se(jR)();var n,a=e.currentSelections.programId,r=e.currentSelections.orgUnitId,i=e.organisationUnits[r];try{var o=Ft(a);o instanceof en?n=o:R.a.error(Object(Ze.b)(CR)({method:"openNewEnrollmentInDataEntryEpic",program:o}))}catch(c){R.a.error(Object(Ze.b)(SR)({method:"openNewEnrollmentInDataEntryEpic",error:c,programId:a}))}var s=n&&n.enrollment.enrollmentForm;return X_(n,s,i,"enrollment",[Se(IR)()],[],e.generatedUniqueValuesCache.enrollment)})},function(e,t){return e.ofType(u_).map(function(e){return e.payload.find(function(e){return e.type===s_})}).map(function(e){var n=e.payload,a=n.innerPayload,r=n.searchActions,i=n.uid,o=n.programId,s=n.orgUnit,c=a.dataEntryId,l=a.itemId,u={elementId:a.elementId,value:a.value,valid:a.uiState.valid};return $_(t,{programId:o,orgUnit:s,dataEntryId:c,itemId:l,uid:i},u,r)})},function(e,t){return e.ofType(d_).map(function(e){return e.payload.find(function(e){return e.type===s_})}).map(function(e){var n=e.payload,a=n.uid,r=n.programId,i=n.orgUnit,o=n.innerPayload,s=o.dataEntryId,c=o.itemId;return $_(t,{dataEntryId:s,itemId:c,uid:a,programId:r,orgUnit:i})})},function(e,t){return e.ofType(sR).map(function(e){var n=t.getState(),a=e.payload,r=Uh(a.dataEntryId,a.itemId),i=n.currentSelections.programId;return function(e,t){return Se(oR)({selections:t},{offline:{effect:{url:"trackedEntityInstances",method:Lv,data:e},commit:{type:cR,meta:{selections:t}},rollback:{type:lR,meta:{selections:t}}}})}(Z_(r,{programId:i,orgUnitId:n.currentSelections.orgUnitId},kt(i).enrollment,n.formsValues[r],n.dataEntriesFieldsValue[r],n.dataEntriesFieldsMeta[r],{}),n.currentSelections)})},function(e,t){return e.ofType(rp).concatMap(function(t){var n=t.payload,a=n.formId,r=n.elementId,i=n.searchText;return Object(Zb.fromPromise)(Fn().models.organisationUnits.list({fields:["id,displayName,path,publicAccess,access,lastUpdated","children[id,displayName,publicAccess,access,path,children::isNotEmpty]"].join(","),paging:!1,query:i,withinUserSearchHierarchy:!0}).then(function(e){return{orgUnitArray:e.toArray(),searchText:i,formId:a,elementId:r}}).catch(function(e){return{error:e,formId:a,elementId:r}})).takeUntil(e.filter(function(e){return KB(e,a,r)}))}).map(function(e){if(e.error)return R.a.error(Object(Ze.b)("Filter form field org units failed")({error:e.error,method:"FilterOrgUnitRootsEpic"})),function(e,t,n){return Se(op)({formId:e,elementId:t,errorMessage:n})}(e.formId,e.elementId,"Filter form field org units failed");var t=e.orgUnitArray,n=e.formId,a=e.elementId;return du(cp(n,a),t),function(e,t,n){return Se(ip)({formId:e,elementId:t,roots:n})}(n,a,t.map(function(e){return{id:e.id,path:e.path,displayName:e.displayName}}))})},function(e){return e.ofType(Rh).concatMap(function(e){var t=e.payload,n=t.elementId,a=t.formBuilderId,r=t.formId,i=t.callback,o=t.uid,c=t.onSuccess,l=t.onError,u={valid:!0,touched:!0,errorMessage:null};return i().then(function(e){var t=function(e,t,n,a,r,i){return Se(Nh)({value:e,uiState:t,elementId:n,formBuilderId:a,formId:r,uid:i})}(e,u,n,a,r,o);return c?c(t):t}).catch(function(e){var t=Ph(e).message,i=s.a.t("Async field update failed");R.a.error(Object(Ze.b)(t||i)({error:e}));var c=function(e,t,n,a,r,i){return Se(kh)({message:e,uiState:t,elementId:n,formBuilderId:a,formId:r,uid:i})}(i,u,n,a,r,o);return l?l(c):c})})},function(e){return e.ofType(by).concatMap(function(t){var n=t.payload.searchText,a=t.payload.searchId;return Object(Zb.fromPromise)(Fn().models.organisationUnits.list({fields:["id,displayName,path,publicAccess,access,lastUpdated","children[id,displayName,publicAccess,access,path,children::isNotEmpty]"].join(","),paging:!0,withinUserSearchHierarchy:!0,query:n,pageSize:15}).then(function(e){return{regUnitArray:e.toArray(),searchText:n,searchId:a}}).catch(function(e){return{error:e,searchId:a}})).takeUntil(e.filter(function(e){return XB(e,a)}))}).map(function(e){if(e.error)return R.a.error(Object(Ze.b)("Could not retrieve registering unit list")({error:e.error,method:"searchRegisteringUnitListEpic"})),t=e.searchId,n="Could not retrieve registering unit list",Se(yy)({searchId:t,error:n});var t,n,a=e.regUnitArray;du(e.searchId,a);var r=e.regUnitArray.map(function(e){return{id:e.id,path:e.path,displayName:e.displayName}});return function(e,t,n){return Se(Oy)({searchId:e,roots:t,searchText:n})}(e.searchId,r,e.searchText)})},function(e,t){return e.ofType(AR).switchMap(function(e){var n=t.getState();return $V(e.payload).then(function(e){return e?function(e,t){return Se(EP)({eventContainer:e,orgUnit:t})}(e,n.organisationUnits[e.event.orgUnitId]):FP(s.a.t("Event could not be loaded. Are you sure it exists?"))}).catch(function(e){var t=Ph(e),n=t.message,a=t.details;return R.a.error(Object(Ze.b)(n||s.a.t("Event could not be loaded"))(a)),FP(s.a.t("Event could not be loaded. Are you sure it exists?"))})})},function(e,t){return e.ofType(gP).switchMap(function(e){var n=e.payload.eventId,a=t.getState().currentSelections.programId;return $V(n).then(function(e){return e?function(e){return CB.apply(this,arguments)}(e.event).then(function(t){return function(e,t,n){return Se(bP)({eventContainer:e,prevProgramId:t,categoriesData:n})}(e,a,t)}):wP(s.a.t("Event could not be loaded. Are you sure it exists?"))}).catch(function(e){var t=Ph(e),n=t.message,a=t.details;return R.a.error(Object(Ze.b)(n||s.a.t("Event could not be loaded"))(a)),wP(s.a.t("Event could not be loaded. Are you sure it exists?"))})})},function(e){return e.ofType(bP).switchMap(function(e){var t=e.payload.eventContainer;return jB(t.event.orgUnitId).get().then(function(e){return function(e,t){return Se(OP)({orgUnit:e,eventContainer:t})}(e,t)}).catch(function(e){var n=Ph(e),a=n.message,r=n.details;return R.a.error(Object(Ze.b)(a||s.a.t("Organisation unit could not be loaded"))(r)),function(e){return Se(yP)({eventContainer:e})}(t)})})},function(e){return e.ofType(AR).map(function(e){return Object(FC.d)("/viewEvent/".concat(e.payload))})},function(e,t){return e.ofType(qC,KC,XC,ZC,QC,tT,nT).map(function(){var e=t.getState().currentSelections,n=function(e,t){var n=[];return e&&n.push("programId=".concat(e)),t&&n.push("orgUnitId=".concat(t)),n.join("&")}(e.programId,e.orgUnitId);return Object(FC.d)("/".concat(n))})},function(e,t){return e.ofType(CP).map(function(){var e=t.getState();if(!e.offline.online)return PP();var n=e.workingListConfigSelector.eventMainPage&&e.workingListConfigSelector.eventMainPage.currentListId,a=n&&e.workingListsContext[n];if(!a)return DP();var r=e.currentSelections;return r.complete&&!$O(a,r)?DP():e.viewEventPage.eventHasChanged?Se(IP)():e.viewEventPage.saveInProgress?Se(NP)():PP()})},function(e,t){return e.ofType(CP).map(function(){var e=t.getState(),n=e.currentSelections.programId,a=e.currentSelections.orgUnitId;return Object(FC.d)("/programId=".concat(n,"&orgUnitId=").concat(a))})},function(e){return e.ofType(TP).map(function(){return yS()})},function(e,t){return e.ofType(Dx).map(function(e){var n,a,r,i,o,c,l=t.getState(),u=l.viewEventPage.eventId,d=l.dataEntriesRelationships.viewEvent||[],p=e.payload,f=p.entity,m=f.id?f:DS(f.dataEntryId,f.itemId,l),h=Object(wS.a)(),g={clientId:h,from:{id:u,name:s.a.t("This event"),type:"PROGRAM_STAGE_INSTANCE"},to:Object(Ie.a)({},m,{type:p.entityType}),relationshipType:Object(Ie.a)({},p.relationshipType)};if(d.some(function(e){return e.relationshipType.id===g.relationshipType.id&&e.to.id&&e.to.id===g.to.id}))return function(e){return Se(Ux)({message:e})}(s.a.t("Relationship of type {{relationshipTypeName}} to {{entityName}} already exists",{entityName:g.from.name,relationshipTypeName:g.relationshipType.name}));if(m.data)a=g,r=l.currentSelections,i=h,n=Se(Wx)({selections:r},{offline:{effect:{url:"trackedEntityInstances",method:Lv,data:a.to.data,clientId:i},commit:{type:Hx,meta:{clientData:a,selections:r,clientId:i}},rollback:{type:zx,meta:{clientData:a,selections:r,clientId:i}}}});else{var b={relationships:[wT(g)]};n=Yx(b,l.currentSelections,h)}return Object(He.batchActions)([(o="viewEvent",c=g,Se(KM)({key:o,relationship:c})),n],kx)})},function(e){return e.ofType(Lx).map(function(e){return JM("viewEvent",e.meta.clientId)})},function(e,t){return e.ofType(Fx).map(function(e){var n=t.getState().relationships.viewEvent.find(function(t){return t.clientId===e.meta.clientId}),a=e.payload.response.importSummaries[0].reference;return function(e,t){return Se(qM)({key:e,updatedRelationship:t})}("viewEvent",Object(Ie.a)({},n,{id:a}))})},function(e,t){return e.ofType(Gx).map(function(e){var n=e.payload.clientId,a=t.getState(),r=a.relationships.viewEvent.find(function(e){return e.clientId===n});return Object(He.batchActions)([JM("viewEvent",n),qx(r.id,n,a.currentSelections)],Ax)})},function(e){return e.ofType(Hx).map(function(e){var t=e.payload.response.importSummaries[0].reference,n=e.meta,a=n.clientData,r=n.selections,i=n.clientId,o=a.to;o.data=null,o.id=t;var s={relationships:[wT(a)]};return Yx(s,r,i)})},function(e){return e.ofType(zx).map(function(e){return JM("viewEvent",e.meta.clientId)})},function(e,t){return e.ofType(rF).map(function(e){var n,a,r=t.getState(),i=e.payload,o=r.viewEventPage.eventId,s=Dn().username,c={event:o,notes:[{value:i.note}]},l={value:i.note,storedBy:s,storedDate:ya(De().toISOString(),ft.DATETIME),clientId:Object(wS.a)()};return Object(He.batchActions)([lF(o,c,r.currentSelections,l.clientId),(n="viewEvent",a=l,Se(GM)({key:n,note:a}))],nF)})},function(e){return e.ofType(oF).map(function(e){return t="viewEvent",n=e.meta.clientId,Se(WM)({key:t,noteClientId:n});var t,n})},function(e,t){return e.ofType(OP,yP,EP).map(function(e){var t=e.payload.eventContainer,n=(t&&t.event&&t.event.notes||[]).map(function(e){return Object(Ie.a)({},e,{storedDate:ya(e.storedDate,ft.DATETIME)})});return Object(He.batchActions)([Se(aF)(),HM("viewEvent",n)],tF)})},function(e){return e.ofType(OP,yP,EP).switchMap(function(e){var t=e.payload.eventContainer.event;return $B(t.eventId,t.programId).then(function(e){return Object(He.batchActions)([Se(wx)(),ZM("viewEvent",e||[])],Nx)})})},function(e,t){return e.ofType(OP,yP,EP,RP,FD).filter(function(e){return function(e,t,n){return e.type!==t||Sn()(e.payload)&&e.payload.some(function(e){return e.type===n})}(e,FD,RP)}).map(function(e){return function(e,t,n){return e.type===t&&Sn()(e.payload)?e.payload.find(function(e){return e.type===n}):e}(e,FD,RP)}).filter(function(e){var n=e.payload.eventContainer.id,a=t.getState().viewEventPage||{};return a.eventId===n&&!a.showEditEvent}).switchMap(function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a,i,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payload.eventContainer,a=t.payload.orgUnit,!(i=wt(n.event)).error){e.next=5;break}return e.abrupt("return",(r=i.error,Se(tM)(r)));case 5:return o=i.stage.stageForm,s=i.program,e.t0=He.batchActions,e.next=10,OM(n,a,o,s);case 10:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 12:case"end":return e.stop()}var r},e)}));return function(t){return e.apply(this,arguments)}}())},function(e,t){return e.ofType(HD).map(function(){var e,n=t.getState(),a=n.viewEventPage.loadedValues,r=a.eventContainer,i=n.organisationUnits[r.event.orgUnitId],o=wt(r.event);if(o.error)return e=o.error,Se(GD)(e);var s=o.program,c=o.stage.stageForm;return Object(He.batchActions)([Se(zD)()].concat(Object(Xe.a)(AD(a,i,c,s))))})},function(e,t){return e.ofType(UD).map(function(e){var n=t.getState(),a=e.payload,r=Uh(a.dataEntryId,a.itemId),i=n.dataEntries[a.dataEntryId].eventId,o=n.formsValues[r],s=n.dataEntriesFieldsValue[r],c=n.dataEntriesFieldsMeta[r],l=n.viewEventPage.loadedValues.eventContainer.event,u=a.formFoundation,d=CT(u,o,s,c,l),p=d.formClientValues,f=d.dataEntryClientValues,m=Object(Ie.a)({},l,f,{notes:[]}),h=u.convertValues(p,Na),g=MO(m);"COMPLETED"!==g.status||l.completedDate||(g.completedDate=De().format("YYYY-MM-DD"));var b=n.viewEventPage.loadedValues.eventContainer,v=Object(Ie.a)({},b,{event:Object(Ie.a)({},b.event,f),values:Object(Ie.a)({},p)}),O=n.organisationUnits[v.event.orgUnitId],y=Object(Ie.a)({},g,{dataValues:Object.keys(h).map(function(e){return{dataElement:e,value:h[e]}})});return Object(He.batchActions)([xP(v,O),WD(i,y,n.currentSelections)],FD)})},function(e,t){return e.ofType(BD).filter(function(e){var n=t.getState().viewEventPage||{};return n.eventId&&n.eventId===e.meta.eventId}).map(function(){var e=t.getState(),n=e.viewEventPage.loadedValues.eventContainer,a=e.organisationUnits[n.event.orgUnitId];return xP(n,a)})},function(e,t){return e.ofType(VD,OF).filter(function(e){var n=t.getState();return null===n.app.page&&TB(n,e)}).map(function(){return fV()})},function(e,t){return e.ofType(bS).filter(function(e){return e.payload.findMode&&e.payload.findMode===LE.TEI_REGISTER}).switchMap(function(n){var a,r=t.getState(),i=r.newRelationship.selectedRelationshipType.to,o=i.programId,c=i.trackedEntityTypeId,l=r.currentSelections.orgUnitId;if(o)try{a=function(e){var t;try{var n=kt(e);n.access.data.write&&(t=n)}catch(a){throw R.a.error(Object(Ze.b)("tracker program for id not found")({suggestedProgramId:e,error:a})),Error(s()("Metadata error. see log for details"))}return t}(o)}catch(h){return Promise.resolve(IS(h))}var u=function(e,t){return t?t.organisationUnits[e]?e:null:e}(l,a);if(!u)return Promise.resolve(jS(a&&a.id));var d,p=r.organisationUnits[u];if(a){var f=X_(a,a&&a.enrollment.enrollmentForm,p,"relationship",[jS(a.id,p)],[],r.generatedUniqueValuesCache.relationship);return Object(Zb.fromPromise)(f).takeUntil(e.ofType(bS))}try{d=Gt(c)}catch(h){return R.a.error(Object(Ze.b)("TET for id not found")({trackedEntityTypeId:c,error:h})),Promise.resolve(IS(s.a.t("Metadata error. see log for details")))}var m=uj(d.teiRegistration.form,p,"relationship",[jS(null,p)],r.generatedUniqueValuesCache.relationship);return Object(Zb.fromPromise)(m).takeUntil(e.ofType(bS))})},function(e,t){return e.ofType(Jj,Qj,eI).switchMap(function(){var n=t.getState(),a=n.newRelationshipRegisterTei,r=a.programId,i=a.orgUnit,o=n.newRelationship.selectedRelationshipType.to.trackedEntityTypeId;if(r&&i){var c;try{c=kt(r)}catch(p){return R.a.error(Object(Ze.b)("tracker program for id not found")({programId:r,error:p})),Promise.resolve(NS(s.a.t("Metadata error. see log for details")))}var l=X_(c,c&&c.enrollment.enrollmentForm,i,"relationship",[RS()],[],n.generatedUniqueValuesCache.relationship);return Object(Zb.fromPromise)(l).takeUntil(e.ofType(bS))}if(i){var u;try{u=Gt(o)}catch(p){return R.a.error(Object(Ze.b)("TET for id not found")({TETTypeId:o,error:p})),Promise.resolve(NS(s.a.t("Metadata error. see log for details")))}var d=uj(u.teiRegistration.form,i,"relationship",[RS()],n.generatedUniqueValuesCache.relationship);return Object(Zb.fromPromise)(d).takeUntil(e.ofType(bS))}return Promise.resolve(Se(CS)())})},function(e,t){return e.ofType(NI,wI).switchMap(function(e){var n,a=e.type===wI,r=a?e.payload.page:1,i=t.getState(),o=i.newRelationshipRegisterTei,s=o.programId,c=o.orgUnit,l=i.newRelationship.selectedRelationshipType.to.trackedEntityTypeId,u=Uh("relationship",i.dataEntries.relationship.itemId),d=i.formsValues[u];try{n=kS(s,l)}catch(h){return Promise.resolve(DI())}var p=n.searchFoundation.getElements().map(function(e){var t=d[e.id];if(!t&&0!==t&&!1!==t)return null;var n=e.convertValue(t,Object(Ze.d)(Ua,Na));return"".concat(e.id,":LIKE:").concat(n)}).filter(function(e){return e}),f=s?{program:s}:{trackedEntityType:l},m=Object(Ie.a)({ou:c.id,ouMode:"ACCESSIBLE",pageSize:5,page:r,totalPages:!a,filter:p},f);return Pn().get("trackedEntityInstances",m).then(function(e){var t=AS(s,l),n=e&&e.pager||{},r=a?null:{rowsCount:n.total,rowsPerPage:n.pageSize,currentPage:n.page};return function(e,t){return Se(kI)({teis:e,paginationData:t})}((e&&e.trackedEntityInstances||[]).map(function(e){var n=(e.attributes||[]).reduce(function(e,t){return e[t.attribute]=t.value,e},{}),a=t.convertValues(n,Jn);return{id:e.trackedEntityInstance,values:Object(Ie.a)({},a,{registrationDate:Jn(e.created,ft.DATETIME),registrationUnit:Jn(e.orgUnit,ft.TEXT),inactive:Jn(e.inactive,ft.BOOLEAN)})}}),r)}).catch(function(){return DI()})})},function(e,t){return e.ofType(gO).map(function(e){var t=e.payload.response.importSummaries[0].reference,n=e.meta,a=n.relationshipData,r=n.relationshipClientId,i=n.selections,o=n.triggerAction,s=a.find(function(e){return e.clientId===r});return s.to.id=t,s.to.data=null,xT(a,i,o)})},function(e,t){return e.ofType(bF).map(function(){var e=t.getState(),n=e.viewEventPage.eventId,a=e.viewEventPage.loadedValues.eventContainer,r=a.event,i=a.values,o=Tt(r.programId).stage.stageForm.convertValues(i,Na),s=MO(r);return function(e,t,n){return Se(vF)({},{offline:{effect:{url:"events/".concat(e),method:Uv,data:t},commit:{type:OF,meta:{eventId:e,selections:n}},rollback:{type:yF,meta:{eventId:e,selections:n}}}})}(n,Object(Ie.a)({},s,{dataValues:Object.keys(o).map(function(e){return{dataElement:e,value:o[e]}})}),e.currentSelections)})}].concat(Object(Xe.a)([rv([l_,ej]),iv([q_,lj])])));function lG(e,t){var n=[Object($b.b)(cG),Object(vL.a)(e)];"production"!==M.a.prod&&n.push(Object(bL.createLogger)({}));var a=Object(qm.a)(dV),r=Object(hL.combineReducers)(Object(Ie.a)({},a,{router:Object(X.b)(e)})),i=Object(OL.createOffline)(Object(Ie.a)({},EL.a,{discard:AL,effect:SL,persistCallback:t,queue:kL,persistOptions:{storage:wL(),whitelist:["offline","networkStatus"]}})),o=i.middleware,s=i.enhanceReducer,c=i.enhanceStore;return Object(hL.createStore)(Object(He.enableBatching)(s(r)),Object(gL.composeWithDevTools)(Object(hL.compose)(c,hL.applyMiddleware.apply(void 0,n.concat([o])))))}var uG={PROGRAMS:"Programs",PROGRAM_RULES:"ProgramRules",PROGRAM_RULES_VARIABLES:"ProgramRulesVariables",PROGRAM_INDICATORS:"ProgramIndicators",OPTION_SETS:"OptionSets"},dG=function(){function e(t,n){Object(B.a)(this,e),t&&t(this),n&&(this.d2ModelName=n.modelName,this.d2ModelGetterType=n.modelGetterType,this.queryParams=n.queryParams,this.converter=n.converter)}return Object(G.a)(e,[{key:"load",value:function(e){return this.loader(e,this.objectStore,this.queryParams,this.d2ModelName,this.d2ModelGetterType,this.converter)}}]),e}();function pG(e,t,n,a,r,i){return fG.apply(this,arguments)}function fG(){return(fG=Object(i.a)(r.a.mark(function e(t,n,a,i,o,s){var c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yB(i,o,a,s);case 2:if(!(c=e.sent)){e.next=6;break}return e.next=6,t.setAll(n,c);case 6:return e.abrupt("return",c);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mG(e,t,n,a,r,i){return hG.apply(this,arguments)}function hG(){return(hG=Object(i.a)(r.a.mark(function e(t,n,a,i,o,s){var c,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getKeys(n);case 2:if(c=e.sent,!(c&&c.length>0)){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,pG(t,n,a,i,o,s);case 8:return l=e.sent,e.abrupt("return",l);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gG(e){return e&&0!==e.length?e.map(function(e){return{id:e.id,displayName:e.displayName,value:e.value}}):null}function bG(e){return e&&0!==e.length?e.map(function(e){return{id:e.id,displayName:e.displayName,level:e.level}}):null}function vG(e){return e&&0!==e.length?e.map(function(e){return{id:e.id,displayName:e.displayName,fromConstraint:e.fromConstraint,toConstraint:e.toConstraint,access:e.access}}):null}var OG=new _B(function(e){e.modelName="programs",e.modelGetterType=bB.LIST,e.queryParams={fields:"id,version,programTrackedEntityAttributes[trackedEntityAttribute[id,optionSet[id,version]]],programStages[id,programStageDataElements[dataElement[id,optionSet[id,version]]]]"},e.converter=function(e){return e}});function yG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sortOrder";return e.sort(function(e,n){var a=t;return Ee()(e[a])?Ee()(n[a])?e[a]-n[a]:-1:1}),e}function EG(e){return e&&0!==e.size?Object(Xe.a)(e.toArray()):[]}function _G(e){var t=EG(e).map(function(e){var t=Object(Ie.a)({},e.dataValues);return t.programStageDataElements=t.programStageDataElements.filter(function(e){return e.dataElement}).map(function(e){var t;return e.dataElement.translations=(t=e.dataElement.translations)?t.reduce(function(e,t){return e[t.locale]||(e[t.locale]={}),e[t.locale][t.property]=t.value,e},{}):[],e}),t.programStageSections=function(e){var t=EG(e).map(function(e){return{id:e.id,displayName:e.displayName,sortOrder:e.sortOrder,dataElements:(t=e.dataElements,EG(t).map(function(e){return{id:e.id}}))};var t});return yG(t),t}(t.programStageSections),t.notificationTemplates=EG(t.notificationTemplates).map(function(e){return{id:e.id}}),t});return yG(t),t}function jG(e){return e?e.map(function(e){return function(e){var t=e.trackedEntityAttribute,n=Object(ue.a)(e,["trackedEntityAttribute"]),a=t&&t.id;return a||R.a.error(Object(Ze.b)("encountered a programAttribute without a trackedEntityAttributeId")({programAttribute:e})),Object(Ie.a)({},n,{trackedEntityAttributeId:a})}(e)}).filter(function(e){return e}):null}var IG=new _B(function(e){e.modelName="programs",e.modelGetterType=bB.LIST,e.queryParams={fields:"*,dataEntryForm[*],access[*],relatedProgram[id,displayName],relationshipType[id,displayName],trackedEntityType[id],categoryCombo[id,displayName,isDefault,categories[id,displayName]]organisationUnits[id,displayName],userRoles[id,displayName],programStages[*,dataEntryForm[*],programStageSections[id,displayName,description,sortOrder,dataElements[id]],programStageDataElements[*,dataElement[*,optionSet[id]]]],programTrackedEntityAttributes[*]"},e.converter=function(e){return e&&0!==e.length?e.map(function(e){return{id:e.id,access:e.access,name:e.name,displayName:e.displayName,displayShortName:e.displayShortName,created:e.created,description:e.displayDescription,version:e.version,categoryCombo:e.categoryCombo,programStages:_G(e.programStages),organisationUnits:(t=e.organisationUnits,EG(t).reduce(function(e,t){return e[t.id]={id:t.id,name:t.name,displayName:t.displayName},e},{})),programType:e.programType,style:e.style,trackedEntityTypeId:e.trackedEntityType&&e.trackedEntityType.id,programTrackedEntityAttributes:jG(e.programTrackedEntityAttributes),minAttributesRequiredToSearch:e.minAttributesRequiredToSearch,enrollmentDateLabel:e.enrollmentDateLabel,incidentDateLabel:e.incidentDateLabel,dataEntryForm:e.dataEntryForm,featureType:e.featureType,selectEnrollmentDatesInFuture:e.selectEnrollmentDatesInFuture,selectIncidentDatesInFuture:e.selectIncidentDatesInFuture,displayIncidentDate:e.displayIncidentDate};var t}):null}});function SG(e){var t;return((t=e)&&0!==t.size?Object(Xe.a)(t.toArray()):[]).map(function(e){return{id:e.id,content:e.content,data:e.data,location:e.location,dataElementId:e.dataElement&&e.dataElement.id,programRuleActionType:e.programRuleActionType,programStageId:e.programStage&&e.programStage.id,programStageSectionId:e.programStageSection&&e.programStageSection.id,trackedEntityAttributeId:e.trackedEntityAttribute&&e.trackedEntityAttribute.id,optionGroupId:e.optionGroup&&e.optionGroup.id,optionId:e.option&&e.option.id}})}var CG=new _B(function(e){e.modelName="programRules",e.modelGetterType=bB.LIST,e.queryParams={fields:"id,displayName,condition,description,program[id],programStage[id],priority,programRuleActions[id,content,location,data,programRuleActionType,programStageSection[id],dataElement[id],trackedEntityAttribute[id],programIndicator[id],programStage[id],optionGroup[id],option[id]]",filter:"program.id:in:"},e.converter=function(e){return e&&0!==e.length?e.map(function(e){return{id:e.id,condition:e.condition,description:e.description,displayName:e.displayName,programId:e.program.id,programRuleActions:SG(e.programRuleActions),priority:e.priority,programStageId:e.programStage&&e.programStage.id}}):null}}),TG=new _B(function(e){e.modelName="programRuleVariables",e.modelGetterType=bB.LIST,e.queryParams={fields:"id,displayName,programRuleVariableSourceType,program[id],programStage[id],dataElement[id],trackedEntityAttribute[id],useCodeForOptionSet",filter:"program.id:in:"},e.converter=function(e){return e&&0!==e.length?e.map(function(e){return{id:e.id,dataElementId:e.dataElement&&e.dataElement.id,trackedEntityAttributeId:e.trackedEntityAttribute&&e.trackedEntityAttribute.id,displayName:e.displayName,programId:e.program&&e.program.id,programStageId:e.programStage&&e.programStage.id,programRuleVariableSourceType:e.programRuleVariableSourceType,useNameForOptionSet:!!Ee()(e.useCodeForOptionSet)&&!e.useCodeForOptionSet}}):null}}),RG=new _B(function(e){e.modelName="programIndicators",e.modelGetterType=bB.LIST,e.queryParams={fields:"id,displayName,code,shortName,displayInForm,expression,displayDescription,description,filter,program[id]",filter:"program.id:in"},e.converter=function(e){return e&&0!==e.length?e.map(function(e){return{id:e.id,displayName:e.displayName,code:e.code,shortName:e.shortName,displayInForm:e.displayInForm,expression:e.expression,displayDescription:e.displayDescription,description:e.description,filter:e.filter,programId:e.program&&e.program.id}}):null}});var NG=50;function kG(e,t,n){return AG.apply(this,arguments)}function AG(){return(AG=Object(i.a)(r.a.mark(function e(t,n,a){var i,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return i={},e.next=5,Promise.all(t.map(function(e){return n.get(a,e.id).then(function(t){i[e.id]=t})}));case 5:return o=t.filter(function(e){var t=i[e.id];return!t||t.version!==e.version}),e.abrupt("return",o.length>0?o:null);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wG(e,t,n){return IG.updateQueryParams({filter:"id:in:[".concat(e.map(function(e){return e.id}).toString(),"]")}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"programs",t=arguments.length>1?arguments[1]:void 0;return new dG(function(t){t.loader=pG,t.objectStore=e},t)}(t,IG).load(n)}function PG(e,t,n){return RG.updateQueryParams({filter:"program.id:in:[".concat(e.map(function(e){return e.id}).toString(),"]")}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"programIndicators",t=arguments.length>1?arguments[1]:void 0;return new dG(function(t){t.loader=pG,t.objectStore=e},t)}(t,RG).load(n)}function DG(e,t,n){return CG.updateQueryParams({filter:"program.id:in:[".concat(e.map(function(e){return e.id}).toString(),"]")}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"programRules",t=arguments.length>1?arguments[1]:void 0;return new dG(function(t){t.loader=pG,t.objectStore=e},t)}(t,CG).load(n)}function xG(e,t,n){return TG.updateQueryParams({filter:"program.id:in:[".concat(e.map(function(e){return e.id}).toString(),"]")}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"programRulesVariables",t=arguments.length>1?arguments[1]:void 0;return new dG(function(t){t.loader=pG,t.objectStore=e},t)}(t,TG).load(n)}function FG(e){if(!e)return[];return e.reduce(function(e,t){if(t.programStages){var n=function(e){var t=e.reduce(function(e,t){var n=function(e){var t=e.programStageDataElements;if(!t)return null;var n=t.reduce(function(e,t){var n=t.dataElement&&t.dataElement.optionSet;return n&&e.push(n),e},[]);return n.length>0?n:null}(t);return n&&(e=[].concat(Object(Xe.a)(e),Object(Xe.a)(n))),e},[]);return t.length>0?t:null}(Object(Xe.a)(t.programStages.values()));n&&(e=[].concat(Object(Xe.a)(e),Object(Xe.a)(n)))}return e},[])}function LG(e){return e?e.reduce(function(e,t){if(t.programTrackedEntityAttributes){var n=t.programTrackedEntityAttributes.map(function(e){return e.trackedEntityAttributeId}).filter(function(e){return e});return[].concat(Object(Xe.a)(e),Object(Xe.a)(n))}return e},[]):[]}function UG(e){return e?e.reduce(function(e,t){var n=t.categoryCombo&&t.categoryCombo.categories;return n?[].concat(Object(Xe.a)(e),Object(Xe.a)(n)):[]},[]):[]}function MG(e,t){return VG.apply(this,arguments)}function VG(){return(VG=Object(i.a)(r.a.mark(function e(t,n){var a,i,o,s,c,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OG.get();case 2:return a=e.sent,i=FG(a),e.next=6,kG(a,t,n[uG.PROGRAMS]);case 6:return o=e.sent,s=Object(Ze.a)(o,NG),e.next=10,Promise.all(s.map(function(e){return wG(e,n[uG.PROGRAMS],t).then(function(e){return DG(e,n[uG.PROGRAM_RULES],t).then(function(){return xG(e,n[uG.PROGRAM_RULES_VARIABLES],t)}).then(function(){return PG(e,n[uG.PROGRAM_INDICATORS],t)}).then(function(){return e})})}));case 10:return c=e.sent,l=c.filter(function(e){return e}).reduce(function(e,t){return[].concat(Object(Xe.a)(e),Object(Xe.a)(t))},[]),e.abrupt("return",{optionSetsMeta:i,trackedEntityAttributeIds:LG(l),categoryIds:UG(l)});case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}var BG=new _B(function(e){e.modelName="trackedEntityAttributes",e.modelGetterType=bB.LIST,e.queryParams={fields:":all,optionSet[id,version],trackedEntity[id,displayName]"},e.converter=function(e){return e}});var GG=50;function WG(e,t,n){return BG.updateQueryParams({filter:"id:in:[".concat(e.toString(),"]")}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"trackedEntityAttributes",t=arguments.length>1?arguments[1]:void 0;return new dG(function(t){t.loader=pG,t.objectStore=e},t)}(t,BG).load(n)}function HG(e,t,n){return zG.apply(this,arguments)}function zG(){return(zG=Object(i.a)(r.a.mark(function e(t,n,a){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(Ze.a)(a,GG),e.next=3,Promise.all(i.map(function(e){return WG(e,n,t)}));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function YG(e,t,n){return KG.apply(this,arguments)}function KG(){return(KG=Object(i.a)(r.a.mark(function e(t,n,a){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.queryParams=Object(Ie.a)({},t.queryParams,{page:n,pageSize:a}),e.next=3,Pn().get(t.modelName,Object(Ie.a)({},t.queryParams)).then(function(e){return e&&e.categoryOptions});case 3:return i=e.sent,e.abrupt("return",i||[]);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qG(e,t,n){return e.reduce(function(e,n){return e=n.categories.filter(function(e){return t.includes(e)}).reduce(function(e,t){var a=e[t]||{};return a[n.id]=!0,e[t]=a,e},e)},n)}function XG(e){return e.map(function(e){var t=e.organisationUnits&&e.organisationUnits.length>0?e.organisationUnits.reduce(function(e,t){return e[t]=!0,e},{}):null;return e.organisationUnits=t,e})}function ZG(e,t,n,a,r,i,o){return JG.apply(this,arguments)}function JG(){return(JG=Object(i.a)(r.a.mark(function e(t,n,a,i,o,s,c){var l,u,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YG(n,t,i);case 2:return l=e.sent,u=qG(l,a,c),d=XG(l),e.next=7,o.setAll(s,d);case 7:return e.abrupt("return",{retrievedCount:l.length,optionsByCategory:u});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function QG(e,t,n){return $G.apply(this,arguments)}function $G(){return($G=Object(i.a)(r.a.mark(function e(t,n,a){var i,o,s,c,l,u,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i={modelName:"categoryOptions",queryParams:{fields:"id,displayName,categories~pluck, organisationUnits~pluck, access[*]",filter:["categories.id:in:[".concat(t.toString(),"]"),"access.data.read:in:[true]"],paging:!0,totalPages:!1}},o=5e3,s=0,l={};case 4:return s+=1,e.next=7,ZG(s,i,t,o,n,a.categoryOptions,l);case 7:u=e.sent,c=u.retrievedCount,l=u.optionsByCategory;case 10:if(o===c){e.next=4;break}case 11:return d=Object.keys(l).map(function(e){return{id:e,options:l[e]}}),e.next=14,n.setAll(a.categoryOptionsByCategory,d);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function eW(e,t,n){return tW.apply(this,arguments)}function tW(){return(tW=Object(i.a)(r.a.mark(function e(t,n,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.setAll(a,t));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nW(e,t,n){return aW.apply(this,arguments)}function aW(){return(aW=Object(i.a)(r.a.mark(function e(t,n,a){var i,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(Xe.a)(new Map(n.map(function(e){return[e.id,e]})).values()),e.next=3,eW(i,t,a.categories);case 3:return o=i.map(function(e){return e.id}),s=Object(Ze.a)(o,50),e.next=7,s.asyncForEach(function(e){return QG(e,t,{categoryOptionsByCategory:a.categoryOptionsByCategory,categoryOptions:a.categoryOptions})});case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rW(e){return e&&0!==e.length?e.map(function(e){return{id:e.id,displayName:e.displayName,trackedEntityTypeAttributes:e.trackedEntityTypeAttributes}}):null}var iW=new _B(function(e){e.modelName="trackedEntityTypes",e.modelGetterType=bB.LIST,e.queryParams={fields:"id, trackedEntityTypeAttributes[trackedEntityAttribute[optionSet[id,version]]]"},e.converter=rW});function oW(e){return e?e.map(function(e){return function(e){var t=e.trackedEntityAttribute,n=Object(ue.a)(e,["trackedEntityAttribute"]),a=t&&t.id;return a||R.a.error(Object(Ze.b)("encountered a trackedEntityTypeAttribute without a trackedEntityAttribe id")({typeAttribute:e})),Object(Ie.a)({},n,{trackedEntityAttributeId:a})}(e)}).filter(function(e){return e}):null}function sW(e){return e&&0!==e.length?e.map(function(e){return{id:e.id,displayName:e.displayName,trackedEntityTypeAttributes:oW(e.trackedEntityTypeAttributes),translations:e.translations,featureType:e.featureType,access:e.access,minAttributesRequiredToSearch:e.minAttributesRequiredToSearch,maxTeiCountToReturn:e.maxTeiCountToReturn,displayDescription:e.displayDescription}}):null}var cW=new _B(function(e){e.modelName="trackedEntityTypes",e.modelGetterType=bB.LIST,e.queryParams={fields:"*, trackedEntityTypeAttributes[*]"},e.converter=sW}),lW=50;function uW(e,t,n){return dW.apply(this,arguments)}function dW(){return(dW=Object(i.a)(r.a.mark(function e(t,n,a){var i,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.updateQueryParams({page:n,pageSize:a}),e.next=3,t.get();case 3:if(i=e.sent,!(o=i&&Object(Xe.a)(i.values()))||o.length!==a){e.next=10;break}return e.next=8,uW(t,n+=1,a);case 8:return s=e.sent,e.abrupt("return",[].concat(Object(Xe.a)(o),Object(Xe.a)(s)));case 10:return e.abrupt("return",o||[]);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pW(e){return fW.apply(this,arguments)}function fW(){return(fW=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new _B(function(e){e.modelName="optionSets",e.modelGetterType=bB.LIST_WITH_PAGER,e.queryParams={fields:"id,displayName,version,valueType,options[id,displayName,code,style, translations]",paging:!0,totalPages:!1}})).setFilter("id:in:[".concat(t.toString(),"]")),e.next=4,uW(n,1,1e4);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mW(e){return hW.apply(this,arguments)}function hW(){return(hW=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new _B(function(e){e.modelName="optionGroups",e.modelGetterType=bB.LIST_WITH_PAGER,e.queryParams={fields:"id,displayName,options[id],optionSet[id]",paging:!0,totalPages:!1}})).setFilter("optionSet.id:in:[".concat(t.toString(),"]")),e.next=4,uW(n,1,1e4);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gW(e,t,n){return bW.apply(this,arguments)}function bW(){return(bW=Object(i.a)(r.a.mark(function e(t,n,a){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],e.next=3,t.asyncForEach(function(){var e=Object(i.a)(r.a.mark(function e(t){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get(n,t.id);case 2:(i=e.sent)&&i.version===t.version||o.push(t.id);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",o);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var vW=function(e){return e.reduce(function(e,t){return n=e,t.reduce(function(e,t){return e[t.optionSet.id]=[].concat(Object(Xe.a)(e[t.optionSet.id]||[]),[t]),e},n);var n},{})},OW=function(e){return e.reduce(function(e,t){return[].concat(Object(Xe.a)(e),Object(Xe.a)(t))},[])},yW=function(e,t){return e.map(function(e){return{id:e.id,displayName:e.displayName,version:e.version,valueType:e.valueType,translations:e.translations,options:e.options&&Object(Xe.a)(e.options.values()).map(function(e){return{id:e.id,displayName:e.displayName,code:e.code,style:e.style,translations:e.translations}}),optionGroups:t[e.id]&&t[e.id].map(function(e){return{id:e.id,displayName:e.displayName,options:e.options&&Object(Xe.a)(e.options.values()).map(function(e){return e.id})}})}})};function EW(e,t,n){return _W.apply(this,arguments)}function _W(){return(_W=Object(i.a)(r.a.mark(function e(t,n,a){var i,o,s,c,l,u,d,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.reduce(function(e,t){return e.find(function(e){return e.id===t.id})||e.push(t),e},[]),e.next=3,gW(i,n,t);case 3:return o=e.sent,s=Object(Ze.a)(o,lW),e.next=7,Promise.all(s.map(function(e){return pW(e)}));case 7:return c=e.sent,e.next=10,Promise.all(s.map(function(e){return mW(e)}));case 10:return l=e.sent,u=OW(c),d=vW(l),p=yW(u,d),e.next=16,t.setAll(n,p);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jW(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"trackedEntityTypes",t=arguments.length>1?arguments[1]:void 0;return new dG(function(t){t.loader=mG,t.objectStore=e},t)}function IW(e){return e?e.reduce(function(e,t){var n=t.trackedEntityTypeAttributes&&t.trackedEntityTypeAttributes.reduce(function(e,t){return t.trackedEntityAttribute&&t.trackedEntityAttribute.optionSet&&e.push(t.trackedEntityAttribute.optionSet),e},[]);return n&&(e=[].concat(Object(Xe.a)(e),Object(Xe.a)(n))),e},[]):[]}function SW(e,t){return CW.apply(this,arguments)}function CW(){return(CW=Object(i.a)(r.a.mark(function e(t,n){var a,i,o,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iW.get();case 2:return a=e.sent,i=IW(a),o=jW(n,cW),e.next=7,o.load(t);case 7:return s=e.sent,c=[],s&&(c=s.reduce(function(e,t){if(t.trackedEntityTypeAttributes){var n=t.trackedEntityTypeAttributes.map(function(e){return e.trackedEntityAttributeId}).filter(function(e){return e});return[].concat(Object(Xe.a)(e),Object(Xe.a)(n))}return e},c)),e.abrupt("return",{trackedEntityAttributeIds:c,optionSetsMeta:i});case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var TW="accessHistory",RW={LOCAL_STORAGE:1,INDEXED_DB:5},NW={DESTROY_FAILED:"Could not delete user storage"};function kW(e,t){return AW.apply(this,arguments)}function AW(){return(AW=Object(i.a)(r.a.mark(function e(t,n){var a,i,o,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.name,e.next=3,t.get(ar.USER_CACHES,TW);case 3:return i=e.sent,o=i&&i.values,s=o?o.filter(function(e){return e!==a}):[],c=[a].concat(Object(Xe.a)(s)),e.next=9,t.set(ar.USER_CACHES,{id:TW,values:c});case 9:return e.abrupt("return",c);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wW(e,t){return PW.apply(this,arguments)}function PW(){return(PW=Object(i.a)(r.a.mark(function e(t,n){var a,o,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.adapterType,o=a===er?RW.LOCAL_STORAGE:RW.INDEXED_DB,!(t.length>o)){e.next=9;break}return s=t.slice(o),c=t.slice(0,o),e.next=7,s.asyncForEach(function(){var e=Object(i.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Tn(t,1,[a]),e.prev=1,e.next=4,n.destroy();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),R.a.warn(Object(Cn.a)(NW.DESTROY_FAILED)({cache:t,error:e.t0}));case 9:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}());case 7:return e.next=9,n.set(ar.USER_CACHES,{id:TW,values:c});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function DW(){return(DW=Object(i.a)(r.a.mark(function e(){var t,n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=br(),n=vr(),e.next=4,kW(t,n);case 4:return a=e.sent,e.next=7,wW(a,t);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var xW=function(){return DW.apply(this,arguments)},FW=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"constants";return new dG(function(t){t.converter=gG,t.d2ModelGetterType=bB.LIST,t.d2ModelName="constants",t.loader=mG,t.objectStore=e,t.queryParams={fields:"id,displayName,value"}})}(rr.CONSTANTS),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ouLevels";return new dG(function(t){t.converter=bG,t.d2ModelGetterType=bB.LIST,t.d2ModelName="organisationUnitLevels",t.loader=mG,t.objectStore=e,t.queryParams={fields:"id,displayName,level",filter:"level:gt:1"}})}(rr.ORGANISATION_UNIT_LEVELS),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"relationshipTypes";return new dG(function(t){t.converter=vG,t.d2ModelGetterType=bB.LIST,t.d2ModelName="relationshipTypes",t.loader=mG,t.objectStore=e,t.queryParams={fields:"id,displayName,fromConstraint[*],toConstraint[*],access[*]"}})}(rr.RELATIONSHIP_TYPES)];function LW(e){return UW.apply(this,arguments)}function UW(){return(UW=Object(i.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FW.asyncForEach(function(e){return e.load(t)});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function MW(e){var t=new Set(e);return Array.from(t)}function VW(){return BW.apply(this,arguments)}function BW(){return(BW=Object(i.a)(r.a.mark(function e(){var t,n,a,i,o,s,c,l,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=vr(),e.next=3,xW();case 3:return e.next=5,LW(n);case 5:return e.next=7,MG(n,(t={},Object(Wt.a)(t,uG.PROGRAMS,rr.PROGRAMS),Object(Wt.a)(t,uG.PROGRAM_RULES,rr.PROGRAM_RULES),Object(Wt.a)(t,uG.PROGRAM_RULES_VARIABLES,rr.PROGRAM_RULES_VARIABLES),Object(Wt.a)(t,uG.PROGRAM_INDICATORS,rr.PROGRAM_INDICATORS),Object(Wt.a)(t,uG.OPTION_SETS,rr.OPTION_SETS),t));case 7:return a=e.sent,i=a.optionSetsMeta,o=a.trackedEntityAttributeIds,s=a.categoryIds,e.next=13,SW(n,rr.TRACKED_ENTITY_TYPES);case 13:return c=e.sent,l=c.trackedEntityAttributeIds,u=c.optionSetsMeta,e.next=18,HG(n,rr.TRACKED_ENTITY_ATTRIBUTES,MW([].concat(Object(Xe.a)(o),Object(Xe.a)(l))));case 18:return e.next=20,nW(n,s,{categories:rr.CATEGORIES,categoryOptionsByCategory:rr.CATEGORY_OPTIONS_BY_CATEGORY,categoryOptions:rr.CATEGORY_OPTIONS});case 20:return e.next=22,EW(n,rr.OPTION_SETS,[].concat(Object(Xe.a)(i),Object(Xe.a)(u)));case 22:case"end":return e.stop()}},e)}))).apply(this,arguments)}function GW(){return WW.apply(this,arguments)}function WW(){return(WW=Object(i.a)(r.a.mark(function e(){var t,n,a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Fn(),n=t.system.systemInfo,a=[{id:"dateFormat",value:n.dateFormat.toUpperCase()}],i=br(),e.next=6,i.setAll(ar.SYSTEM_SETTINGS,a);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function HW(){var e,t=(e={},Object(Wt.a)(e,M.a.dev,R.a.levels.DEBUG),Object(Wt.a)(e,M.a.devDebug,R.a.levels.TRACE),Object(Wt.a)(e,M.a.test,R.a.levels.INFO),Object(Wt.a)(e,M.a.prod,R.a.levels.ERROR),e).production;t||0===t||(t=R.a.levels.ERROR),R.a.setLevel(t)}function zW(){var e=Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_DHIS2_BASE_URL:"..",REACT_APP_DHIS2_AUTHORIZATION:"",REACT_APP_TRACKER_CAPTURE_APP_PATH:"../dhis-web-tracker-capture",REACT_APP_CACHE_VERSION:"1",REACT_APP_VERSION:"33.1.0"}),t=e.REACT_APP_DHIS2_BASE_URL,n=e.REACT_APP_DHIS2_AUTHORIZATION,a=e.NODE_ENV,r=t||"";af.config.baseUrl="".concat(r,"/api"),a!==M.a.prod&&(af.config.headers={"X-Requested-With":"XMLHttpRequest",Authorization:n})}function YW(e){return"en"===e?(l.a.locale(e),Promise.resolve()):new Promise(function(t){n(7581)("./".concat(e)).then(function(){l.a.locale(e),R.a.info("got moment locale config for ".concat(e)),t()}).catch(function(){l.a.locale("en"),R.a.error("could not get moment locale config for ".concat(e)),t()})})}function KW(e,t,a,r){return new Promise(function(i,o){n(7582)("./".concat(e)).then(function(n){var o={dateFnsLocale:n,weekDays:t,weekDaysShort:a,calendarFormatHeaderLong:"dddd D MMM",calendarFormatHeaderShort:"D MMM",selectDatesText:s.a.t("Choose one or more dates..."),selectDateText:s.a.t("Choose a date..."),todayLabelShort:s.a.t("Today"),todayLabelLong:s.a.t("Today"),weekStartsOn:r};R.a.info("got date-fns locale for ".concat(e)),Qc.set(o),i()}).catch(function(){R.a.error("could not get date-fns locale config for ".concat(e,", fallback to en")),Promise.resolve().then(n.t.bind(null,282,7)).then(function(e){var n={dateFnsLocale:e,weekDays:t,weekDaysShort:a,calendarFormatHeaderLong:"dddd D MMM",calendarFormatHeaderShort:"D MMM",selectDatesText:s.a.t("Choose one or more dates..."),selectDateText:s.a.t("Choose a date..."),todayLabelShort:s.a.t("Today"),todayLabelLong:s.a.t("Today"),weekStartsOn:r};Qc.set(n),i()}).catch(function(){R.a.error("could not get the fallback date-fns locale for ".concat(e)),o()})})})}function qW(e){s.a.changeLanguage(e),document.body.setAttribute("dir",function(e){var t=["ar","fa","ur"],n=t.map(function(e){return"".concat(e,"-")});return t.includes(e)||n.filter(function(t){return e.startsWith(t)}).length>0}(e)?"rtl":"ltr")}function XW(e){return ZW.apply(this,arguments)}function ZW(){return(ZW=Object(i.a)(r.a.mark(function e(t){var n,a,i,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,YW(n);case 3:return a=l.a.weekdays(),i=l.a.weekdaysShort(),o=l.a.localeData()._week.dow,e.next=8,KW(n,a,i,o);case 8:qW(n);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function JW(e){return QW.apply(this,arguments)}function QW(){return(QW=Object(i.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VW();case 2:return e.next=4,si(t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $W(){return eH.apply(this,arguments)}function eH(){return(eH=Object(i.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GW();case 2:return t=e.sent,e.next=5,di(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tH(e){e.i18n.addStrings(["app_search_placeholder=search"])}function nH(){return aH.apply(this,arguments)}function aH(){return(aH=Object(i.a)(r.a.mark(function e(){var t,n,a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return HW(),zW(),e.next=4,Object(af.init)();case 4:return t=e.sent,e.next=7,Object(af.getUserSettings)();case 7:return n=e.sent,An(t),tH(t),e.prev=10,e.next=13,hr();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(10),new V(s.a.t("Possible reason: The browser or mode (e.g. privacy mode) is not supported. See log for details."),e.t0);case 18:return a=n.keyUiLocale,i=n.keyDbLocale,e.next=22,XW(a);case 22:return e.next=24,$W();case 24:return e.next=26,JW(i);case 26:case"end":return e.stop()}},e,null,[[10,15]])}))).apply(this,arguments)}var rH="CleanUpEventListInLoading",iH=function(){return Se(rH)()};function oH(e){var t,n=[(t=e.getState(),t.workingListsUI.main&&t.workingListsUI.main.isLoading?iH():null)].filter(function(e){return e});n.length>0&&e.dispatch(Object(He.batchActions)(n))}var sH=document.createElement("noscript");sH.setAttribute("id","jss-insertion-point"),document.head.appendChild(sH);var cH=Object(k.createGenerateClassName)(),lH=Object(U.create)(Object(k.jssPreset)());function uH(e){return I.a.createElement(L.a,{jss:lH,generateClassName:cH},e.children)}function dH(e,t,n){t.dispatch(aV()),function(e){window.addEventListener("beforeunload",function(){var t=Object(i.a)(r.a.mark(function t(n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(oH(e),!(e.getState().offline.outbox.length>0)){t.next=5;break}return a="Unsaved events!",n.returnValue=a,t.abrupt("return",a);case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}(t),Object(S.render)(I.a.createElement(uH,null,I.a.createElement(mL,{store:t,history:n})),e)}function pH(e){e instanceof Error?R.a.error(e.toString()):e&&R.a.error(JSON.stringify(e))}function fH(){return(fH=Object(i.a)(r.a.mark(function e(t){var n,a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(S.render)(I.a.createElement(uH,null,I.a.createElement(x,null)),t),e.prev=1,e.next=4,nH();case 4:n=Object(N.a)(),a=lG(n,function(){return dH(t,a,n)}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),i="The application could not be loaded.",e.t0&&e.t0 instanceof V?(pH(e.t0.innerError),i+=" ".concat(e.t0.toString())):(pH(e.t0),"production"!==M.a.prod?i+=" Please verify that the server is running.":i+=" Please see log for details."),Object(S.render)(I.a.createElement("div",null,i),t);case 13:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}lH.options.insertionPoint=sH;var mH=document.getElementById("app");mH?function(e){fH.apply(this,arguments)}(mH):R.a.error("html element with id ".concat("app"," is missing in index file"))},77:function(e,t,n){e.exports={table:"table_table__x6PK0",tableRow:"table_tableRow__ZPxu7",tableRowBody:"table_tableRowBody__2lMyg",tableRowHeader:"table_tableRowHeader__1kF-y",tableRowFooter:"table_tableRowFooter__r5tTo",tableCell:"table_tableCell__3ba4L",tableCellBody:"table_tableCellBody__1PUit",tableCellHeader:"table_tableCellHeader__1od-6",tableCellFooter:"table_tableCellFooter__dvM7q",pagination:"table_pagination__3HVOc",paginationRowsPerPageElementContainer:"table_paginationRowsPerPageElementContainer__2rJop",paginationRowsPerPageElement:"table_paginationRowsPerPageElement__2U_EM",paginationDisplayRowsContainer:"table_paginationDisplayRowsContainer__1IPYP",sortLabelContainer:"table_sortLabelContainer__2DEo0",sortLabelChildren:"table_sortLabelChildren__14ADQ",sortLabelChildrenEnabled:"table_sortLabelChildrenEnabled__64-XS",sortLabelChildrenFirst:"table_sortLabelChildrenFirst__ymisK",sortLabelChildrenLast:"table_sortLabelChildrenLast__1MU6N",sortLabelRight:"table_sortLabelRight__2cJvj",sortLabelIcon:"table_sortLabelIcon__LUws7"}},773:function(e,t){},92:function(e,t,n){e.exports={coordinateField:"coordinateField_coordinateField__3zVrN",coordinateFieldsHorizontal:"coordinateField_coordinateFieldsHorizontal__3w54M",coordinateFieldsVertical:"coordinateField_coordinateFieldsVertical__2q6gO",mapIcon:"coordinateField_mapIcon__yn4bc",mapIconContainer:"coordinateField_mapIconContainer__3YCPr",mapIconContainerWithMargin:"coordinateField_mapIconContainerWithMargin__HREtB",clearIcon:"coordinateField_clearIcon__3XtXz",clearIconWithMargin:"coordinateField_clearIconWithMargin__1IofR",inputContainer:"coordinateField_inputContainer__2Mv_n",latitudeTextInput:"coordinateField_latitudeTextInput__Pr3tX",longitudeTextInput:"coordinateField_longitudeTextInput__29y4f",dialogActionOuterContainer:"coordinateField_dialogActionOuterContainer__3RF8M",dialogActionInnerContainer:"coordinateField_dialogActionInnerContainer__2zHkx",mapContainer:"coordinateField_mapContainer__3iOhH",leafletContainer:"coordinateField_leafletContainer__2cYXr",dialogContent:"coordinateField_dialogContent__1u80P",buttonsContainerVertical:"coordinateField_buttonsContainerVertical__2KbyO"}}},[[6546,250,251]]]);